var e,t=Object.defineProperty,a=(e,a,r)=>((e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r)(e,"symbol"!=typeof a?a+"":a,r);import{j as r,V as i,R as n,A as s,C as o,T as l,D as c,P as d,c as u,a as h,b as p,d as m,e as f,f as g,g as x,u as v,h as y,i as b,k as _,l as j,m as w,n as N,o as S,S as C,p as k,I as M,q as T,r as D,s as I,t as A,v as P,L,w as z,x as E,y as R,z as O,B as F,E as B,O as q,F as V,G as H,H as W,J as G,K as U,M as $,N as Y,Q as K,U as X,W as Z,X as Q,Y as J,Z as ee,_ as te,$ as ae,a0 as re,a1 as ie,a2 as ne,a3 as se,a4 as oe,a5 as le,a6 as ce,a7 as de,a8 as ue,a9 as he,aa as pe,ab as me,ac as fe,ad as ge,ae as xe,af as ve,ag as ye,ah as be,ai as _e,aj as je,ak as we,al as Ne,am as Se}from"./ui-DuuTtgRC.js";import{a as Ce,r as ke,R as Me,b as Te,u as De,f as Ie,N as Ae,L as Pe,h as Le,B as ze,i as Ee,j as Re}from"./vendor-CefVxy2f.js";import{t as Oe,c as Fe,a as Be,X as qe,C as Ve,b as He,T as We,Z as Ge,A as Ue,B as $e,d as Ye,e as Ke,U as Xe,f as Ze,M as Qe,G as Je,g as et,h as tt,i as at,j as rt,k as it,l as nt,m as st,E as ot,L as lt,F as ct,n as dt,o as ut,p as ht,S as pt,P as mt,H as ft,q as gt,r as xt,s as vt,D as yt,u as bt,v as _t,w as jt,x as wt,y as Nt,z as St,I as Ct,J as kt,K as Mt,N as Tt,O as Dt,Q as It,R as At,V as Pt,W as Lt,Y as zt,_ as Et,$ as Rt,a0 as Ot,a1 as Ft,a2 as Bt,a3 as qt,a4 as Vt,a5 as Ht,a6 as Wt,a7 as Gt,a8 as Ut,a9 as $t,aa as Yt,ab as Kt,ac as Xt,ad as Zt,ae as Qt,af as Jt,ag as ea,ah as ta,ai as aa,aj as ra,ak as ia,al as na,am as sa,an as oa,ao as la,ap as ca,aq as da,ar as ua,as as ha,at as pa,au as ma,av as fa,aw as ga,ax as xa,ay as va,az as ya,aA as ba,aB as _a,aC as ja,aD as wa,aE as Na,aF as Sa,aG as Ca,aH as ka,aI as Ma,aJ as Ta,aK as Da,aL as Ia,aM as Aa,aN as Pa,aO as La,aP as za,aQ as Ea,aR as Ra,aS as Oa,aT as Fa}from"./utils-C3bnxO6G.js";import{c as Ba,u as qa,a as Va,b as Ha,Q as Wa,d as Ga}from"./data-BsruGBYb.js";import{R as Ua,P as $a,a as Ya,C as Ka,T as Xa,B as Za,b as Qa,X as Ja,Y as er,c as tr,d as ar,L as rr,e as ir,f as nr,A as sr,g as or}from"./charts-BlWDR9XG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var lr=Ce;e=lr.createRoot,lr.hydrateRoot;let cr=0;const dr=new Map,ur=e=>{if(dr.has(e))return;const t=setTimeout(()=>{dr.delete(e),fr({type:"REMOVE_TOAST",toastId:e})},1e6);dr.set(e,t)},hr=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?ur(a):e.toasts.forEach(e=>{ur(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},pr=[];let mr={toasts:[]};function fr(e){mr=hr(mr,e),pr.forEach(e=>{e(mr)})}function gr({...e}){const t=(cr=(cr+1)%Number.MAX_SAFE_INTEGER,cr.toString()),a=()=>fr({type:"DISMISS_TOAST",toastId:t});return fr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>fr({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function xr(){const[e,t]=ke.useState(mr);return ke.useEffect(()=>(pr.push(t),()=>{const e=pr.indexOf(t);e>-1&&pr.splice(e,1)}),[e]),{...e,toast:gr,dismiss:e=>fr({type:"DISMISS_TOAST",toastId:e})}}function vr(...e){return Oe(Fe(e))}const yr=d,br=ke.forwardRef(({className:e,...t},a)=>r.jsx(i,{ref:a,className:vr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));br.displayName=i.displayName;const _r=Be("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jr=ke.forwardRef(({className:e,variant:t,...a},i)=>r.jsx(n,{ref:i,className:vr(_r({variant:t}),e),...a}));jr.displayName=n.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(s,{ref:a,className:vr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t})).displayName=s.displayName;const wr=ke.forwardRef(({className:e,...t},a)=>r.jsx(o,{ref:a,className:vr("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(qe,{className:"h-4 w-4"})}));wr.displayName=o.displayName;const Nr=ke.forwardRef(({className:e,...t},a)=>r.jsx(l,{ref:a,className:vr("text-sm font-semibold",e),...t}));Nr.displayName=l.displayName;const Sr=ke.forwardRef(({className:e,...t},a)=>r.jsx(c,{ref:a,className:vr("text-sm opacity-90",e),...t}));function Cr(){const{toasts:e}=xr();return r.jsxs(yr,{children:[e.map(function({id:e,title:t,description:a,action:i,...n}){return r.jsxs(jr,{...n,children:[r.jsxs("div",{className:"grid gap-1",children:[t&&r.jsx(Nr,{children:t}),a&&r.jsx(Sr,{children:a})]}),i,r.jsx(wr,{})]},e)}),r.jsx(br,{})]})}Sr.displayName=c.displayName;var kr=["light","dark"],Mr=ke.createContext(void 0),Tr={setTheme:e=>{},themes:[]};ke.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:r,enableColorScheme:i,defaultTheme:n,value:s,attrs:o,nonce:l})=>{let c="system"===n,d="class"===a?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${a}',s='setAttribute';`,u=i?kr.includes(n)&&n?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${n}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(e,t=!1,r=!0)=>{let n=s?s[e]:e,o=t?e+"|| ''":`'${n}'`,l="";return i&&r&&!t&&kr.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===a?l+=t||n?`c.add(${o})`:"null":n&&(l+=`d[s](n,${o})`),l},p=e?`!function(){${d}${h(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}${c?"":"else{"+h(n,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}else{${h(n,!1,!1)};}${u}}catch(t){}}();`;return ke.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var Dr=Array(12).fill(0),Ir=({visible:e,className:t})=>Me.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Me.createElement("div",{className:"sonner-spinner"},Dr.map((e,t)=>Me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Ar=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Pr=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Lr=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zr=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Er=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Rr=1,Or=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...r}=e,i="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Rr++,n=this.toasts.find(e=>e.id===i),s=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),n?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:a}),{...t,...e,id:i,dismissible:s,title:a}):t):this.addToast({title:a,...r,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;void 0!==t.loading&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,i=e instanceof Promise?e:e(),n=void 0!==a,s=i.then(async e=>{if(r=["resolve",e],Me.isValidElement(e))n=!1,this.create({id:a,type:"default",message:e});else if(Fr(e)&&!e.ok){n=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:a,type:"error",message:r,description:i})}else if(void 0!==t.success){n=!1;let r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"success",message:r,description:i})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){n=!1;let r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"error",message:r,description:i})}}).finally(()=>{var e;n&&(this.dismiss(a),a=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>s.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof a&&"number"!=typeof a?{unwrap:o}:Object.assign(a,{unwrap:o})},this.custom=(e,t)=>{let a=(null==t?void 0:t.id)||Rr++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fr=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Br=(e,t)=>{let a=(null==t?void 0:t.id)||Rr++;return Or.addToast({title:e,...t,id:a}),a},qr=Object.assign(Br,{success:Or.success,info:Or.info,warning:Or.warning,error:Or.error,custom:Or.custom,message:Or.message,promise:Or.promise,dismiss:Or.dismiss,loading:Or.loading},{getHistory:()=>Or.toasts,getToasts:()=>Or.getActiveToasts()});function Vr(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var Hr=3,Wr=14;function Gr(...e){return e.filter(Boolean).join(" ")}var Ur=e=>{var t,a,r,i,n,s,o,l,c,d,u;let{invert:h,toast:p,unstyled:m,interacting:f,setHeights:g,visibleToasts:x,heights:v,index:y,toasts:b,expanded:_,removeToast:j,defaultRichColors:w,closeButton:N,style:S,cancelButtonStyle:C,actionButtonStyle:k,className:M="",descriptionClassName:T="",duration:D,position:I,gap:A,loadingIcon:P,expandByDefault:L,classNames:z,icons:E,closeButtonAriaLabel:R="Close toast",pauseWhenPageIsHidden:O}=e,[F,B]=Me.useState(null),[q,V]=Me.useState(null),[H,W]=Me.useState(!1),[G,U]=Me.useState(!1),[$,Y]=Me.useState(!1),[K,X]=Me.useState(!1),[Z,Q]=Me.useState(!1),[J,ee]=Me.useState(0),[te,ae]=Me.useState(0),re=Me.useRef(p.duration||D||4e3),ie=Me.useRef(null),ne=Me.useRef(null),se=0===y,oe=y+1<=x,le=p.type,ce=!1!==p.dismissible,de=p.className||"",ue=p.descriptionClassName||"",he=Me.useMemo(()=>v.findIndex(e=>e.toastId===p.id)||0,[v,p.id]),pe=Me.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:N},[p.closeButton,N]),me=Me.useMemo(()=>p.duration||D||4e3,[p.duration,D]),fe=Me.useRef(0),ge=Me.useRef(0),xe=Me.useRef(0),ve=Me.useRef(null),[ye,be]=I.split("-"),_e=Me.useMemo(()=>v.reduce((e,t,a)=>a>=he?e:e+t.height,0),[v,he]),je=(()=>{let[e,t]=Me.useState(document.hidden);return Me.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),we=p.invert||h,Ne="loading"===le;ge.current=Me.useMemo(()=>he*A+_e,[he,_e]),Me.useEffect(()=>{re.current=me},[me]),Me.useEffect(()=>{W(!0)},[]),Me.useEffect(()=>{let e=ne.current;if(e){let t=e.getBoundingClientRect().height;return ae(t),g(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==p.id))}},[g,p.id]),Me.useLayoutEffect(()=>{if(!H)return;let e=ne.current,t=e.style.height;e.style.height="auto";let a=e.getBoundingClientRect().height;e.style.height=t,ae(a),g(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:a}:e):[{toastId:p.id,height:a,position:p.position},...e])},[H,p.title,p.description,g,p.id]);let Se=Me.useCallback(()=>{U(!0),ee(ge.current),g(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{j(p)},200)},[p,j,g,ge]);return Me.useEffect(()=>{if(p.promise&&"loading"===le||p.duration===1/0||"loading"===p.type)return;let e;return _||f||O&&je?(()=>{if(xe.current<fe.current){let e=(new Date).getTime()-fe.current;re.current=re.current-e}xe.current=(new Date).getTime()})():re.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=p.onAutoClose)||e.call(p,p),Se()},re.current)),()=>clearTimeout(e)},[_,f,p,le,O,je,Se]),Me.useEffect(()=>{p.delete&&Se()},[Se,p.delete]),Me.createElement("li",{tabIndex:0,ref:ne,className:Gr(M,de,null==z?void 0:z.toast,null==(t=null==p?void 0:p.classNames)?void 0:t.toast,null==z?void 0:z.default,null==z?void 0:z[le],null==(a=null==p?void 0:p.classNames)?void 0:a[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=p.richColors)?r:w,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":H,"data-promise":!!p.promise,"data-swiped":Z,"data-removed":G,"data-visible":oe,"data-y-position":ye,"data-x-position":be,"data-index":y,"data-front":se,"data-swiping":$,"data-dismissible":ce,"data-type":le,"data-invert":we,"data-swipe-out":K,"data-swipe-direction":q,"data-expanded":!!(_||L&&H),style:{"--index":y,"--toasts-before":y,"--z-index":b.length-y,"--offset":`${G?J:ge.current}px`,"--initial-height":L?"auto":`${te}px`,...S,...p.style},onDragEnd:()=>{Y(!1),B(null),ve.current=null},onPointerDown:e=>{Ne||!ce||(ie.current=new Date,ee(ge.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Y(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a,r;if(K||!ce)return;ve.current=null;let i=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),s=(new Date).getTime()-(null==(a=ie.current)?void 0:a.getTime()),o="x"===F?i:n,l=Math.abs(o)/s;if(Math.abs(o)>=20||l>.11)return ee(ge.current),null==(r=p.onDismiss)||r.call(p,p),V("x"===F?i>0?"right":"left":n>0?"down":"up"),Se(),X(!0),void Q(!1);Y(!1),B(null)},onPointerMove:t=>{var a,r,i,n;if(!ve.current||!ce||(null==(a=window.getSelection())?void 0:a.toString().length)>0)return;let s=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,a]=e.split("-"),r=[];return t&&r.push(t),a&&r.push(a),r}(I);!F&&(Math.abs(o)>1||Math.abs(s)>1)&&B(Math.abs(o)>Math.abs(s)?"x":"y");let c={x:0,y:0};"y"===F?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&s<0||l.includes("bottom")&&s>0)&&(c.y=s):"x"===F&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(i=ne.current)||i.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(n=ne.current)||n.style.setProperty("--swipe-amount-y",`${c.y}px`)}},pe&&!p.jsx?Me.createElement("button",{"aria-label":R,"data-disabled":Ne,"data-close-button":!0,onClick:Ne||!ce?()=>{}:()=>{var e;Se(),null==(e=p.onDismiss)||e.call(p,p)},className:Gr(null==z?void 0:z.closeButton,null==(i=null==p?void 0:p.classNames)?void 0:i.closeButton)},null!=(n=null==E?void 0:E.close)?n:Er):null,p.jsx||ke.isValidElement(p.title)?p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title:Me.createElement(Me.Fragment,null,le||p.icon||p.promise?Me.createElement("div",{"data-icon":"",className:Gr(null==z?void 0:z.icon,null==(s=null==p?void 0:p.classNames)?void 0:s.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||(null!=E&&E.loading?Me.createElement("div",{className:Gr(null==z?void 0:z.loader,null==(Ce=null==p?void 0:p.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},E.loading):P?Me.createElement("div",{className:Gr(null==z?void 0:z.loader,null==(Te=null==p?void 0:p.classNames)?void 0:Te.loader,"sonner-loader"),"data-visible":"loading"===le},P):Me.createElement(Ir,{className:Gr(null==z?void 0:z.loader,null==(De=null==p?void 0:p.classNames)?void 0:De.loader),visible:"loading"===le})):null,"loading"!==p.type?p.icon||(null==E?void 0:E[le])||(e=>{switch(e){case"success":return Ar;case"info":return Lr;case"warning":return Pr;case"error":return zr;default:return null}})(le):null):null,Me.createElement("div",{"data-content":"",className:Gr(null==z?void 0:z.content,null==(o=null==p?void 0:p.classNames)?void 0:o.content)},Me.createElement("div",{"data-title":"",className:Gr(null==z?void 0:z.title,null==(l=null==p?void 0:p.classNames)?void 0:l.title)},"function"==typeof p.title?p.title():p.title),p.description?Me.createElement("div",{"data-description":"",className:Gr(T,ue,null==z?void 0:z.description,null==(c=null==p?void 0:p.classNames)?void 0:c.description)},"function"==typeof p.description?p.description():p.description):null),ke.isValidElement(p.cancel)?p.cancel:p.cancel&&Vr(p.cancel)?Me.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:e=>{var t,a;Vr(p.cancel)&&ce&&(null==(a=(t=p.cancel).onClick)||a.call(t,e),Se())},className:Gr(null==z?void 0:z.cancelButton,null==(d=null==p?void 0:p.classNames)?void 0:d.cancelButton)},p.cancel.label):null,ke.isValidElement(p.action)?p.action:p.action&&Vr(p.action)?Me.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||k,onClick:e=>{var t,a;Vr(p.action)&&(null==(a=(t=p.action).onClick)||a.call(t,e),!e.defaultPrevented&&Se())},className:Gr(null==z?void 0:z.actionButton,null==(u=null==p?void 0:p.classNames)?void 0:u.actionButton)},p.action.label):null));var Ce,Te,De};function $r(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Yr(e,t){let a={};return[e,t].forEach((e,t)=>{let r=1===t,i=r?"--mobile-offset":"--offset",n=r?"16px":"32px";function s(e){["top","right","bottom","left"].forEach(t=>{a[`${i}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?a[`${i}-${t}`]=n:a[`${i}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(n)}),a}var Kr=ke.forwardRef(function(e,t){let{invert:a,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:n,closeButton:s,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:p,visibleToasts:m=Hr,toastOptions:f,dir:g=$r(),gap:x=Wr,loadingIcon:v,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:_}=e,[j,w]=Me.useState([]),N=Me.useMemo(()=>Array.from(new Set([r].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,r]),[S,C]=Me.useState([]),[k,M]=Me.useState(!1),[T,D]=Me.useState(!1),[I,A]=Me.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=Me.useRef(null),L=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=Me.useRef(null),E=Me.useRef(!1),R=Me.useCallback(e=>{w(t=>{var a;return null!=(a=t.find(t=>t.id===e.id))&&a.delete||Or.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return Me.useEffect(()=>Or.subscribe(e=>{e.dismiss?w(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Te.flushSync(()=>{w(t=>{let a=t.findIndex(t=>t.id===e.id);return-1!==a?[...t.slice(0,a),{...t[a],...e},...t.slice(a+1)]:[e,...t]})})})}),[]),Me.useEffect(()=>{if("system"!==d)return void A(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{A(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{A(e?"dark":"light")}catch(t){}})}},[d]),Me.useEffect(()=>{j.length<=1&&M(!1)},[j]),Me.useEffect(()=>{let e=e=>{var t,a;i.every(t=>e[t]||e.code===t)&&(M(!0),null==(t=P.current)||t.focus()),"Escape"===e.code&&(document.activeElement===P.current||null!=(a=P.current)&&a.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),Me.useEffect(()=>{if(P.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,E.current=!1)}},[P.current]),Me.createElement("section",{ref:t,"aria-label":`${b} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((t,r)=>{var i;let[d,b]=t.split("-");return j.length?Me.createElement("ol",{key:t,dir:"auto"===g?$r():g,tabIndex:-1,ref:P,className:o,"data-sonner-toaster":!0,"data-theme":I,"data-y-position":d,"data-lifted":k&&j.length>1&&!n,"data-x-position":b,style:{"--front-toast-height":`${(null==(i=S[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${x}px`,...p,...Yr(l,c)},onBlur:e=>{E.current&&!e.currentTarget.contains(e.relatedTarget)&&(E.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||E.current||(E.current=!0,z.current=e.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{T||M(!1)},onDragEnd:()=>M(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D(!0)},onPointerUp:()=>D(!1)},j.filter(e=>!e.position&&0===r||e.position===t).map((r,i)=>{var o,l;return Me.createElement(Ur,{key:r.id,icons:y,index:i,toast:r,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:a,visibleToasts:m,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:s,interacting:T,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:R,toasts:j.filter(e=>e.position==r.position),heights:S.filter(e=>e.position==r.position),setHeights:C,expandByDefault:n,gap:x,loadingIcon:v,expanded:k,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const Xr=({...e})=>{const{theme:t="system"}=null!=(a=ke.useContext(Mr))?a:Tr;var a;return r.jsx(Kr,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var[Zr]=u("Tooltip",[p]),Qr=p(),Jr="TooltipProvider",ei=700,ti="tooltip.open",[ai,ri]=Zr(Jr),ii=e=>{const{__scopeTooltip:t,delayDuration:a=ei,skipDelayDuration:i=300,disableHoverableContent:n=!1,children:s}=e,o=ke.useRef(!0),l=ke.useRef(!1),c=ke.useRef(0);return ke.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),r.jsx(ai,{scope:t,isOpenDelayedRef:o,delayDuration:a,onOpen:ke.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:ke.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:ke.useCallback(e=>{l.current=e},[]),disableHoverableContent:n,children:s})};ii.displayName=Jr;var ni="Tooltip",[si,oi]=Zr(ni),li=e=>{const{__scopeTooltip:t,children:a,open:i,defaultOpen:n,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=ri(ni,e.__scopeTooltip),d=Qr(t),[u,h]=ke.useState(null),p=y(),m=ke.useRef(0),f=o??c.disableHoverableContent,g=l??c.delayDuration,x=ke.useRef(!1),[v,j]=b({prop:i,defaultProp:n??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(ti))):c.onClose(),null==s||s(e)},caller:ni}),w=ke.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),N=ke.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,j(!0)},[j]),S=ke.useCallback(()=>{window.clearTimeout(m.current),m.current=0,j(!1)},[j]),C=ke.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,j(!0),m.current=0},g)},[g,j]);return ke.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),r.jsx(_,{...d,children:r.jsx(si,{scope:t,contentId:p,open:v,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:ke.useCallback(()=>{c.isOpenDelayedRef.current?C():N()},[c.isOpenDelayedRef,C,N]),onTriggerLeave:ke.useCallback(()=>{f?S():(window.clearTimeout(m.current),m.current=0)},[S,f]),onOpen:N,onClose:S,disableHoverableContent:f,children:a})})};li.displayName=ni;var ci="TooltipTrigger",di=ke.forwardRef((e,t)=>{const{__scopeTooltip:a,...i}=e,n=oi(ci,a),s=ri(ci,a),o=Qr(a),l=ke.useRef(null),c=v(t,l,n.onTriggerChange),d=ke.useRef(!1),u=ke.useRef(!1),h=ke.useCallback(()=>d.current=!1,[]);return ke.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(j,{asChild:!0,...o,children:r.jsx(w.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...i,ref:c,onPointerMove:N(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||s.isPointerInTransitRef.current||(n.onTriggerEnter(),u.current=!0))}),onPointerLeave:N(e.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:N(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:N(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:N(e.onBlur,n.onClose),onClick:N(e.onClick,n.onClose)})})});di.displayName=ci;var[ui,hi]=Zr("TooltipPortal",{forceMount:void 0}),pi="TooltipContent",mi=ke.forwardRef((e,t)=>{const a=hi(pi,e.__scopeTooltip),{forceMount:i=a.forceMount,side:n="top",...s}=e,o=oi(pi,e.__scopeTooltip);return r.jsx(h,{present:i||o.open,children:o.disableHoverableContent?r.jsx(yi,{side:n,...s,ref:t}):r.jsx(fi,{side:n,...s,ref:t})})}),fi=ke.forwardRef((e,t)=>{const a=oi(pi,e.__scopeTooltip),i=ri(pi,e.__scopeTooltip),n=ke.useRef(null),s=v(t,n),[o,l]=ke.useState(null),{trigger:c,onClose:d}=a,u=n.current,{onPointerInTransitChange:h}=i,p=ke.useCallback(()=>{l(null),h(!1)},[h]),m=ke.useCallback((e,t)=>{const a=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t,a=5){const r=[];switch(t){case"top":r.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":r.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":r.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":r.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a})}return r}(r,function(e,t){const a=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(a,r,i,n)){case n:return"left";case i:return"right";case a:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,a.getBoundingClientRect())),n=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(a.y-r.y)>=(e.y-r.y)*(a.x-r.x)))break;t.pop()}t.push(a)}t.pop();const a=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;a.length>=2;){const e=a[a.length-1],r=a[a.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;a.pop()}a.push(t)}return a.pop(),1===t.length&&1===a.length&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}(t)}([...i,...function(e){const{top:t,right:a,bottom:r,left:i}=e;return[{x:i,y:t},{x:a,y:t},{x:a,y:r},{x:i,y:r}]}(t.getBoundingClientRect())]);l(n),h(!0)},[h]);return ke.useEffect(()=>()=>p(),[p]),ke.useEffect(()=>{if(c&&u){const e=e=>m(e,u),t=e=>m(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,m,p]),ke.useEffect(()=>{if(o){const e=e=>{const t=e.target,a={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),i=!function(e,t){const{x:a,y:r}=e;let i=!1;for(let n=0,s=t.length-1;n<t.length;s=n++){const e=t[n],o=t[s],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&a<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}(a,o);r?p():i&&(p(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,o,d,p]),r.jsx(yi,{...e,ref:s})}),[gi,xi]=Zr(ni,{isInside:!1}),vi=g("TooltipContent"),yi=ke.forwardRef((e,t)=>{const{__scopeTooltip:a,children:i,"aria-label":n,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=oi(pi,a),d=Qr(a),{onClose:u}=c;return ke.useEffect(()=>(document.addEventListener(ti,u),()=>document.removeEventListener(ti,u)),[u]),ke.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),r.jsx(m,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:r.jsxs(f,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(vi,{children:i}),r.jsx(gi,{scope:a,isInside:!0,children:r.jsx(x,{id:c.contentId,role:"tooltip",children:n||i})})]})})});mi.displayName=pi;var bi="TooltipArrow";ke.forwardRef((e,t)=>{const{__scopeTooltip:a,...i}=e,n=Qr(a);return xi(bi,a).isInside?null:r.jsx(S,{...n,...i,ref:t})}).displayName=bi;var _i=mi;const ji=ii,wi=li,Ni=di,Si=ke.forwardRef(({className:e,sideOffset:t=4,...a},i)=>r.jsx(_i,{ref:i,sideOffset:t,className:vr("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));Si.displayName=_i.displayName;const Ci={getItem:e=>{try{return localStorage.getItem(e)}catch(t){return null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(a){}},removeItem:e=>{try{localStorage.removeItem(e)}catch(t){}}},ki=Ba("https://zirowpnlxjenkxiqcuwz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inppcm93cG5seGplbmt4aXFjdXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgyMjQ5OTUsImV4cCI6MjA3MzgwMDk5NX0._wkw_at8eiLU7pjQMQtJbTdb3Hf9DIBAnQiHC5a_Sbc",{auth:{storage:Ci,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});ki.auth.onAuthStateChange((e,t)=>{"TOKEN_REFRESHED"!==e||t||Ci.removeItem("sb-zirowpnlxjenkxiqcuwz-auth-token")});const Mi=ke.createContext(void 0);function Ti({children:e}){const[t,a]=ke.useState(null),[i,n]=ke.useState(null),[s,o]=ke.useState(null),[l,c]=ke.useState(null),[d,u]=ke.useState(null),[h,p]=ke.useState(!0),[m,f]=ke.useState(!1),g=De(),x=Ie();ke.useEffect(()=>{(async()=>{try{const{data:{session:e},error:t}=await ki.auth.getSession();if(!e||t)return;const{data:{user:a},error:r}=await ki.auth.getUser();!r&&a||(await ki.auth.signOut(),localStorage.removeItem("sb-zirowpnlxjenkxiqcuwz-auth-token"))}catch(e){}})();const{data:{subscription:e}}=ki.auth.onAuthStateChange(async(e,t)=>{if("TOKEN_REFRESHED"===e&&!t)return await ki.auth.signOut(),localStorage.removeItem("sb-zirowpnlxjenkxiqcuwz-auth-token"),n(null),a(null),o(null),c(null),u(null),f(!1),void p(!1);n(t),a((null==t?void 0:t.user)??null),(null==t?void 0:t.user)?setTimeout(async()=>{const a="SIGNED_IN"===e;await v(t.user.id,a)},0):(o(null),c(null),u(null),f(!1)),p(!1)});return ki.auth.getSession().then(async({data:{session:e},error:t})=>{t&&(t.message.includes("Invalid Refresh Token")||t.message.includes("Refresh Token Not Found"))&&await ki.auth.signOut(),n(e),a((null==e?void 0:e.user)??null),(null==e?void 0:e.user)&&setTimeout(async()=>{await v(e.user.id,!1)},0),p(!1)}),()=>e.unsubscribe()},[g,x.pathname]);const v=async(e,t=!1)=>{var r,i,s,l,d;try{const{data:{user:e},error:h}=await ki.auth.getUser();if(h||!e)return await ki.auth.signOut(),n(null),a(null),o(null),c(null),u(null),void f(!1);const{data:p,error:m}=await ki.from("profiles").select("*").eq("user_id",e.id).single(),v={id:(null==p?void 0:p.id)||e.id,user_id:e.id,organization_id:(null==p?void 0:p.organization_id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",full_name:(null==p?void 0:p.full_name)||(null==(r=e.user_metadata)?void 0:r.full_name)||e.email,email:e.email,avatar_url:(null==p?void 0:p.avatar_url)||(null==(i=e.user_metadata)?void 0:i.avatar_url)||null,phone:(null==p?void 0:p.phone)||(null==(s=e.user_metadata)?void 0:s.phone)||null,position:(null==p?void 0:p.position)||(null==(l=e.user_metadata)?void 0:l.position)||null,department:(null==p?void 0:p.department)||(null==(d=e.user_metadata)?void 0:d.department)||null,is_active:!0,created_at:(null==p?void 0:p.created_at)||e.created_at,updated_at:(null==p?void 0:p.updated_at)||e.updated_at||e.created_at};let y=null;if(null==v?void 0:v.organization_id){const{data:e,error:t}=await ki.from("organizations").select("*").eq("id",v.organization_id).single();t||(y=e)}const b="admin";u(b),f(["owner","admin"].includes(b)),o(v),c(y),t&&(v&&v.full_name&&y?"/signin"!==x.pathname&&"/"!==x.pathname||g("/dashboard"):"/user-profile"!==x.pathname&&g("/user-profile"))}catch(h){}};return r.jsx(Mi.Provider,{value:{user:t,session:i,profile:s,organization:l,userRole:d,loading:h,signUp:async(e,t,a,r)=>{const i=`${window.location.origin}/user-profile`,{error:n}=await ki.auth.signUp({email:e,password:t,options:{emailRedirectTo:i,data:{full_name:a,company_name:r}}});return{error:n}},signIn:async(e,t)=>{const{error:a}=await ki.auth.signInWithPassword({email:e,password:t});return{error:a}},signOut:async()=>{await ki.auth.signOut(),localStorage.removeItem("sb-zirowpnlxjenkxiqcuwz-auth-token")},canManageOrganization:m},children:e})}function Di(){const e=ke.useContext(Mi);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const Ii=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:vr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ii.displayName="Card";const Ai=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:vr("flex flex-col space-y-1.5 p-6",e),...t}));Ai.displayName="CardHeader";const Pi=ke.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:vr("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pi.displayName="CardTitle";const Li=ke.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:vr("text-sm text-muted-foreground",e),...t}));Li.displayName="CardDescription";const zi=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:vr("p-6 pt-0",e),...t}));zi.displayName="CardContent";function Ei({title:e,value:t,subtitle:a,trend:i,icon:n,className:s}){return r.jsxs(Ii,{className:vr("tech-card p-6 relative group overflow-hidden hover:scale-105 hover:border-opacity-60 hover:shadow-lg transition-all duration-300 ease-in-out cursor-pointer",s),children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:e}),r.jsxs("div",{className:"flex items-baseline space-x-2",children:[r.jsx("h3",{className:"text-2xl font-bold gradient-text",children:t}),i&&r.jsxs("span",{className:vr("text-xs font-medium","up"===i&&"text-primary","down"===i&&"text-destructive","stable"===i&&"text-muted-foreground"),children:["up"===i&&"","down"===i&&"","stable"===i&&""]})]}),a&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a})]}),n&&r.jsx("div",{className:"text-primary/60 ml-4",children:n})]})]})}ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:vr("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";const Ri=Be("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",tech:"border-transparent bg-primary/20 text-primary border-primary/30",accent:"border-transparent bg-accent/20 text-accent border-accent/30",alert:"border-transparent bg-destructive/20 text-destructive border-destructive/30"}},defaultVariants:{variant:"default"}});function Oi({className:e,variant:t,...a}){return r.jsx("div",{className:vr(Ri({variant:t}),e),...a})}function Fi({name:e,status:t,description:a,metrics:i,icon:n}){return r.jsxs(Ii,{className:"tech-card p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:vr("p-2 rounded-lg","active"===t&&"bg-primary/20","monitoring"===t&&"bg-accent/20","alert"===t&&"bg-destructive/20"),children:n}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-foreground",children:e}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a})]})]}),r.jsxs(Oi,{variant:"active"===t?"default":"alert"===t?"destructive":"secondary",children:["active"===t&&"Ativo","monitoring"===t&&"Monitorando","alert"===t&&"Alerta"]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.map((e,t)=>r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:e.label}),r.jsx("p",{className:"text-lg font-semibold text-primary",children:e.value})]},t))})]})}const Bi=Be("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 glow-primary",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 glow-alert",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tech:"bg-gradient-primary text-primary-foreground hover:opacity-90 glow-primary font-semibold",alert:"bg-destructive text-destructive-foreground hover:bg-destructive/90 glow-alert font-semibold",action:"bg-accent text-accent-foreground hover:bg-accent/90 glow-accent font-semibold"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-14 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),qi=ke.forwardRef(({className:e,variant:t,size:a,asChild:i=!1,...n},s)=>{const o=i?C:"button";return r.jsx(o,{className:vr(Bi({variant:t,size:a,className:e})),ref:s,...n})});function Vi({alerts:e}){const t=e=>{switch(e){case"critical":return r.jsx(We,{className:"h-4 w-4 text-destructive"});case"warning":return r.jsx(He,{className:"h-4 w-4 text-amber-500"});case"info":return r.jsx(Ve,{className:"h-4 w-4 text-primary"})}},a=e=>{switch(e){case"critical":return r.jsx(Oi,{variant:"destructive",children:"Crtico"});case"warning":return r.jsx(Oi,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"Ateno"});case"info":return r.jsx(Oi,{variant:"default",children:"Info"})}};return r.jsxs(Ii,{className:"tech-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Alertas em Tempo Real"}),r.jsx(qi,{variant:"action",size:"sm",children:"Ver Todos"})]}),r.jsx("div",{className:"space-y-4",children:e.map(e=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-secondary/30 border border-border/50",children:[t(e.type),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:e.title}),a(e.type)]}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e.description}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},e.id))})]})}qi.displayName="Button";const Hi=()=>{const{organization:e}=Di();return qa({queryKey:["animal-count",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).order("data",{ascending:!1}).limit(1);if(r)throw r;if(!a||0===a.length)return{totalAnimais:0,dataAtualizacao:(new Date).toISOString().split("T")[0],variacaoOntem:0,percentualVariacao:0};const i=a[0].data,{data:n,error:s}=await ki.from("fato_historico_consumo").select("qtd_animais").eq("organization_id",t).eq("data",i);if(s)throw s;const o=(null==n?void 0:n.reduce((e,t)=>e+(t.qtd_animais||0),0))||0,l=new Date(i);l.setDate(l.getDate()-1);const c=l.toISOString().split("T")[0],{data:d,error:u}=await ki.from("fato_historico_consumo").select("qtd_animais").eq("organization_id",t).eq("data",c);if(u)return{totalAnimais:o,dataAtualizacao:i,variacaoOntem:0,percentualVariacao:0};const h=(null==d?void 0:d.reduce((e,t)=>e+(t.qtd_animais||0),0))||0,p=o-h;return{totalAnimais:o,dataAtualizacao:i,variacaoOntem:p,percentualVariacao:parseFloat((h>0?p/h*100:0).toFixed(1))}},enabled:!0,refetchInterval:3e5})};function Wi(){const e=De(),{user:t,loading:a}=Di(),{ref:i,src:n,isLoaded:s}=function(e,t={}){const[a,r]=ke.useState(t.placeholder||null),[i,n]=ke.useState(!1),[s,o]=ke.useState(!1),l=ke.useRef(null);return ke.useEffect(()=>{const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(o(!0),e.disconnect())},{rootMargin:t.rootMargin||"50px",threshold:t.threshold||.1});return l.current&&e.observe(l.current),()=>e.disconnect()},[t.rootMargin,t.threshold]),ke.useEffect(()=>{if(s&&!i){const t=new Image;t.onload=()=>{r(e),n(!0)},t.onerror=()=>{n(!0)},t.src=e}},[s,i,e]),{ref:l,src:a,isLoaded:i,isInView:s}}("/assets/img/hero-dashboard-CF0CQDmY.jpg"),{data:o,isLoading:l}=Hi();return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsxs("section",{ref:i,className:"relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-500 "+(s?"opacity-30":"opacity-0"),style:{backgroundImage:n?`url(${n})`:"none",backgroundColor:n?"transparent":"#f3f4f6"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background via-background/90 to-background/70"}),r.jsx("div",{className:"relative max-w-7xl mx-auto px-4 py-20 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl",children:[r.jsxs(Oi,{className:"mb-6 bg-primary/20 text-primary border-primary/30",children:[r.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Powered by AI"]}),r.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6",children:[r.jsx("span",{className:"gradient-text",children:"ConectaBoi"}),r.jsx("br",{}),r.jsx("span",{className:"text-foreground",children:"Insights"})]}),r.jsx("p",{className:"text-xl text-muted-foreground mb-4 max-w-2xl",children:"No confinamento, cada detalhe importa."}),r.jsx("p",{className:"text-lg text-foreground mb-8 max-w-2xl font-medium",children:"O ConectaBoi Insights transforma dados em decises inteligentes."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs(qi,{variant:"tech",size:"xl",children:[r.jsx(Ue,{className:"h-5 w-5"}),"Dashboard Completo"]}),r.jsxs(qi,{variant:"action",size:"xl",children:[r.jsx($e,{className:"h-5 w-5"}),"Agentes de IA"]})]})]})})]}),r.jsxs("section",{className:"max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Mtricas em Tempo Real"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(Ei,{title:"Quantidade de Cabeas",value:l?"...":(null==o?void 0:o.totalAnimais.toLocaleString("pt-BR"))||"0",subtitle:l?"Carregando...":(null==o?void 0:o.variacaoOntem)?`${o.variacaoOntem>0?"":""} ${o.variacaoOntem>0?"+":""}${o.percentualVariacao}% vs ontem`:" Status estvel",trend:l?"stable":(null==o?void 0:o.variacaoOntem)?o.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ye,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia de Carregamento",value:"94.8%",subtitle:" +1.5% vs semana",trend:"up",icon:r.jsx(Ke,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia de Distribuio",value:"92.3%",subtitle:" Status estvel",trend:"stable",icon:r.jsx(Xe,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Quantidade Fabricada",value:"1.247 ton",subtitle:" -8min vs ontem",trend:"down",icon:r.jsx(He,{className:"h-6 w-6"})})]})]}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Agentes de IA Especializados"}),r.jsxs(Oi,{className:"bg-primary/20 text-primary border-primary/30",children:[r.jsx($e,{className:"h-3 w-3 mr-1"}),"4 Agentes Ativos"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(Fi,{name:"Nutrio Inteligente",status:"active",description:"Monitora consumo e otimiza frmulas em tempo real",icon:r.jsx(Ze,{className:"h-5 w-5 text-primary"}),metrics:[{label:"Lotes Monitorados",value:"24"},{label:"Ajustes Aplicados",value:"8"}]}),r.jsx(Fi,{name:"Logstica Otimizada",status:"monitoring",description:"Calcula rotas e tempos ideais de distribuio",icon:r.jsx(Qe,{className:"h-5 w-5 text-accent"}),metrics:[{label:"Rotas Ativas",value:"12"},{label:"Economia Tempo",value:"18%"}]}),r.jsx(Fi,{name:"Leitura de Cocho",status:"active",description:"Analisa sobras e padres de consumo",icon:r.jsx(Je,{className:"h-5 w-5 text-primary"}),metrics:[{label:"Pontos Leitura",value:"48"},{label:"Preciso Mdia",value:"97.3%"}]}),r.jsx(Fi,{name:"Deteco de Desvios",status:"alert",description:"Identifica anomalias antes que virem perdas",icon:r.jsx(et,{className:"h-5 w-5 text-destructive"}),metrics:[{label:"Alertas Ativos",value:"3"},{label:"Perdas Evitadas",value:"R$ 18k"}]})]})]}),r.jsx("div",{className:"mb-12",children:r.jsx(Vi,{alerts:[{id:"1",type:"critical",title:"Lote 15 - Consumo abaixo do esperado",description:"Reduo de 15% no consumo nas ltimas 4 horas",time:"h 12 minutos"},{id:"2",type:"warning",title:"Desvio na rota de distribuio",description:"Caminho 03 com atraso de 25 minutos",time:"h 45 minutos"},{id:"3",type:"info",title:"Ajuste nutricional aplicado",description:"IA otimizou frmula do Lote 08",time:"h 1 hora"}]})}),r.jsxs("div",{className:"tech-card p-8 text-center",children:[r.jsx("h2",{className:"text-3xl font-bold gradient-text mb-4",children:"Transforme Dados em Decises Inteligentes"}),r.jsxs("p",{className:"text-lg text-muted-foreground mb-8 max-w-3xl mx-auto",children:["Mais que um sistema,  como ter uma ",r.jsx("strong",{className:"text-foreground",children:"sala de controle com agentes de IA especializados"})," trabalhando lado a lado com voc, 24 horas por dia."]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx($e,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"IA Especializada"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Mltiplos agentes focados em nutrio, logstica e produo"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-accent/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ue,{className:"h-8 w-8 text-accent"})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Tempo Real"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitoramento contnuo com alertas e feedbacks automticos"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(et,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"ROI Garantido"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduo de custos e otimizao de tempo por arroba"})]})]}),r.jsxs(qi,{variant:"tech",size:"xl",onClick:()=>{e(t?"/dashboard":"/signup")},children:[r.jsx(Ge,{className:"h-5 w-5"}),t?"Ir para Dashboard":"Comear Agora"]})]})]})]})}function Gi({date:e,organizationId:t,enabled:a=!0}={}){const[r,i]=ke.useState([]),[n,s]=ke.useState(!0),[o,l]=ke.useState(null),{organization:c}=Di();return ke.useEffect(()=>{if(!a)return void s(!1);(async()=>{s(!0),l(null);const a=t||(null==c?void 0:c.id);if(!a)return i([]),void s(!1);if(!e)return i([]),void s(!1);try{let t=null;if(e){const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");t=`${a}-${r}-${i}`}const{data:r,error:n}=await ki.from("fato_carregamento").select("dieta, previsto_kg, realizado_kg, desvio_kg, data, ingrediente").eq("organization_id",a).eq("data",t).not("dieta","is",null).not("previsto_kg","is",null).not("realizado_kg","is",null);if(n)throw n;if(r&&r.length>0){const e=r.reduce((e,r)=>(e[r.dieta]||(e[r.dieta]={organization_id:a,data:t,dieta:r.dieta,previsto_kg:0,realizado_kg:0,desvio_kg:0,desvio_percentual:0,total_ingredientes:0,ingredientes:new Set}),e[r.dieta].previsto_kg+=Number(r.previsto_kg)||0,e[r.dieta].realizado_kg+=Number(r.realizado_kg)||0,e[r.dieta].desvio_kg+=Number(r.desvio_kg)||0,e[r.dieta].ingredientes.add(r.ingrediente),e),{}),n=Object.values(e).map(e=>{const t=e.previsto_kg>0?e.desvio_kg/e.previsto_kg*100:0;return{organization_id:e.organization_id,data:e.data,dieta:e.dieta,previsto_kg:Math.round(e.previsto_kg),realizado_kg:Math.round(e.realizado_kg),desvio_kg:Math.round(e.desvio_kg),desvio_percentual:Math.round(100*t)/100,total_ingredientes:e.ingredientes.size}}).sort((e,t)=>e.dieta.localeCompare(t.dieta));i(n)}else i([])}catch(r){l(r)}finally{s(!1)}})()},[e,t,null==c?void 0:c.id,a]),{data:r,loading:n,error:o}}async function Ui(e){try{let t=ki.from("fato_carregamento").select("data").order("data",{ascending:!1}).limit(1);e&&(t=t.eq("organization_id",e));const{data:a,error:r}=await t;if(r||!a||0===a.length)return null;const[i,n,s]=a[0].data.split("-").map(Number);return new Date(i,n-1,s,12,0,0)}catch(t){return null}}function $i({className:e,...t}){return r.jsx("div",{className:vr("animate-pulse rounded-md bg-muted",e),...t})}const Yi=Be("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ki=ke.forwardRef(({className:e,variant:t,...a},i)=>r.jsx("div",{ref:i,role:"alert",className:vr(Yi({variant:t}),e),...a}));Ki.displayName="Alert";ke.forwardRef(({className:e,...t},a)=>r.jsx("h5",{ref:a,className:vr("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const Xi=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:vr("text-sm [&_p]:leading-relaxed",e),...t}));Xi.displayName="AlertDescription";const Zi=({active:e,payload:t})=>{if(e&&t&&t.length){const e=t[0],a=(e.value/e.payload.total*100).toFixed(1);return r.jsxs("div",{className:"bg-white p-4 border-2 border-gray-200 rounded-lg shadow-xl min-w-[200px]",children:[r.jsx("p",{className:"font-bold mb-3 text-gray-900 text-base border-b pb-2",children:e.payload.dieta}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantidade:"}),r.jsxs("span",{className:"font-bold text-blue-600 text-base",children:[e.value.toLocaleString("pt-BR")," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Carregamentos:"}),r.jsx("span",{className:"font-bold text-green-600",children:e.payload.numCarregamentos})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Participao:"}),r.jsxs("span",{className:"font-bold text-purple-600 text-lg",children:[a,"%"]})]})]})]})}return null},Qi=()=>{const[e,t]=ke.useState(null);ke.useEffect(()=>{(async()=>{const e=await Ui("b7a05c98-9fc5-4aef-b92f-bfa0586bf495");t(e)})()},[]);const{data:a,loading:i,error:n}=Gi({date:e,organizationId:"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",enabled:!!e}),[s,o]=ke.useState({});if(ke.useEffect(()=>{if(!e||!a||0===a.length)return;(async()=>{const t=e.toISOString().split("T")[0],{data:a,error:r}=await ki.from("fato_carregamento").select("dieta, id_carregamento").eq("organization_id","b7a05c98-9fc5-4aef-b92f-bfa0586bf495").eq("data",t).not("dieta","is",null);if(r)return;const i={};null==a||a.forEach(e=>{i[e.dieta]||(i[e.dieta]=new Set),i[e.dieta].add(e.id_carregamento)});const n={};Object.entries(i).forEach(([e,t])=>{n[e]=t.size}),o(n)})()},[e,a]),i)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Dietas Fabricadas"}),r.jsx(Li,{children:"Carregando dados..."})]}),r.jsx(zi,{children:r.jsx($i,{className:"w-full h-[300px]"})})]});if(n)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Dietas Fabricadas"}),r.jsx(Li,{children:"Erro ao carregar dados"})]}),r.jsx(zi,{children:r.jsxs(Ki,{variant:"destructive",children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:"No foi possvel carregar os dados das dietas fabricadas. Por favor, tente novamente mais tarde."})]})})]});if(!a||0===a.length)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Dietas Fabricadas"}),r.jsx(Li,{children:"Nenhum dado disponvel"})]}),r.jsx(zi,{children:r.jsxs(Ki,{children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:"No h dados de dietas fabricadas disponveis."})]})})]});const l={"adaptao":"#4CC9A7",adaptacao:"#4CC9A7",crescimento:"#F4C542","terminao":"#E74C3C",terminacao:"#E74C3C",recria:"#3A7DFF","pr-mistura":"#F28C3C","pre-mistura":"#F28C3C",premistura:"#F28C3C",proteinado:"#2E7D6A","proteinado 0.3%":"#2E7D6A"},c=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0"],d=(e,t=0)=>{if(!e)return c[t%c.length];const a=e.toLowerCase().replace(/\s+\d{6}$/,"").replace(/\s+/g," ").trim();for(const[r,i]of Object.entries(l))if(a.includes(r))return i;return c[t%c.length]},u=a.reduce((e,t)=>e+t.realizado_kg,0),h=a.map((e,t)=>({dieta:e.dieta,totalRealizado:e.realizado_kg,numCarregamentos:s[e.dieta]||0,total:u,name:e.dieta,value:e.realizado_kg,color:d(e.dieta,t)}));return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Dietas Fabricadas"}),r.jsxs(Li,{children:["Distribuio por tipo de dieta (kg) - ",e?(p=e,p.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})):"Carregando..."]})]}),r.jsxs(zi,{children:[r.jsx(Ua,{width:"100%",height:300,children:r.jsxs($a,{children:[r.jsx(Ya,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:t,percent:a})=>`${e.split(" ")[0]}: ${(100*a).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:h.map((e,t)=>r.jsx(Ka,{fill:e.color},`cell-${t}`))}),r.jsx(Xa,{content:r.jsx(Zi,{})})]})}),r.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 text-sm",children:h.map((e,t)=>r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),r.jsx("span",{className:"truncate font-medium",children:e.dieta})]}),r.jsxs("span",{className:"text-gray-600",children:[e.totalRealizado.toLocaleString("pt-BR")," kg"]})]},e.dieta))}),r.jsx("div",{className:"mt-3 pt-3 border-t text-center",children:r.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:["Total: ",u.toLocaleString("pt-BR")," kg"]})})]})]});var p},Ji=()=>{const{organization:e}=Di();return qa({queryKey:["vagoes",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_carregamento").select("vagao").eq("organization_id",t).not("vagao","is",null).order("vagao");if(r)throw r;return Array.from(new Set(a.map(e=>e.vagao))).filter(e=>e&&""!==e.trim()).sort()},enabled:!0,refetchInterval:3e5})},en=F,tn=B,an=ke.forwardRef(({className:e,children:t,...a},i)=>r.jsxs(k,{ref:i,className:vr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(M,{asChild:!0,children:r.jsx(at,{className:"h-4 w-4 opacity-50"})})]}));an.displayName=k.displayName;const rn=ke.forwardRef(({className:e,...t},a)=>r.jsx(T,{ref:a,className:vr("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(rt,{className:"h-4 w-4"})}));rn.displayName=T.displayName;const nn=ke.forwardRef(({className:e,...t},a)=>r.jsx(D,{ref:a,className:vr("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(at,{className:"h-4 w-4"})}));nn.displayName=D.displayName;const sn=ke.forwardRef(({className:e,children:t,position:a="popper",...i},n)=>r.jsx(I,{children:r.jsxs(A,{ref:n,className:vr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...i,children:[r.jsx(rn,{}),r.jsx(P,{className:vr("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(nn,{})]})}));sn.displayName=A.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(L,{ref:a,className:vr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=L.displayName;const on=ke.forwardRef(({className:e,children:t,...a},i)=>r.jsxs(z,{ref:i,className:vr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(E,{children:r.jsx(it,{className:"h-4 w-4"})})}),r.jsx(R,{children:t})]}));on.displayName=z.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(O,{ref:a,className:vr("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=O.displayName;const ln=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return r.jsxs("div",{className:"bg-white p-4 border-2 border-gray-200 rounded-lg shadow-xl min-w-[250px]",children:[r.jsxs("p",{className:"font-bold mb-3 text-gray-900 text-base border-b pb-2",children:["Carregamento #",a]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vago:"}),r.jsx("span",{className:"font-bold text-purple-600",children:e.vagao||"N/A"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dieta:"}),r.jsx("span",{className:"font-bold",style:{color:e.color},children:e.dieta?e.dieta.replace(/\s+\d{6}$/,""):"N/A"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Previsto:"}),r.jsxs("span",{className:"font-bold text-blue-600",children:[e.previsto.toLocaleString("pt-BR")," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Realizado:"}),r.jsxs("span",{className:"font-bold text-green-600",children:[e.realizado.toLocaleString("pt-BR")," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Eficincia:"}),r.jsxs("span",{className:"font-bold text-lg "+(e.eficiencia>=100?"text-green-600":e.eficiencia>=95?"text-yellow-600":"text-red-600"),children:[e.eficiencia,"%"]})]})]})]})}return null},cn=()=>{const[e,t]=ke.useState("all"),[a,i]=ke.useState(!1),[n,s]=ke.useState(0),{data:o,isLoading:l,error:c}=(e=>{const{organization:t}=Di(),{vagaoFilter:a}=e||{};return qa({queryKey:["eficiencia-carregamento",null==t?void 0:t.id,a],queryFn:async()=>{const e=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:r,error:i}=await ki.from("fato_carregamento").select("data").eq("organization_id",e).not("previsto_kg","is",null).not("realizado_kg","is",null).order("data",{ascending:!1}).limit(1);if(i)throw i;if(!r||0===r.length)return[];const n=r[0].data;let s=ki.from("fato_carregamento").select("nro_carregamento, dieta, vagao, previsto_kg, realizado_kg").eq("organization_id",e).eq("data",n).not("previsto_kg","is",null).not("realizado_kg","is",null).gt("previsto_kg",0);a&&(s=s.eq("vagao",a));const{data:o,error:l}=await s;if(l)throw l;const c={"adaptao":"#4CC9A7",adaptacao:"#4CC9A7",crescimento:"#F4C542","terminao":"#E74C3C",terminacao:"#E74C3C",recria:"#3A7DFF","pr-mistura":"#F28C3C","pre-mistura":"#F28C3C",premistura:"#F28C3C",proteinado:"#2E7D6A","proteinado 0.3%":"#2E7D6A"},d=e=>{if(!e)return"#8884d8";const t=e.toLowerCase().replace(/\s+\d{6}$/,"").replace(/\s+/g," ").trim();for(const[a,r]of Object.entries(c))if(t.includes(a))return r;return"#8884d8"},u=o.reduce((e,t)=>{const a=t.nro_carregamento;return e[a]||(e[a]={dieta:t.dieta,vagao:t.vagao,totalPrevisto:0,totalRealizado:0}),e[a].totalPrevisto+=parseFloat(String(t.previsto_kg||0)),e[a].totalRealizado+=parseFloat(String(t.realizado_kg||0)),e},{});return{data:Object.entries(u).map(([e,t])=>({nroCarregamento:e,dieta:t.dieta,vagao:t.vagao,previsto:parseFloat(t.totalPrevisto.toFixed(2)),realizado:parseFloat(t.totalRealizado.toFixed(2)),eficiencia:parseFloat((t.totalRealizado/t.totalPrevisto*100).toFixed(1)),color:d(t.dieta)})).sort((e,t)=>(parseInt(e.nroCarregamento)||0)-(parseInt(t.nroCarregamento)||0)).slice(0,20),dataReferencia:n}},enabled:!0,refetchInterval:3e5})})({vagaoFilter:"all"===e?void 0:e}),{data:d,isLoading:u}=Ji();if(ke.useEffect(()=>{const e=()=>{i(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),ke.useEffect(()=>{o&&"data"in o&&o.data&&s(0)},[o,e]),l)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Eficincia por Carregamento"}),r.jsx(Li,{children:"Carregando dados..."})]}),r.jsx(zi,{children:r.jsx($i,{className:"w-full h-[300px]"})})]});if(c)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Eficincia por Carregamento"}),r.jsx(Li,{children:"Erro ao carregar dados"})]}),r.jsx(zi,{children:r.jsxs(Ki,{variant:"destructive",children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:"No foi possvel carregar os dados de eficincia. Por favor, tente novamente mais tarde."})]})})]});if(!o||!("data"in o)||!o.data||0===o.data.length){const a="all"!==e?"No h dados para esse Vago hoje!":"No h dados de eficincia disponveis.";return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsx(Pi,{children:"Eficincia por Carregamento"}),r.jsx("div",{className:"hidden sm:block w-48",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),u?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==d?void 0:d.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsx(Li,{children:"Nenhum dado disponvel"}),r.jsx("div",{className:"sm:hidden mt-4",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),u?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==d?void 0:d.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsx(zi,{children:r.jsxs(Ki,{children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:a})]})})]})}const{data:h,dataReferencia:p}=o,m=Math.ceil(h.length/7),f=7*n,g=Math.min(f+7,h.length),x=h.slice(f,g);return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsx(Pi,{children:"Eficincia por Carregamento"}),r.jsx("div",{className:"hidden sm:block w-48",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),u?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==d?void 0:d.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsxs(Li,{children:["Relao Realizado x Previsto (%) - ",(v=p,new Date(v+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}))]}),r.jsx("div",{className:"sm:hidden mt-4",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),u?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==d?void 0:d.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsxs(zi,{className:"p-2 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>{n>0&&s(n-1)},disabled:0===n,className:"flex items-center gap-1",children:[r.jsx(nt,{className:"h-4 w-4"}),!a&&"Anterior"]}),r.jsxs("span",{className:"text-sm text-gray-600",children:[f+1," - ",g," de ",h.length," carregamentos",r.jsx("br",{}),r.jsxs("span",{className:"text-xs",children:["Pgina ",n+1," de ",m]})]}),r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>{n<m-1&&s(n+1)},disabled:n===m-1,className:"flex items-center gap-1",children:[!a&&"Prximo",r.jsx(st,{className:"h-4 w-4"})]})]}),r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Za,{data:x,margin:a?{top:5,right:5,left:0,bottom:15}:{top:5,right:30,left:30,bottom:25},barCategoryGap:a?"20%":"10%",children:[r.jsx(Qa,{strokeDasharray:"3 3",vertical:!1}),r.jsx(Ja,{dataKey:"nroCarregamento",label:a?void 0:{value:"N Carregamento",position:"insideBottom",offset:-5},tick:{fontSize:a?10:12}}),r.jsx(er,{label:a?void 0:{value:"Eficincia (%)",angle:-90,position:"insideLeft",offset:0,style:{textAnchor:"middle"}},domain:[95,105],ticks:[95,97.5,100,102.5,105],tick:{fontSize:12}}),r.jsx(Xa,{content:r.jsx(ln,{})}),r.jsx(tr,{y:100,stroke:"green",strokeDasharray:"5 5",label:{value:"Meta 100%",position:"right"}}),r.jsx(tr,{y:95,stroke:"orange",strokeDasharray:"3 3",label:{value:"Mnimo 95%",position:"right"}}),r.jsx(ar,{dataKey:"eficiencia",radius:[4,4,0,0],children:x.map((e,t)=>r.jsx(Ka,{fill:e.color},`cell-${t}`))})]})}),!a&&r.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 sm:gap-4 justify-center text-xs sm:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#4CC9A7"}}),r.jsx("span",{className:"text-gray-600",children:"Adaptao"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#F4C542"}}),r.jsx("span",{className:"text-gray-600",children:"Crescimento"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#E74C3C"}}),r.jsx("span",{className:"text-gray-600",children:"Terminao"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#3A7DFF"}}),r.jsx("span",{className:"text-gray-600",children:"Recria"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#F28C3C"}}),r.jsx("span",{className:"text-gray-600",children:"Pr-mistura"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#2E7D6A"}}),r.jsx("span",{className:"text-gray-600",children:"Proteinado 0.3%"})]})]})]})]});var v},dn=({active:e,payload:t,label:a})=>{if(e&&t&&t.length){const e=t[0].payload;return r.jsxs("div",{className:"bg-white p-3 sm:p-4 border-2 border-gray-200 rounded-lg shadow-xl min-w-[200px] sm:min-w-[250px] max-w-[280px] sm:max-w-none",children:[r.jsx("p",{className:"font-bold mb-2 sm:mb-3 text-gray-900 text-sm sm:text-base border-b pb-2",children:a}),r.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Previsto:"}),r.jsxs("span",{className:"font-bold text-blue-600 text-xs sm:text-sm",children:[e.previsto.toLocaleString("pt-BR")," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Realizado:"}),r.jsxs("span",{className:"font-bold text-green-600 text-xs sm:text-sm",children:[e.realizado.toLocaleString("pt-BR")," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Diferena:"}),r.jsxs("span",{className:"font-bold text-xs sm:text-sm "+(e.realizado-e.previsto>=0?"text-green-600":"text-red-600"),children:[e.realizado-e.previsto>0?"+":"",(e.realizado-e.previsto).toFixed(2)," kg"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-1 sm:pt-2 border-t",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Eficincia:"}),r.jsxs("span",{className:"font-bold text-base sm:text-lg "+(e.eficiencia>=100?"text-green-600":e.eficiencia>=95?"text-yellow-600":"text-red-600"),children:[e.eficiencia,"%"]})]})]})]})}return null},un=()=>{const[e,t]=ke.useState("all"),[a,i]=ke.useState(!1),{data:n,isLoading:s,error:o}=(e=>{const{organization:t}=Di(),{vagaoFilter:a}=e||{};return qa({queryKey:["eficiencia-ingrediente",null==t?void 0:t.id,a],queryFn:async()=>{const e=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:r,error:i}=await ki.from("fato_carregamento").select("data").eq("organization_id",e).not("previsto_kg","is",null).not("realizado_kg","is",null).order("data",{ascending:!1}).limit(1);if(i)throw i;if(!r||0===r.length)return[];const n=r[0].data;let s=ki.from("fato_carregamento").select("ingrediente, previsto_kg, realizado_kg").eq("organization_id",e).eq("data",n).not("previsto_kg","is",null).not("realizado_kg","is",null).not("ingrediente","is",null).gt("previsto_kg",0);a&&(s=s.eq("vagao",a));const{data:o,error:l}=await s;if(l)throw l;const c={milho:"#FFBB28",soja:"#14B981",farelo:"#FF8042",nucleo:"#8884d8",mineral:"#82ca9d",vitamina:"#ffc658",sal:"#ff7c7c",calcario:"#a4a4a4",ureia:"#00C49F",silagem:"#0088FE"},d=(e,t)=>{const a={SIL:"#6FCF97",MAI:"#F4C542",MLH:"#F4C542",CAP:"#4CC9A7",SOJ:"#D4A62C","PR":"#A0522D",PRE:"#A0522D",PMX:"#A0522D",URE:"#F5F5F5",NUC:"#3F80FF",CAL:"#DCDCDC"};if(a[t])return a[t];if(!e)return"#8884d8";const r=e.toLowerCase().replace(/[]/g,"a").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"c");for(const[s,o]of Object.entries(c))if(r.includes(s))return o;const i=e.split("").reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0),n=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#00C49F","#0088FE"];return n[Math.abs(i)%n.length]},u=o.reduce((e,t)=>{const a=t.ingrediente;return e[a]||(e[a]={totalPrevisto:0,totalRealizado:0}),e[a].totalPrevisto+=parseFloat(t.previsto_kg||0),e[a].totalRealizado+=parseFloat(t.realizado_kg||0),e},{}),h=e=>{const t=e.toLowerCase(),a={milho:"MLH",soja:"SOJ",farelo:"FAR",silagem:"SIL",concentrado:"CON",premix:"PMX",suplemento:"SUP",calcario:"CAL",fosfato:"FOS",ureia:"URE",sal:"SAL",mineral:"MIN",vitamina:"VIT",proteinado:"PRO",energia:"ENE",fibra:"FIB"};for(const[r,i]of Object.entries(a))if(t.includes(r))return i;return e.substring(0,3).toUpperCase()};return{data:Object.entries(u).map(([e,t])=>({ingrediente:e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),abreviacao:h(e),previsto:parseFloat(t.totalPrevisto.toFixed(2)),realizado:parseFloat(t.totalRealizado.toFixed(2)),eficiencia:parseFloat((t.totalRealizado/t.totalPrevisto*100).toFixed(1)),color:d(e,h(e))})).sort((e,t)=>t.realizado-e.realizado).slice(0,15),dataReferencia:n}},enabled:!0,refetchInterval:3e5})})({vagaoFilter:"all"===e?void 0:e}),{data:l,isLoading:c}=Ji();if(ke.useEffect(()=>{const e=()=>{i(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),s)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Eficincia por Ingrediente"}),r.jsx(Li,{children:"Carregando dados..."})]}),r.jsx(zi,{className:"p-2 sm:p-6",children:r.jsx($i,{className:"w-full h-[300px]"})})]});if(o)return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Eficincia por Ingrediente"}),r.jsx(Li,{children:"Erro ao carregar dados"})]}),r.jsx(zi,{className:"p-2 sm:p-6",children:r.jsxs(Ki,{variant:"destructive",children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:"No foi possvel carregar os dados de eficincia por ingrediente. Por favor, tente novamente mais tarde."})]})})]});if(!n||!("data"in n)||!n.data||0===n.data.length){const a="all"!==e?"No h dados para esse Vago hoje!":"No h dados de eficincia por ingrediente disponveis.";return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsx(Pi,{className:"text-lg sm:text-xl",children:"Eficincia por Ingrediente"}),r.jsx("div",{className:"hidden sm:block w-48",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),c?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==l?void 0:l.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsx(Li,{children:"Nenhum dado disponvel"}),r.jsx("div",{className:"sm:hidden mt-4",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),c?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==l?void 0:l.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsx(zi,{className:"p-2 sm:p-6",children:r.jsxs(Ki,{children:[r.jsx(tt,{className:"h-4 w-4"}),r.jsx(Xi,{children:a})]})})]})}const{data:d,dataReferencia:u}=n;return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsx(Pi,{className:"text-lg sm:text-xl",children:"Eficincia por Ingrediente"}),r.jsx("div",{className:"hidden sm:block w-48",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),c?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==l?void 0:l.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsxs(Li,{children:["Relao Realizado x Previsto (%) - ",(h=u,new Date(h+"T00:00:00").toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}))]}),r.jsx("div",{className:"sm:hidden mt-4",children:r.jsxs(en,{value:e,onValueChange:t,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Todos os vages"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"all",children:"Todos os vages"}),c?r.jsx(on,{value:"loading",disabled:!0,children:"Carregando..."}):null==l?void 0:l.map(e=>r.jsxs(on,{value:e,children:["Vago ",e]},e))]})]})})]}),r.jsxs(zi,{children:[r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Za,{data:d,margin:a?{top:5,right:5,left:0,bottom:15}:{top:5,right:10,left:10,bottom:25},barCategoryGap:"10%",children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"abreviacao",angle:0,textAnchor:"middle",height:50,interval:0,fontSize:10,tick:{fontSize:9}}),r.jsx(er,{label:a?void 0:{value:"Eficincia (%)",angle:-90,position:"insideLeft",offset:0,style:{textAnchor:"middle"}},domain:[95,105],ticks:[95,97.5,100,102.5,105],tick:{fontSize:10}}),r.jsx(Xa,{content:r.jsx(dn,{})}),r.jsx(tr,{y:100,stroke:"green",strokeDasharray:"5 5",label:{value:"Meta 100%",position:"right"}}),r.jsx(tr,{y:95,stroke:"orange",strokeDasharray:"3 3",label:{value:"Mnimo 95%",position:"right"}}),r.jsx(ar,{dataKey:"eficiencia",radius:[4,4,0,0],children:d.map((e,t)=>r.jsx(Ka,{fill:e.color},`cell-${t}`))})]})}),!a&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-xs sm:text-sm font-medium text-gray-700 mb-2 text-center",children:"Legenda dos Ingredientes"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-1 sm:gap-2 text-xs",children:d.slice(0,12).map((e,t)=>r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-sm flex-shrink-0",style:{backgroundColor:e.color}}),r.jsx("span",{className:"font-medium text-xs",style:{color:e.color},children:e.abreviacao})]}),r.jsx("span",{className:"text-gray-600 truncate text-xs",children:e.ingrediente})]},e.ingrediente))}),d.length>12&&r.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1 sm:mt-2",children:["... e mais ",d.length-12," ingredientes"]})]})]})]});var h};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hn=function(e,t){return(hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)};function pn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}hn(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}var mn=function(){return function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}}(),fn=new(function(){return function(){this.browser=new mn,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window}}());"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(fn.wxa=!0,fn.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?fn.worker=!0:!fn.hasGlobalWindow||"Deno"in window||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Node.js")>-1?(fn.node=!0,fn.svgSupported=!0):function(e,t){var a=t.browser,r=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),n=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);r&&(a.firefox=!0,a.version=r[1]);i&&(a.ie=!0,a.version=i[1]);n&&(a.edge=!0,a.version=n[1],a.newEdge=+n[1].split(".")[0]>18);s&&(a.weChat=!0);if(t.svgSupported="undefined"!=typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!a.ie&&!a.edge,t.pointerEventsSupported="onpointerdown"in window&&(a.edge||a.ie&&+a.version>=11),t.domSupported="undefined"!=typeof document){var o=document.documentElement.style;t.transform3dSupported=(a.ie&&"transition"in o||a.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||a.ie&&+a.version>=9}}(navigator.userAgent,fn);var gn="12px sans-serif";var xn=function(e){var t={};if("undefined"==typeof JSON)return t;for(var a=0;a<e.length;a++){var r=String.fromCharCode(a+32),i=(e.charCodeAt(a)-20)/100;t[r]=i}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),vn={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(){var e,t;return function(a,r){if(!e){var i=vn.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==r&&(t=e.font=r||gn),e.measureText(a);a=a||"";var n=/((?:\d+)?\.?\d*)px/.exec(r=r||gn),s=n&&+n[1]||12,o=0;if(r.indexOf("mono")>=0)o=s*a.length;else for(var l=0;l<a.length;l++){var c=xn[a[l]];o+=null==c?s:c*s}return{width:o}}}(),loadImage:function(e,t,a){var r=new Image;return r.onload=t,r.onerror=a,r.src=e,r}},yn=Vn(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),bn=Vn(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),_n=Object.prototype.toString,jn=Array.prototype,wn=jn.forEach,Nn=jn.filter,Sn=jn.slice,Cn=jn.map,kn=function(){}.constructor,Mn=kn?kn.prototype:null,Tn="__proto__",Dn=2311;function In(){return Dn++}function An(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function Pn(e){if(null==e||"object"!=typeof e)return e;var t=e,a=_n.call(e);if("[object Array]"===a){if(!ps(e)){t=[];for(var r=0,i=e.length;r<i;r++)t[r]=Pn(e[r])}}else if(bn[a]){if(!ps(e)){var n=e.constructor;if(n.from)t=n.from(e);else{t=new n(e.length);for(r=0,i=e.length;r<i;r++)t[r]=e[r]}}}else if(!yn[a]&&!ps(e)&&!ts(e))for(var s in t={},e)e.hasOwnProperty(s)&&s!==Tn&&(t[s]=Pn(e[s]));return t}function Ln(e,t,a){if(!Qn(t)||!Qn(e))return a?Pn(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==Tn){var i=e[r],n=t[r];!Qn(n)||!Qn(i)||$n(n)||$n(i)||ts(n)||ts(i)||Jn(n)||Jn(i)||ps(n)||ps(i)?!a&&r in e||(e[r]=Pn(t[r])):Ln(i,n,a)}return e}function zn(e,t){if(Object.assign)Object.assign(e,t);else for(var a in t)t.hasOwnProperty(a)&&a!==Tn&&(e[a]=t[a]);return e}function En(e,t,a){for(var r=Wn(t),i=0,n=r.length;i<n;i++){var s=r[i];null==e[s]&&(e[s]=t[s])}return e}function Rn(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var a=0,r=e.length;a<r;a++)if(e[a]===t)return a}return-1}function On(e,t,a){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++){var n=r[i];"constructor"!==n&&null==e[n]&&(e[n]=t[n])}else En(e,t)}function Fn(e){return!!e&&("string"!=typeof e&&"number"==typeof e.length)}function Bn(e,t,a){if(e&&t)if(e.forEach&&e.forEach===wn)e.forEach(t,a);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(a,e[r],r,e);else for(var n in e)e.hasOwnProperty(n)&&t.call(a,e[n],n,e)}function qn(e,t,a){if(!e)return[];if(!t)return os(e);if(e.map&&e.map===Cn)return e.map(t,a);for(var r=[],i=0,n=e.length;i<n;i++)r.push(t.call(a,e[i],i,e));return r}function Vn(e,t,a,r){if(e&&t){for(var i=0,n=e.length;i<n;i++)a=t.call(r,a,e[i],i,e);return a}}function Hn(e,t,a){if(!e)return[];if(!t)return os(e);if(e.filter&&e.filter===Nn)return e.filter(t,a);for(var r=[],i=0,n=e.length;i<n;i++)t.call(a,e[i],i,e)&&r.push(e[i]);return r}function Wn(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t}var Gn=Mn&&Yn(Mn.bind)?Mn.call.bind(Mn.bind):function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return function(){return e.apply(t,a.concat(Sn.call(arguments)))}};function Un(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return function(){return e.apply(this,t.concat(Sn.call(arguments)))}}function $n(e){return Array.isArray?Array.isArray(e):"[object Array]"===_n.call(e)}function Yn(e){return"function"==typeof e}function Kn(e){return"string"==typeof e}function Xn(e){return"[object String]"===_n.call(e)}function Zn(e){return"number"==typeof e}function Qn(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function Jn(e){return!!yn[_n.call(e)]}function es(e){return!!bn[_n.call(e)]}function ts(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function as(e){return null!=e.colorStops}function rs(e){return e!=e}function is(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var a=0,r=e.length;a<r;a++)if(null!=e[a])return e[a]}function ns(e,t){return null!=e?e:t}function ss(e,t,a){return null!=e?e:null!=t?t:a}function os(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return Sn.apply(e,t)}function ls(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function cs(e,t){if(!e)throw new Error(t)}function ds(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var us="__ec_primitive__";function hs(e){e[us]=!0}function ps(e){return e[us]}var ms=function(){function e(){this.data={}}return e.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,this},e.prototype.keys=function(){return Wn(this.data)},e.prototype.forEach=function(e){var t=this.data;for(var a in t)t.hasOwnProperty(a)&&e(t[a],a)},e}(),fs="function"==typeof Map;var gs=function(){function e(t){var a=$n(t);this.data=fs?new Map:new ms;var r=this;function i(e,t){a?r.set(e,t):r.set(t,e)}t instanceof e?t.each(i):t&&Bn(t,i)}return e.prototype.hasKey=function(e){return this.data.has(e)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.set=function(e,t){return this.data.set(e,t),t},e.prototype.each=function(e,t){this.data.forEach(function(a,r){e.call(t,a,r)})},e.prototype.keys=function(){var e=this.data.keys();return fs?Array.from(e):e},e.prototype.removeKey=function(e){this.data.delete(e)},e}();function xs(e){return new gs(e)}function vs(e,t){var a;if(Object.create)a=Object.create(e);else{var r=function(){};r.prototype=e,a=new r}return t&&zn(a,t),a}function ys(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function bs(e,t){return e.hasOwnProperty(t)}function _s(){}var js=180/Math.PI,ws=function(e,t){return(ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ns(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}ws(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}function Ss(e,t){return null==e&&(e=0),null==t&&(t=0),[e,t]}function Cs(e){return[e[0],e[1]]}function ks(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e}function Ms(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function Ts(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e}function Ds(e,t){var a=function(e){return Math.sqrt(function(e){return e[0]*e[0]+e[1]*e[1]}(e))}(t);return 0===a?(e[0]=0,e[1]=0):(e[0]=t[0]/a,e[1]=t[1]/a),e}function Is(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var As=Is;var Ps=function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])};function Ls(e,t,a,r){return e[0]=t[0]+r*(a[0]-t[0]),e[1]=t[1]+r*(a[1]-t[1]),e}function zs(e,t,a){var r=t[0],i=t[1];return e[0]=a[0]*r+a[2]*i+a[4],e[1]=a[1]*r+a[3]*i+a[5],e}function Es(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e}function Rs(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e}var Os=function(){return function(e,t){this.target=e,this.topTarget=t&&t.topTarget}}(),Fs=function(){function e(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Os(t,e),"dragstart",e.event))},e.prototype._drag=function(e){var t=this._draggingTarget;if(t){var a=e.offsetX,r=e.offsetY,i=a-this._x,n=r-this._y;this._x=a,this._y=r,t.drift(i,n,e),this.handler.dispatchToElement(new Os(t,e),"drag",e.event);var s=this.handler.findHover(a,r,t).target,o=this._dropTarget;this._dropTarget=s,t!==s&&(o&&s!==o&&this.handler.dispatchToElement(new Os(o,e),"dragleave",e.event),s&&s!==o&&this.handler.dispatchToElement(new Os(s,e),"dragenter",e.event))}},e.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Os(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Os(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},e}(),Bs=function(){function e(e){e&&(this._$eventProcessor=e)}return e.prototype.on=function(e,t,a,r){this._$handlers||(this._$handlers={});var i=this._$handlers;if("function"==typeof t&&(r=a,a=t,t=null),!a||!e)return this;var n=this._$eventProcessor;null!=t&&n&&n.normalizeQuery&&(t=n.normalizeQuery(t)),i[e]||(i[e]=[]);for(var s=0;s<i[e].length;s++)if(i[e][s].h===a)return this;var o={h:a,query:t,ctx:r||this,callAtLast:a.zrEventfulCallAtLast},l=i[e].length-1,c=i[e][l];return c&&c.callAtLast?i[e].splice(l,0,o):i[e].push(o),this},e.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},e.prototype.off=function(e,t){var a=this._$handlers;if(!a)return this;if(!e)return this._$handlers={},this;if(t){if(a[e]){for(var r=[],i=0,n=a[e].length;i<n;i++)a[e][i].h!==t&&r.push(a[e][i]);a[e]=r}a[e]&&0===a[e].length&&delete a[e]}else delete a[e];return this},e.prototype.trigger=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(!this._$handlers)return this;var r=this._$handlers[e],i=this._$eventProcessor;if(r)for(var n=t.length,s=r.length,o=0;o<s;o++){var l=r[o];if(!i||!i.filter||null==l.query||i.filter(e,l.query))switch(n){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,t[0]);break;case 2:l.h.call(l.ctx,t[0],t[1]);break;default:l.h.apply(l.ctx,t)}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e.prototype.triggerWithContext=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(!this._$handlers)return this;var r=this._$handlers[e],i=this._$eventProcessor;if(r)for(var n=t.length,s=t[n-1],o=r.length,l=0;l<o;l++){var c=r[l];if(!i||!i.filter||null==c.query||i.filter(e,c.query))switch(n){case 0:c.h.call(s);break;case 1:c.h.call(s,t[0]);break;case 2:c.h.call(s,t[0],t[1]);break;default:c.h.apply(s,t.slice(1,n-1))}}return i&&i.afterTrigger&&i.afterTrigger(e),this},e}(),qs=Math.log(2);function Vs(e,t,a,r,i,n){var s=r+"-"+i,o=e.length;if(n.hasOwnProperty(s))return n[s];if(1===t){var l=Math.round(Math.log((1<<o)-1&~i)/qs);return e[a][l]}for(var c=r|1<<a,d=a+1;r&1<<d;)d++;for(var u=0,h=0,p=0;h<o;h++){var m=1<<h;m&i||(u+=(p%2?-1:1)*e[a][h]*Vs(e,t-1,d,c,i|m,n),p++)}return n[s]=u,u}function Hs(e,t){var a=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},i=Vs(a,8,0,0,0,r);if(0!==i){for(var n=[],s=0;s<8;s++)for(var o=0;o<8;o++)null==n[o]&&(n[o]=0),n[o]+=((s+o)%2?-1:1)*Vs(a,7,0===s?1:0,1<<s,1<<o,r)/i*t[s];return function(e,t,a){var r=t*n[6]+a*n[7]+1;e[0]=(t*n[0]+a*n[1]+n[2])/r,e[1]=(t*n[3]+a*n[4]+n[5])/r}}}var Ws="___zrEVENTSAVED",Gs=[];function Us(e,t,a,r,i){if(t.getBoundingClientRect&&fn.domSupported&&!$s(t)){var n=t[Ws]||(t[Ws]={}),s=function(e,t){var a=t.markers;if(a)return a;a=t.markers=[];for(var r=["left","right"],i=["top","bottom"],n=0;n<4;n++){var s=document.createElement("div"),o=n%2,l=(n>>1)%2;s.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[o]+":0",i[l]+":0",r[1-o]+":auto",i[1-l]+":auto",""].join("!important;"),e.appendChild(s),a.push(s)}return t.clearMarkers=function(){Bn(a,function(e){e.parentNode&&e.parentNode.removeChild(e)})},a}(t,n),o=function(e,t,a){for(var r=a?"invTrans":"trans",i=t[r],n=t.srcCoords,s=[],o=[],l=!0,c=0;c<4;c++){var d=e[c].getBoundingClientRect(),u=2*c,h=d.left,p=d.top;s.push(h,p),l=l&&n&&h===n[u]&&p===n[u+1],o.push(e[c].offsetLeft,e[c].offsetTop)}return l&&i?i:(t.srcCoords=s,t[r]=a?Hs(o,s):Hs(s,o))}(s,n,i);if(o)return o(e,a,r),!0}return!1}function $s(e){return"CANVAS"===e.nodeName.toUpperCase()}var Ys=/([&<>"'])/g,Ks={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Xs(e){return null==e?"":(e+"").replace(Ys,function(e,t){return Ks[t]})}var Zs=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qs=[],Js=fn.browser.firefox&&+fn.browser.version.split(".")[0]<39;function eo(e,t,a,r){return a=a||{},r?to(e,t,a):Js&&null!=t.layerX&&t.layerX!==t.offsetX?(a.zrX=t.layerX,a.zrY=t.layerY):null!=t.offsetX?(a.zrX=t.offsetX,a.zrY=t.offsetY):to(e,t,a),a}function to(e,t,a){if(fn.domSupported&&e.getBoundingClientRect){var r=t.clientX,i=t.clientY;if($s(e)){var n=e.getBoundingClientRect();return a.zrX=r-n.left,void(a.zrY=i-n.top)}if(Us(Qs,e,r,i))return a.zrX=Qs[0],void(a.zrY=Qs[1])}a.zrX=a.zrY=0}function ao(e){return e||window.event}function ro(e,t,a){if(null!=(t=ao(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];i&&eo(e,i,t,a)}else{eo(e,t,t,a);var n=function(e){var t=e.wheelDelta;if(t)return t;var a=e.deltaX,r=e.deltaY;if(null==a||null==r)return t;return 3*(0!==r?Math.abs(r):Math.abs(a))*(r>0?-1:r<0?1:a>0?-1:1)}(t);t.zrDelta=n?n/120:-(t.detail||0)/3}var s=t.button;return null==t.which&&void 0!==s&&Zs.test(t.type)&&(t.which=1&s?1:2&s?3:4&s?2:0),t}function io(e,t,a,r){e.removeEventListener(t,a,r)}var no=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},so=function(){function e(){this._track=[]}return e.prototype.recognize=function(e,t,a){return this._doTrack(e,t,a),this._recognize(e)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(e,t,a){var r=e.touches;if(r){for(var i={points:[],touches:[],target:t,event:e},n=0,s=r.length;n<s;n++){var o=r[n],l=eo(a,o,{});i.points.push([l.zrX,l.zrY]),i.touches.push(o)}this._track.push(i)}},e.prototype._recognize=function(e){for(var t in lo)if(lo.hasOwnProperty(t)){var a=lo[t](this._track,e);if(a)return a}},e}();function oo(e){var t=e[1][0]-e[0][0],a=e[1][1]-e[0][1];return Math.sqrt(t*t+a*a)}var lo={pinch:function(e,t){var a=e.length;if(a){var r,i=(e[a-1]||{}).points,n=(e[a-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var s=oo(i)/oo(n);!isFinite(s)&&(s=1),t.pinchScale=s;var o=[((r=i)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function co(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function uo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ho(e,t,a){var r=t[0]*a[0]+t[2]*a[1],i=t[1]*a[0]+t[3]*a[1],n=t[0]*a[2]+t[2]*a[3],s=t[1]*a[2]+t[3]*a[3],o=t[0]*a[4]+t[2]*a[5]+t[4],l=t[1]*a[4]+t[3]*a[5]+t[5];return e[0]=r,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=l,e}function po(e,t,a){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+a[0],e[5]=t[5]+a[1],e}function mo(e,t,a,r){void 0===r&&(r=[0,0]);var i=t[0],n=t[2],s=t[4],o=t[1],l=t[3],c=t[5],d=Math.sin(a),u=Math.cos(a);return e[0]=i*u+o*d,e[1]=-i*d+o*u,e[2]=n*u+l*d,e[3]=-n*d+u*l,e[4]=u*(s-r[0])+d*(c-r[1])+r[0],e[5]=u*(c-r[1])-d*(s-r[0])+r[1],e}function fo(e,t){var a=t[0],r=t[2],i=t[4],n=t[1],s=t[3],o=t[5],l=a*s-n*r;return l?(l=1/l,e[0]=s*l,e[1]=-n*l,e[2]=-r*l,e[3]=a*l,e[4]=(r*o-s*i)*l,e[5]=(n*i-a*o)*l,e):null}var go=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},e.prototype.distance=function(e){var t=this.x-e.x,a=this.y-e.y;return Math.sqrt(t*t+a*a)},e.prototype.distanceSquare=function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(e){if(e){var t=this.x,a=this.y;return this.x=e[0]*t+e[2]*a+e[4],this.y=e[1]*t+e[3]*a+e[5],this}},e.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},e.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},e.set=function(e,t,a){e.x=t,e.y=a},e.copy=function(e,t){e.x=t.x,e.y=t.y},e.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.lenSquare=function(e){return e.x*e.x+e.y*e.y},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.add=function(e,t,a){e.x=t.x+a.x,e.y=t.y+a.y},e.sub=function(e,t,a){e.x=t.x-a.x,e.y=t.y-a.y},e.scale=function(e,t,a){e.x=t.x*a,e.y=t.y*a},e.scaleAndAdd=function(e,t,a,r){e.x=t.x+a.x*r,e.y=t.y+a.y*r},e.lerp=function(e,t,a,r){var i=1-r;e.x=i*t.x+r*a.x,e.y=i*t.y+r*a.y},e}(),xo=Math.min,vo=Math.max,yo=Math.abs,bo=["x","y"],_o=["width","height"],jo=new go,wo=new go,No=new go,So=new go,Co=Lo(),ko=Co.minTv,Mo=Co.maxTv,To=[0,0],Do=function(){function e(t,a,r,i){e.set(this,t,a,r,i)}return e.set=function(e,t,a,r,i){return r<0&&(t+=r,r=-r),i<0&&(a+=i,i=-i),e.x=t,e.y=a,e.width=r,e.height=i,e},e.prototype.union=function(e){var t=xo(e.x,this.x),a=xo(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=vo(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=vo(e.y+e.height,this.y+this.height)-a:this.height=e.height,this.x=t,this.y=a},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(e){var t=this,a=e.width/t.width,r=e.height/t.height,i=[1,0,0,1,0,0];return po(i,i,[-t.x,-t.y]),function(e,t,a){var r=a[0],i=a[1];e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i}(i,i,[a,r]),po(i,i,[e.x,e.y]),i},e.prototype.intersect=function(t,a,r){return e.intersect(this,t,a,r)},e.intersect=function(t,a,r,i){r&&go.set(r,0,0);var n=i&&i.outIntersectRect||null,s=i&&i.clamp;if(n&&(n.x=n.y=n.width=n.height=NaN),!t||!a)return!1;t instanceof e||(t=e.set(Io,t.x,t.y,t.width,t.height)),a instanceof e||(a=e.set(Ao,a.x,a.y,a.width,a.height));var o=!!r;Co.reset(i,o);var l=Co.touchThreshold,c=t.x+l,d=t.x+t.width-l,u=t.y+l,h=t.y+t.height-l,p=a.x+l,m=a.x+a.width-l,f=a.y+l,g=a.y+a.height-l;if(c>d||u>h||p>m||f>g)return!1;var x=!(d<p||m<c||h<f||g<u);return(o||n)&&(To[0]=1/0,To[1]=0,Po(c,d,p,m,0,o,n,s),Po(u,h,f,g,1,o,n,s),o&&go.copy(r,x?Co.useDir?Co.dirMinTv:ko:Mo)),x},e.contain=function(e,t,a){return t>=e.x&&t<=e.x+e.width&&a>=e.y&&a<=e.y+e.height},e.prototype.contain=function(t,a){return e.contain(this,t,a)},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return 0===this.width||0===this.height},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(e,t){return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e},e.applyTransform=function(t,a,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],n=r[3],s=r[4],o=r[5];return t.x=a.x*i+s,t.y=a.y*n+o,t.width=a.width*i,t.height=a.height*n,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}jo.x=No.x=a.x,jo.y=So.y=a.y,wo.x=So.x=a.x+a.width,wo.y=No.y=a.y+a.height,jo.transform(r),So.transform(r),wo.transform(r),No.transform(r),t.x=xo(jo.x,wo.x,No.x,So.x),t.y=xo(jo.y,wo.y,No.y,So.y);var l=vo(jo.x,wo.x,No.x,So.x),c=vo(jo.y,wo.y,No.y,So.y);t.width=l-t.x,t.height=c-t.y}else t!==a&&e.copy(t,a)},e}(),Io=new Do(0,0,0,0),Ao=new Do(0,0,0,0);function Po(e,t,a,r,i,n,s,o){var l=yo(t-a),c=yo(r-e),d=xo(l,c),u=bo[i],h=bo[1-i],p=_o[i];t<a||r<e?l<c?(n&&(Mo[u]=-l),o&&(s[u]=t,s[p]=0)):(n&&(Mo[u]=c),o&&(s[u]=e,s[p]=0)):(s&&(s[u]=vo(e,a),s[p]=xo(t,r)-s[u]),n&&(d<To[0]||Co.useDir)&&(To[0]=xo(d,To[0]),(l<c||!Co.bidirectional)&&(ko[u]=l,ko[h]=0,Co.useDir&&Co.calcDirMTV()),(l>=c||!Co.bidirectional)&&(ko[u]=-c,ko[h]=0,Co.useDir&&Co.calcDirMTV())))}function Lo(){var e=0,t=new go,a=new go,r={minTv:new go,maxTv:new go,useDir:!1,dirMinTv:new go,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(i,n){r.touchThreshold=0,i&&null!=i.touchThreshold&&(r.touchThreshold=vo(0,i.touchThreshold)),r.negativeSize=!1,n&&(r.minTv.set(1/0,1/0),r.maxTv.set(0,0),r.useDir=!1,i&&null!=i.direction&&(r.useDir=!0,r.dirMinTv.copy(r.minTv),a.copy(r.minTv),e=i.direction,r.bidirectional=null==i.bidirectional||!!i.bidirectional,r.bidirectional||t.set(Math.cos(e),Math.sin(e))))},calcDirMTV:function(){var n=r.minTv,s=r.dirMinTv,o=n.y*n.y+n.x*n.x,l=Math.sin(e),c=Math.cos(e),d=l*n.y+c*n.x;i(d)?i(n.x)&&i(n.y)&&s.set(0,0):(a.x=o*c/d,a.y=o*l/d,i(a.x)&&i(a.y)?s.set(0,0):(r.bidirectional||t.dot(a)>0)&&a.len()<s.len()&&s.copy(a))}};function i(e){return yo(e)<1e-10}return r}var zo="silent";function Eo(){no(this.event)}var Ro=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=null,t}return Ns(t,e),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Bs),Oo=function(){return function(e,t){this.x=e,this.y=t}}(),Fo=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Bo=new Do(0,0,0,0),qo=function(e){function t(t,a,r,i,n){var s=e.call(this)||this;return s._hovered=new Oo(0,0),s.storage=t,s.painter=a,s.painterRoot=i,s._pointerSize=n,r=r||new Ro,s.proxy=null,s.setHandlerProxy(r),s._draggingMgr=new Fs(s),s}return Ns(t,e),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(Bn(Fo,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var t=e.zrX,a=e.zrY,r=Wo(this,t,a),i=this._hovered,n=i.target;n&&!n.__zr&&(n=(i=this.findHover(i.x,i.y)).target);var s=this._hovered=r?new Oo(t,a):this.findHover(t,a),o=s.target,l=this.proxy;l.setCursor&&l.setCursor(o?o.cursor:"default"),n&&o!==n&&this.dispatchToElement(i,"mouseout",e),this.dispatchToElement(s,"mousemove",e),o&&o!==n&&this.dispatchToElement(s,"mouseover",e)},t.prototype.mouseout=function(e){var t=e.zrEventControl;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Oo(0,0)},t.prototype.dispatch=function(e,t){var a=this[e];a&&a.call(this,t)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},t.prototype.dispatchToElement=function(e,t,a){var r=(e=e||{}).target;if(!r||!r.silent){for(var i="on"+t,n=function(e,t,a){return{type:e,event:a,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:Eo}}(t,e,a);r&&(r[i]&&(n.cancelBubble=!!r[i].call(r,n)),r.trigger(t,n),r=r.__hostTarget?r.__hostTarget:r.parent,!n.cancelBubble););n.cancelBubble||(this.trigger(t,n),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(e){"function"==typeof e[i]&&e[i].call(e,n),e.trigger&&e.trigger(t,n)}))}},t.prototype.findHover=function(e,t,a){var r=this.storage.getDisplayList(),i=new Oo(e,t);if(Ho(r,i,e,t,a),this._pointerSize&&!i.target){for(var n=[],s=this._pointerSize,o=s/2,l=new Do(e-o,t-o,s,s),c=r.length-1;c>=0;c--){var d=r[c];d===a||d.ignore||d.ignoreCoarsePointer||d.parent&&d.parent.ignoreCoarsePointer||(Bo.copy(d.getBoundingRect()),d.transform&&Bo.applyTransform(d.transform),Bo.intersect(l)&&n.push(d))}if(n.length)for(var u=Math.PI/12,h=2*Math.PI,p=0;p<o;p+=4)for(var m=0;m<h;m+=u){if(Ho(n,i,e+p*Math.cos(m),t+p*Math.sin(m),a),i.target)return i}}return i},t.prototype.processGesture=function(e,t){this._gestureMgr||(this._gestureMgr=new so);var a=this._gestureMgr;"start"===t&&a.clear();var r=a.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&a.clear(),r){var i=r.type;e.gestureEvent=i;var n=new Oo;n.target=r.target,this.dispatchToElement(n,i,r.event)}},t}(Bs);function Vo(e,t,a){if(e[e.rectHover?"rectContain":"contain"](t,a)){for(var r=e,i=void 0,n=!1;r;){if(r.ignoreClip&&(n=!0),!n){var s=r.getClipPath();if(s&&!s.contain(t,a))return!1}r.silent&&(i=!0);var o=r.__hostTarget;r=o?r.ignoreHostSilent?null:o:r.parent}return!i||zo}return!1}function Ho(e,t,a,r,i){for(var n=e.length-1;n>=0;n--){var s=e[n],o=void 0;if(s!==i&&!s.ignore&&(o=Vo(s,a,r))&&(!t.topTarget&&(t.topTarget=s),o!==zo)){t.target=s;break}}}function Wo(e,t,a){var r=e.painter;return t<0||t>r.getWidth()||a<0||a>r.getHeight()}Bn(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){qo.prototype[e]=function(t){var a,r,i=t.zrX,n=t.zrY,s=Wo(this,i,n);if("mouseup"===e&&s||(r=(a=this.findHover(i,n)).target),"mousedown"===e)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===e)this._upEl=r;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||As(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function Go(e,t,a,r){var i=t+1;if(i===a)return 1;if(r(e[i++],e[t])<0){for(;i<a&&r(e[i],e[i-1])<0;)i++;!function(e,t,a){a--;for(;t<a;){var r=e[t];e[t++]=e[a],e[a--]=r}}(e,t,i)}else for(;i<a&&r(e[i],e[i-1])>=0;)i++;return i-t}function Uo(e,t,a,r,i){for(r===t&&r++;r<a;r++){for(var n,s=e[r],o=t,l=r;o<l;)i(s,e[n=o+l>>>1])<0?l=n:o=n+1;var c=r-o;switch(c){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;c>0;)e[o+c]=e[o+c-1],c--}e[o]=s}}function $o(e,t,a,r,i,n){var s=0,o=0,l=1;if(n(e,t[a+i])>0){for(o=r-i;l<o&&n(e,t[a+i+l])>0;)s=l,(l=1+(l<<1))<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}else{for(o=i+1;l<o&&n(e,t[a+i-l])<=0;)s=l,(l=1+(l<<1))<=0&&(l=o);l>o&&(l=o);var c=s;s=i-l,l=i-c}for(s++;s<l;){var d=s+(l-s>>>1);n(e,t[a+d])>0?s=d+1:l=d}return l}function Yo(e,t,a,r,i,n){var s=0,o=0,l=1;if(n(e,t[a+i])<0){for(o=i+1;l<o&&n(e,t[a+i-l])<0;)s=l,(l=1+(l<<1))<=0&&(l=o);l>o&&(l=o);var c=s;s=i-l,l=i-c}else{for(o=r-i;l<o&&n(e,t[a+i+l])>=0;)s=l,(l=1+(l<<1))<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}for(s++;s<l;){var d=s+(l-s>>>1);n(e,t[a+d])<0?l=d:s=d+1}return l}function Ko(e,t){var a,r,i=7,n=0,s=[];function o(o){var l=a[o],c=r[o],d=a[o+1],u=r[o+1];r[o]=c+u,o===n-3&&(a[o+1]=a[o+2],r[o+1]=r[o+2]),n--;var h=Yo(e[d],e,l,c,0,t);l+=h,0!==(c-=h)&&0!==(u=$o(e[l+c-1],e,d,u,u-1,t))&&(c<=u?function(a,r,n,o){var l=0;for(l=0;l<r;l++)s[l]=e[a+l];var c=0,d=n,u=a;if(e[u++]=e[d++],0===--o){for(l=0;l<r;l++)e[u+l]=s[c+l];return}if(1===r){for(l=0;l<o;l++)e[u+l]=e[d+l];return void(e[u+o]=s[c])}var h,p,m,f=i;for(;;){h=0,p=0,m=!1;do{if(t(e[d],s[c])<0){if(e[u++]=e[d++],p++,h=0,0===--o){m=!0;break}}else if(e[u++]=s[c++],h++,p=0,1===--r){m=!0;break}}while((h|p)<f);if(m)break;do{if(0!==(h=Yo(e[d],s,c,r,0,t))){for(l=0;l<h;l++)e[u+l]=s[c+l];if(u+=h,c+=h,(r-=h)<=1){m=!0;break}}if(e[u++]=e[d++],0===--o){m=!0;break}if(0!==(p=$o(s[c],e,d,o,0,t))){for(l=0;l<p;l++)e[u+l]=e[d+l];if(u+=p,d+=p,0===(o-=p)){m=!0;break}}if(e[u++]=s[c++],1===--r){m=!0;break}f--}while(h>=7||p>=7);if(m)break;f<0&&(f=0),f+=2}if((i=f)<1&&(i=1),1===r){for(l=0;l<o;l++)e[u+l]=e[d+l];e[u+o]=s[c]}else{if(0===r)throw new Error;for(l=0;l<r;l++)e[u+l]=s[c+l]}}(l,c,d,u):function(a,r,n,o){var l=0;for(l=0;l<o;l++)s[l]=e[n+l];var c=a+r-1,d=o-1,u=n+o-1,h=0,p=0;if(e[u--]=e[c--],0===--r){for(h=u-(o-1),l=0;l<o;l++)e[h+l]=s[l];return}if(1===o){for(p=(u-=r)+1,h=(c-=r)+1,l=r-1;l>=0;l--)e[p+l]=e[h+l];return void(e[u]=s[d])}var m=i;for(;;){var f=0,g=0,x=!1;do{if(t(s[d],e[c])<0){if(e[u--]=e[c--],f++,g=0,0===--r){x=!0;break}}else if(e[u--]=s[d--],g++,f=0,1===--o){x=!0;break}}while((f|g)<m);if(x)break;do{if(0!==(f=r-Yo(s[d],e,a,r,r-1,t))){for(r-=f,p=(u-=f)+1,h=(c-=f)+1,l=f-1;l>=0;l--)e[p+l]=e[h+l];if(0===r){x=!0;break}}if(e[u--]=s[d--],1===--o){x=!0;break}if(0!==(g=o-$o(e[c],s,0,o,o-1,t))){for(o-=g,p=(u-=g)+1,h=(d-=g)+1,l=0;l<g;l++)e[p+l]=s[h+l];if(o<=1){x=!0;break}}if(e[u--]=e[c--],0===--r){x=!0;break}m--}while(f>=7||g>=7);if(x)break;m<0&&(m=0),m+=2}(i=m)<1&&(i=1);if(1===o){for(p=(u-=r)+1,h=(c-=r)+1,l=r-1;l>=0;l--)e[p+l]=e[h+l];e[u]=s[d]}else{if(0===o)throw new Error;for(h=u-(o-1),l=0;l<o;l++)e[h+l]=s[l]}}(l,c,d,u))}return a=[],r=[],{mergeRuns:function(){for(;n>1;){var e=n-2;if(e>=1&&r[e-1]<=r[e]+r[e+1]||e>=2&&r[e-2]<=r[e]+r[e-1])r[e-1]<r[e+1]&&e--;else if(r[e]>r[e+1])break;o(e)}},forceMergeRuns:function(){for(;n>1;){var e=n-2;e>0&&r[e-1]<r[e+1]&&e--,o(e)}},pushRun:function(e,t){a[n]=e,r[n]=t,n+=1}}}function Xo(e,t,a,r){a||(a=0),r||(r=e.length);var i=r-a;if(!(i<2)){var n=0;if(i<32)Uo(e,a,r,a+(n=Go(e,a,r,t)),t);else{var s=Ko(e,t),o=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(i);do{if((n=Go(e,a,r,t))<o){var l=i;l>o&&(l=o),Uo(e,a,a+l,a+n,t),n=l}s.pushRun(a,n),s.mergeRuns(),i-=n,a+=n}while(0!==i);s.forceMergeRuns()}}}var Zo=!1;function Qo(){Zo||(Zo=!0)}function Jo(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var el,tl=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=Jo}return e.prototype.traverse=function(e,t){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(e,t)},e.prototype.getDisplayList=function(e,t){t=t||!1;var a=this._displayList;return!e&&a.length||this.updateDisplayList(t),a},e.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,a=this._displayList,r=0,i=t.length;r<i;r++)this._updateAndAddDisplayable(t[r],null,e);a.length=this._displayListLen,Xo(a,Jo)},e.prototype._updateAndAddDisplayable=function(e,t,a){if(!e.ignore||a){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath(),i=t&&t.length,n=0,s=e.__clipPaths;if(!e.ignoreClip&&(i||r)){if(s||(s=e.__clipPaths=[]),i)for(var o=0;o<t.length;o++)s[n++]=t[o];for(var l=r,c=e;l;)l.parent=c,l.updateTransform(),s[n++]=l,c=l,l=l.getClipPath()}if(s&&(s.length=n),e.childrenRef){for(var d=e.childrenRef(),u=0;u<d.length;u++){var h=d[u];e.__dirty&&(h.__dirty|=1),this._updateAndAddDisplayable(h,s,a)}e.__dirty=0}else{var p=e;isNaN(p.z)&&(Qo(),p.z=0),isNaN(p.z2)&&(Qo(),p.z2=0),isNaN(p.zlevel)&&(Qo(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var m=e.getDecalElement&&e.getDecalElement();m&&this._updateAndAddDisplayable(m,s,a);var f=e.getTextGuideLine();f&&this._updateAndAddDisplayable(f,s,a);var g=e.getTextContent();g&&this._updateAndAddDisplayable(g,s,a)}},e.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},e.prototype.delRoot=function(e){if(e instanceof Array)for(var t=0,a=e.length;t<a;t++)this.delRoot(e[t]);else{var r=Rn(this._roots,e);r>=0&&this._roots.splice(r,1)}},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();el=fn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var al={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,a=.1;return 0===e?0:1===e?1:(!a||a<1?(a=1,t=.1):t=.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,a=.1;return 0===e?0:1===e?1:(!a||a<1?(a=1,t=.1):t=.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,a=.1,r=.4;return 0===e?0:1===e?1:(!a||a<1?(a=1,t=.1):t=r*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?a*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-al.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*al.bounceIn(2*e):.5*al.bounceOut(2*e-1)+.5}},rl=Math.pow,il=Math.sqrt,nl=1e-8,sl=1e-4,ol=il(3),ll=1/3,cl=Ss(),dl=Ss(),ul=Ss();function hl(e){return e>-1e-8&&e<nl}function pl(e){return e>nl||e<-1e-8}function ml(e,t,a,r,i){var n=1-i;return n*n*(n*e+3*i*t)+i*i*(i*r+3*n*a)}function fl(e,t,a,r,i){var n=1-i;return 3*(((t-e)*n+2*(a-t)*i)*n+(r-a)*i*i)}function gl(e,t,a,r,i,n){var s=r+3*(t-a)-e,o=3*(a-2*t+e),l=3*(t-e),c=e-i,d=o*o-3*s*l,u=o*l-9*s*c,h=l*l-3*o*c,p=0;if(hl(d)&&hl(u)){if(hl(o))n[0]=0;else(N=-l/o)>=0&&N<=1&&(n[p++]=N)}else{var m=u*u-4*d*h;if(hl(m)){var f=u/d,g=-f/2;(N=-o/s+f)>=0&&N<=1&&(n[p++]=N),g>=0&&g<=1&&(n[p++]=g)}else if(m>0){var x=il(m),v=d*o+1.5*s*(-u+x),y=d*o+1.5*s*(-u-x);(N=(-o-((v=v<0?-rl(-v,ll):rl(v,ll))+(y=y<0?-rl(-y,ll):rl(y,ll))))/(3*s))>=0&&N<=1&&(n[p++]=N)}else{var b=(2*d*o-3*s*u)/(2*il(d*d*d)),_=Math.acos(b)/3,j=il(d),w=Math.cos(_),N=(-o-2*j*w)/(3*s),S=(g=(-o+j*(w+ol*Math.sin(_)))/(3*s),(-o+j*(w-ol*Math.sin(_)))/(3*s));N>=0&&N<=1&&(n[p++]=N),g>=0&&g<=1&&(n[p++]=g),S>=0&&S<=1&&(n[p++]=S)}}return p}function xl(e,t,a,r,i){var n=6*a-12*t+6*e,s=9*t+3*r-3*e-9*a,o=3*t-3*e,l=0;if(hl(s)){if(pl(n))(d=-o/n)>=0&&d<=1&&(i[l++]=d)}else{var c=n*n-4*s*o;if(hl(c))i[0]=-n/(2*s);else if(c>0){var d,u=il(c),h=(-n-u)/(2*s);(d=(-n+u)/(2*s))>=0&&d<=1&&(i[l++]=d),h>=0&&h<=1&&(i[l++]=h)}}return l}function vl(e,t,a,r,i,n){var s=(t-e)*i+e,o=(a-t)*i+t,l=(r-a)*i+a,c=(o-s)*i+s,d=(l-o)*i+o,u=(d-c)*i+c;n[0]=e,n[1]=s,n[2]=c,n[3]=u,n[4]=u,n[5]=d,n[6]=l,n[7]=r}function yl(e,t,a,r,i,n,s,o,l){for(var c=e,d=t,u=0,h=1/l,p=1;p<=l;p++){var m=p*h,f=ml(e,a,i,s,m),g=ml(t,r,n,o,m),x=f-c,v=g-d;u+=Math.sqrt(x*x+v*v),c=f,d=g}return u}function bl(e,t,a,r){var i=1-r;return i*(i*e+2*r*t)+r*r*a}function _l(e,t,a,r){return 2*((1-r)*(t-e)+r*(a-t))}function jl(e,t,a){var r=e+a-2*t;return 0===r?.5:(e-t)/r}function wl(e,t,a,r,i){var n=(t-e)*r+e,s=(a-t)*r+t,o=(s-n)*r+n;i[0]=e,i[1]=n,i[2]=o,i[3]=o,i[4]=s,i[5]=a}function Nl(e,t,a,r,i,n,s){for(var o=e,l=t,c=0,d=1/s,u=1;u<=s;u++){var h=u*d,p=bl(e,a,i,h),m=bl(t,r,n,h),f=p-o,g=m-l;c+=Math.sqrt(f*f+g*g),o=p,l=m}return c}var Sl=/cubic-bezier\(([0-9,\.e ]+)\)/;function Cl(e){var t=e&&Sl.exec(e);if(t){var a=t[1].split(","),r=+ds(a[0]),i=+ds(a[1]),n=+ds(a[2]),s=+ds(a[3]);if(isNaN(r+i+n+s))return;var o=[];return function(e){return e<=0?0:e>=1?1:gl(0,r,n,1,e,o)&&ml(0,i,s,1,o[0])}}}var kl=function(){function e(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||_s,this.ondestroy=e.ondestroy||_s,this.onrestart=e.onrestart||_s,e.easing&&this.setEasing(e.easing)}return e.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),!this._paused){var a=this._life,r=e-this._startTime-this._pausedTime,i=r/a;i<0&&(i=0),i=Math.min(i,1);var n=this.easingFunc,s=n?n(i):i;if(this.onframe(s),1===i){if(!this.loop)return!0;var o=r%a;this._startTime=e-o,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=t},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Yn(e)?e:al[e]||Cl(e)},e}(),Ml=function(){return function(e){this.value=e}}(),Tl=function(){function e(){this._len=0}return e.prototype.insert=function(e){var t=new Ml(e);return this.insertEntry(t),t},e.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},e.prototype.remove=function(e){var t=e.prev,a=e.next;t?t.next=a:this.head=a,a?a.prev=t:this.tail=t,e.next=e.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Dl=function(){function e(e){this._list=new Tl,this._maxSize=10,this._map={},this._maxSize=e}return e.prototype.put=function(e,t){var a=this._list,r=this._map,i=null;if(null==r[e]){var n=a.len(),s=this._lastRemovedEntry;if(n>=this._maxSize&&n>0){var o=a.head;a.remove(o),delete r[o.key],i=o.value,this._lastRemovedEntry=o}s?s.value=t:s=new Ml(t),s.key=e,a.insertEntry(s),r[e]=s}return i},e.prototype.get=function(e){var t=this._map[e],a=this._list;if(null!=t)return t!==a.tail&&(a.remove(t),a.insertEntry(t)),t.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),Il={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Al(e){return(e=Math.round(e))<0?0:e>255?255:e}function Pl(e){return e<0?0:e>1?1:e}function Ll(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Al(parseFloat(t)/100*255):Al(parseInt(t,10))}function zl(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Pl(parseFloat(t)/100):Pl(parseFloat(t))}function El(e,t,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?e+(t-e)*a*6:2*a<1?t:3*a<2?e+(t-e)*(2/3-a)*6:e}function Rl(e,t,a){return e+(t-e)*a}function Ol(e,t,a,r,i){return e[0]=t,e[1]=a,e[2]=r,e[3]=i,e}function Fl(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Bl=new Dl(20),ql=null;function Vl(e,t){ql&&Fl(ql,t),ql=Bl.put(e,ql||t.slice())}function Hl(e,t){if(e){t=t||[];var a=Bl.get(e);if(a)return Fl(t,a);var r=(e+="").replace(/ /g,"").toLowerCase();if(r in Il)return Fl(t,Il[r]),Vl(e,t),t;var i,n=r.length;if("#"===r.charAt(0))return 4===n||5===n?(i=parseInt(r.slice(1,4),16))>=0&&i<=4095?(Ol(t,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,5===n?parseInt(r.slice(4),16)/15:1),Vl(e,t),t):void Ol(t,0,0,0,1):7===n||9===n?(i=parseInt(r.slice(1,7),16))>=0&&i<=16777215?(Ol(t,(16711680&i)>>16,(65280&i)>>8,255&i,9===n?parseInt(r.slice(7),16)/255:1),Vl(e,t),t):void Ol(t,0,0,0,1):void 0;var s=r.indexOf("("),o=r.indexOf(")");if(-1!==s&&o+1===n){var l=r.substr(0,s),c=r.substr(s+1,o-(s+1)).split(","),d=1;switch(l){case"rgba":if(4!==c.length)return 3===c.length?Ol(t,+c[0],+c[1],+c[2],1):Ol(t,0,0,0,1);d=zl(c.pop());case"rgb":return c.length>=3?(Ol(t,Ll(c[0]),Ll(c[1]),Ll(c[2]),3===c.length?d:zl(c[3])),Vl(e,t),t):void Ol(t,0,0,0,1);case"hsla":return 4!==c.length?void Ol(t,0,0,0,1):(c[3]=zl(c[3]),Wl(c,t),Vl(e,t),t);case"hsl":return 3!==c.length?void Ol(t,0,0,0,1):(Wl(c,t),Vl(e,t),t);default:return}}Ol(t,0,0,0,1)}}function Wl(e,t){var a=(parseFloat(e[0])%360+360)%360/360,r=zl(e[1]),i=zl(e[2]),n=i<=.5?i*(r+1):i+r-i*r,s=2*i-n;return Ol(t=t||[],Al(255*El(s,n,a+1/3)),Al(255*El(s,n,a)),Al(255*El(s,n,a-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Gl(e,t){var a=Hl(e);if(a){for(var r=0;r<3;r++)a[r]=a[r]*(1-t)|0,a[r]>255?a[r]=255:a[r]<0&&(a[r]=0);return $l(a,4===a.length?"rgba":"rgb")}}function Ul(e,t,a,r){var i=Hl(e);if(e)return i=function(e){if(e){var t,a,r=e[0]/255,i=e[1]/255,n=e[2]/255,s=Math.min(r,i,n),o=Math.max(r,i,n),l=o-s,c=(o+s)/2;if(0===l)t=0,a=0;else{a=c<.5?l/(o+s):l/(2-o-s);var d=((o-r)/6+l/2)/l,u=((o-i)/6+l/2)/l,h=((o-n)/6+l/2)/l;r===o?t=h-u:i===o?t=1/3+d-h:n===o&&(t=2/3+u-d),t<0&&(t+=1),t>1&&(t-=1)}var p=[360*t,a,c];return null!=e[3]&&p.push(e[3]),p}}(i),null!=a&&(i[1]=zl(Yn(a)?a(i[1]):a)),null!=r&&(i[2]=zl(Yn(r)?r(i[2]):r)),$l(Wl(i),"rgba")}function $l(e,t){if(e&&e.length){var a=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(a+=","+e[3]),t+"("+a+")"}}function Yl(e,t){var a=Hl(e);return a?(.299*a[0]+.587*a[1]+.114*a[2])*a[3]/255+(1-a[3])*t:0}var Kl=new Dl(100);function Xl(e){if(Kn(e)){var t=Kl.get(e);return t||(t=Gl(e,-.1),Kl.put(e,t)),t}if(as(e)){var a=zn({},e);return a.colorStops=qn(e.colorStops,function(e){return{offset:e.offset,color:Gl(e.color,-.1)}}),a}return e}fn.hasGlobalWindow&&Yn(window.btoa);var Zl=Array.prototype.slice;function Ql(e,t,a){return(t-e)*a+e}function Jl(e,t,a,r){for(var i=t.length,n=0;n<i;n++)e[n]=Ql(t[n],a[n],r);return e}function ec(e,t,a,r){for(var i=t.length,n=0;n<i;n++)e[n]=t[n]+a[n]*r;return e}function tc(e,t,a,r){for(var i=t.length,n=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var o=0;o<n;o++)e[s][o]=t[s][o]+a[s][o]*r}return e}function ac(e,t){for(var a=e.length,r=t.length,i=a>r?t:e,n=Math.min(a,r),s=i[n-1]||{color:[0,0,0,0],offset:0},o=n;o<Math.max(a,r);o++)i.push({offset:s.offset,color:s.color.slice()})}function rc(e,t,a){var r=e,i=t;if(r.push&&i.push){var n=r.length,s=i.length;if(n!==s)if(n>s)r.length=s;else for(var o=n;o<s;o++)r.push(1===a?i[o]:Zl.call(i[o]));var l=r[0]&&r[0].length;for(o=0;o<r.length;o++)if(1===a)isNaN(r[o])&&(r[o]=i[o]);else for(var c=0;c<l;c++)isNaN(r[o][c])&&(r[o][c]=i[o][c])}}function ic(e){if(Fn(e)){var t=e.length;if(Fn(e[0])){for(var a=[],r=0;r<t;r++)a.push(Zl.call(e[r]));return a}return Zl.call(e)}return e}function nc(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=null==e[3]?1:e[3],"rgba("+e.join(",")+")"}function sc(e){return 4===e||5===e}function oc(e){return 1===e||2===e}var lc=[0,0,0,0],cc=function(){function e(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,t,a){this._needsSort=!0;var r=this.keyframes,i=r.length,n=!1,s=6,o=t;if(Fn(t)){var l=function(e){return Fn(e&&e[0])?2:1}(t);s=l,(1===l&&!Zn(t[0])||2===l&&!Zn(t[0][0]))&&(n=!0)}else if(Zn(t)&&!rs(t))s=0;else if(Kn(t))if(isNaN(+t)){var c=Hl(t);c&&(o=c,s=3)}else s=0;else if(as(t)){var d=zn({},o);d.colorStops=qn(t.colorStops,function(e){return{offset:e.offset,color:Hl(e.color)}}),"linear"===t.type?s=4:function(e){return"radial"===e.type}(t)&&(s=5),o=d}0===i?this.valType=s:s===this.valType&&6!==s||(n=!0),this.discrete=this.discrete||n;var u={time:e,value:o,rawValue:t,percent:0};return a&&(u.easing=a,u.easingFunc=Yn(a)?a:al[a]||Cl(a)),r.push(u),u},e.prototype.prepare=function(e,t){var a=this.keyframes;this._needsSort&&a.sort(function(e,t){return e.time-t.time});for(var r=this.valType,i=a.length,n=a[i-1],s=this.discrete,o=oc(r),l=sc(r),c=0;c<i;c++){var d=a[c],u=d.value,h=n.value;d.percent=d.time/e,s||(o&&c!==i-1?rc(u,h,r):l&&ac(u.colorStops,h.colorStops))}if(!s&&5!==r&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;var p=a[0].value;for(c=0;c<i;c++)0===r?a[c].additiveValue=a[c].value-p:3===r?a[c].additiveValue=ec([],a[c].value,p,-1):oc(r)&&(a[c].additiveValue=1===r?ec([],a[c].value,p,-1):tc([],a[c].value,p,-1))}},e.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var a,r,i,n=null!=this._additiveTrack,s=n?"additiveValue":"value",o=this.valType,l=this.keyframes,c=l.length,d=this.propName,u=3===o,h=this._lastFr,p=Math.min;if(1===c)r=i=l[0];else{if(t<0)a=0;else if(t<this._lastFrP){for(a=p(h+1,c-1);a>=0&&!(l[a].percent<=t);a--);a=p(a,c-2)}else{for(a=h;a<c&&!(l[a].percent>t);a++);a=p(a-1,c-2)}i=l[a+1],r=l[a]}if(r&&i){this._lastFr=a,this._lastFrP=t;var m=i.percent-r.percent,f=0===m?1:p((t-r.percent)/m,1);i.easingFunc&&(f=i.easingFunc(f));var g=n?this._additiveValue:u?lc:e[d];if(!oc(o)&&!u||g||(g=this._additiveValue=[]),this.discrete)e[d]=f<1?r.rawValue:i.rawValue;else if(oc(o))1===o?Jl(g,r[s],i[s],f):function(e,t,a,r){for(var i=t.length,n=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var o=0;o<n;o++)e[s][o]=Ql(t[s][o],a[s][o],r)}}(g,r[s],i[s],f);else if(sc(o)){var x=r[s],v=i[s],y=4===o;e[d]={type:y?"linear":"radial",x:Ql(x.x,v.x,f),y:Ql(x.y,v.y,f),colorStops:qn(x.colorStops,function(e,t){var a=v.colorStops[t];return{offset:Ql(e.offset,a.offset,f),color:nc(Jl([],e.color,a.color,f))}}),global:v.global},y?(e[d].x2=Ql(x.x2,v.x2,f),e[d].y2=Ql(x.y2,v.y2,f)):e[d].r=Ql(x.r,v.r,f)}else if(u)Jl(g,r[s],i[s],f),n||(e[d]=nc(g));else{var b=Ql(r[s],i[s],f);n?this._additiveValue=b:e[d]=b}n&&this._addToTarget(e)}}},e.prototype._addToTarget=function(e){var t=this.valType,a=this.propName,r=this._additiveValue;0===t?e[a]=e[a]+r:3===t?(Hl(e[a],lc),ec(lc,lc,r,1),e[a]=nc(lc)):1===t?ec(e[a],e[a],r,1):2===t&&tc(e[a],e[a],r,1)},e}(),dc=function(){function e(e,t,a,r){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r?An("Can' use additive animation on looped animation."):(this._additiveAnimators=r,this._allowDiscrete=a)}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(e){this._target=e},e.prototype.when=function(e,t,a){return this.whenWithKeys(e,t,Wn(t),a)},e.prototype.whenWithKeys=function(e,t,a,r){for(var i=this._tracks,n=0;n<a.length;n++){var s=a[n],o=i[s];if(!o){o=i[s]=new cc(s);var l=void 0,c=this._getAdditiveTrack(s);if(c){var d=c.keyframes,u=d[d.length-1];l=u&&u.value,3===c.valType&&l&&(l=nc(l))}else l=this._target[s];if(null==l)continue;e>0&&o.addKeyframe(0,ic(l),r),this._trackKeys.push(s)}o.addKeyframe(e,ic(t[s]),r)}return this._maxTime=Math.max(this._maxTime,e),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,a=0;a<t;a++)e[a].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var a=0;a<t.length;a++)t[a].call(this)},e.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,a=0;a<t.length;a++)e[t[a]].setFinished()},e.prototype._getAdditiveTrack=function(e){var t,a=this._additiveAnimators;if(a)for(var r=0;r<a.length;r++){var i=a[r].getTrack(e);i&&(t=i)}return t},e.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,a=[],r=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var n=this._trackKeys[i],s=this._tracks[n],o=this._getAdditiveTrack(n),l=s.keyframes,c=l.length;if(s.prepare(r,o),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=l[c-1];d&&(t._target[s.propName]=d.rawValue),s.setFinished()}else a.push(s)}if(a.length||this._force){var u=new kl({life:r,loop:this._loop,delay:this._delay||0,onframe:function(e){t._started=2;var r=t._additiveAnimators;if(r){for(var i=!1,n=0;n<r.length;n++)if(r[n]._clip){i=!0;break}i||(t._additiveAnimators=null)}for(n=0;n<a.length;n++)a[n].step(t._target,e);var s=t._onframeCbs;if(s)for(n=0;n<s.length;n++)s[n](t._target,e)},ondestroy:function(){t._doneCallback()}});this._clip=u,this.animation&&this.animation.addClip(u),e&&u.setEasing(e)}else this._doneCallback();return this}},e.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},e.prototype.delay=function(e){return this._delay=e,this},e.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},e.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},e.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(e){return this._tracks[e]},e.prototype.getTracks=function(){var e=this;return qn(this._trackKeys,function(t){return e._tracks[t]})},e.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var a=this._tracks,r=this._trackKeys,i=0;i<e.length;i++){var n=a[e[i]];n&&!n.isFinished()&&(t?n.step(this._target,1):1===this._started&&n.step(this._target,0),n.setFinished())}var s=!0;for(i=0;i<r.length;i++)if(!a[r[i]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(e,t,a){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var i=t[r],n=this._tracks[i];if(n&&!n.isFinished()){var s=n.keyframes,o=s[a?0:s.length-1];o&&(e[i]=ic(o.rawValue))}}}},e.prototype.__changeFinalValue=function(e,t){t=t||Wn(e);for(var a=0;a<t.length;a++){var r=t[a],i=this._tracks[r];if(i){var n=i.keyframes;if(n.length>1){var s=n.pop();i.addKeyframe(s.time,e[r]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},e}();function uc(){return(new Date).getTime()}var hc,pc,mc=function(e){function t(t){var a=e.call(this)||this;return a._running=!1,a._time=0,a._pausedTime=0,a._pauseStart=0,a._paused=!1,t=t||{},a.stage=t.stage||{},a}return Ns(t,e),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var t=e.getClip();t&&this.addClip(t)},t.prototype.removeClip=function(e){if(e.animation){var t=e.prev,a=e.next;t?t.next=a:this._head=a,a?a.prev=t:this._tail=t,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var t=e.getClip();t&&this.removeClip(t),e.animation=null},t.prototype.update=function(e){for(var t=uc()-this._pausedTime,a=t-this._time,r=this._head;r;){var i=r.next;r.step(t,a)?(r.ondestroy(),this.removeClip(r),r=i):r=i}this._time=t,e||(this.trigger("frame",a),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,el(function t(){e._running&&(el(t),!e._paused&&e.update())})},t.prototype.start=function(){this._running||(this._time=uc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=uc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=uc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var t=e.next;e.prev=e.next=e.animation=null,e=t}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,t){t=t||{},this.start();var a=new dc(e,t.loop);return this.addAnimator(a),a},t}(Bs),fc=fn.domSupported,gc=(pc={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:hc=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:qn(hc,function(e){var t=e.replace("mouse","pointer");return pc.hasOwnProperty(t)?t:e})}),xc=["mousemove","mouseup"],vc=["pointermove","pointerup"],yc=!1;function bc(e){var t=e.pointerType;return"pen"===t||"touch"===t}function _c(e){e&&(e.zrByTouch=!0)}function jc(e,t){for(var a=t,r=!1;a&&9!==a.nodeType&&!(r=a.domBelongToZr||a!==t&&a===e.painterRoot);)a=a.parentNode;return r}var wc=function(){return function(e,t){this.stopPropagation=_s,this.stopImmediatePropagation=_s,this.preventDefault=_s,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}}(),Nc={mousedown:function(e){e=ro(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=ro(this.dom,e);var t=this.__mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=ro(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){jc(this,(e=ro(this.dom,e)).toElement||e.relatedTarget)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){yc=!0,e=ro(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){yc||(e=ro(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){_c(e=ro(this.dom,e)),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Nc.mousemove.call(this,e),Nc.mousedown.call(this,e)},touchmove:function(e){_c(e=ro(this.dom,e)),this.handler.processGesture(e,"change"),Nc.mousemove.call(this,e)},touchend:function(e){_c(e=ro(this.dom,e)),this.handler.processGesture(e,"end"),Nc.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<300&&Nc.click.call(this,e)},pointerdown:function(e){Nc.mousedown.call(this,e)},pointermove:function(e){bc(e)||Nc.mousemove.call(this,e)},pointerup:function(e){Nc.mouseup.call(this,e)},pointerout:function(e){bc(e)||Nc.mouseout.call(this,e)}};Bn(["click","dblclick","contextmenu"],function(e){Nc[e]=function(t){t=ro(this.dom,t),this.trigger(e,t)}});var Sc={pointermove:function(e){bc(e)||Sc.mousemove.call(this,e)},pointerup:function(e){Sc.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Cc(e,t){var a=t.domHandlers;fn.pointerEventsSupported?Bn(gc.pointer,function(r){Mc(t,r,function(t){a[r].call(e,t)})}):(fn.touchEventsSupported&&Bn(gc.touch,function(r){Mc(t,r,function(i){a[r].call(e,i),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}(t)})}),Bn(gc.mouse,function(r){Mc(t,r,function(i){i=ao(i),t.touching||a[r].call(e,i)})}))}function kc(e,t){function a(a){Mc(t,a,function(r){r=ao(r),jc(e,r.target)||(r=function(e,t){return ro(e.dom,new wc(e,t),!0)}(e,r),t.domHandlers[a].call(e,r))},{capture:!0})}fn.pointerEventsSupported?Bn(vc,a):fn.touchEventsSupported||Bn(xc,a)}function Mc(e,t,a,r){e.mounted[t]=a,e.listenerOpts[t]=r,function(e,t,a,r){e.addEventListener(t,a,r)}(e.domTarget,t,a,r)}function Tc(e){var t=e.mounted;for(var a in t)t.hasOwnProperty(a)&&io(e.domTarget,a,t[a],e.listenerOpts[a]);e.mounted={}}var Dc=function(){return function(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}}(),Ic=function(e){function t(t,a){var r=e.call(this)||this;return r.__pointerCapturing=!1,r.dom=t,r.painterRoot=a,r._localHandlerScope=new Dc(t,Nc),fc&&(r._globalHandlerScope=new Dc(document,Sc)),Cc(r,r._localHandlerScope),r}return Ns(t,e),t.prototype.dispose=function(){Tc(this._localHandlerScope),fc&&Tc(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,fc&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var t=this._globalHandlerScope;e?kc(this,t):Tc(t)}},t}(Bs),Ac=1;fn.hasGlobalWindow&&(Ac=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Pc=Ac,Lc="#333",zc="#ccc",Ec=co,Rc=5e-5;function Oc(e){return e>Rc||e<-5e-5}var Fc,Bc=[],qc=[],Vc=[1,0,0,1,0,0],Hc=Math.abs,Wc=function(){function e(){}var t;return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},e.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},e.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},e.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},e.prototype.needLocalTransform=function(){return Oc(this.rotation)||Oc(this.x)||Oc(this.y)||Oc(this.scaleX-1)||Oc(this.scaleY-1)||Oc(this.skewX)||Oc(this.skewY)},e.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),a=this.transform;t||e?(a=a||[1,0,0,1,0,0],t?this.getLocalTransform(a):Ec(a),e&&(t?ho(a,e,a):uo(a,e)),this.transform=a,this._resolveGlobalScaleRatio(a)):a&&(Ec(a),this.invTransform=null)},e.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(Bc);var a=Bc[0]<0?-1:1,r=Bc[1]<0?-1:1,i=((Bc[0]-a)*t+a)/Bc[0]||0,n=((Bc[1]-r)*t+r)/Bc[1]||0;e[0]*=i,e[1]*=i,e[2]*=n,e[3]*=n}this.invTransform=this.invTransform||[1,0,0,1,0,0],fo(this.invTransform,e)},e.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},e.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],a=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),i=Math.PI/2+r-Math.atan2(e[3],e[2]);a=Math.sqrt(a)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=a,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||[1,0,0,1,0,0],ho(qc,e.invTransform,t),t=qc);var a=this.originX,r=this.originY;(a||r)&&(Vc[4]=a,Vc[5]=r,ho(qc,t,Vc),qc[4]-=a,qc[5]-=r,t=qc),this.setLocalTransform(t)}},e.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},e.prototype.transformCoordToLocal=function(e,t){var a=[e,t],r=this.invTransform;return r&&zs(a,a,r),a},e.prototype.transformCoordToGlobal=function(e,t){var a=[e,t],r=this.transform;return r&&zs(a,a,r),a},e.prototype.getLineScale=function(){var e=this.transform;return e&&Hc(e[0]-1)>1e-10&&Hc(e[3]-1)>1e-10?Math.sqrt(Hc(e[0]*e[3]-e[2]*e[1])):1},e.prototype.copyTransform=function(e){Uc(this,e)},e.getLocalTransform=function(e,t){t=t||[];var a=e.originX||0,r=e.originY||0,i=e.scaleX,n=e.scaleY,s=e.anchorX,o=e.anchorY,l=e.rotation||0,c=e.x,d=e.y,u=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(a||r||s||o){var p=a+s,m=r+o;t[4]=-p*i-u*m*n,t[5]=-m*n-h*p*i}else t[4]=t[5]=0;return t[0]=i,t[3]=n,t[1]=h*i,t[2]=u*n,l&&mo(t,t,l),t[4]+=a+c,t[5]+=r+d,t},e.initDefaultProps=((t=e.prototype).scaleX=t.scaleY=t.globalScaleRatio=1,void(t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0)),e}(),Gc=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Uc(e,t){for(var a=0;a<Gc.length;a++){var r=Gc[a];e[r]=t[r]}}function $c(e){Fc||(Fc=new Dl(100)),e=e||gn;var t=Fc.get(e);return t||(t={font:e,strWidthCache:new Dl(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:vn.measureText("",e).width,asciiCharWidth:vn.measureText("a",e).width},Fc.put(e,t)),t}var Yc=0,Kc=5;function Xc(e,t){return e.asciiWidthMapTried||(e.asciiWidthMap=function(e){if(!(Yc>=Kc)){e=e||gn;for(var t=[],a=+new Date,r=0;r<=127;r++)t[r]=vn.measureText(String.fromCharCode(r),e).width;var i=+new Date-a;return i>16?Yc=Kc:i>2&&Yc++,t}}(e.font),e.asciiWidthMapTried=!0),0<=t&&t<=127?null!=e.asciiWidthMap?e.asciiWidthMap[t]:e.asciiCharWidth:e.stWideCharWidth}function Zc(e,t){var a=e.strWidthCache,r=a.get(t);return null==r&&(r=vn.measureText(t,e.font).width,a.put(t,r)),r}function Qc(e,t,a,r){var i=Zc($c(t),e),n=ad(t),s=ed(0,i,a),o=td(0,n,r);return new Do(s,o,i,n)}function Jc(e,t,a,r){var i=((e||"")+"").split("\n");if(1===i.length)return Qc(i[0],t,a,r);for(var n=new Do(0,0,0,0),s=0;s<i.length;s++){var o=Qc(i[s],t,a,r);0===s?n.copy(o):n.union(o)}return n}function ed(e,t,a,r){return"right"===a?r?e+=t:e-=t:"center"===a&&(r?e+=t/2:e-=t/2),e}function td(e,t,a,r){return"middle"===a?r?e+=t/2:e-=t/2:"bottom"===a&&(r?e+=t:e-=t),e}function ad(e){return $c(e).stWideCharWidth}function rd(e,t){return"string"==typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function id(e,t,a){var r=t.position||"inside",i=null!=t.distance?t.distance:5,n=a.height,s=a.width,o=n/2,l=a.x,c=a.y,d="left",u="top";if(r instanceof Array)l+=rd(r[0],a.width),c+=rd(r[1],a.height),d=null,u=null;else switch(r){case"left":l-=i,c+=o,d="right",u="middle";break;case"right":l+=i+s,c+=o,u="middle";break;case"top":l+=s/2,c-=i,d="center",u="bottom";break;case"bottom":l+=s/2,c+=n+i,d="center";break;case"inside":l+=s/2,c+=o,d="center",u="middle";break;case"insideLeft":l+=i,c+=o,u="middle";break;case"insideRight":l+=s-i,c+=o,d="right",u="middle";break;case"insideTop":l+=s/2,c+=i,d="center";break;case"insideBottom":l+=s/2,c+=n-i,d="center",u="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=s-i,c+=i,d="right";break;case"insideBottomLeft":l+=i,c+=n-i,u="bottom";break;case"insideBottomRight":l+=s-i,c+=n-i,d="right",u="bottom"}return(e=e||{}).x=l,e.y=c,e.align=d,e.verticalAlign=u,e}var nd="__zr_normal__",sd=Gc.concat(["ignore"]),od=Vn(Gc,function(e,t){return e[t]=!0,e},{ignore:!1}),ld={},cd=new Do(0,0,0,0),dd=[],ud=function(){function e(e){this.id=In(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return e.prototype._init=function(e){this.attr(e)},e.prototype.drift=function(e,t,a){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var a=this.textConfig,r=a.local,i=t.innerTransformable,n=void 0,s=void 0,o=!1;i.parent=r?this:null;var l=!1;i.copyTransform(t);var c=null!=a.position,d=a.autoOverflowArea,u=void 0;if((d||c)&&(u=cd,a.layoutRect?u.copy(a.layoutRect):u.copy(this.getBoundingRect()),r||u.applyTransform(this.transform)),c){this.calculateTextPosition?this.calculateTextPosition(ld,a,u):id(ld,a,u),i.x=ld.x,i.y=ld.y,n=ld.align,s=ld.verticalAlign;var h=a.origin;if(h&&null!=a.rotation){var p=void 0,m=void 0;"center"===h?(p=.5*u.width,m=.5*u.height):(p=rd(h[0],u.width),m=rd(h[1],u.height)),l=!0,i.originX=-i.x+p+(r?0:u.x),i.originY=-i.y+m+(r?0:u.y)}}null!=a.rotation&&(i.rotation=a.rotation);var f=a.offset;f&&(i.x+=f[0],i.y+=f[1],l||(i.originX=-f[0],i.originY=-f[1]));var g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(d){var x=g.overflowRect=g.overflowRect||new Do(0,0,0,0);i.getLocalTransform(dd),fo(dd,dd),Do.copy(x,u),x.applyTransform(dd)}else g.overflowRect=null;var v=void 0,y=void 0,b=void 0;(null==a.inside?"string"==typeof a.position&&a.position.indexOf("inside")>=0:a.inside)&&this.canBeInsideText()?(v=a.insideFill,y=a.insideStroke,null!=v&&"auto"!==v||(v=this.getInsideTextFill()),null!=y&&"auto"!==y||(y=this.getInsideTextStroke(v),b=!0)):(v=a.outsideFill,y=a.outsideStroke,null!=v&&"auto"!==v||(v=this.getOutsideFill()),null!=y&&"auto"!==y||(y=this.getOutsideStroke(v),b=!0)),(v=v||"#000")===g.fill&&y===g.stroke&&b===g.autoStroke&&n===g.align&&s===g.verticalAlign||(o=!0,g.fill=v,g.stroke=y,g.autoStroke=b,g.align=n,g.verticalAlign=s,t.setDefaultTextStyle(g)),t.__dirty|=1,o&&t.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(e){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?zc:Lc},e.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),a="string"==typeof t&&Hl(t);a||(a=[255,255,255,1]);for(var r=a[3],i=this.__zr.isDarkMode(),n=0;n<3;n++)a[n]=a[n]*r+(i?0:255)*(1-r);return a[3]=1,$l(a,"rgba")},e.prototype.traverse=function(e,t){},e.prototype.attrKV=function(e,t){"textConfig"===e?this.setTextConfig(t):"textContent"===e?this.setTextContent(t):"clipPath"===e?this.setClipPath(t):"extra"===e?(this.extra=this.extra||{},zn(this.extra,t)):this[e]=t},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(Qn(e))for(var a=Wn(e),r=0;r<a.length;r++){var i=a[r];this.attrKV(i,e[i])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,a=0;a<this.animators.length;a++){var r=this.animators[a],i=r.__fromStateTransition;if(!(r.getLoop()||i&&i!==nd)){var n=r.targetName,s=n?t[n]:t;r.saveTo(s)}}},e.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,sd)},e.prototype._savePrimaryToNormal=function(e,t,a){for(var r=0;r<a.length;r++){var i=a[r];null==e[i]||i in t||(t[i]=this[i])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(e){return this.states[e]},e.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},e.prototype.clearStates=function(e){this.useState(nd,!1,e)},e.prototype.useState=function(e,t,a,r){var i=e===nd;if(this.hasState()||!i){var n=this.currentStates,s=this.stateTransition;if(!(Rn(n,e)>=0)||!t&&1!==n.length){var o;if(this.stateProxy&&!i&&(o=this.stateProxy(e)),o||(o=this.states&&this.states[e]),o||i){i||this.saveCurrentToNormalState(o);var l=!!(o&&o.hoverLayer||r);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,o,this._normalState,t,!a&&!this.__inHover&&s&&s.duration>0,s);var c=this._textContent,d=this._textGuide;return c&&c.useState(e,t,a,l),d&&d.useState(e,t,a,l),i?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),o}An("State "+e+" not exists.")}}},e.prototype.useStates=function(e,t,a){if(e.length){var r=[],i=this.currentStates,n=e.length,s=n===i.length;if(s)for(var o=0;o<n;o++)if(e[o]!==i[o]){s=!1;break}if(s)return;for(o=0;o<n;o++){var l=e[o],c=void 0;this.stateProxy&&(c=this.stateProxy(l,e)),c||(c=this.states[l]),c&&r.push(c)}var d=r[n-1],u=!!(d&&d.hoverLayer||a);u&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,f=this._textGuide;m&&m.useStates(e,t,u),f&&f.useStates(e,t,u),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},e.prototype.isSilent=function(){for(var e=this;e;){if(e.silent)return!0;var t=e.__hostTarget;e=t?e.ignoreHostSilent?null:t:e.parent}return!1},e.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},e.prototype.removeState=function(e){var t=Rn(this.currentStates,e);if(t>=0){var a=this.currentStates.slice();a.splice(t,1),this.useStates(a)}},e.prototype.replaceState=function(e,t,a){var r=this.currentStates.slice(),i=Rn(r,e),n=Rn(r,t)>=0;i>=0?n?r.splice(i,1):r[i]=t:a&&!n&&r.push(t),this.useStates(r)},e.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},e.prototype._mergeStates=function(e){for(var t,a={},r=0;r<e.length;r++){var i=e[r];zn(a,i),i.textConfig&&zn(t=t||{},i.textConfig)}return t&&(a.textConfig=t),a},e.prototype._applyStateObj=function(e,t,a,r,i,n){var s=!(t&&r);t&&t.textConfig?(this.textConfig=zn({},r?this.textConfig:a.textConfig),zn(this.textConfig,t.textConfig)):s&&a.textConfig&&(this.textConfig=a.textConfig);for(var o={},l=!1,c=0;c<sd.length;c++){var d=sd[c],u=i&&od[d];t&&null!=t[d]?u?(l=!0,o[d]=t[d]):this[d]=t[d]:s&&null!=a[d]&&(u?(l=!0,o[d]=a[d]):this[d]=a[d])}if(!i)for(c=0;c<this.animators.length;c++){var h=this.animators[c],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||a)[p]:t||a)}l&&this._transitionState(e,o,n)},e.prototype._attachComponent=function(e){if((!e.__zr||e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},e.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},e.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new Wc,this._attachComponent(e),this._textContent=e,this.markRedraw())},e.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),zn(this.textConfig,e),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=1;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,a=this._textGuide;t&&(t.__inHover=e),a&&(a.__inHover=e)},e.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var a=0;a<t.length;a++)e.animation.addAnimator(t[a]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var a=0;a<t.length;a++)e.animation.removeAnimator(t[a]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},e.prototype.animate=function(e,t,a){var r=e?this[e]:this,i=new dc(r,t,a);return e&&(i.targetName=e),this.addAnimator(i,e),i},e.prototype.addAnimator=function(e,t){var a=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var t=r.animators,a=Rn(t,e);a>=0&&t.splice(a,1)}),this.animators.push(e),a&&a.animation.addAnimator(e),a&&a.wakeUp()},e.prototype.updateDuringAnimation=function(e){this.markRedraw()},e.prototype.stopAnimation=function(e,t){for(var a=this.animators,r=a.length,i=[],n=0;n<r;n++){var s=a[n];e&&e!==s.scope?i.push(s):s.stop(t)}return this.animators=i,this},e.prototype.animateTo=function(e,t,a){hd(this,e,t,a)},e.prototype.animateFrom=function(e,t,a){hd(this,e,t,a,!0)},e.prototype._transitionState=function(e,t,a,r){for(var i=hd(this,t,a,r),n=0;n<i.length;n++)i[n].__fromStateTransition=e},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;function a(e,a,r,i){function n(e,t){Object.defineProperty(t,0,{get:function(){return e[r]},set:function(t){e[r]=t}}),Object.defineProperty(t,1,{get:function(){return e[i]},set:function(t){e[i]=t}})}Object.defineProperty(t,e,{get:function(){this[a]||n(this,this[a]=[]);return this[a]},set:function(e){this[r]=e[0],this[i]=e[1],this[a]=e,n(this,e)}})}t.type="element",t.name="",t.ignore=t.silent=t.ignoreHostSilent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1,Object.defineProperty&&(a("position","_legacyPos","x","y"),a("scale","_legacyScale","scaleX","scaleY"),a("origin","_legacyOrigin","originX","originY"))}(),e}();function hd(e,t,a,r,i){var n=[];fd(e,"",e,t,a=a||{},r,n,i);var s=n.length,o=!1,l=a.done,c=a.aborted,d=function(){o=!0,--s<=0&&(o?l&&l():c&&c())},u=function(){--s<=0&&(o?l&&l():c&&c())};s||l&&l(),n.length>0&&a.during&&n[0].during(function(e,t){a.during(t)});for(var h=0;h<n.length;h++){var p=n[h];d&&p.done(d),u&&p.aborted(u),a.force&&p.duration(a.duration),p.start(a.easing)}return n}function pd(e,t,a){for(var r=0;r<a;r++)e[r]=t[r]}function md(e,t,a){if(Fn(t[a]))if(Fn(e[a])||(e[a]=[]),es(t[a])){var r=t[a].length;e[a].length!==r&&(e[a]=new t[a].constructor(r),pd(e[a],t[a],r))}else{var i=t[a],n=e[a],s=i.length;if(Fn(i[0]))for(var o=i[0].length,l=0;l<s;l++)n[l]?pd(n[l],i[l],o):n[l]=Array.prototype.slice.call(i[l]);else pd(n,i,s);n.length=i.length}else e[a]=t[a]}function fd(e,t,a,r,i,n,s,o){for(var l=Wn(r),c=i.duration,d=i.delay,u=i.additive,h=i.setToFinal,p=!Qn(n),m=e.animators,f=[],g=0;g<l.length;g++){var x=l[g],v=r[x];if(null!=v&&null!=a[x]&&(p||n[x]))if(!Qn(v)||Fn(v)||as(v))f.push(x);else{if(t){o||(a[x]=v,e.updateDuringAnimation(t));continue}fd(e,x,a[x],v,i,n&&n[x],s,o)}else o||(a[x]=v,e.updateDuringAnimation(t),f.push(x))}var y=f.length;if(!u&&y)for(var b=0;b<m.length;b++){if((j=m[b]).targetName===t)if(j.stopTracks(f)){var _=Rn(m,j);m.splice(_,1)}}if(i.force||(f=Hn(f,function(e){return t=r[e],i=a[e],!(t===i||Fn(t)&&Fn(i)&&function(e,t){var a=e.length;if(a!==t.length)return!1;for(var r=0;r<a;r++)if(e[r]!==t[r])return!1;return!0}(t,i));var t,i}),y=f.length),y>0||i.force&&!s.length){var j,w=void 0,N=void 0,S=void 0;if(o){N={},h&&(w={});for(b=0;b<y;b++){N[x=f[b]]=a[x],h?w[x]=r[x]:a[x]=r[x]}}else if(h){S={};for(b=0;b<y;b++){S[x=f[b]]=ic(a[x]),md(a,r,x)}}(j=new dc(a,!1,!1,u?Hn(m,function(e){return e.targetName===t}):null)).targetName=t,i.scope&&(j.scope=i.scope),h&&w&&j.whenWithKeys(0,w,f),S&&j.whenWithKeys(0,S,f),j.whenWithKeys(null==c?500:c,o?N:r,f).delay(d||0),e.addAnimator(j,t),s.push(j)}}On(ud,Bs),On(ud,Wc);var gd=function(e){function t(t){var a=e.call(this)||this;return a.isGroup=!0,a._children=[],a.attr(t),a}return Ns(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var t=this._children,a=0;a<t.length;a++)if(t[a].name===e)return t[a]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var a=this._children,r=a.indexOf(t);r>=0&&(a.splice(r,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,t){var a=Rn(this._children,e);return a>=0&&this.replaceAt(t,a),this},t.prototype.replaceAt=function(e,t){var a=this._children,r=a[t];if(e&&e!==this&&e.parent!==this&&e!==r){a[t]=e,r.parent=null;var i=this.__zr;i&&r.removeSelfFromZr(i),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__zr;t&&t!==e.__zr&&e.addSelfToZr(t),t&&t.refresh()},t.prototype.remove=function(e){var t=this.__zr,a=this._children,r=Rn(a,e);return r<0||(a.splice(r,1),e.parent=null,t&&e.removeSelfFromZr(t),t&&t.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,t=this.__zr,a=0;a<e.length;a++){var r=e[a];t&&r.removeSelfFromZr(t),r.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,t){for(var a=this._children,r=0;r<a.length;r++){var i=a[r];e.call(t,i,r)}return this},t.prototype.traverse=function(e,t){for(var a=0;a<this._children.length;a++){var r=this._children[a],i=e.call(t,r);r.isGroup&&!i&&r.traverse(e,t)}return this},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var a=0;a<this._children.length;a++){this._children[a].addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var a=0;a<this._children.length;a++){this._children[a].removeSelfFromZr(t)}},t.prototype.getBoundingRect=function(e){for(var t=new Do(0,0,0,0),a=e||this._children,r=[],i=null,n=0;n<a.length;n++){var s=a[n];if(!s.ignore&&!s.invisible){var o=s.getBoundingRect(),l=s.getLocalTransform(r);l?(Do.applyTransform(t,o,l),(i=i||t.clone()).union(t)):(i=i||o.clone()).union(o)}}return i||t},t}(ud);gd.prototype.type="group";
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var xd={},vd={};var yd=function(){function e(e,t,a){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,a=a||{},this.dom=t,this.id=e;var i=new tl,n=a.renderer||"canvas";xd[n]||(n=Wn(xd)[0]),a.useDirtyRect=null!=a.useDirtyRect&&a.useDirtyRect;var s=new xd[n](t,i,a,e),o=a.ssr||s.ssrOnly;this.storage=i,this.painter=s;var l,c=fn.node||fn.worker||o?null:new Ic(s.getViewportRoot(),s.root),d=a.useCoarsePointer;(null==d||"auto"===d?fn.touchEventsSupported:!!d)&&(l=ns(a.pointerSize,44)),this.handler=new qo(i,s,c,s.root,l),this.animation=new mc({stage:{update:o?null:function(){return r._flush(!0)}}}),o||this.animation.start()}return e.prototype.add=function(e){!this._disposed&&e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},e.prototype.remove=function(e){!this._disposed&&e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},e.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return Yl(e,1)<.4;if(e.colorStops){for(var t=e.colorStops,a=0,r=t.length,i=0;i<r;i++)a+=Yl(t[i].color,1);return(a/=r)<.4}return!1}(e))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(e){this._darkMode=e},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(e){var t,a=uc();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=uc();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-a})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},e.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},e.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},e.prototype.on=function(e,t,a){return this._disposed||this.handler.on(e,t,a),this},e.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},e.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},e.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof gd&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){var e;this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,e=this.id,delete vd[e])},e}();function bd(e,t){var a=new yd(In(),e,t);return vd[a.id]=a,a}var _d=1e-4;var jd=Math.min,wd=Math.max,Nd=Math.abs;function Sd(e,t,a,r){var i=t[0],n=t[1],s=a[0],o=a[1],l=n-i,c=o-s;if(0===l)return 0===c?s:(s+o)/2;if(r)if(l>0){if(e<=i)return s;if(e>=n)return o}else{if(e>=i)return s;if(e<=n)return o}else{if(e===i)return s;if(e===n)return o}return(e-i)/l*c+s}var Cd=function(e,t,a){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return kd(e,t,a)};function kd(e,t,a){return Kn(e)?(r=e,r.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t+(a||0):parseFloat(e):null==e?NaN:+e;var r}function Md(e,t,a){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),a?e:+e}function Td(e){if(e=+e,isNaN(e))return 0;if(e>1e-14)for(var t=1,a=0;a<15;a++,t*=10)if(Math.round(e*t)/t===e)return a;return function(e){var t=e.toString().toLowerCase(),a=t.indexOf("e"),r=a>0?+t.slice(a+1):0,i=a>0?a:t.length,n=t.indexOf("."),s=n<0?0:i-1-n;return Math.max(0,s-r)}(e)}function Dd(e,t){var a=Math.max(Td(e),Td(t)),r=e+t;return a>20?r:Md(r,a)}function Id(e){var t=2*Math.PI;return(e%t+t)%t}function Ad(e){return e>-1e-4&&e<_d}var Pd=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ld(e){if(e instanceof Date)return e;if(Kn(e)){var t=Pd.exec(e);if(!t)return new Date(NaN);if(t[8]){var a=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(a-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,a,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}return null==e?new Date(NaN):new Date(Math.round(e))}function zd(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function Ed(e,t){var a=zd(e),r=Math.pow(10,a),i=e/r;return e=(i<1.5?1:i<2.5?2:i<4?3:i<7?5:10)*r,a>=-20?+e.toFixed(a<0?-a:0):e}function Rd(e){var t=parseFloat(e);return t==e&&(0!==t||!Kn(e)||e.indexOf("x")<=0)?t:NaN}function Od(){return Math.round(9*Math.random())}function Fd(e,t){return 0===t?e:Fd(t,e%t)}function Bd(e,t){return null==e?t:null==t?e:e*t/Fd(e,t)}"undefined"!=typeof console&&console.warn&&console.log;function qd(e,t){}function Vd(e){throw new Error(e)}function Hd(e,t,a){return(t-e)*a+e}var Wd="series\0";function Gd(e){return e instanceof Array?e:null==e?[]:[e]}function Ud(e,t,a){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,i=a.length;r<i;r++){var n=a[r];!e.emphasis[t].hasOwnProperty(n)&&e[t].hasOwnProperty(n)&&(e.emphasis[t][n]=e[t][n])}}}var $d=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Yd(e){return!Qn(e)||$n(e)||e instanceof Date?e:e.value}function Kd(e){return Qn(e)&&!(e instanceof Array)}function Xd(e,t,a){var r="normalMerge"===a,i="replaceMerge"===a,n="replaceAll"===a;e=e||[],t=(t||[]).slice();var s=xs();Bn(t,function(e,a){Qn(e)||(t[a]=null)});var o,l,c=function(e,t,a){var r=[];if("replaceAll"===a)return r;for(var i=0;i<e.length;i++){var n=e[i];n&&null!=n.id&&t.set(n.id,i),r.push({existing:"replaceMerge"===a||tu(n)?null:n,newOption:null,keyInfo:null,brandNew:null})}return r}(e,s,a);return(r||i)&&function(e,t,a,r){Bn(r,function(i,n){if(i&&null!=i.id){var s=Qd(i.id),o=a.get(s);if(null!=o){var l=e[o];cs(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=t[o],r[n]=null}}})}(c,e,s,t),r&&function(e,t){Bn(t,function(a,r){if(a&&null!=a.name)for(var i=0;i<e.length;i++){var n=e[i].existing;if(!e[i].newOption&&n&&(null==n.id||null==a.id)&&!tu(a)&&!tu(n)&&Zd("name",n,a))return e[i].newOption=a,void(t[r]=null)}})}(c,t),r||i?function(e,t,a){Bn(t,function(t){if(t){for(var r,i=0;(r=e[i])&&(r.newOption||tu(r.existing)||r.existing&&null!=t.id&&!Zd("id",t,r.existing));)i++;r?(r.newOption=t,r.brandNew=a):e.push({newOption:t,brandNew:a,existing:null,keyInfo:null}),i++}})}(c,t,i):n&&function(e,t){Bn(t,function(t){e.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}(c,t),o=c,l=xs(),Bn(o,function(e){var t=e.existing;t&&l.set(t.id,e)}),Bn(o,function(e){var t=e.newOption;cs(!t||null==t.id||!l.get(t.id)||l.get(t.id)===e,"id duplicates: "+(t&&t.id)),t&&null!=t.id&&l.set(t.id,e),!e.keyInfo&&(e.keyInfo={})}),Bn(o,function(e,t){var a=e.existing,r=e.newOption,i=e.keyInfo;if(Qn(r)){if(i.name=null!=r.name?Qd(r.name):a?a.name:Wd+t,a)i.id=Qd(a.id);else if(null!=r.id)i.id=Qd(r.id);else{var n=0;do{i.id="\0"+i.name+"\0"+n++}while(l.get(i.id))}l.set(i.id,e)}}),c}function Zd(e,t,a){var r=Jd(t[e],null),i=Jd(a[e],null);return null!=r&&null!=i&&r===i}function Qd(e){return Jd(e,"")}function Jd(e,t){return null==e?t:Kn(e)?e:Zn(e)||Xn(e)?e+"":t}function eu(e){var t=e.name;return!(!t||!t.indexOf(Wd))}function tu(e){return e&&null!=e.id&&0===Qd(e.id).indexOf("\0_ec_\0")}function au(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?$n(t.dataIndex)?qn(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?$n(t.name)?qn(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0}function ru(){var e="__ec_inner_"+iu++;return function(t){return t[e]||(t[e]={})}}var iu=Od();function nu(e,t,a){var r=su(t,a),i=r.mainTypeSpecified,n=r.queryOptionMap,s=r.others,o=a?a.defaultMainType:null;return!i&&o&&n.set(o,{}),n.each(function(t,r){var i=lu(e,r,t,{useDefault:o===r,enableAll:!a||null==a.enableAll||a.enableAll,enableNone:!a||null==a.enableNone||a.enableNone});s[r+"Models"]=i.models,s[r+"Model"]=i.models[0]}),s}function su(e,t){var a;if(Kn(e)){var r={};r[e+"Index"]=0,a=r}else a=e;var i=xs(),n={},s=!1;return Bn(a,function(e,a){if("dataIndex"!==a&&"dataIndexInside"!==a){var r=a.match(/^(\w+)(Index|Id|Name)$/)||[],o=r[1],l=(r[2]||"").toLowerCase();if(o&&l&&!(t&&t.includeMainTypes&&Rn(t.includeMainTypes,o)<0))s=s||!!o,(i.get(o)||i.set(o,{}))[l]=e}else n[a]=e}),{mainTypeSpecified:s,queryOptionMap:i,others:n}}var ou={useDefault:!0,enableAll:!1,enableNone:!1};function lu(e,t,a,r){r=r||ou;var i=a.index,n=a.id,s=a.name,o={models:null,specified:null!=i||null!=n||null!=s};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=e.getComponent(t))?[l]:[],o}if("none"===i||!1===i){if(r.enableNone)return o.models=[],o;i=-1}return"all"===i&&(i=r.enableAll?n=s=null:-1),o.models=e.queryComponents({mainType:t,index:i,id:n,name:s}),o}function cu(e,t,a){e.setAttribute?e.setAttribute(t,a):e[t]=a}var du="___EC__COMPONENT__CONTAINER___",uu="___EC__EXTENDED_CLASS___";function hu(e){var t={main:"",sub:""};if(e){var a=e.split(".");t.main=a[0]||"",t.sub=a[1]||""}return t}function pu(e,t){e.$constructor=e,e.extend=function(e){var t,a,r=this;return Yn(a=r)&&/^class\s/.test(Function.prototype.toString.call(a))?t=function(e){function t(){return e.apply(this,arguments)||this}return pn(t,e),t}(r):(t=function(){(e.$constructor||r).apply(this,arguments)},function(e,t){var a=e.prototype;function r(){}for(var i in r.prototype=t.prototype,e.prototype=new r,a)a.hasOwnProperty(i)&&(e.prototype[i]=a[i]);e.prototype.constructor=e,e.superClass=t}(t,this)),zn(t.prototype,e),t[uu]=!0,t.extend=this.extend,t.superCall=gu,t.superApply=xu,t.superClass=r,t}}function mu(e,t){e.extend=t.extend}var fu=Math.round(10*Math.random());function gu(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,a)}function xu(e,t,a){return this.superClass.prototype[t].apply(e,a)}function vu(e){var t={};e.registerClass=function(e){var a,r=e.type||e.prototype.type;if(r){cs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a=r),'componentType "'+a+'" illegal'),e.prototype.type=r;var i=hu(r);if(i.sub){if(i.sub!==du){var n=function(e){var a=t[e.main];a&&a[du]||((a=t[e.main]={})[du]=!0);return a}(i);n[i.sub]=e}}else t[i.main]=e}return e},e.getClass=function(e,a,r){var i=t[e];if(i&&i[du]&&(i=a?i[a]:null),r&&!i)throw new Error(a?"Component "+e+"."+(a||"")+" is used but not imported.":e+".type should be specified.");return i},e.getClassesByMainType=function(e){var a=hu(e),r=[],i=t[a.main];return i&&i[du]?Bn(i,function(e,t){t!==du&&r.push(e)}):r.push(i),r},e.hasClass=function(e){var a=hu(e);return!!t[a.main]},e.getAllClassMainTypes=function(){var e=[];return Bn(t,function(t,a){e.push(a)}),e},e.hasSubTypes=function(e){var a=hu(e),r=t[a.main];return r&&r[du]}}function yu(e,t){for(var a=0;a<e.length;a++)e[a][1]||(e[a][1]=e[a][0]);return t=t||!1,function(a,r,i){for(var n={},s=0;s<e.length;s++){var o=e[s][1];if(!(r&&Rn(r,o)>=0||i&&Rn(i,o)<0)){var l=a.getShallow(o,t);null!=l&&(n[e[s][0]]=l)}}return n}}var bu=yu([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),_u=function(){function e(){}return e.prototype.getAreaStyle=function(e,t){return bu(this,e,t)},e}(),ju=new Dl(50);function wu(e){if("string"==typeof e){var t=ju.get(e);return t&&t.image}return e}function Nu(e,t,a,r,i){if(e){if("string"==typeof e){if(t&&t.__zrImageSrc===e||!a)return t;var n=ju.get(e),s={hostEl:a,cb:r,cbPayload:i};return n?!Cu(t=n.image)&&n.pending.push(s):((t=vn.loadImage(e,Su,Su)).__zrImageSrc=e,ju.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}return e}return t}function Su(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var a=e.pending[t],r=a.cb;r&&r(this,a.cbPayload),a.hostEl.dirty()}e.pending.length=0}function Cu(e){return e&&e.width&&e.height}var ku=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Mu(e,t,a,r,i,n){if(!a)return e.text="",void(e.isTruncated=!1);var s=(t+"").split("\n");n=Tu(a,r,i,n);for(var o=!1,l={},c=0,d=s.length;c<d;c++)Du(l,s[c],n),s[c]=l.textLine,o=o||l.isTruncated;e.text=s.join("\n"),e.isTruncated=o}function Tu(e,t,a,r){var i=zn({},r=r||{});a=ns(a,"..."),i.maxIterations=ns(r.maxIterations,2);var n=i.minChar=ns(r.minChar,0),s=i.fontMeasureInfo=$c(t),o=s.asciiCharWidth;i.placeholder=ns(r.placeholder,"");for(var l=e=Math.max(0,e-1),c=0;c<n&&l>=o;c++)l-=o;var d=Zc(s,a);return d>l&&(a="",d=0),l=e-d,i.ellipsis=a,i.ellipsisWidth=d,i.contentWidth=l,i.containerWidth=e,i}function Du(e,t,a){var r=a.containerWidth,i=a.contentWidth,n=a.fontMeasureInfo;if(!r)return e.textLine="",void(e.isTruncated=!1);var s=Zc(n,t);if(s<=r)return e.textLine=t,void(e.isTruncated=!1);for(var o=0;;o++){if(s<=i||o>=a.maxIterations){t+=a.ellipsis;break}var l=0===o?Iu(t,i,n):s>0?Math.floor(t.length*i/s):0;s=Zc(n,t=t.substr(0,l))}""===t&&(t=a.placeholder),e.textLine=t,e.isTruncated=!0}function Iu(e,t,a){for(var r=0,i=0,n=e.length;i<n&&r<t;i++)r+=Xc(a,e.charCodeAt(i));return i}var Au=function(){return function(){}}(),Pu=function(){return function(e){this.tokens=[],e&&(this.tokens=e)}}(),Lu=function(){return function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}}();function zu(e,t,a,r,i){var n,s,o=""===t,l=i&&a.rich[i]||{},c=e.lines,d=l.font||a.font,u=!1;if(r){var h=l.padding,p=h?h[1]+h[3]:0;if(null!=l.width&&"auto"!==l.width){var m=rd(l.width,r.width)+p;c.length>0&&m+r.accumWidth>r.width&&(n=t.split("\n"),u=!0),r.accumWidth=m}else{var f=Ou(t,d,r.width,r.breakAll,r.accumWidth);r.accumWidth=f.accumWidth+p,s=f.linesWidths,n=f.lines}}n||(n=t.split("\n"));for(var g=$c(d),x=0;x<n.length;x++){var v=n[x],y=new Au;if(y.styleName=i,y.text=v,y.isLineHolder=!v&&!o,"number"==typeof l.width?y.width=l.width:y.width=s?s[x]:Zc(g,v),x||u)c.push(new Pu([y]));else{var b=(c[c.length-1]||(c[0]=new Pu)).tokens,_=b.length;1===_&&b[0].isLineHolder?b[0]=y:(v||!_||o)&&b.push(y)}}}var Eu=Vn(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Ru(e){return!function(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}(e)||!!Eu[e]}function Ou(e,t,a,r,i){for(var n=[],s=[],o="",l="",c=0,d=0,u=$c(t),h=0;h<e.length;h++){var p=e.charAt(h);if("\n"!==p){var m=Xc(u,p.charCodeAt(0)),f=!r&&!Ru(p);(n.length?d+m>a:i+d+m>a)?d?(o||l)&&(f?(o||(o=l,l="",d=c=0),n.push(o),s.push(d-c),l+=p,o="",d=c+=m):(l&&(o+=l,l="",c=0),n.push(o),s.push(d),o=p,d=m)):f?(n.push(l),s.push(c),l=p,c=m):(n.push(p),s.push(m)):(d+=m,f?(l+=p,c+=m):(l&&(o+=l,l="",c=0),o+=p))}else l&&(o+=l,d+=c),n.push(o),s.push(d),o="",l="",c=0,d=0}return l&&(o+=l),o&&(n.push(o),s.push(d)),1===n.length&&(d+=i),{accumWidth:d,lines:n,linesWidths:s}}function Fu(e,t,a,r,i,n){if(e.baseX=a,e.baseY=r,e.outerWidth=e.outerHeight=null,t){var s=2*t.width,o=2*t.height;Do.set(Bu,ed(a,s,i),td(r,o,n),s,o),Do.intersect(t,Bu,null,qu);var l=qu.outIntersectRect;e.outerWidth=l.width,e.outerHeight=l.height,e.baseX=ed(l.x,l.width,i,!0),e.baseY=td(l.y,l.height,n,!0)}}var Bu=new Do(0,0,0,0),qu={outIntersectRect:{},clamp:!0};function Vu(e){return null!=e?e+="":e=""}function Hu(e,t,a,r){var i=new Do(ed(e.x||0,t,e.textAlign),td(e.y||0,a,e.textBaseline),t,a),n=null!=r?r:Wu(e)?e.lineWidth:0;return n>0&&(i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n),i}function Wu(e){var t=e.stroke;return null!=t&&"none"!==t&&e.lineWidth>0}var Gu="__zr_style_"+Math.round(10*Math.random()),Uu={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},$u={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Uu[Gu]=!0;var Yu=["z","z2","invisible"],Ku=["invisible"],Xu=function(e){function t(t){return e.call(this,t)||this}var a;return Ns(t,e),t.prototype._init=function(t){for(var a=Wn(t),r=0;r<a.length;r++){var i=a[r];"style"===i?this.useStyle(t[i]):e.prototype.attrKV.call(this,i,t[i])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,t,a,r){var i=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(e,t,a){Zu.copy(e.getBoundingRect()),e.transform&&Zu.applyTransform(e.transform);return Qu.width=t,Qu.height=a,!Zu.intersect(Qu)}(this,e,t)||i&&!i[0]&&!i[3])return!1;if(a&&this.__clipPaths&&this.__clipPaths.length)for(var n=0;n<this.__clipPaths.length;++n)if(this.__clipPaths[n].isZeroArea())return!1;if(r&&this.parent)for(var s=this.parent;s;){if(s.ignore)return!1;s=s.parent}return!0},t.prototype.contain=function(e,t){return this.rectContain(e,t)},t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.rectContain=function(e,t){var a=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(a[0],a[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var t=this.transform,a=this.getBoundingRect(),r=this.style,i=r.shadowBlur||0,n=r.shadowOffsetX||0,s=r.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new Do(0,0,0,0)),t?Do.applyTransform(e,a,t):e.copy(a),(i||n||s)&&(e.width+=2*i+Math.abs(n),e.height+=2*i+Math.abs(s),e.x=Math.min(e.x,e.x+n-i),e.y=Math.min(e.y,e.y+s-i));var o=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-o),e.y=Math.floor(e.y-o),e.width=Math.ceil(e.width+1+2*o),e.height=Math.ceil(e.height+1+2*o))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new Do(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(t,a){"style"!==t?e.prototype.attrKV.call(this,t,a):this.style?this.setStyle(a):this.useStyle(a)},t.prototype.setStyle=function(e,t){return"string"==typeof e?this.style[e]=t:zn(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(2&this.__dirty)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(e){return vs(Uu,e)},t.prototype.useStyle=function(e){e[Gu]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[Gu]},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var a=this._normalState;t.style&&!a.style&&(a.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,a,Yu)},t.prototype._applyStateObj=function(t,a,r,i,n,s){e.prototype._applyStateObj.call(this,t,a,r,i,n,s);var o,l=!(a&&i);if(a&&a.style?n?i?o=a.style:(o=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(o,a.style)):(o=this._mergeStyle(this.createStyle(),i?this.style:r.style),this._mergeStyle(o,a.style)):l&&(o=r.style),o)if(n){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var d=Wn(c),u=0;u<d.length;u++){(p=d[u])in o&&(o[p]=o[p],this.style[p]=c[p])}var h=Wn(o);for(u=0;u<h.length;u++){var p=h[u];this.style[p]=this.style[p]}this._transitionState(t,{style:o},s,this.getAnimationStyleProps())}else this.useStyle(o);var m=this.__inHover?Ku:Yu;for(u=0;u<m.length;u++){p=m[u];a&&null!=a[p]?this[p]=a[p]:l&&null!=r[p]&&(this[p]=r[p])}},t.prototype._mergeStates=function(t){for(var a,r=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var n=t[i];n.style&&(a=a||{},this._mergeStyle(a,n.style))}return a&&(r.style=a),r},t.prototype._mergeStyle=function(e,t){return zn(e,t),e},t.prototype.getAnimationStyleProps=function(){return $u},t.initDefaultProps=((a=t.prototype).type="displayable",a.invisible=!1,a.z=0,a.z2=0,a.zlevel=0,a.culling=!1,a.cursor="pointer",a.rectHover=!1,a.incremental=!1,a._rect=null,a.dirtyRectTolerance=0,void(a.__dirty=3)),t}(ud),Zu=new Do(0,0,0,0),Qu=new Do(0,0,0,0);var Ju=Math.min,eh=Math.max,th=Math.sin,ah=Math.cos,rh=2*Math.PI,ih=Ss(),nh=Ss(),sh=Ss();function oh(e,t,a,r,i,n){i[0]=Ju(e,a),i[1]=Ju(t,r),n[0]=eh(e,a),n[1]=eh(t,r)}var lh=[],ch=[];function dh(e,t,a,r,i,n,s,o,l,c){var d=xl,u=ml,h=d(e,a,i,s,lh);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var p=0;p<h;p++){var m=u(e,a,i,s,lh[p]);l[0]=Ju(m,l[0]),c[0]=eh(m,c[0])}h=d(t,r,n,o,ch);for(p=0;p<h;p++){var f=u(t,r,n,o,ch[p]);l[1]=Ju(f,l[1]),c[1]=eh(f,c[1])}l[0]=Ju(e,l[0]),c[0]=eh(e,c[0]),l[0]=Ju(s,l[0]),c[0]=eh(s,c[0]),l[1]=Ju(t,l[1]),c[1]=eh(t,c[1]),l[1]=Ju(o,l[1]),c[1]=eh(o,c[1])}function uh(e,t,a,r,i,n,s,o){var l=jl,c=bl,d=eh(Ju(l(e,a,i),1),0),u=eh(Ju(l(t,r,n),1),0),h=c(e,a,i,d),p=c(t,r,n,u);s[0]=Ju(e,i,h),s[1]=Ju(t,n,p),o[0]=eh(e,i,h),o[1]=eh(t,n,p)}function hh(e,t,a,r,i,n,s,o,l){var c=Es,d=Rs,u=Math.abs(i-n);if(u%rh<1e-4&&u>1e-4)return o[0]=e-a,o[1]=t-r,l[0]=e+a,void(l[1]=t+r);if(ih[0]=ah(i)*a+e,ih[1]=th(i)*r+t,nh[0]=ah(n)*a+e,nh[1]=th(n)*r+t,c(o,ih,nh),d(l,ih,nh),(i%=rh)<0&&(i+=rh),(n%=rh)<0&&(n+=rh),i>n&&!s?n+=rh:i<n&&s&&(i+=rh),s){var h=n;n=i,i=h}for(var p=0;p<n;p+=Math.PI/2)p>i&&(sh[0]=ah(p)*a+e,sh[1]=th(p)*r+t,c(o,sh,o),d(l,sh,l))}var ph={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},mh=[],fh=[],gh=[],xh=[],vh=[],yh=[],bh=Math.min,_h=Math.max,jh=Math.cos,wh=Math.sin,Nh=Math.abs,Sh=Math.PI,Ch=2*Sh,kh="undefined"!=typeof Float32Array,Mh=[];function Th(e){return Math.round(e/Sh*1e8)/1e8%2*Sh}function Dh(e,t){var a=Th(e[0]);a<0&&(a+=Ch);var r=a-e[0],i=e[1];i+=r,!t&&i-a>=Ch?i=a+Ch:t&&a-i>=Ch?i=a-Ch:!t&&a>i?i=a+(Ch-Th(a-i)):t&&a<i&&(i=a-(Ch-Th(i-a))),e[0]=a,e[1]=i}var Ih=function(){function e(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}var t;return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(e,t,a){(a=a||0)>0&&(this._ux=Nh(a/Pc/e)||0,this._uy=Nh(a/Pc/t)||0)},e.prototype.setDPR=function(e){this.dpr=e},e.prototype.setContext=function(e){this._ctx=e},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(ph.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},e.prototype.lineTo=function(e,t){var a=Nh(e-this._xi),r=Nh(t-this._yi),i=a>this._ux||r>this._uy;if(this.addData(ph.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var n=a*a+r*r;n>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=n)}return this},e.prototype.bezierCurveTo=function(e,t,a,r,i,n){return this._drawPendingPt(),this.addData(ph.C,e,t,a,r,i,n),this._ctx&&this._ctx.bezierCurveTo(e,t,a,r,i,n),this._xi=i,this._yi=n,this},e.prototype.quadraticCurveTo=function(e,t,a,r){return this._drawPendingPt(),this.addData(ph.Q,e,t,a,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,a,r),this._xi=a,this._yi=r,this},e.prototype.arc=function(e,t,a,r,i,n){this._drawPendingPt(),Mh[0]=r,Mh[1]=i,Dh(Mh,n),r=Mh[0];var s=(i=Mh[1])-r;return this.addData(ph.A,e,t,a,a,r,s,0,n?0:1),this._ctx&&this._ctx.arc(e,t,a,r,i,n),this._xi=jh(i)*a+e,this._yi=wh(i)*a+t,this},e.prototype.arcTo=function(e,t,a,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,a,r,i),this},e.prototype.rect=function(e,t,a,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,a,r),this.addData(ph.R,e,t,a,r),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ph.Z);var e=this._ctx,t=this._x0,a=this._y0;return e&&e.closePath(),this._xi=t,this._yi=a,this},e.prototype.fill=function(e){e&&e.fill(),this.toStatic()},e.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(e){if(this._saveData){var t=e.length;this.data&&this.data.length===t||!kh||(this.data=new Float32Array(t));for(var a=0;a<t;a++)this.data[a]=e[a];this._len=t}},e.prototype.appendPath=function(e){if(this._saveData){e instanceof Array||(e=[e]);for(var t=e.length,a=0,r=this._len,i=0;i<t;i++)a+=e[i].len();var n=this.data;if(kh&&(n instanceof Float32Array||!n)&&(this.data=new Float32Array(r+a),r>0&&n))for(var s=0;s<r;s++)this.data[s]=n[s];for(i=0;i<t;i++){var o=e[i].data;for(s=0;s<o.length;s++)this.data[r++]=o[s]}this._len=r}},e.prototype.addData=function(e,t,a,r,i,n,s,o,l){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var d=0;d<arguments.length;d++)c[this._len++]=arguments[d]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,kh&&this._len>11&&(this.data=new Float32Array(e)))}},e.prototype.getBoundingRect=function(){gh[0]=gh[1]=vh[0]=vh[1]=Number.MAX_VALUE,xh[0]=xh[1]=yh[0]=yh[1]=-Number.MAX_VALUE;var e,t=this.data,a=0,r=0,i=0,n=0;for(e=0;e<this._len;){var s=t[e++],o=1===e;switch(o&&(i=a=t[e],n=r=t[e+1]),s){case ph.M:a=i=t[e++],r=n=t[e++],vh[0]=i,vh[1]=n,yh[0]=i,yh[1]=n;break;case ph.L:oh(a,r,t[e],t[e+1],vh,yh),a=t[e++],r=t[e++];break;case ph.C:dh(a,r,t[e++],t[e++],t[e++],t[e++],t[e],t[e+1],vh,yh),a=t[e++],r=t[e++];break;case ph.Q:uh(a,r,t[e++],t[e++],t[e],t[e+1],vh,yh),a=t[e++],r=t[e++];break;case ph.A:var l=t[e++],c=t[e++],d=t[e++],u=t[e++],h=t[e++],p=t[e++]+h;e+=1;var m=!t[e++];o&&(i=jh(h)*d+l,n=wh(h)*u+c),hh(l,c,d,u,h,p,m,vh,yh),a=jh(p)*d+l,r=wh(p)*u+c;break;case ph.R:oh(i=a=t[e++],n=r=t[e++],i+t[e++],n+t[e++],vh,yh);break;case ph.Z:a=i,r=n}Es(gh,gh,vh),Rs(xh,xh,yh)}return 0===e&&(gh[0]=gh[1]=xh[0]=xh[1]=0),new Do(gh[0],gh[1],xh[0]-gh[0],xh[1]-gh[1])},e.prototype._calculateLength=function(){var e=this.data,t=this._len,a=this._ux,r=this._uy,i=0,n=0,s=0,o=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,c=0,d=0,u=0;u<t;){var h=e[u++],p=1===u;p&&(s=i=e[u],o=n=e[u+1]);var m=-1;switch(h){case ph.M:i=s=e[u++],n=o=e[u++];break;case ph.L:var f=e[u++],g=(y=e[u++])-n;(Nh(T=f-i)>a||Nh(g)>r||u===t-1)&&(m=Math.sqrt(T*T+g*g),i=f,n=y);break;case ph.C:var x=e[u++],v=e[u++],y=(f=e[u++],e[u++]),b=e[u++],_=e[u++];m=yl(i,n,x,v,f,y,b,_,10),i=b,n=_;break;case ph.Q:m=Nl(i,n,x=e[u++],v=e[u++],f=e[u++],y=e[u++],10),i=f,n=y;break;case ph.A:var j=e[u++],w=e[u++],N=e[u++],S=e[u++],C=e[u++],k=e[u++],M=k+C;u+=1,p&&(s=jh(C)*N+j,o=wh(C)*S+w),m=_h(N,S)*bh(Ch,Math.abs(k)),i=jh(M)*N+j,n=wh(M)*S+w;break;case ph.R:s=i=e[u++],o=n=e[u++],m=2*e[u++]+2*e[u++];break;case ph.Z:var T=s-i;g=o-n;m=Math.sqrt(T*T+g*g),i=s,n=o}m>=0&&(l[d++]=m,c+=m)}return this._pathLen=c,c},e.prototype.rebuildPath=function(e,t){var a,r,i,n,s,o,l,c,d,u,h=this.data,p=this._ux,m=this._uy,f=this._len,g=t<1,x=0,v=0,y=0;if(!g||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,c=t*this._pathLen))e:for(var b=0;b<f;){var _=h[b++],j=1===b;switch(j&&(a=i=h[b],r=n=h[b+1]),_!==ph.L&&y>0&&(e.lineTo(d,u),y=0),_){case ph.M:a=i=h[b++],r=n=h[b++],e.moveTo(i,n);break;case ph.L:s=h[b++],o=h[b++];var w=Nh(s-i),N=Nh(o-n);if(w>p||N>m){if(g){if(x+(Y=l[v++])>c){var S=(c-x)/Y;e.lineTo(i*(1-S)+s*S,n*(1-S)+o*S);break e}x+=Y}e.lineTo(s,o),i=s,n=o,y=0}else{var C=w*w+N*N;C>y&&(d=s,u=o,y=C)}break;case ph.C:var k=h[b++],M=h[b++],T=h[b++],D=h[b++],I=h[b++],A=h[b++];if(g){if(x+(Y=l[v++])>c){vl(i,k,T,I,S=(c-x)/Y,mh),vl(n,M,D,A,S,fh),e.bezierCurveTo(mh[1],fh[1],mh[2],fh[2],mh[3],fh[3]);break e}x+=Y}e.bezierCurveTo(k,M,T,D,I,A),i=I,n=A;break;case ph.Q:k=h[b++],M=h[b++],T=h[b++],D=h[b++];if(g){if(x+(Y=l[v++])>c){wl(i,k,T,S=(c-x)/Y,mh),wl(n,M,D,S,fh),e.quadraticCurveTo(mh[1],fh[1],mh[2],fh[2]);break e}x+=Y}e.quadraticCurveTo(k,M,T,D),i=T,n=D;break;case ph.A:var P=h[b++],L=h[b++],z=h[b++],E=h[b++],R=h[b++],O=h[b++],F=h[b++],B=!h[b++],q=z>E?z:E,V=Nh(z-E)>.001,H=R+O,W=!1;if(g)x+(Y=l[v++])>c&&(H=R+O*(c-x)/Y,W=!0),x+=Y;if(V&&e.ellipse?e.ellipse(P,L,z,E,F,R,H,B):e.arc(P,L,q,R,H,B),W)break e;j&&(a=jh(R)*z+P,r=wh(R)*E+L),i=jh(H)*z+P,n=wh(H)*E+L;break;case ph.R:a=i=h[b],r=n=h[b+1],s=h[b++],o=h[b++];var G=h[b++],U=h[b++];if(g){if(x+(Y=l[v++])>c){var $=c-x;e.moveTo(s,o),e.lineTo(s+bh($,G),o),($-=G)>0&&e.lineTo(s+G,o+bh($,U)),($-=U)>0&&e.lineTo(s+_h(G-$,0),o+U),($-=G)>0&&e.lineTo(s,o+_h(U-$,0));break e}x+=Y}e.rect(s,o,G,U);break;case ph.Z:if(g){var Y;if(x+(Y=l[v++])>c){S=(c-x)/Y;e.lineTo(i*(1-S)+a*S,n*(1-S)+r*S);break e}x+=Y}e.closePath(),i=a,n=r}}},e.prototype.clone=function(){var t=new e,a=this.data;return t.data=a.slice?a.slice():Array.prototype.slice.call(a),t._len=this._len,t},e.prototype.canSave=function(){return!!this._saveData},e.CMD=ph,e.initDefaultProps=((t=e.prototype)._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,void(t._version=0)),e}();function Ah(e,t,a,r,i,n,s){if(0===i)return!1;var o=i,l=0;if(s>t+o&&s>r+o||s<t-o&&s<r-o||n>e+o&&n>a+o||n<e-o&&n<a-o)return!1;if(e===a)return Math.abs(n-e)<=o/2;var c=(l=(t-r)/(e-a))*n-s+(e*r-a*t)/(e-a);return c*c/(l*l+1)<=o/2*o/2}function Ph(e,t,a,r,i,n,s,o,l,c,d){if(0===l)return!1;var u=l;if(d>t+u&&d>r+u&&d>n+u&&d>o+u||d<t-u&&d<r-u&&d<n-u&&d<o-u||c>e+u&&c>a+u&&c>i+u&&c>s+u||c<e-u&&c<a-u&&c<i-u&&c<s-u)return!1;var h=function(e,t,a,r,i,n,s,o,l,c){var d,u,h,p,m,f=.005,g=1/0;cl[0]=l,cl[1]=c;for(var x=0;x<1;x+=.05)dl[0]=ml(e,a,i,s,x),dl[1]=ml(t,r,n,o,x),(p=Ps(cl,dl))<g&&(d=x,g=p);g=1/0;for(var v=0;v<32&&!(f<sl);v++)u=d-f,h=d+f,dl[0]=ml(e,a,i,s,u),dl[1]=ml(t,r,n,o,u),p=Ps(dl,cl),u>=0&&p<g?(d=u,g=p):(ul[0]=ml(e,a,i,s,h),ul[1]=ml(t,r,n,o,h),m=Ps(ul,cl),h<=1&&m<g?(d=h,g=m):f*=.5);return il(g)}(e,t,a,r,i,n,s,o,c,d);return h<=u/2}function Lh(e,t,a,r,i,n,s,o,l){if(0===s)return!1;var c=s;if(l>t+c&&l>r+c&&l>n+c||l<t-c&&l<r-c&&l<n-c||o>e+c&&o>a+c&&o>i+c||o<e-c&&o<a-c&&o<i-c)return!1;var d=function(e,t,a,r,i,n,s,o){var l,c=.005,d=1/0;cl[0]=s,cl[1]=o;for(var u=0;u<1;u+=.05)dl[0]=bl(e,a,i,u),dl[1]=bl(t,r,n,u),(f=Ps(cl,dl))<d&&(l=u,d=f);d=1/0;for(var h=0;h<32&&!(c<sl);h++){var p=l-c,m=l+c;dl[0]=bl(e,a,i,p),dl[1]=bl(t,r,n,p);var f=Ps(dl,cl);if(p>=0&&f<d)l=p,d=f;else{ul[0]=bl(e,a,i,m),ul[1]=bl(t,r,n,m);var g=Ps(ul,cl);m<=1&&g<d?(l=m,d=g):c*=.5}}return il(d)}(e,t,a,r,i,n,o,l);return d<=c/2}var zh=2*Math.PI;function Eh(e){return(e%=zh)<0&&(e+=zh),e}var Rh=2*Math.PI;function Oh(e,t,a,r,i,n,s,o,l){if(0===s)return!1;var c=s;o-=e,l-=t;var d=Math.sqrt(o*o+l*l);if(d-c>a||d+c<a)return!1;if(Math.abs(r-i)%Rh<1e-4)return!0;if(n){var u=r;r=Eh(i),i=Eh(u)}else r=Eh(r),i=Eh(i);r>i&&(i+=Rh);var h=Math.atan2(l,o);return h<0&&(h+=Rh),h>=r&&h<=i||h+Rh>=r&&h+Rh<=i}function Fh(e,t,a,r,i,n){if(n>t&&n>r||n<t&&n<r)return 0;if(r===t)return 0;var s=(n-t)/(r-t),o=r<t?1:-1;1!==s&&0!==s||(o=r<t?.5:-.5);var l=s*(a-e)+e;return l===i?1/0:l>i?o:0}var Bh=Ih.CMD,qh=2*Math.PI;var Vh=[-1,-1,-1],Hh=[-1,-1];function Wh(){var e=Hh[0];Hh[0]=Hh[1],Hh[1]=e}function Gh(e,t,a,r,i,n,s,o,l,c){if(c>t&&c>r&&c>n&&c>o||c<t&&c<r&&c<n&&c<o)return 0;var d=gl(t,r,n,o,c,Vh);if(0===d)return 0;for(var u=0,h=-1,p=void 0,m=void 0,f=0;f<d;f++){var g=Vh[f],x=0===g||1===g?.5:1;ml(e,a,i,s,g)<l||(h<0&&(h=xl(t,r,n,o,Hh),Hh[1]<Hh[0]&&h>1&&Wh(),p=ml(t,r,n,o,Hh[0]),h>1&&(m=ml(t,r,n,o,Hh[1]))),2===h?g<Hh[0]?u+=p<t?x:-x:g<Hh[1]?u+=m<p?x:-x:u+=o<m?x:-x:g<Hh[0]?u+=p<t?x:-x:u+=o<p?x:-x)}return u}function Uh(e,t,a,r,i,n,s,o){if(o>t&&o>r&&o>n||o<t&&o<r&&o<n)return 0;var l=function(e,t,a,r,i){var n=e-2*t+a,s=2*(t-e),o=e-r,l=0;if(hl(n))pl(s)&&(d=-o/s)>=0&&d<=1&&(i[l++]=d);else{var c=s*s-4*n*o;if(hl(c))(d=-s/(2*n))>=0&&d<=1&&(i[l++]=d);else if(c>0){var d,u=il(c),h=(-s-u)/(2*n);(d=(-s+u)/(2*n))>=0&&d<=1&&(i[l++]=d),h>=0&&h<=1&&(i[l++]=h)}}return l}(t,r,n,o,Vh);if(0===l)return 0;var c=jl(t,r,n);if(c>=0&&c<=1){for(var d=0,u=bl(t,r,n,c),h=0;h<l;h++){var p=0===Vh[h]||1===Vh[h]?.5:1;bl(e,a,i,Vh[h])<s||(Vh[h]<c?d+=u<t?p:-p:d+=n<u?p:-p)}return d}p=0===Vh[0]||1===Vh[0]?.5:1;return bl(e,a,i,Vh[0])<s?0:n<t?p:-p}function $h(e,t,a,r,i,n,s,o){if((o-=t)>a||o<-a)return 0;var l=Math.sqrt(a*a-o*o);Vh[0]=-l,Vh[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=qh-1e-4){r=0,i=qh;var d=n?1:-1;return s>=Vh[0]+e&&s<=Vh[1]+e?d:0}if(r>i){var u=r;r=i,i=u}r<0&&(r+=qh,i+=qh);for(var h=0,p=0;p<2;p++){var m=Vh[p];if(m+e>s){var f=Math.atan2(o,m);d=n?1:-1;f<0&&(f=qh+f),(f>=r&&f<=i||f+qh>=r&&f+qh<=i)&&(f>Math.PI/2&&f<1.5*Math.PI&&(d=-d),h+=d)}}return h}function Yh(e,t,a,r,i){for(var n,s,o,l,c=e.data,d=e.len(),u=0,h=0,p=0,m=0,f=0,g=0;g<d;){var x=c[g++],v=1===g;switch(x===Bh.M&&g>1&&(a||(u+=Fh(h,p,m,f,r,i))),v&&(m=h=c[g],f=p=c[g+1]),x){case Bh.M:h=m=c[g++],p=f=c[g++];break;case Bh.L:if(a){if(Ah(h,p,c[g],c[g+1],t,r,i))return!0}else u+=Fh(h,p,c[g],c[g+1],r,i)||0;h=c[g++],p=c[g++];break;case Bh.C:if(a){if(Ph(h,p,c[g++],c[g++],c[g++],c[g++],c[g],c[g+1],t,r,i))return!0}else u+=Gh(h,p,c[g++],c[g++],c[g++],c[g++],c[g],c[g+1],r,i)||0;h=c[g++],p=c[g++];break;case Bh.Q:if(a){if(Lh(h,p,c[g++],c[g++],c[g],c[g+1],t,r,i))return!0}else u+=Uh(h,p,c[g++],c[g++],c[g],c[g+1],r,i)||0;h=c[g++],p=c[g++];break;case Bh.A:var y=c[g++],b=c[g++],_=c[g++],j=c[g++],w=c[g++],N=c[g++];g+=1;var S=!!(1-c[g++]);n=Math.cos(w)*_+y,s=Math.sin(w)*j+b,v?(m=n,f=s):u+=Fh(h,p,n,s,r,i);var C=(r-y)*j/_+y;if(a){if(Oh(y,b,j,w,w+N,S,t,C,i))return!0}else u+=$h(y,b,j,w,w+N,S,C,i);h=Math.cos(w+N)*_+y,p=Math.sin(w+N)*j+b;break;case Bh.R:if(m=h=c[g++],f=p=c[g++],n=m+c[g++],s=f+c[g++],a){if(Ah(m,f,n,f,t,r,i)||Ah(n,f,n,s,t,r,i)||Ah(n,s,m,s,t,r,i)||Ah(m,s,m,f,t,r,i))return!0}else u+=Fh(n,f,n,s,r,i),u+=Fh(m,s,m,f,r,i);break;case Bh.Z:if(a){if(Ah(h,p,m,f,t,r,i))return!0}else u+=Fh(h,p,m,f,r,i);h=m,p=f}}return a||(o=p,l=f,Math.abs(o-l)<1e-4)||(u+=Fh(h,p,m,f,r,i)||0),0!==u}var Kh=En({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Uu),Xh={style:En({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},$u.style)},Zh=Gc.concat(["invisible","culling","z","z2","zlevel","parent"]),Qh=function(e){function t(t){return e.call(this,t)||this}var a;return Ns(t,e),t.prototype.update=function(){var a=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(e){a.buildPath(e,a.shape)}),i.silent=!0;var n=i.style;for(var s in r)n[s]!==r[s]&&(n[s]=r[s]);n.fill=r.fill?r.decal:null,n.decal=null,n.shadowColor=null,r.strokeFirst&&(n.stroke=null);for(var o=0;o<Zh.length;++o)i[Zh[o]]=this[Zh[o]];i.__dirty|=1}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(t){var a=Wn(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var i=0;i<a.length;i++){var n=a[i],s=t[n];"style"===n?this.style?zn(this.style,s):this.useStyle(s):"shape"===n?zn(this.shape,s):e.prototype.attrKV.call(this,n,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if("none"!==e){if(Kn(e)){var t=Yl(e,0);return t>.5?Lc:t>.2?"#eee":zc}if(e)return zc}return Lc},t.prototype.getInsideTextStroke=function(e){var t=this.style.fill;if(Kn(t)){var a=this.__zr;if(!(!a||!a.isDarkMode())===Yl(e,0)<.4)return t}},t.prototype.buildPath=function(e,t,a){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new Ih(!1)},t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.getBoundingRect=function(){var e=this._rect,t=this.style,a=!e;if(a){var r=!1;this.path||(r=!0,this.createPathProxy());var i=this.path;(r||4&this.__dirty)&&(i.beginPath(),this.buildPath(i,this.shape,!1),this.pathUpdated()),e=i.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var n=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||a){n.copy(e);var s=t.strokeNoScale?this.getLineScale():1,o=t.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;o=Math.max(o,null==l?4:l)}s>1e-10&&(n.width+=o/s,n.height+=o/s,n.x-=o/s/2,n.y-=o/s/2)}return n}return e},t.prototype.contain=function(e,t){var a=this.transformCoordToLocal(e,t),r=this.getBoundingRect(),i=this.style;if(e=a[0],t=a[1],r.contain(e,t)){var n=this.path;if(this.hasStroke()){var s=i.lineWidth,o=i.strokeNoScale?this.getLineScale():1;if(o>1e-10&&(this.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),function(e,t,a,r){return Yh(e,t,!0,a,r)}(n,s/o,e,t)))return!0}if(this.hasFill())return function(e,t,a){return Yh(e,0,!1,t,a)}(n,e,t)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():"shape"===e?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(t,a){"shape"===t?this.setShape(a):e.prototype.attrKV.call(this,t,a)},t.prototype.setShape=function(e,t){var a=this.shape;return a||(a=this.shape={}),"string"==typeof e?a[e]=t:zn(a,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(4&this.__dirty)},t.prototype.createStyle=function(e){return vs(Kh,e)},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var a=this._normalState;t.shape&&!a.shape&&(a.shape=zn({},this.shape))},t.prototype._applyStateObj=function(t,a,r,i,n,s){e.prototype._applyStateObj.call(this,t,a,r,i,n,s);var o,l=!(a&&i);if(a&&a.shape?n?i?o=a.shape:(o=zn({},r.shape),zn(o,a.shape)):(o=zn({},i?this.shape:r.shape),zn(o,a.shape)):l&&(o=r.shape),o)if(n){this.shape=zn({},this.shape);for(var c={},d=Wn(o),u=0;u<d.length;u++){var h=d[u];"object"==typeof o[h]?this.shape[h]=o[h]:c[h]=o[h]}this._transitionState(t,{shape:c},s)}else this.shape=o,this.dirtyShape()},t.prototype._mergeStates=function(t){for(var a,r=e.prototype._mergeStates.call(this,t),i=0;i<t.length;i++){var n=t[i];n.shape&&(a=a||{},this._mergeStyle(a,n.shape))}return a&&(r.shape=a),r},t.prototype.getAnimationStyleProps=function(){return Xh},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var a=function(t){function a(a){var r=t.call(this,a)||this;return e.init&&e.init.call(r,a),r}return Ns(a,t),a.prototype.getDefaultStyle=function(){return Pn(e.style)},a.prototype.getDefaultShape=function(){return Pn(e.shape)},a}(t);for(var r in e)"function"==typeof e[r]&&(a.prototype[r]=e[r]);return a},t.initDefaultProps=((a=t.prototype).type="path",a.strokeContainThreshold=5,a.segmentIgnoreThreshold=0,a.subPixelOptimize=!1,a.autoBatch=!1,void(a.__dirty=7)),t}(Xu),Jh=En({strokeFirst:!0,font:gn,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Kh),ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ns(t,e),t.prototype.hasStroke=function(){return Wu(this.style)},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return vs(Jh,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e,t,a;return this._rect||(this._rect=(e=this.style,t=Vu(e.text),a=e.font,Hu(e,Zc($c(a),t),ad(a),null))),this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(Xu);ep.prototype.type="tspan";var tp=En({x:0,y:0},Uu),ap={style:En({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},$u.style)};var rp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ns(t,e),t.prototype.createStyle=function(e){return vs(tp,e)},t.prototype._getSize=function(e){var t=this.style,a=t[e];if(null!=a)return a;var r,i=(r=t.image)&&"string"!=typeof r&&r.width&&r.height?t.image:this.__image;if(!i)return 0;var n="width"===e?"height":"width",s=t[n];return null==s?i[e]:i[e]/i[n]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return ap},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Do(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Xu);rp.prototype.type="image";var ip=Math.round;function np(e,t,a){if(t){var r=t.x1,i=t.x2,n=t.y1,s=t.y2;e.x1=r,e.x2=i,e.y1=n,e.y2=s;var o=a&&a.lineWidth;return o?(ip(2*r)===ip(2*i)&&(e.x1=e.x2=op(r,o,!0)),ip(2*n)===ip(2*s)&&(e.y1=e.y2=op(n,o,!0)),e):e}}function sp(e,t,a){if(t){var r=t.x,i=t.y,n=t.width,s=t.height;e.x=r,e.y=i,e.width=n,e.height=s;var o=a&&a.lineWidth;return o?(e.x=op(r,o,!0),e.y=op(i,o,!0),e.width=Math.max(op(r+n,o,!1)-e.x,0===n?0:1),e.height=Math.max(op(i+s,o,!1)-e.y,0===s?0:1),e):e}}function op(e,t,a){if(!t)return e;var r=ip(2*e);return(r+ip(t))%2==0?r/2:(r+(a?1:-1))/2}var lp=function(){return function(){this.x=0,this.y=0,this.width=0,this.height=0}}(),cp={},dp=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new lp},t.prototype.buildPath=function(e,t){var a,r,i,n;if(this.subPixelOptimize){var s=sp(cp,t,this.style);a=s.x,r=s.y,i=s.width,n=s.height,s.r=t.r,t=s}else a=t.x,r=t.y,i=t.width,n=t.height;t.r?function(e,t){var a,r,i,n,s,o=t.x,l=t.y,c=t.width,d=t.height,u=t.r;c<0&&(o+=c,c=-c),d<0&&(l+=d,d=-d),"number"==typeof u?a=r=i=n=u:u instanceof Array?1===u.length?a=r=i=n=u[0]:2===u.length?(a=i=u[0],r=n=u[1]):3===u.length?(a=u[0],r=n=u[1],i=u[2]):(a=u[0],r=u[1],i=u[2],n=u[3]):a=r=i=n=0,a+r>c&&(a*=c/(s=a+r),r*=c/s),i+n>c&&(i*=c/(s=i+n),n*=c/s),r+i>d&&(r*=d/(s=r+i),i*=d/s),a+n>d&&(a*=d/(s=a+n),n*=d/s),e.moveTo(o+a,l),e.lineTo(o+c-r,l),0!==r&&e.arc(o+c-r,l+r,r,-Math.PI/2,0),e.lineTo(o+c,l+d-i),0!==i&&e.arc(o+c-i,l+d-i,i,0,Math.PI/2),e.lineTo(o+n,l+d),0!==n&&e.arc(o+n,l+d-n,n,Math.PI/2,Math.PI),e.lineTo(o,l+a),0!==a&&e.arc(o+a,l+a,a,Math.PI,1.5*Math.PI)}(e,t):e.rect(a,r,i,n)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Qh);dp.prototype.type="rect";var up={fill:"#000"},hp={},pp={style:En({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},$u.style)},mp=function(e){function t(t){var a=e.call(this)||this;return a.type="text",a._children=[],a._defaultStyle=up,a.attr(t),a}return Ns(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var a=this._children[t];a.zlevel=this.zlevel,a.z=this.z,a.z2=this.z2,a.culling=this.culling,a.cursor=this.cursor,a.invisible=this.invisible}},t.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(t){var a=this.innerTransformable;return a?a.getLocalTransform(t):e.prototype.getLocalTransform.call(this,t)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,bp(e=this.style),Bn(e.rich,bp),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var a=0;a<this._children.length;a++)this._children[a].__zr=t},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var a=0;a<this._children.length;a++)this._children[a].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Do(0,0,0,0),t=this._children,a=[],r=null,i=0;i<t.length;i++){var n=t[i],s=n.getBoundingRect(),o=n.getLocalTransform(a);o?(e.copy(s),e.applyTransform(o),(r=r||e.clone()).union(e)):(r=r||s.clone()).union(s)}this._rect=r||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||up},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,t){if(!t)return e;var a=t.rich,r=e.rich||a&&{};return zn(e,t),a&&r?(this._mergeRich(r,a),e.rich=r):r&&(e.rich=r),e},t.prototype._mergeRich=function(e,t){for(var a=Wn(t),r=0;r<a.length;r++){var i=a[r];e[i]=e[i]||{},zn(e[i],t[i])}},t.prototype.getAnimationStyleProps=function(){return pp},t.prototype._getOrCreateChild=function(e){var t=this._children[this._childCursor];return t&&t instanceof e||(t=new e),this._children[this._childCursor++]=t,t.__zr=this.__zr,t.parent=this,t},t.prototype._updatePlainTexts=function(){var e=this.style,t=e.font||gn,a=e.padding,r=this._defaultStyle,i=e.x||0,n=e.y||0,s=e.align||r.align||"left",o=e.verticalAlign||r.verticalAlign||"top";Fu(hp,r.overflowRect,i,n,s,o),i=hp.baseX,n=hp.baseY;var l=function(e,t,a,r){var i=Vu(e),n=t.overflow,s=t.padding,o=s?s[1]+s[3]:0,l=s?s[0]+s[2]:0,c=t.font,d="truncate"===n,u=ad(c),h=ns(t.lineHeight,u),p="truncate"===t.lineOverflow,m=!1,f=t.width;null==f&&null!=a&&(f=a-o);var g,x=t.height;null==x&&null!=r&&(x=r-l);var v=(g=null==f||"break"!==n&&"breakAll"!==n?i?i.split("\n"):[]:i?Ou(i,t.font,f,"breakAll"===n,0).lines:[]).length*h;if(null==x&&(x=v),v>x&&p){var y=Math.floor(x/h);m=m||g.length>y,v=(g=g.slice(0,y)).length*h}if(i&&d&&null!=f)for(var b=Tu(f,c,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),_={},j=0;j<g.length;j++)Du(_,g[j],b),g[j]=_.textLine,m=m||_.isTruncated;var w=x,N=0,S=$c(c);for(j=0;j<g.length;j++)N=Math.max(Zc(S,g[j]),N);null==f&&(f=N);var C=f;return{lines:g,height:x,outerWidth:C+=o,outerHeight:w+=l,lineHeight:h,calculatedLineHeight:u,contentWidth:N,contentHeight:v,width:f,isTruncated:m}}(Np(e),e,hp.outerWidth,hp.outerHeight),c=Sp(e),d=!!e.backgroundColor,u=l.outerHeight,h=l.outerWidth,p=l.lines,m=l.lineHeight;this.isTruncated=!!l.isTruncated;var f=i,g=td(n,l.contentHeight,o);if(c||a){var x=ed(i,h,s),v=td(n,u,o);c&&this._renderBackground(e,e,x,v,h,u)}g+=m/2,a&&(f=wp(i,s,a),"top"===o?g+=a[0]:"bottom"===o&&(g-=a[2]));for(var y=0,b=!1,_=!1,j=(jp("fill"in e?e.fill:(_=!0,r.fill))),w=(_p("stroke"in e?e.stroke:d||r.autoStroke&&!_?null:(y=2,b=!0,r.stroke))),N=e.textShadowBlur>0,S=0;S<p.length;S++){var C=this._getOrCreateChild(ep),k=C.createStyle();C.useStyle(k),k.text=p[S],k.x=f,k.y=g,k.textAlign=s,k.textBaseline="middle",k.opacity=e.opacity,k.strokeFirst=!0,N&&(k.shadowBlur=e.textShadowBlur||0,k.shadowColor=e.textShadowColor||"transparent",k.shadowOffsetX=e.textShadowOffsetX||0,k.shadowOffsetY=e.textShadowOffsetY||0),k.stroke=w,k.fill=j,w&&(k.lineWidth=e.lineWidth||y,k.lineDash=e.lineDash,k.lineDashOffset=e.lineDashOffset||0),k.font=t,yp(k,e),g+=m,C.setBoundingRect(Hu(k,l.contentWidth,l.calculatedLineHeight,b?0:null))}},t.prototype._updateRichTexts=function(){var e=this.style,t=this._defaultStyle,a=e.align||t.align,r=e.verticalAlign||t.verticalAlign,i=e.x||0,n=e.y||0;Fu(hp,t.overflowRect,i,n,a,r),i=hp.baseX,n=hp.baseY;var s=function(e,t,a,r,i){var n=new Lu,s=Vu(e);if(!s)return n;var o=t.padding,l=o?o[1]+o[3]:0,c=o?o[0]+o[2]:0,d=t.width;null==d&&null!=a&&(d=a-l);var u=t.height;null==u&&null!=r&&(u=r-c);for(var h,p=t.overflow,m="break"!==p&&"breakAll"!==p||null==d?null:{width:d,accumWidth:0,breakAll:"breakAll"===p},f=ku.lastIndex=0;null!=(h=ku.exec(s));){var g=h.index;g>f&&zu(n,s.substring(f,g),t,m),zu(n,h[2],t,m,h[1]),f=ku.lastIndex}f<s.length&&zu(n,s.substring(f,s.length),t,m);var x=[],v=0,y=0,b="truncate"===p,_="truncate"===t.lineOverflow,j={};function w(e,t,a){e.width=t,e.lineHeight=a,v+=a,y=Math.max(y,t)}e:for(var N=0;N<n.lines.length;N++){for(var S=n.lines[N],C=0,k=0,M=0;M<S.tokens.length;M++){var T=(B=S.tokens[M]).styleName&&t.rich[B.styleName]||{},D=B.textPadding=T.padding,I=D?D[1]+D[3]:0,A=B.font=T.font||t.font;B.contentHeight=ad(A);var P=ns(T.height,B.contentHeight);if(B.innerHeight=P,D&&(P+=D[0]+D[2]),B.height=P,B.lineHeight=ss(T.lineHeight,t.lineHeight,P),B.align=T&&T.align||i,B.verticalAlign=T&&T.verticalAlign||"middle",_&&null!=u&&v+B.lineHeight>u){var L=n.lines.length;M>0?(S.tokens=S.tokens.slice(0,M),w(S,k,C),n.lines=n.lines.slice(0,N+1)):n.lines=n.lines.slice(0,N),n.isTruncated=n.isTruncated||n.lines.length<L;break e}var z=T.width,E=null==z||"auto"===z;if("string"==typeof z&&"%"===z.charAt(z.length-1))B.percentWidth=z,x.push(B),B.contentWidth=Zc($c(A),B.text);else{if(E){var R=T.backgroundColor,O=R&&R.image;O&&Cu(O=wu(O))&&(B.width=Math.max(B.width,O.width*P/O.height))}var F=b&&null!=d?d-k:null;null!=F&&F<B.width?!E||F<I?(B.text="",B.width=B.contentWidth=0):(Mu(j,B.text,F-I,A,t.ellipsis,{minChar:t.truncateMinChar}),B.text=j.text,n.isTruncated=n.isTruncated||j.isTruncated,B.width=B.contentWidth=Zc($c(A),B.text)):B.contentWidth=Zc($c(A),B.text)}B.width+=I,k+=B.width,T&&(C=Math.max(C,B.lineHeight))}w(S,k,C)}for(n.outerWidth=n.width=ns(d,y),n.outerHeight=n.height=ns(u,v),n.contentHeight=v,n.contentWidth=y,n.outerWidth+=l,n.outerHeight+=c,N=0;N<x.length;N++){var B,q=(B=x[N]).percentWidth;B.width=parseInt(q,10)/100*n.width}return n}(Np(e),e,hp.outerWidth,hp.outerHeight,a),o=s.width,l=s.outerWidth,c=s.outerHeight,d=e.padding;this.isTruncated=!!s.isTruncated;var u=ed(i,l,a),h=td(n,c,r),p=u,m=h;d&&(p+=d[3],m+=d[0]);var f=p+o;Sp(e)&&this._renderBackground(e,e,u,h,l,c);for(var g=!!e.backgroundColor,x=0;x<s.lines.length;x++){for(var v=s.lines[x],y=v.tokens,b=y.length,_=v.lineHeight,j=v.width,w=0,N=p,S=f,C=b-1,k=void 0;w<b&&(!(k=y[w]).align||"left"===k.align);)this._placeToken(k,e,_,m,N,"left",g),j-=k.width,N+=k.width,w++;for(;C>=0&&"right"===(k=y[C]).align;)this._placeToken(k,e,_,m,S,"right",g),j-=k.width,S-=k.width,C--;for(N+=(o-(N-p)-(f-S)-j)/2;w<=C;)k=y[w],this._placeToken(k,e,_,m,N+k.width/2,"center",g),N+=k.width,w++;m+=_}},t.prototype._placeToken=function(e,t,a,r,i,n,s){var o=t.rich[e.styleName]||{};o.text=e.text;var l=e.verticalAlign,c=r+a/2;"top"===l?c=r+e.height/2:"bottom"===l&&(c=r+a-e.height/2),!e.isLineHolder&&Sp(o)&&this._renderBackground(o,t,"right"===n?i-e.width:"center"===n?i-e.width/2:i,c-e.height/2,e.width,e.height);var d=!!o.backgroundColor,u=e.textPadding;u&&(i=wp(i,n,u),c-=e.height/2-u[0]-e.innerHeight/2);var h=this._getOrCreateChild(ep),p=h.createStyle();h.useStyle(p);var m=this._defaultStyle,f=!1,g=0,x=!1,v=jp("fill"in o?o.fill:"fill"in t?t.fill:(f=!0,m.fill)),y=_p("stroke"in o?o.stroke:"stroke"in t?t.stroke:d||s||m.autoStroke&&!f?null:(g=2,x=!0,m.stroke)),b=o.textShadowBlur>0||t.textShadowBlur>0;p.text=e.text,p.x=i,p.y=c,b&&(p.shadowBlur=o.textShadowBlur||t.textShadowBlur||0,p.shadowColor=o.textShadowColor||t.textShadowColor||"transparent",p.shadowOffsetX=o.textShadowOffsetX||t.textShadowOffsetX||0,p.shadowOffsetY=o.textShadowOffsetY||t.textShadowOffsetY||0),p.textAlign=n,p.textBaseline="middle",p.font=e.font||gn,p.opacity=ss(o.opacity,t.opacity,1),yp(p,o),y&&(p.lineWidth=ss(o.lineWidth,t.lineWidth,g),p.lineDash=ns(o.lineDash,t.lineDash),p.lineDashOffset=t.lineDashOffset||0,p.stroke=y),v&&(p.fill=v),h.setBoundingRect(Hu(p,e.contentWidth,e.contentHeight,x?0:null))},t.prototype._renderBackground=function(e,t,a,r,i,n){var s,o,l,c=e.backgroundColor,d=e.borderWidth,u=e.borderColor,h=c&&c.image,p=c&&!h,m=e.borderRadius,f=this;if(p||e.lineHeight||d&&u){(s=this._getOrCreateChild(dp)).useStyle(s.createStyle()),s.style.fill=null;var g=s.shape;g.x=a,g.y=r,g.width=i,g.height=n,g.r=m,s.dirtyShape()}if(p)(l=s.style).fill=c||null,l.fillOpacity=ns(e.fillOpacity,1);else if(h){(o=this._getOrCreateChild(rp)).onload=function(){f.dirtyStyle()};var x=o.style;x.image=c.image,x.x=a,x.y=r,x.width=i,x.height=n}d&&u&&((l=s.style).lineWidth=d,l.stroke=u,l.strokeOpacity=ns(e.strokeOpacity,1),l.lineDash=e.borderDash,l.lineDashOffset=e.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(l.strokeFirst=!0,l.lineWidth*=2));var v=(s||o).style;v.shadowBlur=e.shadowBlur||0,v.shadowColor=e.shadowColor||"transparent",v.shadowOffsetX=e.shadowOffsetX||0,v.shadowOffsetY=e.shadowOffsetY||0,v.opacity=ss(e.opacity,t.opacity,1)},t.makeFont=function(e){var t="";return function(e){return null!=e.fontSize||e.fontFamily||e.fontWeight}(e)&&(t=[e.fontStyle,e.fontWeight,vp(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),t&&ds(t)||e.textFont||e.font},t}(Xu),fp={left:!0,right:1,center:1},gp={top:1,bottom:1,middle:1},xp=["fontStyle","fontWeight","fontSize","fontFamily"];function vp(e){return"string"!=typeof e||-1===e.indexOf("px")&&-1===e.indexOf("rem")&&-1===e.indexOf("em")?isNaN(+e)?"12px":e+"px":e}function yp(e,t){for(var a=0;a<xp.length;a++){var r=xp[a],i=t[r];null!=i&&(e[r]=i)}}function bp(e){if(e){e.font=mp.makeFont(e);var t=e.align;"middle"===t&&(t="center"),e.align=null==t||fp[t]?t:"left";var a=e.verticalAlign;"center"===a&&(a="middle"),e.verticalAlign=null==a||gp[a]?a:"top",e.padding&&(e.padding=ls(e.padding))}}function _p(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function jp(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function wp(e,t,a){return"right"===t?e-a[1]:"center"===t?e+a[3]/2-a[1]/2:e+a[3]}function Np(e){var t=e.text;return null!=t&&(t+=""),t}function Sp(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var Cp=ru(),kp=1,Mp={},Tp=ru(),Dp=ru(),Ip=["emphasis","blur","select"],Ap=["normal","emphasis","blur","select"],Pp="highlight",Lp="downplay",zp="select",Ep="unselect",Rp="toggleSelect",Op="selectchanged";function Fp(e){return null!=e&&"none"!==e}function Bp(e,t,a){e.onHoverStateChange&&(e.hoverState||0)!==a&&e.onHoverStateChange(t),e.hoverState=a}function qp(e){Bp(e,"emphasis",2)}function Vp(e){2===e.hoverState&&Bp(e,"normal",0)}function Hp(e){Bp(e,"blur",1)}function Wp(e){1===e.hoverState&&Bp(e,"normal",0)}function Gp(e){e.selected=!0}function Up(e){e.selected=!1}function $p(e,t,a){t(e,a)}function Yp(e,t,a){$p(e,t,a),e.isGroup&&e.traverse(function(e){$p(e,t,a)})}function Kp(e,t){switch(t){case"emphasis":e.hoverState=2;break;case"normal":e.hoverState=0;break;case"blur":e.hoverState=1;break;case"select":e.selected=!0}}function Xp(e,t){var a=this.states[e];if(this.style){if("emphasis"===e)return function(e,t,a,r){var i=a&&Rn(a,"select")>=0,n=!1;if(e instanceof Qh){var s=Tp(e),o=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(Fp(o)||Fp(l)){var c=(r=r||{}).style||{};"inherit"===c.fill?(n=!0,r=zn({},r),(c=zn({},c)).fill=o):!Fp(c.fill)&&Fp(o)?(n=!0,r=zn({},r),(c=zn({},c)).fill=Xl(o)):!Fp(c.stroke)&&Fp(l)&&(n||(r=zn({},r),c=zn({},c)),c.stroke=Xl(l)),r.style=c}}if(r&&null==r.z2){n||(r=zn({},r));var d=e.z2EmphasisLift;r.z2=e.z2+(null!=d?d:10)}return r}(this,0,t,a);if("blur"===e)return function(e,t,a){var r=Rn(e.currentStates,t)>=0,i=e.style.opacity,n=r?null:function(e,t,a,r){for(var i=e.style,n={},s=0;s<t.length;s++){var o=t[s],l=i[o];n[o]=null==l?r&&r[o]:l}for(s=0;s<e.animators.length;s++){var c=e.animators[s];c.__fromStateTransition&&c.__fromStateTransition.indexOf(a)<0&&"style"===c.targetName&&c.saveTo(n,t)}return n}(e,["opacity"],t,{opacity:1}),s=(a=a||{}).style||{};return null==s.opacity&&(a=zn({},a),s=zn({opacity:r?i:.1*n.opacity},s),a.style=s),a}(this,e,a);if("select"===e)return function(e,t,a){if(a&&null==a.z2){a=zn({},a);var r=e.z2SelectLift;a.z2=e.z2+(null!=r?r:9)}return a}(this,0,a)}return a}function Zp(e){e.stateProxy=Xp;var t=e.getTextContent(),a=e.getTextGuideLine();t&&(t.stateProxy=Xp),a&&(a.stateProxy=Xp)}function Qp(e,t){!nm(e,t)&&!e.__highByOuter&&Yp(e,qp)}function Jp(e,t){!nm(e,t)&&!e.__highByOuter&&Yp(e,Vp)}function em(e,t){e.__highByOuter|=1<<(t||0),Yp(e,qp)}function tm(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Yp(e,Vp)}function am(e){Yp(e,Wp)}function rm(e){Yp(e,Gp)}function im(e){Yp(e,Up)}function nm(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function sm(e){var t=e.getModel(),a=[],r=[];t.eachComponent(function(t,i){var n=Dp(i),s="series"===t,o=s?e.getViewOfSeriesModel(i):e.getViewOfComponentModel(i);!s&&r.push(o),n.isBlured&&(o.group.traverse(function(e){Wp(e)}),s&&a.push(i)),n.isBlured=!1}),Bn(r,function(e){e&&e.toggleBlurSeries&&e.toggleBlurSeries(a,!1,t)})}function om(e,t,a,r){var i=r.getModel();function n(e,t){for(var a=0;a<t.length;a++){var r=e.getItemGraphicEl(t[a]);r&&am(r)}}if(a=a||"coordinateSystem",null!=e&&t&&"none"!==t){var s=i.getSeriesByIndex(e),o=s.coordinateSystem;o&&o.master&&(o=o.master);var l=[];i.eachSeries(function(e){var i=s===e,c=e.coordinateSystem;if(c&&c.master&&(c=c.master),!("series"===a&&!i||"coordinateSystem"===a&&!(c&&o?c===o:i)||"series"===t&&i)){if(r.getViewOfSeriesModel(e).group.traverse(function(e){e.__highByOuter&&i&&"self"===t||Hp(e)}),Fn(t))n(e.getData(),t);else if(Qn(t))for(var d=Wn(t),u=0;u<d.length;u++)n(e.getData(d[u]),t[d[u]]);l.push(e),Dp(e).isBlured=!0}}),i.eachComponent(function(e,t){if("series"!==e){var a=r.getViewOfComponentModel(t);a&&a.toggleBlurSeries&&a.toggleBlurSeries(l,!0,i)}})}}function lm(e,t,a){if(null!=e&&null!=t){var r=a.getModel().getComponent(e,t);if(r){Dp(r).isBlured=!0;var i=a.getViewOfComponentModel(r);i&&i.focusBlurEnabled&&i.group.traverse(function(e){Hp(e)})}}}function cm(e,t,a,r){var i={focusSelf:!1,dispatchers:null};if(null==e||"series"===e||null==t||null==a)return i;var n=r.getModel().getComponent(e,t);if(!n)return i;var s=r.getViewOfComponentModel(n);if(!s||!s.findHighDownDispatchers)return i;for(var o,l=s.findHighDownDispatchers(a),c=0;c<l.length;c++)if("self"===Cp(l[c]).focus){o=!0;break}return{focusSelf:o,dispatchers:l}}function dm(e){Bn(e.getAllData(),function(t){var a=t.data,r=t.type;a.eachItemGraphicEl(function(t,a){e.isSelected(a,r)?rm(t):im(t)})})}function um(e){var t=[];return e.eachSeries(function(e){Bn(e.getAllData(),function(a){a.data;var r=a.type,i=e.getSelectedDataIndices();if(i.length>0){var n={dataIndex:i,seriesIndex:e.seriesIndex};null!=r&&(n.dataType=r),t.push(n)}})}),t}function hm(e,t,a){xm(e,!0),Yp(e,Zp),function(e,t,a){var r=Cp(e);null!=t?(r.focus=t,r.blurScope=a):r.focus&&(r.focus=null)}(e,t,a)}function pm(e,t,a,r){r?function(e){xm(e,!1)}(e):hm(e,t,a)}var mm=["emphasis","blur","select"],fm={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function gm(e,t,a,r){a=a||"itemStyle";for(var i=0;i<mm.length;i++){var n=mm[i],s=t.getModel([n,a]);e.ensureState(n).style=s[fm[a]]()}}function xm(e,t){var a=!1===t,r=e;e.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=e.highDownSilentOnTouch),a&&!r.__highDownDispatcher||(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!a)}function vm(e){return!(!e||!e.__highDownDispatcher)}function ym(e){var t=e.type;return t===zp||t===Ep||t===Rp}function bm(e){var t=e.type;return t===Pp||t===Lp}var _m=Ih.CMD,jm=[[],[],[]],wm=Math.sqrt,Nm=Math.atan2;var Sm=Math.sqrt,Cm=Math.sin,km=Math.cos,Mm=Math.PI;function Tm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Dm(e,t){return(e[0]*t[0]+e[1]*t[1])/(Tm(e)*Tm(t))}function Im(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Dm(e,t))}function Am(e,t,a,r,i,n,s,o,l,c,d){var u=l*(Mm/180),h=km(u)*(e-a)/2+Cm(u)*(t-r)/2,p=-1*Cm(u)*(e-a)/2+km(u)*(t-r)/2,m=h*h/(s*s)+p*p/(o*o);m>1&&(s*=Sm(m),o*=Sm(m));var f=(i===n?-1:1)*Sm((s*s*(o*o)-s*s*(p*p)-o*o*(h*h))/(s*s*(p*p)+o*o*(h*h)))||0,g=f*s*p/o,x=f*-o*h/s,v=(e+a)/2+km(u)*g-Cm(u)*x,y=(t+r)/2+Cm(u)*g+km(u)*x,b=Im([1,0],[(h-g)/s,(p-x)/o]),_=[(h-g)/s,(p-x)/o],j=[(-1*h-g)/s,(-1*p-x)/o],w=Im(_,j);if(Dm(_,j)<=-1&&(w=Mm),Dm(_,j)>=1&&(w=0),w<0){var N=Math.round(w/Mm*1e6)/1e6;w=2*Mm+N%2*Mm}d.addData(c,v,y,s,o,b,w,u,n)}var Pm=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Lm=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var zm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ns(t,e),t.prototype.applyTransform=function(e){},t}(Qh);function Em(e){return null!=e.setData}function Rm(e,t){var a=function(e){var t=new Ih;if(!e)return t;var a,r=0,i=0,n=r,s=i,o=Ih.CMD,l=e.match(Pm);if(!l)return t;for(var c=0;c<l.length;c++){for(var d=l[c],u=d.charAt(0),h=void 0,p=d.match(Lm)||[],m=p.length,f=0;f<m;f++)p[f]=parseFloat(p[f]);for(var g=0;g<m;){var x=void 0,v=void 0,y=void 0,b=void 0,_=void 0,j=void 0,w=void 0,N=r,S=i,C=void 0,k=void 0;switch(u){case"l":r+=p[g++],i+=p[g++],h=o.L,t.addData(h,r,i);break;case"L":r=p[g++],i=p[g++],h=o.L,t.addData(h,r,i);break;case"m":r+=p[g++],i+=p[g++],h=o.M,t.addData(h,r,i),n=r,s=i,u="l";break;case"M":r=p[g++],i=p[g++],h=o.M,t.addData(h,r,i),n=r,s=i,u="L";break;case"h":r+=p[g++],h=o.L,t.addData(h,r,i);break;case"H":r=p[g++],h=o.L,t.addData(h,r,i);break;case"v":i+=p[g++],h=o.L,t.addData(h,r,i);break;case"V":i=p[g++],h=o.L,t.addData(h,r,i);break;case"C":h=o.C,t.addData(h,p[g++],p[g++],p[g++],p[g++],p[g++],p[g++]),r=p[g-2],i=p[g-1];break;case"c":h=o.C,t.addData(h,p[g++]+r,p[g++]+i,p[g++]+r,p[g++]+i,p[g++]+r,p[g++]+i),r+=p[g-2],i+=p[g-1];break;case"S":x=r,v=i,C=t.len(),k=t.data,a===o.C&&(x+=r-k[C-4],v+=i-k[C-3]),h=o.C,N=p[g++],S=p[g++],r=p[g++],i=p[g++],t.addData(h,x,v,N,S,r,i);break;case"s":x=r,v=i,C=t.len(),k=t.data,a===o.C&&(x+=r-k[C-4],v+=i-k[C-3]),h=o.C,N=r+p[g++],S=i+p[g++],r+=p[g++],i+=p[g++],t.addData(h,x,v,N,S,r,i);break;case"Q":N=p[g++],S=p[g++],r=p[g++],i=p[g++],h=o.Q,t.addData(h,N,S,r,i);break;case"q":N=p[g++]+r,S=p[g++]+i,r+=p[g++],i+=p[g++],h=o.Q,t.addData(h,N,S,r,i);break;case"T":x=r,v=i,C=t.len(),k=t.data,a===o.Q&&(x+=r-k[C-4],v+=i-k[C-3]),r=p[g++],i=p[g++],h=o.Q,t.addData(h,x,v,r,i);break;case"t":x=r,v=i,C=t.len(),k=t.data,a===o.Q&&(x+=r-k[C-4],v+=i-k[C-3]),r+=p[g++],i+=p[g++],h=o.Q,t.addData(h,x,v,r,i);break;case"A":y=p[g++],b=p[g++],_=p[g++],j=p[g++],w=p[g++],Am(N=r,S=i,r=p[g++],i=p[g++],j,w,y,b,_,h=o.A,t);break;case"a":y=p[g++],b=p[g++],_=p[g++],j=p[g++],w=p[g++],Am(N=r,S=i,r+=p[g++],i+=p[g++],j,w,y,b,_,h=o.A,t)}}"z"!==u&&"Z"!==u||(h=o.Z,t.addData(h),r=n,i=s),a=h}return t.toStatic(),t}(e),r=zn({},t);return r.buildPath=function(e){var t,r=Em(e);r&&e.canSave()?(e.appendPath(a),(t=e.getContext())&&e.rebuildPath(t,1)):(t=r?e.getContext():e)&&a.rebuildPath(t,1)},r.applyTransform=function(e){!function(e,t){if(t){var a,r,i,n,s,o,l=e.data,c=e.len(),d=_m.M,u=_m.C,h=_m.L,p=_m.R,m=_m.A,f=_m.Q;for(i=0,n=0;i<c;){switch(a=l[i++],n=i,r=0,a){case d:case h:r=1;break;case u:r=3;break;case f:r=2;break;case m:var g=t[4],x=t[5],v=wm(t[0]*t[0]+t[1]*t[1]),y=wm(t[2]*t[2]+t[3]*t[3]),b=Nm(-t[1]/y,t[0]/v);l[i]*=v,l[i++]+=g,l[i]*=y,l[i++]+=x,l[i++]*=v,l[i++]*=y,l[i++]+=b,l[i++]+=b,n=i+=2;break;case p:o[0]=l[i++],o[1]=l[i++],zs(o,o,t),l[n++]=o[0],l[n++]=o[1],o[0]+=l[i++],o[1]+=l[i++],zs(o,o,t),l[n++]=o[0],l[n++]=o[1]}for(s=0;s<r;s++){var _=jm[s];_[0]=l[i++],_[1]=l[i++],zs(_,_,t),l[n++]=_[0],l[n++]=_[1]}}e.increaseVersion()}}(a,e),this.dirtyShape()},r}var Om=function(){return function(){this.cx=0,this.cy=0,this.r=0}}(),Fm=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new Om},t.prototype.buildPath=function(e,t){e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI)},t}(Qh);Fm.prototype.type="circle";var Bm=function(){return function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}}(),qm=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new Bm},t.prototype.buildPath=function(e,t){var a=.5522848,r=t.cx,i=t.cy,n=t.rx,s=t.ry,o=n*a,l=s*a;e.moveTo(r-n,i),e.bezierCurveTo(r-n,i-l,r-o,i-s,r,i-s),e.bezierCurveTo(r+o,i-s,r+n,i-l,r+n,i),e.bezierCurveTo(r+n,i+l,r+o,i+s,r,i+s),e.bezierCurveTo(r-o,i+s,r-n,i+l,r-n,i),e.closePath()},t}(Qh);qm.prototype.type="ellipse";var Vm=Math.PI,Hm=2*Vm,Wm=Math.sin,Gm=Math.cos,Um=Math.acos,$m=Math.atan2,Ym=Math.abs,Km=Math.sqrt,Xm=Math.max,Zm=Math.min,Qm=1e-4;function Jm(e,t,a,r,i,n,s){var o=e-a,l=t-r,c=(s?n:-n)/Km(o*o+l*l),d=c*l,u=-c*o,h=e+d,p=t+u,m=a+d,f=r+u,g=(h+m)/2,x=(p+f)/2,v=m-h,y=f-p,b=v*v+y*y,_=i-n,j=h*f-m*p,w=(y<0?-1:1)*Km(Xm(0,_*_*b-j*j)),N=(j*y-v*w)/b,S=(-j*v-y*w)/b,C=(j*y+v*w)/b,k=(-j*v+y*w)/b,M=N-g,T=S-x,D=C-g,I=k-x;return M*M+T*T>D*D+I*I&&(N=C,S=k),{cx:N,cy:S,x0:-d,y0:-u,x1:N*(i/_-1),y1:S*(i/_-1)}}function ef(e,t){var a,r=Xm(t.r,0),i=Xm(t.r0||0,0),n=r>0;if(n||i>0){if(n||(r=i,i=0),i>r){var s=r;r=i,i=s}var o=t.startAngle,l=t.endAngle;if(!isNaN(o)&&!isNaN(l)){var c=t.cx,d=t.cy,u=!!t.clockwise,h=Ym(l-o),p=h>Hm&&h%Hm;if(p>Qm&&(h=p),r>Qm)if(h>Hm-Qm)e.moveTo(c+r*Gm(o),d+r*Wm(o)),e.arc(c,d,r,o,l,!u),i>Qm&&(e.moveTo(c+i*Gm(l),d+i*Wm(l)),e.arc(c,d,i,l,o,u));else{var m=void 0,f=void 0,g=void 0,x=void 0,v=void 0,y=void 0,b=void 0,_=void 0,j=void 0,w=void 0,N=void 0,S=void 0,C=void 0,k=void 0,M=void 0,T=void 0,D=r*Gm(o),I=r*Wm(o),A=i*Gm(l),P=i*Wm(l),L=h>Qm;if(L){var z=t.cornerRadius;z&&(m=(a=function(e){var t;if($n(e)){var a=e.length;if(!a)return e;t=1===a?[e[0],e[0],0,0]:2===a?[e[0],e[0],e[1],e[1]]:3===a?e.concat(e[2]):e}else t=[e,e,e,e];return t}(z))[0],f=a[1],g=a[2],x=a[3]);var E=Ym(r-i)/2;if(v=Zm(E,g),y=Zm(E,x),b=Zm(E,m),_=Zm(E,f),N=j=Xm(v,y),S=w=Xm(b,_),(j>Qm||w>Qm)&&(C=r*Gm(l),k=r*Wm(l),M=i*Gm(o),T=i*Wm(o),h<Vm)){var R=function(e,t,a,r,i,n,s,o){var l=a-e,c=r-t,d=s-i,u=o-n,h=u*l-d*c;if(!(h*h<Qm))return[e+(h=(d*(t-n)-u*(e-i))/h)*l,t+h*c]}(D,I,M,T,C,k,A,P);if(R){var O=D-R[0],F=I-R[1],B=C-R[0],q=k-R[1],V=1/Wm(Um((O*B+F*q)/(Km(O*O+F*F)*Km(B*B+q*q)))/2),H=Km(R[0]*R[0]+R[1]*R[1]);N=Zm(j,(r-H)/(V+1)),S=Zm(w,(i-H)/(V-1))}}}if(L)if(N>Qm){var W=Zm(g,N),G=Zm(x,N),U=Jm(M,T,D,I,r,W,u),$=Jm(C,k,A,P,r,G,u);e.moveTo(c+U.cx+U.x0,d+U.cy+U.y0),N<j&&W===G?e.arc(c+U.cx,d+U.cy,N,$m(U.y0,U.x0),$m($.y0,$.x0),!u):(W>0&&e.arc(c+U.cx,d+U.cy,W,$m(U.y0,U.x0),$m(U.y1,U.x1),!u),e.arc(c,d,r,$m(U.cy+U.y1,U.cx+U.x1),$m($.cy+$.y1,$.cx+$.x1),!u),G>0&&e.arc(c+$.cx,d+$.cy,G,$m($.y1,$.x1),$m($.y0,$.x0),!u))}else e.moveTo(c+D,d+I),e.arc(c,d,r,o,l,!u);else e.moveTo(c+D,d+I);if(i>Qm&&L)if(S>Qm){W=Zm(m,S),U=Jm(A,P,C,k,i,-(G=Zm(f,S)),u),$=Jm(D,I,M,T,i,-W,u);e.lineTo(c+U.cx+U.x0,d+U.cy+U.y0),S<w&&W===G?e.arc(c+U.cx,d+U.cy,S,$m(U.y0,U.x0),$m($.y0,$.x0),!u):(G>0&&e.arc(c+U.cx,d+U.cy,G,$m(U.y0,U.x0),$m(U.y1,U.x1),!u),e.arc(c,d,i,$m(U.cy+U.y1,U.cx+U.x1),$m($.cy+$.y1,$.cx+$.x1),u),W>0&&e.arc(c+$.cx,d+$.cy,W,$m($.y1,$.x1),$m($.y0,$.x0),!u))}else e.lineTo(c+A,d+P),e.arc(c,d,i,l,o,u);else e.lineTo(c+A,d+P)}else e.moveTo(c,d);e.closePath()}}}var tf=function(){return function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0}}(),af=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new tf},t.prototype.buildPath=function(e,t){ef(e,t)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Qh);af.prototype.type="sector";var rf=function(){return function(){this.cx=0,this.cy=0,this.r=0,this.r0=0}}(),nf=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new rf},t.prototype.buildPath=function(e,t){var a=t.cx,r=t.cy,i=2*Math.PI;e.moveTo(a+t.r,r),e.arc(a,r,t.r,0,i,!1),e.moveTo(a+t.r0,r),e.arc(a,r,t.r0,0,i,!0)},t}(Qh);function sf(e,t,a){var r=t.smooth,i=t.points;if(i&&i.length>=2){if(r){var n=function(e,t,a,r){var i,n,s,o,l=[],c=[],d=[],u=[];if(r){s=[1/0,1/0],o=[-1/0,-1/0];for(var h=0,p=e.length;h<p;h++)Es(s,s,e[h]),Rs(o,o,e[h]);Es(s,s,r[0]),Rs(o,o,r[1])}for(h=0,p=e.length;h<p;h++){var m=e[h];if(a)i=e[h?h-1:p-1],n=e[(h+1)%p];else{if(0===h||h===p-1){l.push(Cs(e[h]));continue}i=e[h-1],n=e[h+1]}Ms(c,n,i),Ts(c,c,t);var f=Is(m,i),g=Is(m,n),x=f+g;0!==x&&(f/=x,g/=x),Ts(d,c,-f),Ts(u,c,g);var v=ks([],m,d),y=ks([],m,u);r&&(Rs(v,v,s),Es(v,v,o),Rs(y,y,s),Es(y,y,o)),l.push(v),l.push(y)}return a&&l.push(l.shift()),l}(i,r,a,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,o=0;o<(a?s:s-1);o++){var l=n[2*o],c=n[2*o+1],d=i[(o+1)%s];e.bezierCurveTo(l[0],l[1],c[0],c[1],d[0],d[1])}}else{e.moveTo(i[0][0],i[0][1]);o=1;for(var u=i.length;o<u;o++)e.lineTo(i[o][0],i[o][1])}a&&e.closePath()}}nf.prototype.type="ring";var of=function(){return function(){this.points=null,this.smooth=0,this.smoothConstraint=null}}(),lf=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultShape=function(){return new of},t.prototype.buildPath=function(e,t){sf(e,t,!0)},t}(Qh);lf.prototype.type="polygon";var cf=function(){return function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}}(),df=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new cf},t.prototype.buildPath=function(e,t){sf(e,t,!1)},t}(Qh);df.prototype.type="polyline";var uf={},hf=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}}(),pf=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new hf},t.prototype.buildPath=function(e,t){var a,r,i,n;if(this.subPixelOptimize){var s=np(uf,t,this.style);a=s.x1,r=s.y1,i=s.x2,n=s.y2}else a=t.x1,r=t.y1,i=t.x2,n=t.y2;var o=t.percent;0!==o&&(e.moveTo(a,r),o<1&&(i=a*(1-o)+i*o,n=r*(1-o)+n*o),e.lineTo(i,n))},t.prototype.pointAt=function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]},t}(Qh);pf.prototype.type="line";var mf=[],ff=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}}();function gf(e,t,a){var r=e.cpx2,i=e.cpy2;return null!=r||null!=i?[(a?fl:ml)(e.x1,e.cpx1,e.cpx2,e.x2,t),(a?fl:ml)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(a?_l:bl)(e.x1,e.cpx1,e.x2,t),(a?_l:bl)(e.y1,e.cpy1,e.y2,t)]}var xf=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ff},t.prototype.buildPath=function(e,t){var a=t.x1,r=t.y1,i=t.x2,n=t.y2,s=t.cpx1,o=t.cpy1,l=t.cpx2,c=t.cpy2,d=t.percent;0!==d&&(e.moveTo(a,r),null==l||null==c?(d<1&&(wl(a,s,i,d,mf),s=mf[1],i=mf[2],wl(r,o,n,d,mf),o=mf[1],n=mf[2]),e.quadraticCurveTo(s,o,i,n)):(d<1&&(vl(a,s,l,i,d,mf),s=mf[1],l=mf[2],i=mf[3],vl(r,o,c,n,d,mf),o=mf[1],c=mf[2],n=mf[3]),e.bezierCurveTo(s,o,l,c,i,n)))},t.prototype.pointAt=function(e){return gf(this.shape,e,!1)},t.prototype.tangentAt=function(e){var t=gf(this.shape,e,!0);return Ds(t,t)},t}(Qh);xf.prototype.type="bezier-curve";var vf=function(){return function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),yf=function(e){function t(t){return e.call(this,t)||this}return Ns(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vf},t.prototype.buildPath=function(e,t){var a=t.cx,r=t.cy,i=Math.max(t.r,0),n=t.startAngle,s=t.endAngle,o=t.clockwise,l=Math.cos(n),c=Math.sin(n);e.moveTo(l*i+a,c*i+r),e.arc(a,r,i,n,s,!o)},t}(Qh);yf.prototype.type="arc";var bf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="compound",t}return Ns(t,e),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,t=this.shapeChanged(),a=0;a<e.length;a++)t=t||e[a].shapeChanged();t&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),a=0;a<e.length;a++)e[a].path||e[a].createPathProxy(),e[a].path.setScale(t[0],t[1],e[a].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,t){for(var a=t.paths||[],r=0;r<a.length;r++)a[r].buildPath(e,a[r].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Qh.prototype.getBoundingRect.call(this)},t}(Qh),_f=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}(),jf=function(e){function t(t,a,r,i,n,s){var o=e.call(this,n)||this;return o.x=null==t?0:t,o.y=null==a?0:a,o.x2=null==r?1:r,o.y2=null==i?0:i,o.type="linear",o.global=s||!1,o}return Ns(t,e),t}(_f),wf=function(e){function t(t,a,r,i,n){var s=e.call(this,i)||this;return s.x=null==t?.5:t,s.y=null==a?.5:a,s.r=null==r?.5:r,s.type="radial",s.global=n||!1,s}return Ns(t,e),t}(_f),Nf=Math.min,Sf=Math.max,Cf=Math.abs,kf=[0,0],Mf=[0,0],Tf=Lo(),Df=Tf.minTv,If=Tf.maxTv,Af=function(){function e(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var a=0;a<4;a++)this._corners[a]=new go;for(a=0;a<2;a++)this._axes[a]=new go;e&&this.fromBoundingRect(e,t)}return e.prototype.fromBoundingRect=function(e,t){var a=this._corners,r=this._axes,i=e.x,n=e.y,s=i+e.width,o=n+e.height;if(a[0].set(i,n),a[1].set(s,n),a[2].set(s,o),a[3].set(i,o),t)for(var l=0;l<4;l++)a[l].transform(t);go.sub(r[0],a[1],a[0]),go.sub(r[1],a[3],a[0]),r[0].normalize(),r[1].normalize();for(l=0;l<2;l++)this._origin[l]=r[l].dot(a[0])},e.prototype.intersect=function(e,t,a){var r=!0,i=!t;return t&&go.set(t,0,0),Tf.reset(a,!i),!this._intersectCheckOneSide(this,e,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,i,-1)&&(r=!1,i)||i||Tf.negativeSize||go.copy(t,r?Tf.useDir?Tf.dirMinTv:Df:If),r},e.prototype._intersectCheckOneSide=function(e,t,a,r){for(var i=!0,n=0;n<2;n++){var s=e._axes[n];if(e._getProjMinMaxOnAxis(n,e._corners,kf),e._getProjMinMaxOnAxis(n,t._corners,Mf),Tf.negativeSize||kf[1]<Mf[0]||kf[0]>Mf[1]){if(i=!1,Tf.negativeSize||a)return i;var o=Cf(Mf[0]-kf[1]),l=Cf(kf[0]-Mf[1]);Nf(o,l)>If.len()&&(o<l?go.scale(If,s,-o*r):go.scale(If,s,l*r))}else if(!a){o=Cf(Mf[0]-kf[1]),l=Cf(kf[0]-Mf[1]);(Tf.useDir||Nf(o,l)<Df.len())&&((o<l||!Tf.bidirectional)&&(go.scale(Df,s,o*r),Tf.useDir&&Tf.calcDirMTV()),(o>=l||!Tf.bidirectional)&&(go.scale(Df,s,-l*r),Tf.useDir&&Tf.calcDirMTV()))}}return i},e.prototype._getProjMinMaxOnAxis=function(e,t,a){for(var r=this._axes[e],i=this._origin,n=t[0].dot(r)+i[e],s=n,o=n,l=1;l<t.length;l++){var c=t[l].dot(r)+i[e];s=Nf(c,s),o=Sf(c,o)}a[0]=s+Tf.touchThreshold,a[1]=o-Tf.touchThreshold,Tf.negativeSize=a[1]<a[0]},e}(),Pf=[],Lf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return Ns(t,e),t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,t){t=t||!1;for(var a=0;a<e.length;a++)this.addDisplayable(e[a],t)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){(t=this._displayables[e]).parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Do(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var a=this._displayables[t],r=a.getBoundingRect().clone();a.needLocalTransform()&&r.applyTransform(a.getLocalTransform(Pf)),e.union(r)}this._rect=e}return this._rect},t.prototype.contain=function(e,t){var a=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(a[0],a[1]))for(var r=0;r<this._displayables.length;r++){if(this._displayables[r].contain(e,t))return!0}return!1},t}(Xu),zf=ru();function Ef(e,t,a,r,i,n,s){var o,l=!1;Yn(i)?(s=n,n=i,i=null):Qn(i)&&(n=i.cb,s=i.during,l=i.isFrom,o=i.removeOpt,i=i.dataIndex);var c="leave"===e;c||t.stopAnimation("leave");var d=function(e,t,a,r,i){var n;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();n=s&&s.animation}var o="update"===e;if(t&&t.isAnimationEnabled()){var l=void 0,c=void 0,d=void 0;return r?(l=ns(r.duration,200),c=ns(r.easing,"cubicOut"),d=0):(l=t.getShallow(o?"animationDurationUpdate":"animationDuration"),c=t.getShallow(o?"animationEasingUpdate":"animationEasing"),d=t.getShallow(o?"animationDelayUpdate":"animationDelay")),n&&(null!=n.duration&&(l=n.duration),null!=n.easing&&(c=n.easing),null!=n.delay&&(d=n.delay)),Yn(d)&&(d=d(a,i)),Yn(l)&&(l=l(a)),{duration:l||0,delay:d,easing:c}}return null}(e,r,i,c?o||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,i):null);if(d&&d.duration>0){var u={duration:d.duration,delay:d.delay||0,easing:d.easing,done:n,force:!!n||!!s,setToFinal:!c,scope:e,during:s};l?t.animateFrom(a,u):t.animateTo(a,u)}else t.stopAnimation(),!l&&t.attr(a),s&&s(1),n&&n()}function Rf(e,t,a,r,i,n){Ef("update",e,t,a,r,i,n)}function Of(e,t,a,r,i,n){Ef("enter",e,t,a,r,i,n)}function Ff(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){if("leave"===e.animators[t].scope)return!0}return!1}function Bf(e,t,a,r,i,n){Ff(e)||Ef("leave",e,t,a,r,i,n)}function qf(e,t,a,r){e.removeTextContent(),e.removeTextGuideLine(),Bf(e,{style:{opacity:0}},t,a,r)}function Vf(e,t,a){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(e){e.isGroup||qf(e,t,a,r)}):qf(e,t,a,r)}function Hf(e){zf(e).oldStyle=e.style}var Wf={},Gf=["x","y"],Uf=["width","height"];var $f=function(e,t){var a=Rm(e,t);return function(e){function t(t){var r=e.call(this,t)||this;return r.applyTransform=a.applyTransform,r.buildPath=a.buildPath,r}return Ns(t,e),t}(zm)};function Yf(e,t){Wf[e]=t}function Kf(e,t,a,r){var i=function(e,t){return new zm(Rm(e,t))}(e,t);return a&&("center"===r&&(a=Zf(a,i.getBoundingRect())),Jf(i,a)),i}function Xf(e,t,a){var r=new rp({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===a){var i={width:e.width,height:e.height};r.setStyle(Zf(t,i))}}});return r}function Zf(e,t){var a,r=t.width/t.height,i=e.height*r;return a=i<=e.width?e.height:(i=e.width)/r,{x:e.x+e.width/2-i/2,y:e.y+e.height/2-a/2,width:i,height:a}}var Qf=function(e,t){for(var a=[],r=e.length,i=0;i<r;i++){var n=e[i];a.push(n.getUpdatedPathProxy(!0))}var s=new Qh(t);return s.createPathProxy(),s.buildPath=function(e){if(Em(e)){e.appendPath(a);var t=e.getContext();t&&e.rebuildPath(t,1)}},s};function Jf(e,t){if(e.applyTransform){var a=e.getBoundingRect().calculateTransform(t);e.applyTransform(a)}}function eg(e,t){return np(e,e,{lineWidth:t}),e}var tg=op;function ag(e,t,a){return t&&!Fn(t)&&(t=Wc.getLocalTransform(t)),a&&(t=fo([],t)),zs([],e,t)}function rg(e){return!e.isGroup}function ig(e,t,a){if(e&&t){var r,i=(r={},e.traverse(function(e){rg(e)&&e.anid&&(r[e.anid]=e)}),r);t.traverse(function(e){if(rg(e)&&e.anid){var t=i[e.anid];if(t){var r=n(e);e.attr(n(t)),Rf(e,r,a,Cp(e).dataIndex)}}})}function n(e){var t={x:e.x,y:e.y,rotation:e.rotation};return function(e){return null!=e.shape}(e)&&(t.shape=Pn(e.shape)),t}}function ng(e,t,a){var r=zn({rectHover:!0},t),i=r.style={strokeNoScale:!0};if(a=a||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),En(i,a),new rp(r)):Kf(e.replace("path://",""),r,a,"center")}function sg(e,t,a,r,i,n,s,o){var l,c=a-e,d=r-t,u=s-i,h=o-n,p=og(u,h,c,d);if((l=p)<=1e-6&&l>=-1e-6)return!1;var m=e-i,f=t-n,g=og(m,f,c,d)/p;if(g<0||g>1)return!1;var x=og(m,f,u,h)/p;return!(x<0||x>1)}function og(e,t,a,r){return e*r-a*t}function lg(e,t,a,r,i){return null==t||(Zn(t)?cg[0]=cg[1]=cg[2]=cg[3]=t:(cg[0]=t[0],cg[1]=t[1],cg[2]=t[2],cg[3]=t[3]),r&&(cg[0]=wd(0,cg[0]),cg[1]=wd(0,cg[1]),cg[2]=wd(0,cg[2]),cg[3]=wd(0,cg[3])),a&&(cg[0]=-cg[0],cg[1]=-cg[1],cg[2]=-cg[2],cg[3]=-cg[3]),dg(e,cg,"x","width",3,1,i&&i[0]||0),dg(e,cg,"y","height",0,2,i&&i[1]||0)),e}var cg=[0,0,0,0];function dg(e,t,a,r,i,n,s){var o=t[n]+t[i],l=e[r];e[r]+=o,s=wd(0,jd(s,l)),e[r]<s?(e[r]=s,e[a]+=t[i]>=0?-t[i]:t[n]>=0?l+t[n]:Nd(o)>1e-8?(l-s)*t[i]/o:0):e[a]-=t[i]}function ug(e){var t=e.itemTooltipOption,a=e.componentModel,r=e.itemName,i=Kn(t)?{formatter:t}:t,n=a.mainType,s=a.componentIndex,o={componentType:n,name:r,$vars:["name"]};o[n+"Index"]=s;var l=e.formatterParamsExtra;l&&Bn(Wn(l),function(e){bs(o,e)||(o[e]=l[e],o.$vars.push(e))});var c=Cp(e.el);c.componentMainType=n,c.componentIndex=s,c.tooltipConfig={name:r,option:En({content:r,encodeHTMLContent:!0,formatterParams:o},i)}}function hg(e,t){var a;e.isGroup&&(a=t(e)),a||e.traverse(t)}function pg(e,t){if(e)if($n(e))for(var a=0;a<e.length;a++)hg(e[a],t);else hg(e,t)}function mg(e){return!e||Nd(e[1])<fg&&Nd(e[2])<fg||Nd(e[0])<fg&&Nd(e[3])<fg}var fg=1e-5;function gg(e,t){return e?Do.copy(e,t):t.clone()}function xg(e,t){return t?uo(e||[1,0,0,1,0,0],t):void 0}function vg(e){return{z:e.get("z")||0,zlevel:e.get("zlevel")||0}}function yg(e,t,a){bg(e,t,a,-1/0)}function bg(e,t,a,r){if(e.ignoreModelZ)return r;var i=e.getTextContent(),n=e.getTextGuideLine();if(e.isGroup)for(var s=e.childrenRef(),o=0;o<s.length;o++)r=wd(bg(s[o],t,a,r),r);else e.z=t,e.zlevel=a,r=wd(e.z2||0,r);if(i&&(i.z=t,i.zlevel=a,isFinite(r)&&(i.z2=r+2)),n){var l=e.textGuideLineConfig;n.z=t,n.zlevel=a,isFinite(r)&&(n.z2=r+(l&&l.showAbove?1:-1))}return r}Yf("circle",Fm),Yf("ellipse",qm),Yf("sector",af),Yf("ring",nf),Yf("polygon",lf),Yf("polyline",df),Yf("rect",dp),Yf("line",pf),Yf("bezierCurve",xf),Yf("arc",yf);const _g=Object.freeze(Object.defineProperty({__proto__:null,Arc:yf,BezierCurve:xf,BoundingRect:Do,Circle:Fm,CompoundPath:bf,Ellipse:qm,Group:gd,Image:rp,IncrementalDisplayable:Lf,Line:pf,LinearGradient:jf,OrientedBoundingRect:Af,Path:Qh,Point:go,Polygon:lf,Polyline:df,RadialGradient:wf,Rect:dp,Ring:nf,Sector:af,Text:mp,WH:Uf,XY:Gf,applyTransform:ag,calcZ2Range:function(e){var t=-1/0,a=1/0;function r(e){if(e&&!e.isGroup){var t=e.currentStates;if(t.length)for(var a=0;a<t.length;a++)i(e.states[t[a]]);i(e)}}function i(e){if(e){var r=e.z2;r>t&&(t=r),r<a&&(a=r)}}return hg(e,function(e){r(e),r(e.getTextContent()),r(e.getTextGuideLine())}),a>t&&(a=t=0),{min:a,max:t}},clipPointsByRect:function(e,t){return qn(e,function(e){var a=e[0];a=wd(a,t.x),a=jd(a,t.x+t.width);var r=e[1];return r=wd(r,t.y),[a,r=jd(r,t.y+t.height)]})},clipRectByRect:function(e,t){var a=wd(e.x,t.x),r=jd(e.x+e.width,t.x+t.width),i=wd(e.y,t.y),n=jd(e.y+e.height,t.y+t.height);if(r>=a&&n>=i)return{x:a,y:i,width:r-a,height:n-i}},createIcon:ng,ensureCopyRect:gg,ensureCopyTransform:xg,expandOrShrinkRect:lg,extendPath:function(e,t){return $f(e,t)},extendShape:function(e){return Qh.extend(e)},getShapeClass:function(e){if(Wf.hasOwnProperty(e))return Wf[e]},getTransform:function(e,t){for(var a=co([]);e&&e!==t;)ho(a,e.getLocalTransform(),a),e=e.parent;return a},groupTransition:ig,initProps:Of,isBoundingRectAxisAligned:mg,isElementRemoved:Ff,lineLineIntersect:sg,linePolygonIntersect:function(e,t,a,r,i){for(var n=0,s=i[i.length-1];n<i.length;n++){var o=i[n];if(sg(e,t,a,r,o[0],o[1],s[0],s[1]))return!0;s=o}},makeImage:Xf,makePath:Kf,mergePath:Qf,registerShape:Yf,removeElement:Bf,removeElementWithFadeOut:Vf,resizePath:Jf,retrieveZInfo:vg,setTooltipConfig:ug,subPixelOptimize:tg,subPixelOptimizeLine:eg,subPixelOptimizeRect:function(e,t){return sp(e,e,t),e},transformDirection:function(e,t,a){var r=0===t[4]||0===t[5]||0===t[0]?1:Nd(2*t[4]/t[0]),i=0===t[4]||0===t[5]||0===t[2]?1:Nd(2*t[4]/t[2]),n=["left"===e?-r:"right"===e?r:0,"top"===e?-i:"bottom"===e?i:0];return n=ag(n,t,a),Nd(n[0])>Nd(n[1])?n[0]>0?"right":"left":n[1]>0?"bottom":"top"},traverseElements:pg,traverseUpdateZ:yg,updateProps:Rf},Symbol.toStringTag,{value:"Module"}));var jg={};function wg(e,t,a){var r,i=e.labelFetcher,n=e.labelDataIndex,s=e.labelDimIndex,o=t.normal;i&&(r=i.getFormattedLabel(n,"normal",null,s,o&&o.get("formatter"),null!=a?{interpolatedValue:a}:null)),null==r&&(r=Yn(e.defaultText)?e.defaultText(n,e,a):e.defaultText);for(var l={normal:r},c=0;c<Ip.length;c++){var d=Ip[c],u=t[d];l[d]=ns(i?i.getFormattedLabel(n,d,null,s,u&&u.get("formatter")):null,r)}return l}function Ng(e,t,a,r){a=a||jg;for(var i=e instanceof mp,n=!1,s=0;s<Ap.length;s++){if((h=t[Ap[s]])&&h.getShallow("show")){n=!0;break}}var o=i?e:e.getTextContent();if(n){i||(o||(o=new mp,e.setTextContent(o)),e.stateProxy&&(o.stateProxy=e.stateProxy));var l=wg(a,t),c=t.normal,d=!!c.getShallow("show"),u=Cg(c,r&&r.normal,a,!1,!i);u.text=l.normal,i||e.setTextConfig(kg(c,a,!1));for(s=0;s<Ip.length;s++){var h,p=Ip[s];if(h=t[p]){var m=o.ensureState(p),f=!!ns(h.getShallow("show"),d);if(f!==d&&(m.ignore=!f),m.style=Cg(h,r&&r[p],a,!0,!i),m.style.text=l[p],!i)e.ensureState(p).textConfig=kg(h,a,!0)}}o.silent=!!c.getShallow("silent"),null!=o.style.x&&(u.x=o.style.x),null!=o.style.y&&(u.y=o.style.y),o.ignore=!d,o.useStyle(u),o.dirty(),a.enableTextSetter&&(Ag(o).setLabelText=function(e){var r=wg(a,t,e);!function(e,t){for(var a=0;a<Ip.length;a++){var r=Ip[a],i=t[r],n=e.ensureState(r);n.style=n.style||{},n.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}(o,r)})}else o&&(o.ignore=!0);e.dirty()}function Sg(e,t){t=t||"label";for(var a={normal:e.getModel(t)},r=0;r<Ip.length;r++){var i=Ip[r];a[i]=e.getModel([i,t])}return a}function Cg(e,t,a,r,i){var n={};return function(e,t,a,r,i){a=a||jg;var n,s=t.ecModel,o=s&&s.option.textStyle,l=function(e){var t;for(;e&&e!==e.ecModel;){var a=(e.option||jg).rich;if(a){t=t||{};for(var r=Wn(a),i=0;i<r.length;i++){t[r[i]]=1}}e=e.parentModel}return t}(t);if(l){n={};var c="richInheritPlainLabel",d=ns(t.get(c),s?s.get(c):void 0);for(var u in l)if(l.hasOwnProperty(u)){var h=t.getModel(["rich",u]);Ig(n[u]={},h,o,t,d,a,r,i,!1,!0)}}n&&(e.rich=n);var p=t.get("overflow");p&&(e.overflow=p);var m=t.get("lineOverflow");m&&(e.lineOverflow=m);var f=e,g=t.get("minMargin");if(null!=g)g=Zn(g)?g/2:0,f.margin=[g,g,g,g],f.__marginType=zg.minMargin;else{var x=t.get("textMargin");null!=x&&(f.margin=ls(x),f.__marginType=zg.textMargin)}Ig(e,t,o,null,null,a,r,i,!0,!1)}(n,e,a,r,i),t&&zn(n,t),n}function kg(e,t,a){t=t||{};var r,i={},n=e.getShallow("rotate"),s=ns(e.getShallow("distance"),a?null:5),o=e.getShallow("offset");return"outside"===(r=e.getShallow("position")||(a?null:"inside"))&&(r=t.defaultOutsidePosition||"top"),null!=r&&(i.position=r),null!=o&&(i.offset=o),null!=n&&(n*=Math.PI/180,i.rotation=n),null!=s&&(i.distance=s),i.outsideFill="inherit"===e.get("color")?t.inheritColor||null:"auto",null!=t.autoOverflowArea&&(i.autoOverflowArea=t.autoOverflowArea),null!=t.layoutRect&&(i.layoutRect=t.layoutRect),i}var Mg=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Tg=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Dg=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Ig(e,t,a,r,i,n,s,o,l,c){a=!s&&a||jg;var d=n&&n.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),p=ns(t.getShallow("opacity"),a.opacity);"inherit"!==u&&"auto"!==u||(u=d||null),"inherit"!==h&&"auto"!==h||(h=d||null),o||(u=u||a.color,h=h||a.textBorderColor),null!=u&&(e.fill=u),null!=h&&(e.stroke=h);var m=ns(t.getShallow("textBorderWidth"),a.textBorderWidth);null!=m&&(e.lineWidth=m);var f=ns(t.getShallow("textBorderType"),a.textBorderType);null!=f&&(e.lineDash=f);var g=ns(t.getShallow("textBorderDashOffset"),a.textBorderDashOffset);null!=g&&(e.lineDashOffset=g),s||null!=p||c||(p=n&&n.defaultOpacity),null!=p&&(e.opacity=p),s||o||null==e.fill&&n.inheritColor&&(e.fill=n.inheritColor);for(var x=0;x<Mg.length;x++){var v=Mg[x];null!=(b=!1!==i&&r?ss(t.getShallow(v),r.getShallow(v),a[v]):ns(t.getShallow(v),a[v]))&&(e[v]=b)}for(x=0;x<Tg.length;x++){v=Tg[x];null!=(b=t.getShallow(v))&&(e[v]=b)}if(null==e.verticalAlign){var y=t.getShallow("baseline");null!=y&&(e.verticalAlign=y)}if(!l||!n.disableBox){for(x=0;x<Dg.length;x++){var b;v=Dg[x];null!=(b=t.getShallow(v))&&(e[v]=b)}var _=t.getShallow("borderType");null!=_&&(e.borderDash=_),"auto"!==e.backgroundColor&&"inherit"!==e.backgroundColor||!d||(e.backgroundColor=d),"auto"!==e.borderColor&&"inherit"!==e.borderColor||!d||(e.borderColor=d)}}var Ag=ru();var Pg,Lg,zg={minMargin:1,textMargin:2},Eg=["textStyle","color"],Rg=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Og=new mp,Fg=function(){function e(){}return e.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Eg):null)},e.prototype.getFont=function(){return e={fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},t=this.ecModel,a=t&&t.getModel("textStyle"),ds([e.fontStyle||a&&a.getShallow("fontStyle")||"",e.fontWeight||a&&a.getShallow("fontWeight")||"",(e.fontSize||a&&a.getShallow("fontSize")||12)+"px",e.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "));var e,t,a},e.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},a=0;a<Rg.length;a++)t[Rg[a]]=this.getShallow(Rg[a]);return Og.useStyle(t),Og.update(),Og.getBoundingRect()},e}(),Bg=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],qg=yu(Bg),Vg=function(){function e(){}return e.prototype.getLineStyle=function(e){return qg(this,e)},e}(),Hg=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Wg=yu(Hg),Gg=function(){function e(){}return e.prototype.getItemStyle=function(e,t){return Wg(this,e,t)},e}(),Ug=function(){function e(e,t,a){this.parentModel=t,this.ecModel=a,this.option=e}return e.prototype.init=function(e,t,a){},e.prototype.mergeOption=function(e,t){Ln(this.option,e,!0)},e.prototype.get=function(e,t){return null==e?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},e.prototype.getShallow=function(e,t){var a=this.option,r=null==a?a:a[e];if(null==r&&!t){var i=this.parentModel;i&&(r=i.getShallow(e))}return r},e.prototype.getModel=function(t,a){var r=null!=t,i=r?this.parsePath(t):null;return new e(r?this._doGet(i):this.option,a=a||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),this.ecModel)},e.prototype.isEmpty=function(){return null==this.option},e.prototype.restoreData=function(){},e.prototype.clone=function(){return new(0,this.constructor)(Pn(this.option))},e.prototype.parsePath=function(e){return"string"==typeof e?e.split("."):e},e.prototype.resolveParentPath=function(e){return e},e.prototype.isAnimationEnabled=function(){if(!fn.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(e,t){var a=this.option;if(!e)return a;for(var r=0;r<e.length&&(!e[r]||null!=(a=a&&"object"==typeof a?a[e[r]]:null));r++);return null==a&&t&&(a=t._doGet(this.resolveParentPath(e),t.parentModel)),a},e}();pu(Ug),Pg=Ug,Lg=["__\0is_clz",fu++].join("_"),Pg.prototype[Lg]=!0,Pg.isInstance=function(e){return!(!e||!e[Lg])},On(Ug,Vg),On(Ug,Gg),On(Ug,_u),On(Ug,Fg);var $g=Math.round(10*Math.random());function Yg(e){return[e||"",$g++].join("_")}function Kg(e,t){return Ln(Ln({},e,!0),t,!0)}var Xg="ZH",Zg="EN",Qg=Zg,Jg={},ex={},tx=fn.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||Qg).toUpperCase().indexOf(Xg)>-1?Xg:Qg;function ax(e,t){e=e.toUpperCase(),ex[e]=new Ug(t),Jg[e]=t}ax(Zg,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),ax(Xg,{time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}});function rx(){return null}var ix=1e3,nx=6e4,sx=36e5,ox=864e5,lx=31536e6,cx={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},dx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},ux="{yyyy}-{MM}-{dd}",hx={year:"{yyyy}",month:"{yyyy}-{MM}",day:ux,hour:ux+" "+dx.hour,minute:ux+" "+dx.minute,second:ux+" "+dx.second,millisecond:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},px=["year","month","day","hour","minute","second","millisecond"],mx=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function fx(e){return Kn(e)||Yn(e)?e:function(e){e=e||{};var t={},a=!0;return Bn(px,function(t){a&&(a=null==e[t])}),Bn(px,function(r,i){var n=e[r];t[r]={};for(var s=null,o=i;o>=0;o--){var l=px[o],c=Qn(n)&&!$n(n)?n[l]:n,d=void 0;$n(c)?s=(d=c.slice())[0]||"":Kn(c)?d=[s=c]:(null==s?s=dx[r]:cx[l].test(s)||(s=t[l][l][0]+" "+s),d=[s],a&&(d[1]="{primary|"+s+"}")),t[r][l]=d}}),t}(e)}function gx(e,t){return"0000".substr(0,t-(e+="").length)+e}function xx(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function vx(e){return e===xx(e)}function yx(e,t,a,r){var i=Ld(e),n=i[jx(a)](),s=i[Nx(a)]()+1,o=Math.floor((s-1)/3)+1,l=i[Sx(a)](),c=i["get"+(a?"UTC":"")+"Day"](),d=i[Cx(a)](),u=(d-1)%12+1,h=i[kx(a)](),p=i[Mx(a)](),m=i[Tx(a)](),f=d>=12?"pm":"am",g=f.toUpperCase(),x=r instanceof Ug?r:function(e){return ex[e]}(r||tx)||ex[Qg],v=x.getModel("time"),y=v.get("month"),b=v.get("monthAbbr"),_=v.get("dayOfWeek"),j=v.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,f+"").replace(/{A}/g,g+"").replace(/{yyyy}/g,n+"").replace(/{yy}/g,gx(n%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,y[s-1]).replace(/{MMM}/g,b[s-1]).replace(/{MM}/g,gx(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,gx(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[c]).replace(/{ee}/g,j[c]).replace(/{e}/g,c+"").replace(/{HH}/g,gx(d,2)).replace(/{H}/g,d+"").replace(/{hh}/g,gx(u+"",2)).replace(/{h}/g,u+"").replace(/{mm}/g,gx(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,gx(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,gx(m,3)).replace(/{S}/g,m+"")}function bx(e,t){var a=Ld(e),r=a[Nx(t)]()+1,i=a[Sx(t)](),n=a[Cx(t)](),s=a[kx(t)](),o=a[Mx(t)](),l=0===a[Tx(t)](),c=l&&0===o,d=c&&0===s,u=d&&0===n,h=u&&1===i;return h&&1===r?"year":h?"month":u?"day":d?"hour":c?"minute":l?"second":"millisecond"}function _x(e,t,a){switch(t){case"year":e[Ix(a)](0);case"month":e[Ax(a)](1);case"day":e[Px(a)](0);case"hour":e[Lx(a)](0);case"minute":e[zx(a)](0);case"second":e[Ex(a)](0)}return e}function jx(e){return e?"getUTCFullYear":"getFullYear"}function Nx(e){return e?"getUTCMonth":"getMonth"}function Sx(e){return e?"getUTCDate":"getDate"}function Cx(e){return e?"getUTCHours":"getHours"}function kx(e){return e?"getUTCMinutes":"getMinutes"}function Mx(e){return e?"getUTCSeconds":"getSeconds"}function Tx(e){return e?"getUTCMilliseconds":"getMilliseconds"}function Dx(e){return e?"setUTCFullYear":"setFullYear"}function Ix(e){return e?"setUTCMonth":"setMonth"}function Ax(e){return e?"setUTCDate":"setDate"}function Px(e){return e?"setUTCHours":"setHours"}function Lx(e){return e?"setUTCMinutes":"setMinutes"}function zx(e){return e?"setUTCSeconds":"setSeconds"}function Ex(e){return e?"setUTCMilliseconds":"setMilliseconds"}function Rx(e){if(isNaN(Rd(e)))return Kn(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function Ox(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Fx=ls;function Bx(e,t,a){function r(e){return e&&ds(e)?e:"-"}function i(e){return!(null==e||isNaN(e)||!isFinite(e))}var n="time"===t,s=e instanceof Date;if(n||s){var o=n?Ld(e):e;if(!isNaN(+o))return yx(o,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",a);if(s)return"-"}if("ordinal"===t)return Xn(e)?r(e):Zn(e)&&i(e)?e+"":"-";var l=Rd(e);return i(l)?Rx(l):Xn(e)?r(e):"boolean"==typeof e?e+"":"-"}var qx=["a","b","c","d","e","f","g"],Vx=function(e,t){return"{"+e+(null==t?"":t)+"}"};function Hx(e,t,a){$n(t)||(t=[t]);var r=t.length;if(!r)return"";for(var i=t[0].$vars||[],n=0;n<i.length;n++){var s=qx[n];e=e.replace(Vx(s),Vx(s,0))}for(var o=0;o<r;o++)for(var l=0;l<i.length;l++){var c=t[o][i[l]];e=e.replace(Vx(qx[l],o),a?Xs(c):c)}return e}function Wx(e,t){return t=t||"transparent",Kn(e)?e:Qn(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Gx(e,t){if("_blank"===t||"blank"===t){var a=window.open();a.opener=null,a.location.href=e}else window.open(e,t)}var Ux={},$x={},Yx=function(){function e(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return e.prototype.create=function(e,t){function a(a,r){var i=[];return Bn(a,function(a,r){var n=a.create(e,t);i=i.concat(n||[])}),i}this._nonSeriesBoxMasterList=a(Ux),this._normalMasterList=a($x)},e.prototype.update=function(e,t){Bn(this._normalMasterList,function(a){a.update&&a.update(e,t)})},e.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},e.register=function(e,t){"matrix"!==e&&"calendar"!==e?$x[e]=t:Ux[e]=t},e.get=function(e){return $x[e]||Ux[e]},e}();var Kx=1,Xx=2;var Zx=xs();var Qx=0,Jx=1,ev=2;function tv(e,t){var a=e.getShallow("coordinateSystem"),r=e.getShallow("coordinateSystemUsage",!0),i=Qx;if(a){var n="series"===e.mainType;null==r&&(r=n?"data":"box"),"data"===r?(i=Jx,n||(i=Qx)):"box"===r&&(i=ev,n||function(e){return!!Ux[e]}(a)||(i=Qx))}return{coordSysType:a,kind:i}}var av=Bn,rv=["left","right","top","bottom","width","height"],iv=[["width","left","right"],["height","top","bottom"]];function nv(e,t,a,r,i){var n=0,s=0;null==r&&(r=1/0),null==i&&(i=1/0);var o=0;t.eachChild(function(l,c){var d,u,h=l.getBoundingRect(),p=t.childAt(c+1),m=p&&p.getBoundingRect();if("horizontal"===e){var f=h.width+(m?-m.x+h.x:0);(d=n+f)>r||l.newline?(n=0,d=f,s+=o+a,o=h.height):o=Math.max(o,h.height)}else{var g=h.height+(m?-m.y+h.y:0);(u=s+g)>i||l.newline?(n+=o+a,s=0,u=g,o=h.width):o=Math.max(o,h.width)}l.newline||(l.x=n,l.y=s,l.markRedraw(),"horizontal"===e?n=d+a:s=u+a)})}var sv=nv;function ov(e,t){var a=function(e,t){var a,r,i=dv(e,t,{enableLayoutOnlyByCenter:!0}),n=e.getBoxLayoutParams();if(i.type===cv.point)r=i.refPoint,a=lv(n,{width:t.getWidth(),height:t.getHeight()});else{var s=e.get("center"),o=$n(s)?s:[s,s];a=lv(n,i.refContainer),r=i.boxCoordFrom===Xx?i.refPoint:[Cd(o[0],a.width)+a.x,Cd(o[1],a.height)+a.y]}return{viewRect:a,center:r}}(e,t),r=a.viewRect,i=a.center,n=e.get("radius");$n(n)||(n=[0,n]);var s=Cd(r.width,t.getWidth()),o=Cd(r.height,t.getHeight()),l=Math.min(s,o),c=Cd(n[0],l/2),d=Cd(n[1],l/2);return{cx:i[0],cy:i[1],r0:c,r:d,viewRect:r}}function lv(e,t,a){a=Fx(a||0);var r=t.width,i=t.height,n=Cd(e.left,r),s=Cd(e.top,i),o=Cd(e.right,r),l=Cd(e.bottom,i),c=Cd(e.width,r),d=Cd(e.height,i),u=a[2]+a[0],h=a[1]+a[3],p=e.aspect;switch(isNaN(c)&&(c=r-o-h-n),isNaN(d)&&(d=i-l-u-s),null!=p&&(isNaN(c)&&isNaN(d)&&(p>r/i?c=.8*r:d=.8*i),isNaN(c)&&(c=p*d),isNaN(d)&&(d=c/p)),isNaN(n)&&(n=r-o-c-h),isNaN(s)&&(s=i-l-d-u),e.left||e.right){case"center":n=r/2-c/2-a[3];break;case"right":n=r-c-h}switch(e.top||e.bottom){case"middle":case"center":s=i/2-d/2-a[0];break;case"bottom":s=i-d-u}n=n||0,s=s||0,isNaN(c)&&(c=r-h-n-(o||0)),isNaN(d)&&(d=i-u-s-(l||0));var m=new Do((t.x||0)+n+a[3],(t.y||0)+s+a[0],c,d);return m.margin=a,m}Un(nv,"vertical"),Un(nv,"horizontal");var cv={rect:1,point:2};function dv(e,t,a){var r,i,n,s,o=e.boxCoordinateSystem;if(o){var l=function(e){var t=e.getShallow("coord",!0),a=Kx;if(null==t){var r=Zx.get(e.type);r&&r.getCoord2&&(a=Xx,t=r.getCoord2(e))}return{coord:t,from:a}}(e),c=l.coord,d=l.from;if(o.dataToLayout){n=cv.rect,s=d;var u=o.dataToLayout(c);r=u.contentRect||u.rect}else a&&a.enableLayoutOnlyByCenter&&o.dataToPoint&&(n=cv.point,s=d,i=o.dataToPoint(c))}return null==n&&(n=cv.rect),n===cv.rect&&(r||(r={x:0,y:0,width:t.getWidth(),height:t.getHeight()}),i=[r.x+r.width/2,r.y+r.height/2]),{type:n,refContainer:r,refPoint:i,boxCoordFrom:s}}function uv(e){var t=e.layoutMode||e.constructor.layoutMode;return Qn(t)?t:t?{type:t}:null}function hv(e,t,a){var r=a&&a.ignoreSize;!$n(r)&&(r=[r,r]);var i=s(iv[0],0),n=s(iv[1],1);function s(a,i){var n={},s=0,l={},c=0;if(av(a,function(t){l[t]=e[t]}),av(a,function(e){bs(t,e)&&(n[e]=l[e]=t[e]),o(n,e)&&s++,o(l,e)&&c++}),r[i])return o(t,a[1])?l[a[2]]=null:o(t,a[2])&&(l[a[1]]=null),l;if(2!==c&&s){if(s>=2)return n;for(var d=0;d<a.length;d++){var u=a[d];if(!bs(n,u)&&bs(e,u)){n[u]=e[u];break}}return n}return l}function o(e,t){return null!=e[t]&&"auto"!==e[t]}function l(e,t,a){av(e,function(e){t[e]=a[e]})}l(iv[0],e,i),l(iv[1],e,n)}function pv(e){return function(e,t){return t&&e&&av(rv,function(a){bs(t,a)&&(e[a]=t[a])}),e}({},e)}var mv=ru(),fv=function(e){function t(t,a,r){var i=e.call(this,t,a,r)||this;return i.uid=Yg("ec_cpt_model"),i}var a;return pn(t,e),t.prototype.init=function(e,t,a){this.mergeDefaultAndTheme(e,a)},t.prototype.mergeDefaultAndTheme=function(e,t){var a=uv(this),r=a?pv(e):{};Ln(e,t.getTheme().get(this.mainType)),Ln(e,this.getDefaultOption()),a&&hv(e,r,a)},t.prototype.mergeOption=function(e,t){Ln(this.option,e,!0);var a=uv(this);a&&hv(this.option,e,a)},t.prototype.optionUpdated=function(e,t){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!function(e){return!(!e||!e[uu])}(e))return e.defaultOption;var t=mv(this);if(!t.defaultOption){for(var a=[],r=e;r;){var i=r.prototype.defaultOption;i&&a.push(i),r=r.superClass}for(var n={},s=a.length-1;s>=0;s--)n=Ln(n,a[s],!0);t.defaultOption=n}return t.defaultOption},t.prototype.getReferringComponents=function(e,t){var a=e+"Index",r=e+"Id";return lu(this.ecModel,e,{index:this.get(a,!0),id:this.get(r,!0)},t)},t.prototype.getBoxLayoutParams=function(){return t=!1,{left:(e=this).getShallow("left",t),top:e.getShallow("top",t),right:e.getShallow("right",t),bottom:e.getShallow("bottom",t),width:e.getShallow("width",t),height:e.getShallow("height",t)};var e,t},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=((a=t.prototype).type="component",a.id="",a.name="",a.mainType="",a.subType="",void(a.componentIndex=0)),t}(Ug);mu(fv,Ug),vu(fv),function(e){var t={};e.registerSubTypeDefaulter=function(e,a){var r=hu(e);t[r.main]=a},e.determineSubType=function(a,r){var i=r.type;if(!i){var n=hu(a).main;e.hasSubTypes(a)&&t[n]&&(i=t[n](r))}return i}}(fv),function(e,t){function a(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,r,i,n){if(e.length){var s=function(e){var r={},i=[];return Bn(e,function(n){var s=a(r,n),o=function(e,t){var a=[];return Bn(e,function(e){Rn(t,e)>=0&&a.push(e)}),a}(s.originalDeps=t(n),e);s.entryCount=o.length,0===s.entryCount&&i.push(n),Bn(o,function(e){Rn(s.predecessor,e)<0&&s.predecessor.push(e);var t=a(r,e);Rn(t.successor,e)<0&&t.successor.push(n)})}),{graph:r,noEntryList:i}}(r),o=s.graph,l=s.noEntryList,c={};for(Bn(e,function(e){c[e]=!0});l.length;){var d=l.pop(),u=o[d],h=!!c[d];h&&(i.call(n,d,u.originalDeps.slice()),delete c[d]),Bn(u.successor,h?m:p)}Bn(c,function(){throw new Error("")})}function p(e){o[e].entryCount--,0===o[e].entryCount&&l.push(e)}function m(e){c[e]=!0,p(e)}}}(fv,function(e){var t=[];Bn(fv.getClassesByMainType(e),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=qn(t,function(e){return hu(e).main}),"dataset"!==e&&Rn(t,"dataset")<=0&&t.unshift("dataset");return t});var gv={color:{},darkColor:{},size:{}},xv=gv.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};for(var vv in zn(xv,{primary:xv.neutral80,secondary:xv.neutral70,tertiary:xv.neutral60,quaternary:xv.neutral50,disabled:xv.neutral20,border:xv.neutral30,borderTint:xv.neutral20,borderShade:xv.neutral40,background:xv.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:xv.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:xv.neutral70,axisLineTint:xv.neutral40,axisTick:xv.neutral70,axisTickMinor:xv.neutral60,axisLabel:xv.neutral70,axisSplitLine:xv.neutral15,axisMinorSplitLine:xv.neutral05}),xv)if(xv.hasOwnProperty(vv)){var yv=xv[vv];"theme"===vv?gv.darkColor.theme=xv.theme.slice():"highlight"===vv?gv.darkColor.highlight="rgba(255,231,130,0.4)":0===vv.indexOf("accent")?gv.darkColor[vv]=Ul(yv,0,function(e){return.5*e},function(e){return Math.min(1,1.3-e)}):gv.darkColor[vv]=Ul(yv,0,function(e){return.9*e},function(e){return 1-Math.pow(e,1.5)})}gv.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var bv="";"undefined"!=typeof navigator&&(bv=navigator.platform||"");var _v="rgba(0, 0, 0, 0.2)",jv=gv.color.theme[0],wv=Ul(jv,0,null,.9);const Nv={darkMode:"auto",colorBy:"series",color:gv.color.theme,gradientColor:[wv,jv],aria:{decal:{decals:[{color:_v,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:_v,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:_v,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:_v,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:_v,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:_v,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:bv.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Sv=xs(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Cv="original",kv="arrayRows",Mv="objectRows",Tv="keyedColumns",Dv="typedArray",Iv="unknown",Av="column",Pv="row",Lv=1,zv=2,Ev=3,Rv=ru();function Ov(e,t,a){var r={},i=Bv(t);if(!i||!e)return r;var n,s,o=[],l=[],c=t.ecModel,d=Rv(c).datasetMap,u=i.uid+"_"+a.seriesLayoutBy;Bn(e=e.slice(),function(t,a){var i=Qn(t)?t:e[a]={name:t};"ordinal"===i.type&&null==n&&(n=a,s=m(i)),r[i.name]=[]});var h=d.get(u)||d.set(u,{categoryWayDim:s,valueWayDim:0});function p(e,t,a){for(var r=0;r<a;r++)e.push(t+r)}function m(e){var t=e.dimsDef;return t?t.length:1}return Bn(e,function(e,t){var a=e.name,i=m(e);if(null==n){var s=h.valueWayDim;p(r[a],s,i),p(l,s,i),h.valueWayDim+=i}else if(n===t)p(r[a],0,i),p(o,0,i);else{s=h.categoryWayDim;p(r[a],s,i),p(l,s,i),h.categoryWayDim+=i}}),o.length&&(r.itemName=o),l.length&&(r.seriesName=l),r}function Fv(e,t,a){var r={};if(!Bv(e))return r;var i,n=t.sourceFormat,s=t.dimensionsDefine;n!==Mv&&n!==Tv||Bn(s,function(e,t){"name"===(Qn(e)?e.name:e)&&(i=t)});var o=function(){for(var e={},r={},o=[],l=0,c=Math.min(5,a);l<c;l++){var d=Vv(t.data,n,t.seriesLayoutBy,s,t.startIndex,l);o.push(d);var u=d===Ev;if(u&&null==e.v&&l!==i&&(e.v=l),(null==e.n||e.n===e.v||!u&&o[e.n]===Ev)&&(e.n=l),h(e)&&o[e.n]!==Ev)return e;u||(d===zv&&null==r.v&&l!==i&&(r.v=l),null!=r.n&&r.n!==r.v||(r.n=l))}function h(e){return null!=e.v&&null!=e.n}return h(e)?e:h(r)?r:null}();if(o){r.value=[o.v];var l=null!=i?i:o.n;r.itemName=[l],r.seriesName=[l]}return r}function Bv(e){if(!e.get("data",!0))return lu(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},ou).models[0]}function qv(e,t){return Vv(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Vv(e,t,a,r,i,n){var s,o,l;if(es(e))return Ev;if(r){var c=r[n];Qn(c)?(o=c.name,l=c.type):Kn(c)&&(o=c)}if(null!=l)return"ordinal"===l?Lv:Ev;if(t===kv){var d=e;if(a===Pv){for(var u=d[n],h=0;h<(u||[]).length&&h<5;h++)if(null!=(s=v(u[i+h])))return s}else for(h=0;h<d.length&&h<5;h++){var p=d[i+h];if(p&&null!=(s=v(p[n])))return s}}else if(t===Mv){var m=e;if(!o)return Ev;for(h=0;h<m.length&&h<5;h++){if((g=m[h])&&null!=(s=v(g[o])))return s}}else if(t===Tv){if(!o)return Ev;if(!(u=e[o])||es(u))return Ev;for(h=0;h<u.length&&h<5;h++)if(null!=(s=v(u[h])))return s}else if(t===Cv){var f=e;for(h=0;h<f.length&&h<5;h++){var g,x=Yd(g=f[h]);if(!$n(x))return Ev;if(null!=(s=v(x[n])))return s}}function v(e){var t=Kn(e);return null!=e&&Number.isFinite(Number(e))&&""!==e?t?zv:Ev:t&&"-"!==e?Lv:void 0}return Ev}var Hv=xs();var Wv=ru();ru();var Gv,Uv,$v,Yv=function(){function e(){}return e.prototype.getColorFromPalette=function(e,t,a){var r=Gd(this.get("color",!0)),i=this.get("colorLayer",!0);return function(e,t,a,r,i,n,s){n=n||e;var o=t(n),l=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var d=null!=s&&r?function(e,t){for(var a=e.length,r=0;r<a;r++)if(e[r].length>t)return e[r];return e[a-1]}(r,s):a;if(d=d||a,!d||!d.length)return;var u=d[l];i&&(c[i]=u);return o.paletteIdx=(l+1)%d.length,u}(this,Wv,r,i,e,t,a)},e.prototype.clearColorPalette=function(){var e,t;(t=Wv)(e=this).paletteIdx=0,t(e).paletteNameMap={}},e}();var Kv="\0_ec_inner",Xv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.init=function(e,t,a,r,i,n){r=r||{},this.option=null,this._theme=new Ug(r),this._locale=new Ug(i),this._optionManager=n},t.prototype.setOption=function(e,t,a){var r=Jv(t);this._optionManager.setOption(e,a,r),this._resetOption(null,r)},t.prototype.resetOption=function(e,t){return this._resetOption(e,Jv(t))},t.prototype._resetOption=function(e,t){var a=!1,r=this._optionManager;if(!e||"recreate"===e){var i=r.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(i,t)):$v(this,i),a=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var n=r.getTimelineOption(this);n&&(a=!0,this._mergeOption(n,t))}if(!e||"recreate"===e||"media"===e){var s=r.getMediaOption(this);s.length&&Bn(s,function(e){a=!0,this._mergeOption(e,t)},this)}return a},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,t){var a=this.option,r=this._componentsMap,i=this._componentsCount,n=[],s=xs(),o=t&&t.replaceMergeMainTypeMap;Rv(this).datasetMap=xs(),Bn(e,function(e,t){null!=e&&(fv.hasClass(t)?t&&(n.push(t),s.set(t,!0)):a[t]=null==a[t]?Pn(e):Ln(a[t],e,!0))}),o&&o.each(function(e,t){fv.hasClass(t)&&!s.get(t)&&(n.push(t),s.set(t,!0))}),fv.topologicalTravel(n,fv.getAllClassMainTypes(),function(t){var n=function(e,t,a){var r=Hv.get(t);if(!r)return a;var i=r(e);return i?a.concat(i):a}(this,t,Gd(e[t])),s=r.get(t),l=s?o&&o.get(t)?"replaceMerge":"normalMerge":"replaceAll",c=Xd(s,n,l);(function(e,t,a){Bn(e,function(e){var r=e.newOption;Qn(r)&&(e.keyInfo.mainType=t,e.keyInfo.subType=function(e,t,a,r){return t.type?t.type:a?a.subType:r.determineSubType(e,t)}(t,r,e.existing,a))})})(c,t,fv),a[t]=null,r.set(t,null),i.set(t,0);var d,u=[],h=[],p=0;Bn(c,function(e,a){var r=e.existing,i=e.newOption;if(i){var n="series"===t,s=fv.getClass(t,e.keyInfo.subType,!n);if(!s)return;if("tooltip"===t){if(d)return;d=!0}if(r&&r.constructor===s)r.name=e.keyInfo.name,r.mergeOption(i,this),r.optionUpdated(i,!1);else{var o=zn({componentIndex:a},e.keyInfo);zn(r=new s(i,this,this,o),o),e.brandNew&&(r.__requireNewView=!0),r.init(i,this,this),r.optionUpdated(null,!0)}}else r&&(r.mergeOption({},this),r.optionUpdated({},!1));r?(u.push(r.option),h.push(r),p++):(u.push(void 0),h.push(void 0))},this),a[t]=u,r.set(t,h),i.set(t,p),"series"===t&&Gv(this)},this),this._seriesIndices||Gv(this)},t.prototype.getOption=function(){var e=Pn(this.option);return Bn(e,function(t,a){if(fv.hasClass(a)){for(var r=Gd(t),i=r.length,n=!1,s=i-1;s>=0;s--)r[s]&&!tu(r[s])?n=!0:(r[s]=null,!n&&i--);r.length=i,e[a]=r}}),delete e[Kv],e},t.prototype.setTheme=function(e){this._theme=new Ug(e),this._resetOption("recreate",null)},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,t){var a=this._componentsMap.get(e);if(a){var r=a[t||0];if(r)return r;if(null==t)for(var i=0;i<a.length;i++)if(a[i])return a[i]}},t.prototype.queryComponents=function(e){var t=e.mainType;if(!t)return[];var a,r=e.index,i=e.id,n=e.name,s=this._componentsMap.get(t);return s&&s.length?(null!=r?(a=[],Bn(Gd(r),function(e){s[e]&&a.push(s[e])})):a=null!=i?Zv("id",i,s):null!=n?Zv("name",n,s):Hn(s,function(e){return!!e}),Qv(a,e)):[]},t.prototype.findComponents=function(e){var t,a,r,i,n,s=e.query,o=e.mainType,l=(a=o+"Index",r=o+"Id",i=o+"Name",!(t=s)||null==t[a]&&null==t[r]&&null==t[i]?null:{mainType:o,index:t[a],id:t[r],name:t[i]}),c=l?this.queryComponents(l):Hn(this._componentsMap.get(o),function(e){return!!e});return n=Qv(c,e),e.filter?Hn(n,e.filter):n},t.prototype.eachComponent=function(e,t,a){var r=this._componentsMap;if(Yn(e)){var i=t,n=e;r.each(function(e,t){for(var a=0;e&&a<e.length;a++){var r=e[a];r&&n.call(i,t,r,r.componentIndex)}})}else for(var s=Kn(e)?r.get(e):Qn(e)?this.findComponents(e):null,o=0;s&&o<s.length;o++){var l=s[o];l&&t.call(a,l,l.componentIndex)}},t.prototype.getSeriesByName=function(e){var t=Jd(e,null);return Hn(this._componentsMap.get("series"),function(e){return!!e&&null!=t&&e.name===t})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return Hn(this._componentsMap.get("series"),function(t){return!!t&&t.subType===e})},t.prototype.getSeries=function(){return Hn(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,t){Uv(this),Bn(this._seriesIndices,function(a){var r=this._componentsMap.get("series")[a];e.call(t,r,a)},this)},t.prototype.eachRawSeries=function(e,t){Bn(this._componentsMap.get("series"),function(a){a&&e.call(t,a,a.componentIndex)})},t.prototype.eachSeriesByType=function(e,t,a){Uv(this),Bn(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];i.subType===e&&t.call(a,i,r)},this)},t.prototype.eachRawSeriesByType=function(e,t,a){return Bn(this.getSeriesByType(e),t,a)},t.prototype.isSeriesFiltered=function(e){return Uv(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,t){Uv(this);var a=[];Bn(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];e.call(t,i,r)&&a.push(r)},this),this._seriesIndices=a,this._seriesIndicesMap=xs(a)},t.prototype.restoreData=function(e){Gv(this);var t=this._componentsMap,a=[];t.each(function(e,t){fv.hasClass(t)&&a.push(t)}),fv.topologicalTravel(a,fv.getAllClassMainTypes(),function(a){Bn(t.get(a),function(t){!t||"series"===a&&function(e,t){if(t){var a=t.seriesIndex,r=t.seriesId,i=t.seriesName;return null!=a&&e.componentIndex!==a||null!=r&&e.id!==r||null!=i&&e.name!==i}}(t,e)||t.restoreData()})})},t.internalField=(Gv=function(e){var t=e._seriesIndices=[];Bn(e._componentsMap.get("series"),function(e){e&&t.push(e.componentIndex)}),e._seriesIndicesMap=xs(t)},Uv=function(e){},void($v=function(e,t){e.option={},e.option[Kv]=1,e._componentsMap=xs({series:[]}),e._componentsCount=xs();var a,r,i,n=t.aria;Qn(n)&&null==n.enabled&&(n.enabled=!0),a=t,r=e._theme.option,i=a.color&&!a.colorLayer,Bn(r,function(e,t){"colorLayer"===t&&i||"color"===t&&a.color||fv.hasClass(t)||("object"==typeof e?a[t]=a[t]?Ln(a[t],e,!1):Pn(e):null==a[t]&&(a[t]=e))}),Ln(t,Nv,!1),e._mergeOption(t,null)})),t}(Ug);function Zv(e,t,a){if($n(t)){var r=xs();return Bn(t,function(e){null!=e&&(null!=Jd(e,null)&&r.set(e,!0))}),Hn(a,function(t){return t&&r.get(t[e])})}var i=Jd(t,null);return Hn(a,function(t){return t&&null!=i&&t[e]===i})}function Qv(e,t){return t.hasOwnProperty("subType")?Hn(e,function(e){return e&&e.subType===t.subType}):e}function Jv(e){var t=xs();return e&&Bn(Gd(e.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}On(Xv,Yv);var ey=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ty=function(){return function(e){Bn(ey,function(t){this[t]=Gn(e[t],e)},this)}}(),ay=/^(min|max)?(.+)$/,ry=function(){function e(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return e.prototype.setOption=function(e,t,a){e&&(Bn(Gd(e.series),function(e){e&&e.data&&es(e.data)&&hs(e.data)}),Bn(Gd(e.dataset),function(e){e&&e.source&&es(e.source)&&hs(e.source)})),e=Pn(e);var r=this._optionBackup,i=function(e,t,a){var r,i,n=[],s=e.baseOption,o=e.timeline,l=e.options,c=e.media,d=!!e.media,u=!!(l||o||s&&s.timeline);s?(i=s).timeline||(i.timeline=o):((u||d)&&(e.options=e.media=null),i=e);d&&$n(c)&&Bn(c,function(e){e&&e.option&&(e.query?n.push(e):r||(r=e))});function h(e){Bn(t,function(t){t(e,a)})}return h(i),Bn(l,function(e){return h(e)}),Bn(n,function(e){return h(e.option)}),{baseOption:i,timelineOptions:l||[],mediaDefault:r,mediaList:n}}(e,t,!r);this._newBaseOption=i.baseOption,r?(i.timelineOptions.length&&(r.timelineOptions=i.timelineOptions),i.mediaList.length&&(r.mediaList=i.mediaList),i.mediaDefault&&(r.mediaDefault=i.mediaDefault)):this._optionBackup=i},e.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Pn(e?t.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(e){var t,a=this._timelineOptions;if(a.length){var r=e.getComponent("timeline");r&&(t=Pn(a[r.getCurrentIndex()]))}return t},e.prototype.getMediaOption=function(e){var t,a,r=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,s=this._mediaDefault,o=[],l=[];if(!n.length&&!s)return l;for(var c=0,d=n.length;c<d;c++)iy(n[c].query,r,i)&&o.push(c);return!o.length&&s&&(o=[-1]),o.length&&(t=o,a=this._currentMediaIndices,t.join(",")!==a.join(","))&&(l=qn(o,function(e){return Pn(-1===e?s.option:n[e].option)})),this._currentMediaIndices=o,l},e}();function iy(e,t,a){var r={width:t,height:a,aspectratio:t/a},i=!0;return Bn(e,function(e,t){var a=t.match(ay);if(a&&a[1]&&a[2]){var n=a[1],s=a[2].toLowerCase();(function(e,t,a){return"min"===a?e>=t:"max"===a?e<=t:e===t})(r[s],e,n)||(i=!1)}}),i}var ny=Bn,sy=Qn,oy=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function ly(e){var t=e&&e.itemStyle;if(t)for(var a=0,r=oy.length;a<r;a++){var i=oy[a],n=t.normal,s=t.emphasis;n&&n[i]&&(e[i]=e[i]||{},e[i].normal?Ln(e[i].normal,n[i]):e[i].normal=n[i],n[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?Ln(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function cy(e,t,a){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,i=e[t].emphasis;r&&(a?(e[t].normal=e[t].emphasis=null,En(e[t],r)):e[t]=r),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function dy(e){cy(e,"itemStyle"),cy(e,"lineStyle"),cy(e,"areaStyle"),cy(e,"label"),cy(e,"labelLine"),cy(e,"upperLabel"),cy(e,"edgeLabel")}function uy(e,t){var a=sy(e)&&e[t],r=sy(a)&&a.textStyle;if(r)for(var i=0,n=$d.length;i<n;i++){var s=$d[i];r.hasOwnProperty(s)&&(a[s]=r[s])}}function hy(e){e&&(dy(e),uy(e,"label"),e.emphasis&&uy(e.emphasis,"label"))}function py(e){return $n(e)?e:e?[e]:[]}function my(e){return($n(e)?e[0]:e)||{}}function fy(e,t){ny(py(e.series),function(e){sy(e)&&function(e){if(sy(e)){ly(e),dy(e),uy(e,"label"),uy(e,"upperLabel"),uy(e,"edgeLabel"),e.emphasis&&(uy(e.emphasis,"label"),uy(e.emphasis,"upperLabel"),uy(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(ly(t),hy(t));var a=e.markLine;a&&(ly(a),hy(a));var r=e.markArea;r&&hy(r);var i=e.data;if("graph"===e.type){i=i||e.nodes;var n=e.links||e.edges;if(n&&!es(n))for(var s=0;s<n.length;s++)hy(n[s]);Bn(e.categories,function(e){dy(e)})}if(i&&!es(i))for(s=0;s<i.length;s++)hy(i[s]);if((t=e.markPoint)&&t.data){var o=t.data;for(s=0;s<o.length;s++)hy(o[s])}if((a=e.markLine)&&a.data){var l=a.data;for(s=0;s<l.length;s++)$n(l[s])?(hy(l[s][0]),hy(l[s][1])):hy(l[s])}"gauge"===e.type?(uy(e,"axisLabel"),uy(e,"title"),uy(e,"detail")):"treemap"===e.type?(cy(e.breadcrumb,"itemStyle"),Bn(e.levels,function(e){dy(e)})):"tree"===e.type&&dy(e.leaves)}}(e)});var a=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&a.push("valueAxis","categoryAxis","logAxis","timeAxis"),ny(a,function(t){ny(py(e[t]),function(e){e&&(uy(e,"axisLabel"),uy(e.axisPointer,"label"))})}),ny(py(e.parallel),function(e){var t=e&&e.parallelAxisDefault;uy(t,"axisLabel"),uy(t&&t.axisPointer,"label")}),ny(py(e.calendar),function(e){cy(e,"itemStyle"),uy(e,"dayLabel"),uy(e,"monthLabel"),uy(e,"yearLabel")}),ny(py(e.radar),function(e){uy(e,"name"),e.name&&null==e.axisName&&(e.axisName=e.name,delete e.name),null!=e.nameGap&&null==e.axisNameGap&&(e.axisNameGap=e.nameGap,delete e.nameGap)}),ny(py(e.geo),function(e){sy(e)&&(hy(e),ny(py(e.regions),function(e){hy(e)}))}),ny(py(e.timeline),function(e){hy(e),cy(e,"label"),cy(e,"itemStyle"),cy(e,"controlStyle",!0);var t=e.data;$n(t)&&Bn(t,function(e){Qn(e)&&(cy(e,"label"),cy(e,"itemStyle"))})}),ny(py(e.toolbox),function(e){cy(e,"iconStyle"),ny(e.feature,function(e){cy(e,"iconStyle")})}),uy(my(e.axisPointer),"label"),uy(my(e.tooltip).axisPointer,"label")}function gy(e){e&&Bn(xy,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var xy=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],vy=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],yy=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function by(e){var t=e&&e.itemStyle;if(t)for(var a=0;a<yy.length;a++){var r=yy[a][1],i=yy[a][0];null!=t[r]&&(t[i]=t[r])}}function _y(e){e&&"edge"===e.alignTo&&null!=e.margin&&null==e.edgeDistance&&(e.edgeDistance=e.margin)}function jy(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function wy(e,t){if(e)for(var a=0;a<e.length;a++)t(e[a]),e[a]&&wy(e[a].children,t)}function Ny(e,t){fy(e,t),e.series=Gd(e.series),Bn(e.series,function(e){if(Qn(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t){if(null!=e.clockWise&&(e.clockwise=e.clockWise),_y(e.label),(i=e.data)&&!es(i))for(var a=0;a<i.length;a++)_y(i[a]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===t){var r=function(e,t){for(var a=t.split(","),r=e,i=0;i<a.length&&null!=(r=r&&r[a[i]]);i++);return r}(e,"pointer.color");null!=r&&function(e,t,a){for(var r,i=t.split(","),n=e,s=0;s<i.length-1;s++)null==n[r=i[s]]&&(n[r]={}),n=n[r];null==n[i[s]]&&(n[i[s]]=a)}(e,"itemStyle.color",r)}else if("bar"===t){var i;if(by(e),by(e.backgroundStyle),by(e.emphasis),(i=e.data)&&!es(i))for(a=0;a<i.length;a++)"object"==typeof i[a]&&(by(i[a]),by(i[a]&&i[a].emphasis))}else if("sunburst"===t){var n=e.highlightPolicy;n&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=n)),jy(e),wy(e.data,jy)}else"graph"===t||"sankey"===t?function(e){e&&null!=e.focusNodeAdjacency&&(e.emphasis=e.emphasis||{},null==e.emphasis.focus&&(e.emphasis.focus="adjacency"))}(e):"map"===t&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&En(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),gy(e)}}),e.dataRange&&(e.visualMap=e.dataRange),Bn(vy,function(t){var a=e[t];a&&($n(a)||(a=[a]),Bn(a,function(e){gy(e)}))})}var Sy,Cy,ky,My,Ty,Dy,Iy=function(){return function(e){this.data=e.data||(e.sourceFormat===Tv?{}:[]),this.sourceFormat=e.sourceFormat||Iv,this.seriesLayoutBy=e.seriesLayoutBy||Av,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var a=0;a<t.length;a++){var r=t[a];null==r.type&&qv(this,a)===Lv&&(r.type="ordinal")}}}();function Ay(e){return e instanceof Iy}function Py(e,t,a){a=a||zy(e);var r=t.seriesLayoutBy,i=function(e,t,a,r,i){var n,s;if(!e)return{dimensionsDefine:Ey(i),startIndex:s,dimensionsDetectedCount:n};if(t===kv){var o=e;"auto"===r||null==r?Ry(function(e){null!=e&&"-"!==e&&(Kn(e)?null==s&&(s=1):s=0)},a,o,10):s=Zn(r)?r:r?1:0,i||1!==s||(i=[],Ry(function(e,t){i[t]=null!=e?e+"":""},a,o,1/0)),n=i?i.length:a===Pv?o.length:o[0]?o[0].length:null}else if(t===Mv)i||(i=function(e){var t,a=0;for(;a<e.length&&!(t=e[a++]););if(t)return Wn(t)}(e));else if(t===Tv)i||(i=[],Bn(e,function(e,t){i.push(t)}));else if(t===Cv){var l=Yd(e[0]);n=$n(l)&&l.length||1}return{startIndex:s,dimensionsDefine:Ey(i),dimensionsDetectedCount:n}}(e,a,r,t.sourceHeader,t.dimensions);return new Iy({data:e,sourceFormat:a,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Pn(t)})}function Ly(e){return new Iy({data:e,sourceFormat:es(e)?Dv:Cv})}function zy(e){var t=Iv;if(es(e))t=Dv;else if($n(e)){0===e.length&&(t=kv);for(var a=0,r=e.length;a<r;a++){var i=e[a];if(null!=i){if($n(i)||es(i)){t=kv;break}if(Qn(i)){t=Mv;break}}}}else if(Qn(e))for(var n in e)if(bs(e,n)&&Fn(e[n])){t=Tv;break}return t}function Ey(e){if(e){var t=xs();return qn(e,function(e,a){var r={name:(e=Qn(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==r.name)return r;r.name+="",null==r.displayName&&(r.displayName=r.name);var i=t.get(r.name);return i?r.name+="-"+i.count++:t.set(r.name,{count:1}),r})}}function Ry(e,t,a,r){if(t===Pv)for(var i=0;i<a.length&&i<r;i++)e(a[i]?a[i][0]:null,i);else{var n=a[0]||[];for(i=0;i<n.length&&i<r;i++)e(n[i],i)}}function Oy(e){var t=e.sourceFormat;return t===Mv||t===Tv}var Fy=function(){function e(e,t){var a=Ay(e)?e:Ly(e);this._source=a;var r=this._data=a.data,i=a.sourceFormat;a.seriesLayoutBy,i===Dv&&(this._offset=0,this._dimSize=t,this._data=r),Dy(this,r,a)}var t;return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(e,t){},e.prototype.appendData=function(e){},e.prototype.clean=function(){},e.protoInitialize=((t=e.prototype).pure=!1,void(t.persistent=!0)),e.internalField=function(){var e;Dy=function(e,i,n){var s=n.sourceFormat,o=n.seriesLayoutBy,l=n.startIndex,c=n.dimensionsDefine;if(zn(e,Ty[Xy(s,o)]),s===Dv)e.getItem=t,e.count=r,e.fillStorage=a;else{var d=Hy(s,o);e.getItem=Gn(d,null,i,l,c);var u=Uy(s,o);e.count=Gn(u,null,i,l,c)}};var t=function(e,t){e-=this._offset,t=t||[];for(var a=this._data,r=this._dimSize,i=r*e,n=0;n<r;n++)t[n]=a[i+n];return t},a=function(e,t,a,r){for(var i=this._data,n=this._dimSize,s=0;s<n;s++){for(var o=r[s],l=null==o[0]?1/0:o[0],c=null==o[1]?-1/0:o[1],d=t-e,u=a[s],h=0;h<d;h++){var p=i[h*n+s];u[e+h]=p,p<l&&(l=p),p>c&&(c=p)}o[0]=l,o[1]=c}},r=function(){return this._data?this._data.length/this._dimSize:0};function i(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}(e={})[kv+"_"+Av]={pure:!0,appendData:i},e[kv+"_"+Pv]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Mv]={pure:!0,appendData:i},e[Tv]={pure:!0,appendData:function(e){var t=this._data;Bn(e,function(e,a){for(var r=t[a]||(t[a]=[]),i=0;i<(e||[]).length;i++)r.push(e[i])})}},e[Cv]={appendData:i},e[Dv]={persistent:!1,pure:!0,appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}},Ty=e}(),e}(),By=function(e){$n(e)};(Sy={})[kv+"_"+Av]=By,Sy[kv+"_"+Pv]=By,Sy[Mv]=By,Sy[Tv]=function(e,t){for(var a=0;a<t.length;a++){null==t[a].name&&qd()}},Sy[Cv]=By;var qy=function(e,t,a,r){return e[r]},Vy=((Cy={})[kv+"_"+Av]=function(e,t,a,r){return e[r+t]},Cy[kv+"_"+Pv]=function(e,t,a,r,i){r+=t;for(var n=i||[],s=e,o=0;o<s.length;o++){var l=s[o];n[o]=l?l[r]:null}return n},Cy[Mv]=qy,Cy[Tv]=function(e,t,a,r,i){for(var n=i||[],s=0;s<a.length;s++){var o=a[s].name,l=null!=o?e[o]:null;n[s]=l?l[r]:null}return n},Cy[Cv]=qy,Cy);function Hy(e,t){return Vy[Xy(e,t)]}var Wy=function(e,t,a){return e.length},Gy=((ky={})[kv+"_"+Av]=function(e,t,a){return Math.max(0,e.length-t)},ky[kv+"_"+Pv]=function(e,t,a){var r=e[0];return r?Math.max(0,r.length-t):0},ky[Mv]=Wy,ky[Tv]=function(e,t,a){var r=a[0].name,i=null!=r?e[r]:null;return i?i.length:0},ky[Cv]=Wy,ky);function Uy(e,t){return Gy[Xy(e,t)]}var $y=function(e,t,a){return e[t]},Yy=((My={})[kv]=$y,My[Mv]=function(e,t,a){return e[a]},My[Tv]=$y,My[Cv]=function(e,t,a){var r=Yd(e);return r instanceof Array?r[t]:r},My[Dv]=$y,My);function Ky(e){return Yy[e]}function Xy(e,t){return e===kv?e+"_"+t:e}function Zy(e,t,a){if(e){var r=e.getRawDataItem(t);if(null!=r){var i=e.getStore(),n=i.getSource().sourceFormat;if(null!=a){var s=e.getDimensionIndex(a),o=i.getDimensionProperty(s);return Ky(n)(r,s,o)}var l=r;return n===Cv&&(l=Yd(r)),l}}}var Qy=/\{@(.+?)\}/g,Jy=function(){function e(){}return e.prototype.getDataParams=function(e,t){var a=this.getData(t),r=this.getRawValue(e,t),i=a.getRawIndex(e),n=a.getName(e),s=a.getRawDataItem(e),o=a.getItemVisual(e,"style"),l=o&&o[a.getItemVisual(e,"drawType")||"fill"],c=o&&o.stroke,d=this.mainType,u="series"===d,h=a.userOutput&&a.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:u?this.subType:null,seriesIndex:this.seriesIndex,seriesId:u?this.id:null,seriesName:u?this.name:null,name:n,dataIndex:i,data:s,dataType:t,value:r,color:l,borderColor:c,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(e,t,a,r,i,n){t=t||"normal";var s=this.getData(a),o=this.getDataParams(e,a);(n&&(o.value=n.interpolatedValue),null!=r&&$n(o.value)&&(o.value=o.value[r]),i)||(i=s.getItemModel(e).get("normal"===t?["label","formatter"]:[t,"label","formatter"]));return Yn(i)?(o.status=t,o.dimensionIndex=r,i(o)):Kn(i)?Hx(i,o).replace(Qy,function(t,a){var r=a.length,i=a;"["===i.charAt(0)&&"]"===i.charAt(r-1)&&(i=+i.slice(1,r-1));var o=Zy(s,e,i);if(n&&$n(n.interpolatedValue)){var l=s.getDimensionIndex(i);l>=0&&(o=n.interpolatedValue[l])}return null!=o?o+"":""}):void 0},e.prototype.getRawValue=function(e,t){return Zy(this.getData(t),e)},e.prototype.formatTooltip=function(e,t,a){},e}();function eb(e){var t,a;return Qn(e)?e.type&&(a=e):t=e,{text:t,frag:a}}function tb(e){return new ab(e)}var ab=function(){function e(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return e.prototype.perform=function(e){var t,a=this._upstream,r=e&&e.skip;if(this._dirty&&a){var i=this.context;i.data=i.outputData=a.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(t=this._plan(this.context));var n,s=d(this._modBy),o=this._modDataCount||0,l=d(e&&e.modBy),c=e&&e.modDataCount||0;function d(e){return!(e>=1)&&(e=1),e}s===l&&o===c||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,n=this._doReset(r)),this._modBy=l,this._modDataCount=c;var u=e&&e.step;if(this._dueEnd=a?a._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(null!=u?this._dueIndex+u:1/0,this._dueEnd);if(!r&&(n||h<p)){var m=this._progress;if($n(m))for(var f=0;f<m.length;f++)this._doProgress(m[f],h,p,l,c);else this._doProgress(m,h,p,l,c)}this._dueIndex=p;var g=null!=this._settedOutputEnd?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(e,t,a,r,i){rb.reset(t,a,r,i),this._callingProgress=e,this._callingProgress({start:t,end:a,count:a-t,next:rb.next},this.context)},e.prototype._doReset=function(e){var t,a;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!e&&this._reset&&((t=this._reset(this.context))&&t.progress&&(a=t.forceFirstProgress,t=t.progress),$n(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),a},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},e}(),rb=function(){var e,t,a,r,i,n={reset:function(l,c,d,u){t=l,e=c,a=d,r=u,i=Math.ceil(r/a),n.next=a>1&&r>0?o:s}};return n;function s(){return t<e?t++:null}function o(){var n=t%i*a+Math.ceil(t/i),s=t>=e?null:n<r?n:t;return t++,s}}();function ib(e,t){var a=t&&t.type;return"ordinal"===a?e:("time"!==a||Zn(e)||null==e||"-"===e||(e=+Ld(e)),null==e||""===e?NaN:Number(e))}xs({number:function(e){return parseFloat(e)},time:function(e){return+Ld(e)},trim:function(e){return Kn(e)?ds(e):e}});var nb=function(){function e(e,t){var a="desc"===e;this._resultLT=a?1:-1,null==t&&(t=a?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return e.prototype.evaluate=function(e,t){var a=Zn(e)?e:Rd(e),r=Zn(t)?t:Rd(t),i=isNaN(a),n=isNaN(r);if(i&&(a=this._incomparable),n&&(r=this._incomparable),i&&n){var s=Kn(e),o=Kn(t);s&&(a=o?e:0),o&&(r=s?t:0)}return a<r?this._resultLT:a>r?-this._resultLT:0},e}(),sb=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(e){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(e){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(e,t){},e.prototype.retrieveValueFromItem=function(e,t){},e.prototype.convertValue=function(e,t){return ib(e,t)},e}();function ob(e){if(!pb(e.sourceFormat)){Vd("")}return e.data}function lb(e){var t=e.sourceFormat,a=e.data;if(!pb(t)){Vd("")}if(t===kv){for(var r=[],i=0,n=a.length;i<n;i++)r.push(a[i].slice());return r}if(t===Mv){for(r=[],i=0,n=a.length;i<n;i++)r.push(zn({},a[i]));return r}}function cb(e,t,a){if(null!=a)return Zn(a)||!isNaN(a)&&!bs(t,a)?e[a]:bs(t,a)?t[a]:void 0}function db(e){return Pn(e)}var ub=xs();function hb(e,t,a,r){t.length||Vd(""),Qn(e)||Vd("");var i=e.type,n=ub.get(i);n||Vd("");var s=qn(t,function(e){return function(e,t){var a=new sb,r=e.data,i=a.sourceFormat=e.sourceFormat,n=e.startIndex;e.seriesLayoutBy!==Av&&Vd("");var s=[],o={},l=e.dimensionsDefine;if(l)Bn(l,function(e,t){var a=e.name,r={index:t,name:a,displayName:e.displayName};s.push(r),null!=a&&(bs(o,a)&&Vd(""),o[a]=r)});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var d=Hy(i,Av);t.__isBuiltIn&&(a.getRawDataItem=function(e){return d(r,n,s,e)},a.getRawData=Gn(ob,null,e)),a.cloneRawData=Gn(lb,null,e);var u=Uy(i,Av);a.count=Gn(u,null,r,n,s);var h=Ky(i);a.retrieveValue=function(e,t){var a=d(r,n,s,e);return p(a,t)};var p=a.retrieveValueFromItem=function(e,t){if(null!=e){var a=s[t];return a?h(e,t,a.name):void 0}};return a.getDimensionInfo=Gn(cb,null,s,o),a.cloneAllDimensionInfo=Gn(db,null,s),a}(e,n)});return qn(Gd(n.transform({upstream:s[0],upstreamList:s,config:Pn(e.config)})),function(e,a){var r;Qn(e)||Vd(""),e.data||Vd(""),pb(zy(e.data))||Vd("");var i=t[0];if(i&&0===a&&!e.dimensions){var n=i.startIndex;n&&(e.data=i.data.slice(0,n).concat(e.data)),r={seriesLayoutBy:Av,sourceHeader:n,dimensions:i.metaRawOption.dimensions}}else r={seriesLayoutBy:Av,sourceHeader:0,dimensions:e.dimensions};return Py(e.data,r,null)})}function pb(e){return e===kv||e===Mv}var mb,fb="undefined",gb=typeof Uint32Array===fb?Array:Uint32Array,xb=typeof Uint16Array===fb?Array:Uint16Array,vb=typeof Int32Array===fb?Array:Int32Array,yb=typeof Float64Array===fb?Array:Float64Array,bb={float:yb,int:vb,ordinal:Array,number:Array,time:yb};function _b(e){return e>65535?gb:xb}function jb(){return[1/0,-1/0]}function wb(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function Nb(e,t,a,r,i){var n=bb[a||"float"];if(i){var s=e[t],o=s&&s.length;if(o!==r){for(var l=new n(r),c=0;c<o;c++)l[c]=s[c];e[t]=l}}else e[t]=new n(r)}var Sb=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=xs()}return e.prototype.initData=function(e,t,a){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),i=this.defaultDimValueGetter=mb[r.sourceFormat];this._dimValueGetter=a||i,this._rawExtent=[],Oy(r),this._dimensions=qn(t,function(e){return{type:e.type,property:e.property}}),this._initDataFromProvider(0,e.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(e,t){var a=this._calcDimNameToIdx,r=this._dimensions,i=a.get(e);if(null!=i){if(r[i].type===t)return i}else i=r.length;return r[i]={type:t},a.set(e,i),this._chunks[i]=new bb[t||"float"](this._rawCount),this._rawExtent[i]=[1/0,-1/0],i},e.prototype.collectOrdinalMeta=function(e,t){var a=this._chunks[e],r=this._dimensions[e],i=this._rawExtent,n=r.ordinalOffset||0,s=a.length;0===n&&(i[e]=[1/0,-1/0]);for(var o=i[e],l=n;l<s;l++){var c=a[l]=t.parseAndCollect(a[l]);isNaN(c)||(o[0]=Math.min(c,o[0]),o[1]=Math.max(c,o[1]))}r.ordinalMeta=t,r.ordinalOffset=s,r.type="ordinal"},e.prototype.getOrdinalMeta=function(e){return this._dimensions[e].ordinalMeta},e.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},e.prototype.appendData=function(e){var t=this._provider,a=this.count();t.appendData(e);var r=t.count();return t.persistent||(r+=a),a<r&&this._initDataFromProvider(a,r,!0),[a,r]},e.prototype.appendValues=function(e,t){for(var a=this._chunks,r=this._dimensions,i=r.length,n=this._rawExtent,s=this.count(),o=s+Math.max(e.length,t||0),l=0;l<i;l++){Nb(a,l,(p=r[l]).type,o,!0)}for(var c=[],d=s;d<o;d++)for(var u=d-s,h=0;h<i;h++){var p=r[h],m=mb.arrayRows.call(this,e[u]||c,p.property,u,h);a[h][d]=m;var f=n[h];m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m)}return this._rawCount=this._count=o,{start:s,end:o}},e.prototype._initDataFromProvider=function(e,t,a){for(var r=this._provider,i=this._chunks,n=this._dimensions,s=n.length,o=this._rawExtent,l=qn(n,function(e){return e.property}),c=0;c<s;c++){var d=n[c];o[c]||(o[c]=jb()),Nb(i,c,d.type,t,a)}if(r.fillStorage)r.fillStorage(e,t,i,o);else for(var u=[],h=e;h<t;h++){u=r.getItem(h,u);for(var p=0;p<s;p++){var m=i[p],f=this._dimValueGetter(u,l[p],h,p);m[h]=f;var g=o[p];f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var a=this._chunks[e];return a?a[this.getRawIndex(t)]:NaN},e.prototype.getValues=function(e,t){var a=[],r=[];if(null==t){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)r.push(i)}else r=e;i=0;for(var n=r.length;i<n;i++)a.push(this.get(r[i],t));return a},e.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var a=this._chunks[e];return a?a[t]:NaN},e.prototype.getSum=function(e){var t=0;if(this._chunks[e])for(var a=0,r=this.count();a<r;a++){var i=this.get(e,a);isNaN(i)||(t+=i)}return t},e.prototype.getMedian=function(e){var t=[];this.each([e],function(e){isNaN(e)||t.push(e)});var a=t.sort(function(e,t){return e-t}),r=this.count();return 0===r?0:r%2==1?a[(r-1)/2]:(a[r/2]+a[r/2-1])/2},e.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,a=t[e];if(null!=a&&a<this._count&&a===e)return e;for(var r=0,i=this._count-1;r<=i;){var n=(r+i)/2|0;if(t[n]<e)r=n+1;else{if(!(t[n]>e))return n;i=n-1}}return-1},e.prototype.getIndices=function(){var e,t=this._indices;if(t){var a=t.constructor,r=this._count;if(a===Array){e=new a(r);for(var i=0;i<r;i++)e[i]=t[i]}else e=new a(t.buffer,0,r)}else{e=new(a=_b(this._rawCount))(this.count());for(i=0;i<e.length;i++)e[i]=i}return e},e.prototype.filter=function(e,t){if(!this._count)return this;for(var a=this.clone(),r=a.count(),i=new(_b(a._rawCount))(r),n=[],s=e.length,o=0,l=e[0],c=a._chunks,d=0;d<r;d++){var u=void 0,h=a.getRawIndex(d);if(0===s)u=t(d);else if(1===s){u=t(c[l][h],d)}else{for(var p=0;p<s;p++)n[p]=c[e[p]][h];n[p]=d,u=t.apply(null,n)}u&&(i[o++]=h)}return o<r&&(a._indices=i),a._count=o,a._extent=[],a._updateGetRawIdx(),a},e.prototype.selectRange=function(e){var t=this.clone(),a=t._count;if(!a)return this;var r=Wn(e),i=r.length;if(!i)return this;var n=t.count(),s=new(_b(t._rawCount))(n),o=0,l=r[0],c=e[l][0],d=e[l][1],u=t._chunks,h=!1;if(!t._indices){var p=0;if(1===i){for(var m=u[r[0]],f=0;f<a;f++){((y=m[f])>=c&&y<=d||isNaN(y))&&(s[o++]=p),p++}h=!0}else if(2===i){m=u[r[0]];var g=u[r[1]],x=e[r[1]][0],v=e[r[1]][1];for(f=0;f<a;f++){var y=m[f],b=g[f];(y>=c&&y<=d||isNaN(y))&&(b>=x&&b<=v||isNaN(b))&&(s[o++]=p),p++}h=!0}}if(!h)if(1===i)for(f=0;f<n;f++){var _=t.getRawIndex(f);((y=u[r[0]][_])>=c&&y<=d||isNaN(y))&&(s[o++]=_)}else for(f=0;f<n;f++){for(var j=!0,w=(_=t.getRawIndex(f),0);w<i;w++){var N=r[w];((y=u[N][_])<e[N][0]||y>e[N][1])&&(j=!1)}j&&(s[o++]=t.getRawIndex(f))}return o<n&&(t._indices=s),t._count=o,t._extent=[],t._updateGetRawIdx(),t},e.prototype.map=function(e,t){var a=this.clone(e);return this._updateDims(a,e,t),a},e.prototype.modify=function(e,t){this._updateDims(this,e,t)},e.prototype._updateDims=function(e,t,a){for(var r=e._chunks,i=[],n=t.length,s=e.count(),o=[],l=e._rawExtent,c=0;c<t.length;c++)l[t[c]]=jb();for(var d=0;d<s;d++){for(var u=e.getRawIndex(d),h=0;h<n;h++)o[h]=r[t[h]][u];o[n]=d;var p=a&&a.apply(null,o);if(null!=p){"object"!=typeof p&&(i[0]=p,p=i);for(c=0;c<p.length;c++){var m=t[c],f=p[c],g=l[m],x=r[m];x&&(x[u]=f),f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}}}},e.prototype.lttbDownSample=function(e,t){var a,r,i,n=this.clone([e],!0),s=n._chunks[e],o=this.count(),l=0,c=Math.floor(1/t),d=this.getRawIndex(0),u=new(_b(this._rawCount))(Math.min(2*(Math.ceil(o/c)+2),o));u[l++]=d;for(var h=1;h<o-1;h+=c){for(var p=Math.min(h+c,o-1),m=Math.min(h+2*c,o),f=(m+p)/2,g=0,x=p;x<m;x++){var v=s[S=this.getRawIndex(x)];isNaN(v)||(g+=v)}g/=m-p;var y=h,b=Math.min(h+c,o),_=h-1,j=s[d];a=-1,i=y;var w=-1,N=0;for(x=y;x<b;x++){var S;v=s[S=this.getRawIndex(x)];isNaN(v)?(N++,w<0&&(w=S)):(r=Math.abs((_-f)*(v-j)-(_-x)*(g-j)))>a&&(a=r,i=S)}N>0&&N<b-y&&(u[l++]=Math.min(w,i),i=Math.max(w,i)),u[l++]=i,d=i}return u[l++]=this.getRawIndex(o-1),n._count=l,n._indices=u,n.getRawIndex=this._getRawIdx,n},e.prototype.minmaxDownSample=function(e,t){for(var a=this.clone([e],!0),r=a._chunks,i=Math.floor(1/t),n=r[e],s=this.count(),o=new(_b(this._rawCount))(2*Math.ceil(s/i)),l=0,c=0;c<s;c+=i){var d=c,u=n[this.getRawIndex(d)],h=c,p=n[this.getRawIndex(h)],m=i;c+i>s&&(m=s-c);for(var f=0;f<m;f++){var g=n[this.getRawIndex(c+f)];g<u&&(u=g,d=c+f),g>p&&(p=g,h=c+f)}var x=this.getRawIndex(d),v=this.getRawIndex(h);d<h?(o[l++]=x,o[l++]=v):(o[l++]=v,o[l++]=x)}return a._count=l,a._indices=o,a._updateGetRawIdx(),a},e.prototype.downSample=function(e,t,a,r){for(var i=this.clone([e],!0),n=i._chunks,s=[],o=Math.floor(1/t),l=n[e],c=this.count(),d=i._rawExtent[e]=[1/0,-1/0],u=new(_b(this._rawCount))(Math.ceil(c/o)),h=0,p=0;p<c;p+=o){o>c-p&&(o=c-p,s.length=o);for(var m=0;m<o;m++){var f=this.getRawIndex(p+m);s[m]=l[f]}var g=a(s),x=this.getRawIndex(Math.min(p+r(s,g)||0,c-1));l[x]=g,g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g),u[h++]=x}return i._count=h,i._indices=u,i._updateGetRawIdx(),i},e.prototype.each=function(e,t){if(this._count)for(var a=e.length,r=this._chunks,i=0,n=this.count();i<n;i++){var s=this.getRawIndex(i);switch(a){case 0:t(i);break;case 1:t(r[e[0]][s],i);break;case 2:t(r[e[0]][s],r[e[1]][s],i);break;default:for(var o=0,l=[];o<a;o++)l[o]=r[e[o]][s];l[o]=i,t.apply(null,l)}}},e.prototype.getDataExtent=function(e){var t=this._chunks[e],a=[1/0,-1/0];if(!t)return a;var r,i=this.count();if(!this._indices)return this._rawExtent[e].slice();if(r=this._extent[e])return r.slice();for(var n=(r=a)[0],s=r[1],o=0;o<i;o++){var l=t[this.getRawIndex(o)];l<n&&(n=l),l>s&&(s=l)}return r=[n,s],this._extent[e]=r,r},e.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var a=[],r=this._chunks,i=0;i<r.length;i++)a.push(r[i][t]);return a},e.prototype.clone=function(t,a){var r=new e,i=this._chunks,n=t&&Vn(t,function(e,t){return e[t]=!0,e},{});if(n)for(var s=0;s<i.length;s++)r._chunks[s]=n[s]?wb(i[s]):i[s];else r._chunks=i;return this._copyCommonProps(r),a||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Pn(this._extent),e._rawExtent=Pn(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var a=this._indices.length;t=new e(a);for(var r=0;r<a;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},e.prototype._getRawIdxIdentity=function(e){return e},e.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function e(e,t,a,r){return ib(e[r],this._dimensions[r])}mb={arrayRows:e,objectRows:function(e,t,a,r){return ib(e[t],this._dimensions[r])},keyedColumns:e,original:function(e,t,a,r){var i=e&&(null==e.value?e:e.value);return ib(i instanceof Array?i[r]:i,this._dimensions[r])},typedArray:function(e,t,a,r){return e[r]}}}(),e}(),Cb=function(){function e(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,a=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length;if(kb(a)){var n=a,s=void 0,o=void 0,l=void 0;if(i){var c=r[0];c.prepareSource(),s=(l=c.getSource()).data,o=l.sourceFormat,t=[c._getVersionSign()]}else o=es(s=n.get("data",!0))?Dv:Cv,t=[];var d=this._getSourceMetaRawOption()||{},u=l&&l.metaRawOption||{},h=ns(d.seriesLayoutBy,u.seriesLayoutBy)||null,p=ns(d.sourceHeader,u.sourceHeader),m=ns(d.dimensions,u.dimensions);e=h!==u.seriesLayoutBy||!!p!=!!u.sourceHeader||m?[Py(s,{seriesLayoutBy:h,sourceHeader:p,dimensions:m},o)]:[]}else{var f=a;if(i){var g=this._applyTransform(r);e=g.sourceList,t=g.upstreamSignList}else{e=[Py(f.get("source",!0),this._getSourceMetaRawOption(),null)],t=[]}}this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,a=this._sourceHost,r=a.get("transform",!0),i=a.get("fromTransformResult",!0);if(null!=i){1!==e.length&&Mb("")}var n,s=[],o=[];return Bn(e,function(e){e.prepareSource();var t=e.getSource(i||0);null==i||t||Mb(""),s.push(t),o.push(e._getVersionSign())}),r?t=function(e,t){var a=Gd(e),r=a.length;r||Vd("");for(var i=0,n=r;i<n;i++)t=hb(a[i],t),i!==n-1&&(t.length=Math.max(t.length,1));return t}(r,s,a.componentIndex):null!=i&&(t=[(n=s[0],new Iy({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Pn(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount}))]),{sourceList:t,upstreamSignList:o}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var a=e[t];if(a._isDirty()||this._upstreamSignList[t]!==a._getVersionSign())return!0}},e.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var a=this._getUpstreamSourceManagers();return a[0]&&a[0].getSource(e)}return t},e.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},e.prototype._innerGetDataStore=function(e,t,a){var r=this._storeList,i=r[0];i||(i=r[0]={});var n=i[a];if(!n){var s=this._getUpstreamSourceManagers()[0];kb(this._sourceHost)&&s?n=s._innerGetDataStore(e,t,a):(n=new Sb).initData(new Fy(t,e.length),e),i[a]=n}return n},e.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(kb(e)){var t=Bv(e);return t?[t.getSourceManager()]:[]}return qn(function(e){return e.get("transform",!0)||e.get("fromTransformResult",!0)?lu(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},ou).models:[]}(e),function(e){return e.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var e,t,a,r=this._sourceHost;if(kb(r))e=r.get("seriesLayoutBy",!0),t=r.get("sourceHeader",!0),a=r.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=r;e=i.get("seriesLayoutBy",!0),t=i.get("sourceHeader",!0),a=i.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:t,dimensions:a}},e}();function kb(e){return"series"===e.mainType}function Mb(e){throw new Error(e)}function Tb(e){var t=e.lineHeight;return null==t?"line-height:1":"line-height:"+Xs(t+"")+"px"}function Db(e,t){var a=e.color||gv.color.tertiary,r=e.fontSize||12,i=e.fontWeight||"400",n=e.color||gv.color.secondary,s=e.fontSize||14,o=e.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+Xs(r+"")+"px;color:"+Xs(a)+";font-weight:"+Xs(i+""),valueStyle:"font-size:"+Xs(s+"")+"px;color:"+Xs(n)+";font-weight:"+Xs(o+"")}:{nameStyle:{fontSize:r,fill:a,fontWeight:i},valueStyle:{fontSize:s,fill:n,fontWeight:o}}}var Ib=[0,10,20,30],Ab=["","\n","\n\n","\n\n\n"];function Pb(e,t){return t.type=e,t}function Lb(e){return"section"===e.type}function zb(e){return Lb(e)?Rb:Ob}function Eb(e){if(Lb(e)){var t=0,a=e.blocks.length,r=a>1||a>0&&!e.noHeader;return Bn(e.blocks,function(e){var a=Eb(e);a>=t&&(t=a+ +(r&&(!a||Lb(e)&&!e.noHeader)))}),t}return 0}function Rb(e,t,a,r){var i,n=t.noHeader,s=(i=Eb(t),{html:Ib[i],richText:Ab[i]}),o=[],l=t.blocks||[];cs(!l||$n(l)),l=l||[];var c=e.orderMode;if(t.sortBlocks&&c){l=l.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(bs(d,c)){var u=new nb(d[c],null);l.sort(function(e,t){return u.evaluate(e.sortParam,t.sortParam)})}else"seriesDesc"===c&&l.reverse()}Bn(l,function(a,i){var n=t.valueFormatter,l=zb(a)(n?zn(zn({},e),{valueFormatter:n}):e,a,i>0?s.html:0,r);null!=l&&o.push(l)});var h="richText"===e.renderMode?o.join(s.richText):Bb(r,o.join(""),n?a:s.html);if(n)return h;var p=Bx(t.header,"ordinal",e.useUTC),m=Db(r,e.renderMode).nameStyle,f=Tb(r);return"richText"===e.renderMode?qb(e,p,m)+s.richText+h:Bb(r,'<div style="'+m+";"+f+';">'+Xs(p)+"</div>"+h,a)}function Ob(e,t,a,r){var i=e.renderMode,n=t.noName,s=t.noValue,o=!t.markerType,l=t.name,c=e.useUTC,d=t.valueFormatter||e.valueFormatter||function(e){return qn(e=$n(e)?e:[e],function(e,t){return Bx(e,$n(p)?p[t]:p,c)})};if(!n||!s){var u=o?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||gv.color.secondary,i),h=n?"":Bx(l,"ordinal",c),p=t.valueType,m=s?[]:d(t.value,t.dataIndex),f=!o||!n,g=!o&&n,x=Db(r,i),v=x.nameStyle,y=x.valueStyle;return"richText"===i?(o?"":u)+(n?"":qb(e,h,v))+(s?"":function(e,t,a,r,i){var n=[i],s=r?10:20;return a&&n.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle($n(t)?t.join("  "):t,n)}(e,m,f,g,y)):Bb(r,(o?"":u)+(n?"":function(e,t,a){return'<span style="'+a+";"+(t?"margin-left:2px":"")+'">'+Xs(e)+"</span>"}(h,!o,v))+(s?"":function(e,t,a,r){var i=a?"10px":"20px",n=t?"float:right;margin-left:"+i:"";return e=$n(e)?e:[e],'<span style="'+n+";"+r+'">'+qn(e,function(e){return Xs(e)}).join("&nbsp;&nbsp;")+"</span>"}(m,f,g,y)),a)}}function Fb(e,t,a,r,i,n){if(e)return zb(e)({useUTC:i,renderMode:a,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter},e,0,n)}function Bb(e,t,a){return'<div style="'+("margin: "+a+"px 0 0")+";"+Tb(e)+';">'+t+'<div style="clear:both"></div></div>'}function qb(e,t,a){return e.markupStyleCreator.wrapRichTextStyle(t,a)}function Vb(e,t){var a=e.get("padding");return null!=a?a:"richText"===t?[8,10]:10}var Hb=function(){function e(){this.richTextStyles={},this._nextStyleNameId=Od()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(e,t,a){var r="richText"===a?this._generateStyleName():null,i=function(e,t){var a=Kn(e)?{color:e,extraCssText:t}:e||{},r=a.color,i=a.type;t=a.extraCssText;var n=a.renderMode||"html";return r?"html"===n?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Xs(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Xs(r)+";"+(t||"")+'"></span>':{renderMode:n,content:"{"+(a.markerId||"markerX")+"|}  ",style:"subItem"===i?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}:""}({color:t,type:e,renderMode:a,markerId:r});return Kn(i)?i:(this.richTextStyles[r]=i.style,i.content)},e.prototype.wrapRichTextStyle=function(e,t){var a={};$n(t)?Bn(t,function(e){return zn(a,e)}):zn(a,t);var r=this._generateStyleName();return this.richTextStyles[r]=a,"{"+r+"|"+e+"}"},e}();function Wb(e){var t,a,r,i,n=e.series,s=e.dataIndex,o=e.multipleSeries,l=n.getData(),c=l.mapDimensionsAll("defaultedTooltip"),d=c.length,u=n.getRawValue(s),h=$n(u),p=function(e,t){return Wx(e.getData().getItemVisual(t,"style")[e.visualDrawType])}(n,s);if(d>1||h&&!d){var m=function(e,t,a,r,i){var n=t.getData(),s=Vn(e,function(e,t,a){var r=n.getDimensionInfo(a);return e||r&&!1!==r.tooltip&&null!=r.displayName},!1),o=[],l=[],c=[];function d(e,t){var a=n.getDimensionInfo(t);a&&!1!==a.otherDims.tooltip&&(s?c.push(Pb("nameValue",{markerType:"subItem",markerColor:i,name:a.displayName,value:e,valueType:a.type})):(o.push(e),l.push(a.type)))}return r.length?Bn(r,function(e){d(Zy(n,a,e),e)}):Bn(e,d),{inlineValues:o,inlineValueTypes:l,blocks:c}}(u,n,s,c,p);t=m.inlineValues,a=m.inlineValueTypes,r=m.blocks,i=m.inlineValues[0]}else if(d){var f=l.getDimensionInfo(c[0]);i=t=Zy(l,s,c[0]),a=f.type}else i=t=h?u[0]:u;var g=eu(n),x=g&&n.name||"",v=l.getName(s),y=o?x:v;return Pb("section",{header:x,noHeader:o||!g,sortParam:i,blocks:[Pb("nameValue",{markerType:"item",markerColor:p,name:y,noName:!ds(y),value:t,valueType:a,dataIndex:s})].concat(r||[])})}var Gb=ru();function Ub(e,t){return e.getName(t)||e.getId(t)}var $b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}var a;return pn(t,e),t.prototype.init=function(e,t,a){this.seriesIndex=this.componentIndex,this.dataTask=tb({count:Kb,reset:Xb}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,a),(Gb(this).sourceManager=new Cb(this)).prepareSource();var r=this.getInitialData(e,a);Qb(r,this),this.dataTask.context.data=r,Gb(this).dataBeforeProcessed=r,Yb(this),this._initSelectedMapFromData(r)},t.prototype.mergeDefaultAndTheme=function(e,t){var a=uv(this),r=a?pv(e):{},i=this.subType;fv.hasClass(i)&&(i+="Series"),Ln(e,t.getTheme().get(this.subType)),Ln(e,this.getDefaultOption()),Ud(e,"label",["show"]),this.fillDataTextStyle(e.data),a&&hv(e,r,a)},t.prototype.mergeOption=function(e,t){e=Ln(this.option,e,!0),this.fillDataTextStyle(e.data);var a=uv(this);a&&hv(this.option,e,a);var r=Gb(this).sourceManager;r.dirty(),r.prepareSource();var i=this.getInitialData(e,t);Qb(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Gb(this).dataBeforeProcessed=i,Yb(this),this._initSelectedMapFromData(i)},t.prototype.fillDataTextStyle=function(e){if(e&&!es(e))for(var t=["show"],a=0;a<e.length;a++)e[a]&&e[a].label&&Ud(e[a],"label",t)},t.prototype.getInitialData=function(e,t){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var t=e_(this);if(t){var a=t.context.data;return null!=e&&a.getLinkedData?a.getLinkedData(e):a}return Gb(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var t=e_(this);if(t){var a=t.context;a.outputData=e,t!==this.dataTask&&(a.data=e)}Gb(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return xs(e)},t.prototype.getSourceManager=function(){return Gb(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Gb(this).dataBeforeProcessed},t.prototype.getColorBy=function(){return this.get("colorBy")||"series"},t.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.indicesOfNearest=function(e,t,a,r){var i=this.getData(),n=this.coordinateSystem,s=n&&n.getAxis(e);if(!n||!s)return[];var o=s.dataToCoord(a);null==r&&(r=1/0);var l=[],c=1/0,d=-1,u=0;return i.each(t,function(e,t){var a=s.dataToCoord(e),i=o-a,n=Math.abs(i);n<=r&&((n<c||n===c&&i>=0&&d<0)&&(c=n,d=i,u=0),i===d&&(l[u++]=t))}),l.length=u,l},t.prototype.formatTooltip=function(e,t,a){return Wb({series:this,dataIndex:e,multipleSeries:t})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(fn.node&&(!e||!e.ssr))return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,t,a){var r=this.ecModel,i=Yv.prototype.getColorFromPalette.call(this,e,t,a);return i||(i=r.getColorFromPalette(e,t,a)),i},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,t){this._innerSelect(this.getData(t),e)},t.prototype.unselect=function(e,t){var a=this.option.selectedMap;if(a){var r=this.option.selectedMode,i=this.getData(t);if("series"===r||"all"===a)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var n=0;n<e.length;n++){var s=Ub(i,e[n]);a[s]=!1,this._selectedDataIndicesMap[s]=-1}}},t.prototype.toggleSelect=function(e,t){for(var a=[],r=0;r<e.length;r++)a[0]=e[r],this.isSelected(e[r],t)?this.unselect(a,t):this.select(a,t)},t.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,t=Wn(e),a=[],r=0;r<t.length;r++){var i=e[t[r]];i>=0&&a.push(i)}return a},t.prototype.isSelected=function(e,t){var a=this.option.selectedMap;if(!a)return!1;var r=this.getData(t);return("all"===a||a[Ub(r,e)])&&!r.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this.__universalTransitionEnabled)return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},t.prototype._innerSelect=function(e,t){var a,r,i=this.option,n=i.selectedMode,s=t.length;if(n&&s)if("series"===n)i.selectedMap="all";else if("multiple"===n){Qn(i.selectedMap)||(i.selectedMap={});for(var o=i.selectedMap,l=0;l<s;l++){var c=t[l];o[u=Ub(e,c)]=!0,this._selectedDataIndicesMap[u]=e.getRawIndex(c)}}else if("single"===n||!0===n){var d=t[s-1],u=Ub(e,d);i.selectedMap=((a={})[u]=!0,a),this._selectedDataIndicesMap=((r={})[u]=e.getRawIndex(d),r)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var t=[];e.hasItemOption&&e.each(function(a){var r=e.getRawDataItem(a);r&&r.selected&&t.push(a)}),t.length>0&&this._innerSelect(e,t)}},t.registerClass=function(e){return fv.registerClass(e)},t.protoInitialize=((a=t.prototype).type="series.__base__",a.seriesIndex=0,a.ignoreStyleOnData=!1,a.hasSymbolVisual=!1,a.defaultSymbol="circle",a.visualStyleAccessPath="itemStyle",void(a.visualDrawType="fill")),t}(fv);function Yb(e){var t=e.name;eu(e)||(e.name=function(e){var t=e.getRawData(),a=t.mapDimensionsAll("seriesName"),r=[];return Bn(a,function(e){var a=t.getDimensionInfo(e);a.displayName&&r.push(a.displayName)}),r.join(" ")}(e)||t)}function Kb(e){return e.model.getRawData().count()}function Xb(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Zb}function Zb(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Qb(e,t){Bn(function(e,t){for(var a=new e.constructor(e.length+t.length),r=0;r<e.length;r++)a[r]=e[r];var i=e.length;for(r=0;r<t.length;r++)a[r+i]=t[r];return a}(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(a){e.wrapMethod(a,Un(Jb,t))})}function Jb(e,t){var a=e_(e);return a&&a.setOutputEnd((t||this).count()),t}function e_(e){var t=(e.ecModel||{}).scheduler,a=t&&t.getPipeline(e.uid);if(a){var r=a.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(e.uid))}return r}}On($b,Jy),On($b,Yv),mu($b,fv);var t_=function(){function e(){this.group=new gd,this.uid=Yg("viewComponent")}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,a,r){},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,a,r){},e.prototype.updateLayout=function(e,t,a,r){},e.prototype.updateVisual=function(e,t,a,r){},e.prototype.toggleBlurSeries=function(e,t,a){},e.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},e}();function a_(){var e=ru();return function(t){var a=e(t),r=t.pipelineContext,i=!!a.large,n=!!a.progressiveRender,s=a.large=!(!r||!r.large),o=a.progressiveRender=!(!r||!r.progressiveRender);return!(i===s&&n===o)&&"reset"}}pu(t_),vu(t_);var r_=ru(),i_=a_(),n_=function(){function e(){this.group=new gd,this.uid=Yg("viewChart"),this.renderTask=tb({plan:l_,reset:c_}),this.renderTask.context={view:this}}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,a,r){},e.prototype.highlight=function(e,t,a,r){var i=e.getData(r&&r.dataType);i&&o_(i,r,"emphasis")},e.prototype.downplay=function(e,t,a,r){var i=e.getData(r&&r.dataType);i&&o_(i,r,"normal")},e.prototype.remove=function(e,t){this.group.removeAll()},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,a,r){this.render(e,t,a,r)},e.prototype.updateLayout=function(e,t,a,r){this.render(e,t,a,r)},e.prototype.updateVisual=function(e,t,a,r){this.render(e,t,a,r)},e.prototype.eachRendered=function(e){pg(this.group,e)},e.markUpdateMethod=function(e,t){r_(e).updateMethod=t},e.protoInitialize=void(e.prototype.type="chart"),e}();function s_(e,t,a){e&&vm(e)&&("emphasis"===t?em:tm)(e,a)}function o_(e,t,a){var r=au(e,t),i=t&&null!=t.highlightKey?function(e){var t=Mp[e];return null==t&&kp<=32&&(t=Mp[e]=kp++),t}(t.highlightKey):null;null!=r?Bn(Gd(r),function(t){s_(e.getItemGraphicEl(t),a,i)}):e.eachItemGraphicEl(function(e){s_(e,a,i)})}function l_(e){return i_(e.model)}function c_(e){var t=e.model,a=e.ecModel,r=e.api,i=e.payload,n=t.pipelineContext.progressiveRender,s=e.view,o=i&&r_(i).updateMethod,l=n?"incrementalPrepareRender":o&&s[o]?o:"render";return"render"!==l&&s[l](t,a,r,i),d_[l]}pu(n_),vu(n_);var d_={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},u_="\0__throttleOriginMethod",h_="\0__throttleRate",p_="\0__throttleType";function m_(e,t,a){var r,i,n,s,o,l=0,c=0,d=null;function u(){c=(new Date).getTime(),d=null,e.apply(n,s||[])}t=t||0;var h=function(){for(var e=[],h=0;h<arguments.length;h++)e[h]=arguments[h];r=(new Date).getTime(),n=this,s=e;var p=o||t,m=o||a;o=null,i=r-(m?l:c)-p,clearTimeout(d),m?d=setTimeout(u,p):i>=0?u():d=setTimeout(u,-i),l=r};return h.clear=function(){d&&(clearTimeout(d),d=null)},h.debounceNextCall=function(e){o=e},h}function f_(e,t,a,r){var i=e[t];if(i){var n=i[u_]||i,s=i[p_];if(i[h_]!==a||s!==r){if(null==a||!r)return e[t]=n;(i=e[t]=m_(n,a,"debounce"===r))[u_]=n,i[p_]=r,i[h_]=a}return i}}function g_(e,t){var a=e[t];a&&a[u_]&&(a.clear&&a.clear(),e[t]=a[u_])}var x_=ru(),v_={itemStyle:yu(Hg,!0),lineStyle:yu(Bg,!0)},y_={lineStyle:"stroke",itemStyle:"fill"};function b_(e,t){var a=e.visualStyleMapper||v_[t];return a||v_.itemStyle}function __(e,t){var a=e.visualDrawType||y_[t];return a||"fill"}var j_={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var a=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=e.getModel(r),n=b_(e,r)(i),s=i.getShallow("decal");s&&(a.setVisual("decal",s),s.dirty=!0);var o=__(e,r),l=n[o],c=Yn(l)?l:null,d="auto"===n.fill||"auto"===n.stroke;if(!n[o]||c||d){var u=e.getColorFromPalette(e.name,null,t.getSeriesCount());n[o]||(n[o]=u,a.setVisual("colorFromPalette",!0)),n.fill="auto"===n.fill||Yn(n.fill)?u:n.fill,n.stroke="auto"===n.stroke||Yn(n.stroke)?u:n.stroke}if(a.setVisual("style",n),a.setVisual("drawType",o),!t.isSeriesFiltered(e)&&c)return a.setVisual("colorFromPalette",!1),{dataEach:function(t,a){var r=e.getDataParams(a),i=zn({},n);i[o]=c(r),t.setItemVisual(a,"style",i)}}}},w_=new Ug,N_={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.ignoreStyleOnData&&!t.isSeriesFiltered(e)){var a=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=b_(e,r),n=a.getVisual("drawType");return{dataEach:a.hasItemOption?function(e,t){var a=e.getRawDataItem(t);if(a&&a[r]){w_.option=a[r];var s=i(w_);zn(e.ensureUniqueItemVisual(t,"style"),s),w_.option.decal&&(e.setItemVisual(t,"decal",w_.option.decal),w_.option.decal.dirty=!0),n in s&&e.setItemVisual(t,"colorFromPalette",!1)}}:null}}}},S_={performRawSeries:!0,overallReset:function(e){var t=xs();e.eachSeries(function(e){var a=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+a,i=t.get(r);i||(i={},t.set(r,i)),x_(e).scope=i}}),e.eachSeries(function(t){if(!t.isColorBySeries()&&!e.isSeriesFiltered(t)){var a=t.getRawData(),r={},i=t.getData(),n=x_(t).scope,s=t.visualStyleAccessPath||"itemStyle",o=__(t,s);i.each(function(e){var t=i.getRawIndex(e);r[t]=e}),a.each(function(e){var s=r[e];if(i.getItemVisual(s,"colorFromPalette")){var l=i.ensureUniqueItemVisual(s,"style"),c=a.getName(e)||e+"",d=a.count();l[o]=t.getColorFromPalette(c,n,d)}})}})}},C_=Math.PI;var k_=function(){function e(e,t,a,r){this._stageTaskMap=xs(),this.ecInstance=e,this.api=t,a=this._dataProcessorHandlers=a.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=a.concat(r)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(e){var t=e.overallTask;t&&t.dirty()})},e.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var a=this._pipelineMap.get(e.__pipeline.id),r=a.context,i=!t&&a.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>a.blockIndex?a.step:null,n=r&&r.modDataCount;return{step:i,modBy:null!=n?Math.ceil(n/i):null,modDataCount:n}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var a=this._pipelineMap.get(e.uid),r=e.getData().count(),i=a.progressiveEnabled&&t.incrementalPrepareRender&&r>=a.threshold,n=e.get("large")&&r>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=a.context={progressiveRender:i,modDataCount:s,large:n}},e.prototype.restorePipelines=function(e){var t=this,a=t._pipelineMap=xs();e.eachSeries(function(e){var r=e.getProgressive(),i=e.uid;a.set(i,{id:i,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:r&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),t._pipe(e,e.dataTask)})},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),a=this.api;Bn(this._allHandlers,function(r){var i=e.get(r.uid)||e.set(r.uid,{});cs(!(r.reset&&r.overallReset),""),r.reset&&this._createSeriesStageTask(r,i,t,a),r.overallReset&&this._createOverallStageTask(r,i,t,a)},this)},e.prototype.prepareView=function(e,t,a,r){var i=e.renderTask,n=i.context;n.model=t,n.ecModel=a,n.api=r,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,a){this._performStageTasks(this._visualHandlers,e,t,a)},e.prototype._performStageTasks=function(e,t,a,r){r=r||{};var i=!1,n=this;function s(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}Bn(e,function(e,o){if(!r.visualType||r.visualType===e.visualType){var l=n._stageTaskMap.get(e.uid),c=l.seriesTaskMap,d=l.overallTask;if(d){var u,h=d.agentStubMap;h.each(function(e){s(r,e)&&(e.dirty(),u=!0)}),u&&d.dirty(),n.updatePayload(d,a);var p=n.getPerformArgs(d,r.block);h.each(function(e){e.perform(p)}),d.perform(p)&&(i=!0)}else c&&c.each(function(o,l){s(r,o)&&o.dirty();var c=n.getPerformArgs(o,r.block);c.skip=!e.performRawSeries&&t.isSeriesFiltered(o.context.model),n.updatePayload(o,a),o.perform(c)&&(i=!0)})}}),this.unfinished=i||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(e){t=e.dataTask.perform()||t}),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,a,r){var i=this,n=t.seriesTaskMap,s=t.seriesTaskMap=xs(),o=e.seriesType,l=e.getTargetSeries;function c(t){var o=t.uid,l=s.set(o,n&&n.get(o)||tb({plan:A_,reset:P_,count:E_}));l.context={model:t,ecModel:a,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(t,l)}e.createOnAllSeries?a.eachRawSeries(c):o?a.eachRawSeriesByType(o,c):l&&l(a,r).each(c)},e.prototype._createOverallStageTask=function(e,t,a,r){var i=this,n=t.overallTask=t.overallTask||tb({reset:M_});n.context={ecModel:a,api:r,overallReset:e.overallReset,scheduler:i};var s=n.agentStubMap,o=n.agentStubMap=xs(),l=e.seriesType,c=e.getTargetSeries,d=!0,u=!1;function h(e){var t=e.uid,a=o.set(t,s&&s.get(t)||(u=!0,tb({reset:T_,onDirty:I_})));a.context={model:e,overallProgress:d},a.agent=n,a.__block=d,i._pipe(e,a)}cs(!e.createOnAllSeries,""),l?a.eachRawSeriesByType(l,h):c?c(a,r).each(h):(d=!1,Bn(a.getSeries(),h)),u&&n.dirty()},e.prototype._pipe=function(e,t){var a=e.uid,r=this._pipelineMap.get(a);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},e.wrapStageHandler=function(e,t){return Yn(e)&&(e={overallReset:e,seriesType:R_(e)}),e.uid=Yg("stageHandler"),t&&(e.visualType=t),e},e}();function M_(e){e.overallReset(e.ecModel,e.api,e.payload)}function T_(e){return e.overallProgress&&D_}function D_(){this.agent.dirty(),this.getDownstream().dirty()}function I_(){this.agent&&this.agent.dirty()}function A_(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function P_(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Gd(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?qn(t,function(e,t){return z_(t)}):L_}var L_=z_(0);function z_(e){return function(t,a){var r=a.data,i=a.resetDefines[e];if(i&&i.dataEach)for(var n=t.start;n<t.end;n++)i.dataEach(r,n);else i&&i.progress&&i.progress(t,r)}}function E_(e){return e.data.count()}function R_(e){O_=null;try{e(F_,B_)}catch(t){}return O_}var O_,F_={},B_={};function q_(e,t){for(var a in t.prototype)e[a]=_s}q_(F_,Xv),q_(B_,ty),F_.eachSeriesByType=F_.eachRawSeriesByType=function(e){O_=e},F_.eachComponent=function(e){"series"===e.mainType&&e.subType&&(O_=e.subType)};var V_,H_=gv.darkColor,W_=H_.background,G_=function(){return{axisLine:{lineStyle:{color:H_.axisLine}},splitLine:{lineStyle:{color:H_.axisSplitLine}},splitArea:{areaStyle:{color:[H_.backgroundTint,H_.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:H_.axisMinorSplitLine}},axisLabel:{color:H_.axisLabel},axisName:{}}},U_={label:{color:H_.secondary},itemStyle:{borderColor:H_.borderTint},dividerLineStyle:{color:H_.border}},$_={darkMode:!0,color:H_.theme,backgroundColor:W_,axisPointer:{lineStyle:{color:H_.border},crossStyle:{color:H_.borderShade},label:{color:H_.tertiary}},legend:{textStyle:{color:H_.secondary},pageTextStyle:{color:H_.tertiary}},textStyle:{color:H_.secondary},title:{textStyle:{color:H_.primary},subtextStyle:{color:H_.quaternary}},toolbox:{iconStyle:{borderColor:H_.accent50}},tooltip:{backgroundColor:H_.neutral20,defaultBorderColor:H_.border,textStyle:{color:H_.tertiary}},dataZoom:{borderColor:H_.accent10,textStyle:{color:H_.tertiary},brushStyle:{color:H_.backgroundTint},handleStyle:{color:H_.neutral00,borderColor:H_.accent20},moveHandleStyle:{color:H_.accent40},emphasis:{handleStyle:{borderColor:H_.accent50}},dataBackground:{lineStyle:{color:H_.accent30},areaStyle:{color:H_.accent20}},selectedDataBackground:{lineStyle:{color:H_.accent50},areaStyle:{color:H_.accent30}}},visualMap:{textStyle:{color:H_.secondary},handleStyle:{borderColor:H_.neutral30}},timeline:{lineStyle:{color:H_.accent10},label:{color:H_.tertiary},controlStyle:{color:H_.accent30,borderColor:H_.accent30}},calendar:{itemStyle:{color:H_.neutral00,borderColor:H_.neutral20},dayLabel:{color:H_.tertiary},monthLabel:{color:H_.secondary},yearLabel:{color:H_.secondary}},matrix:{x:U_,y:U_,backgroundColor:{borderColor:H_.axisLine},body:{itemStyle:{borderColor:H_.borderTint}}},timeAxis:G_(),logAxis:G_(),valueAxis:G_(),categoryAxis:G_(),line:{symbol:"circle"},graph:{color:H_.theme},gauge:{title:{color:H_.secondary},axisLine:{lineStyle:{color:[[1,H_.neutral05]]}},axisLabel:{color:H_.axisLabel},detail:{color:H_.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:H_.background}},radar:(V_=G_(),V_.axisName={color:H_.axisLabel},V_.axisLine.lineStyle.color=H_.neutral20,V_),treemap:{breadcrumb:{itemStyle:{color:H_.neutral20,textStyle:{color:H_.secondary}},emphasis:{itemStyle:{color:H_.neutral30}}}},sunburst:{itemStyle:{borderColor:H_.background}},map:{itemStyle:{borderColor:H_.border,areaColor:H_.neutral10},label:{color:H_.tertiary},emphasis:{label:{color:H_.primary},itemStyle:{areaColor:H_.highlight}},select:{label:{color:H_.primary},itemStyle:{areaColor:H_.highlight}}},geo:{itemStyle:{borderColor:H_.border,areaColor:H_.neutral10},emphasis:{label:{color:H_.primary},itemStyle:{areaColor:H_.highlight}},select:{label:{color:H_.primary},itemStyle:{color:H_.highlight}}}};$_.categoryAxis.splitLine.show=!1;var Y_=function(){function e(){}return e.prototype.normalizeQuery=function(e){var t={},a={},r={};if(Kn(e)){var i=hu(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var n=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Bn(e,function(e,i){for(var o=!1,l=0;l<n.length;l++){var c=n[l],d=i.lastIndexOf(c);if(d>0&&d===i.length-c.length){var u=i.slice(0,d);"data"!==u&&(t.mainType=u,t[c.toLowerCase()]=e,o=!0)}}s.hasOwnProperty(i)&&(a[i]=e,o=!0),o||(r[i]=e)})}return{cptQuery:t,dataQuery:a,otherQuery:r}},e.prototype.filter=function(e,t){var a=this.eventInfo;if(!a)return!0;var r=a.targetEl,i=a.packedEvent,n=a.model,s=a.view;if(!n||!s)return!0;var o=t.cptQuery,l=t.dataQuery;return c(o,n,"mainType")&&c(o,n,"subType")&&c(o,n,"index","componentIndex")&&c(o,n,"name")&&c(o,n,"id")&&c(l,i,"name")&&c(l,i,"dataIndex")&&c(l,i,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,r,i));function c(e,t,a,r){return null==e[a]||t[r||a]===e[a]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),K_=["symbol","symbolSize","symbolRotate","symbolOffset"],X_=K_.concat(["symbolKeepAspect"]),Z_={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var a=e.getData();if(e.legendIcon&&a.setVisual("legendIcon",e.legendIcon),e.hasSymbolVisual){for(var r={},i={},n=!1,s=0;s<K_.length;s++){var o=K_[s],l=e.get(o);Yn(l)?(n=!0,i[o]=l):r[o]=l}if(r.symbol=r.symbol||e.defaultSymbol,a.setVisual(zn({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),!t.isSeriesFiltered(e)){var c=Wn(i);return{dataEach:n?function(t,a){for(var r=e.getRawValue(a),n=e.getDataParams(a),s=0;s<c.length;s++){var o=c[s];t.setItemVisual(a,o,i[o](r,n))}}:null}}}}},Q_={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(e.hasSymbolVisual&&!t.isSeriesFiltered(e))return{dataEach:e.getData().hasItemOption?function(e,t){for(var a=e.getItemModel(t),r=0;r<X_.length;r++){var i=X_[r],n=a.getShallow(i,!0);null!=n&&e.setItemVisual(t,i,n)}}:null}}};function J_(e,t,a,r,i){var n=e+t;a.isSilent(n)||r.eachComponent({mainType:"series",subType:"pie"},function(e){for(var t=e.seriesIndex,r=e.option.selectedMap,s=i.selected,o=0;o<s.length;o++)if(s[o].seriesIndex===t){var l=e.getData(),c=au(l,i.fromActionPayload);a.trigger(n,{type:n,seriesId:e.id,name:$n(c)?l.getName(c[0]):l.getName(c),selected:Kn(r)?r:zn({},r)})}})}function ej(e,t,a){for(var r;e&&(!t(e)||(r=e,!a));)e=e.__hostTarget||e.parent;return r}var tj=Math.round(9*Math.random()),aj="function"==typeof Object.defineProperty,rj=function(){function e(){this._id="__ec_inner_"+tj++}return e.prototype.get=function(e){return this._guard(e)[this._id]},e.prototype.set=function(e,t){var a=this._guard(e);return aj?Object.defineProperty(a,this._id,{value:t,enumerable:!1,configurable:!0}):a[this._id]=t,this},e.prototype.delete=function(e){return!!this.has(e)&&(delete this._guard(e)[this._id],!0)},e.prototype.has=function(e){return!!this._guard(e)[this._id]},e.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},e}(),ij=Qh.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var a=t.cx,r=t.cy,i=t.width/2,n=t.height/2;e.moveTo(a,r-n),e.lineTo(a+i,r+n),e.lineTo(a-i,r+n),e.closePath()}}),nj=Qh.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var a=t.cx,r=t.cy,i=t.width/2,n=t.height/2;e.moveTo(a,r-n),e.lineTo(a+i,r),e.lineTo(a,r+n),e.lineTo(a-i,r),e.closePath()}}),sj=Qh.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var a=t.x,r=t.y,i=t.width/5*3,n=Math.max(i,t.height),s=i/2,o=s*s/(n-s),l=r-n+s+o,c=Math.asin(o/s),d=Math.cos(c)*s,u=Math.sin(c),h=Math.cos(c),p=.6*s,m=.7*s;e.moveTo(a-d,l+o),e.arc(a,l,s,Math.PI-c,2*Math.PI+c),e.bezierCurveTo(a+d-u*p,l+o+h*p,a,r-m,a,r),e.bezierCurveTo(a,r-m,a-d+u*p,l+o+h*p,a-d,l+o),e.closePath()}}),oj=Qh.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var a=t.height,r=t.width,i=t.x,n=t.y,s=r/3*2;e.moveTo(i,n),e.lineTo(i+s,n+a),e.lineTo(i,n+a/4*3),e.lineTo(i-s,n+a),e.lineTo(i,n),e.closePath()}}),lj={line:function(e,t,a,r,i){i.x1=e,i.y1=t+r/2,i.x2=e+a,i.y2=t+r/2},rect:function(e,t,a,r,i){i.x=e,i.y=t,i.width=a,i.height=r},roundRect:function(e,t,a,r,i){i.x=e,i.y=t,i.width=a,i.height=r,i.r=Math.min(a,r)/4},square:function(e,t,a,r,i){var n=Math.min(a,r);i.x=e,i.y=t,i.width=n,i.height=n},circle:function(e,t,a,r,i){i.cx=e+a/2,i.cy=t+r/2,i.r=Math.min(a,r)/2},diamond:function(e,t,a,r,i){i.cx=e+a/2,i.cy=t+r/2,i.width=a,i.height=r},pin:function(e,t,a,r,i){i.x=e+a/2,i.y=t+r/2,i.width=a,i.height=r},arrow:function(e,t,a,r,i){i.x=e+a/2,i.y=t+r/2,i.width=a,i.height=r},triangle:function(e,t,a,r,i){i.cx=e+a/2,i.cy=t+r/2,i.width=a,i.height=r}},cj={};Bn({line:pf,rect:dp,roundRect:dp,square:dp,circle:Fm,diamond:nj,pin:sj,arrow:oj,triangle:ij},function(e,t){cj[t]=new e});var dj=Qh.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,a){var r=id(e,t,a),i=this.shape;return i&&"pin"===i.symbolType&&"inside"===t.position&&(r.y=a.y+.4*a.height),r},buildPath:function(e,t,a){var r=t.symbolType;if("none"!==r){var i=cj[r];i||(i=cj[r="rect"]),lj[r](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,a)}}});function uj(e,t){if("image"!==this.type){var a=this.style;this.__isEmptyBrush?(a.stroke=e,a.fill=t||gv.color.neutral00,a.lineWidth=2):"line"===this.shape.symbolType?a.stroke=e:a.fill=e,this.markRedraw()}}function hj(e,t,a,r,i,n,s){var o,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(o=0===e.indexOf("image://")?Xf(e.slice(8),new Do(t,a,r,i),s?"center":"cover"):0===e.indexOf("path://")?Kf(e.slice(7),{},new Do(t,a,r,i),s?"center":"cover"):new dj({shape:{symbolType:e,x:t,y:a,width:r,height:i}})).__isEmptyBrush=l,o.setColor=uj,n&&o.setColor(n),o}function pj(e,t){if(null!=e)return $n(e)||(e=[e,e]),[Cd(e[0],t[0])||0,Cd(ns(e[1],e[0]),t[1])||0]}function mj(e){return isFinite(e)}function fj(e,t,a){for(var r="radial"===t.type?function(e,t,a){var r=a.width,i=a.height,n=Math.min(r,i),s=null==t.x?.5:t.x,o=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(s=s*r+a.x,o=o*i+a.y,l*=n),s=mj(s)?s:.5,o=mj(o)?o:.5,l=l>=0&&mj(l)?l:.5,e.createRadialGradient(s,o,0,s,o,l)}(e,t,a):function(e,t,a){var r=null==t.x?0:t.x,i=null==t.x2?1:t.x2,n=null==t.y?0:t.y,s=null==t.y2?0:t.y2;return t.global||(r=r*a.width+a.x,i=i*a.width+a.x,n=n*a.height+a.y,s=s*a.height+a.y),r=mj(r)?r:0,i=mj(i)?i:1,n=mj(n)?n:0,s=mj(s)?s:0,e.createLinearGradient(r,n,i,s)}(e,t,a),i=t.colorStops,n=0;n<i.length;n++)r.addColorStop(i[n].offset,i[n].color);return r}function gj(e){return parseInt(e,10)}function xj(e,t,a){var r=["width","height"][t],i=["clientWidth","clientHeight"][t],n=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(null!=a[r]&&"auto"!==a[r])return parseFloat(a[r]);var o=document.defaultView.getComputedStyle(e);return(e[i]||gj(o[r])||gj(e.style[r]))-(gj(o[n])||0)-(gj(o[s])||0)|0}function vj(e){var t,a,r=e.style,i=r.lineDash&&r.lineWidth>0&&(t=r.lineDash,a=r.lineWidth,t&&"solid"!==t&&a>0?"dashed"===t?[4*a,2*a]:"dotted"===t?[a]:Zn(t)?[t]:$n(t)?t:null:null),n=r.lineDashOffset;if(i){var s=r.strokeNoScale&&e.getLineScale?e.getLineScale():1;s&&1!==s&&(i=qn(i,function(e){return e/s}),n/=s)}return[i,n]}var yj=new Ih(!0);function bj(e){var t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))}function _j(e){return"string"==typeof e&&"none"!==e}function jj(e){var t=e.fill;return null!=t&&"none"!==t}function wj(e,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var a=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=a}else e.fill()}function Nj(e,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var a=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=a}else e.stroke()}function Sj(e,t,a){var r=Nu(t.image,t.__image,a);if(Cu(r)){var i=e.createPattern(r,t.repeat||"repeat");if("function"==typeof DOMMatrix&&i&&i.setTransform){var n=new DOMMatrix;n.translateSelf(t.x||0,t.y||0),n.rotateSelf(0,0,(t.rotation||0)*js),n.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(n)}return i}}var Cj=["shadowBlur","shadowOffsetX","shadowOffsetY"],kj=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Mj(e,t,a,r,i){var n=!1;if(!r&&t===(a=a||{}))return!1;if(r||t.opacity!==a.opacity){Ij(e,i),n=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?Uu.opacity:s}(r||t.blend!==a.blend)&&(n||(Ij(e,i),n=!0),e.globalCompositeOperation=t.blend||Uu.blend);for(var o=0;o<Cj.length;o++){var l=Cj[o];(r||t[l]!==a[l])&&(n||(Ij(e,i),n=!0),e[l]=e.dpr*(t[l]||0))}return(r||t.shadowColor!==a.shadowColor)&&(n||(Ij(e,i),n=!0),e.shadowColor=t.shadowColor||Uu.shadowColor),n}function Tj(e,t,a,r,i){var n=Aj(t,i.inHover),s=r?null:a&&Aj(a,i.inHover)||{};if(n===s)return!1;var o=Mj(e,n,s,r,i);if((r||n.fill!==s.fill)&&(o||(Ij(e,i),o=!0),_j(n.fill)&&(e.fillStyle=n.fill)),(r||n.stroke!==s.stroke)&&(o||(Ij(e,i),o=!0),_j(n.stroke)&&(e.strokeStyle=n.stroke)),(r||n.opacity!==s.opacity)&&(o||(Ij(e,i),o=!0),e.globalAlpha=null==n.opacity?1:n.opacity),t.hasStroke()){var l=n.lineWidth/(n.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==l&&(o||(Ij(e,i),o=!0),e.lineWidth=l)}for(var c=0;c<kj.length;c++){var d=kj[c],u=d[0];(r||n[u]!==s[u])&&(o||(Ij(e,i),o=!0),e[u]=n[u]||d[1])}return o}function Dj(e,t){var a=t.transform,r=e.dpr||1;a?e.setTransform(r*a[0],r*a[1],r*a[2],r*a[3],r*a[4],r*a[5]):e.setTransform(r,0,0,r,0,0)}function Ij(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Aj(e,t){return t&&e.__hoverStyle||e.style}function Pj(e,t){Lj(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Lj(e,t,a,r){var i=t.transform;if(!t.shouldBePainted(a.viewWidth,a.viewHeight,!1,!1))return t.__dirty&=-2,void(t.__isRendered=!1);var n=t.__clipPaths,s=a.prevElClipPaths,o=!1,l=!1;if(s&&!function(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!0;return!1}(n,s)||(s&&s.length&&(Ij(e,a),e.restore(),l=o=!0,a.prevElClipPaths=null,a.allClipped=!1,a.prevEl=null),n&&n.length&&(Ij(e,a),e.save(),function(e,t,a){for(var r=!1,i=0;i<e.length;i++){var n=e[i];r=r||n.isZeroArea(),Dj(t,n),t.beginPath(),n.buildPath(t,n.shape),t.clip()}a.allClipped=r}(n,e,a),o=!0),a.prevElClipPaths=n),a.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var c=a.prevEl;c||(l=o=!0);var d,u,h=t instanceof Qh&&t.autoBatch&&function(e){var t=jj(e),a=bj(e);return!(e.lineDash||!(+t^+a)||t&&"string"!=typeof e.fill||a&&"string"!=typeof e.stroke||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}(t.style);o||(d=i,u=c.transform,d&&u?d[0]!==u[0]||d[1]!==u[1]||d[2]!==u[2]||d[3]!==u[3]||d[4]!==u[4]||d[5]!==u[5]:d||u)?(Ij(e,a),Dj(e,t)):h||Ij(e,a);var p=Aj(t,a.inHover);t instanceof Qh?(1!==a.lastDrawType&&(l=!0,a.lastDrawType=1),Tj(e,t,c,l,a),h&&(a.batchFill||a.batchStroke)||e.beginPath(),function(e,t,a,r){var i,n=bj(a),s=jj(a),o=a.strokePercent,l=o<1,c=!t.path;t.silent&&!l||!c||t.createPathProxy();var d=t.path||yj,u=t.__dirty;if(!r){var h=a.fill,p=a.stroke,m=s&&!!h.colorStops,f=n&&!!p.colorStops,g=s&&!!h.image,x=n&&!!p.image,v=void 0,y=void 0,b=void 0,_=void 0,j=void 0;(m||f)&&(j=t.getBoundingRect()),m&&(v=u?fj(e,h,j):t.__canvasFillGradient,t.__canvasFillGradient=v),f&&(y=u?fj(e,p,j):t.__canvasStrokeGradient,t.__canvasStrokeGradient=y),g&&(b=u||!t.__canvasFillPattern?Sj(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=b),x&&(_=u||!t.__canvasStrokePattern?Sj(e,p,t):t.__canvasStrokePattern,t.__canvasStrokePattern=_),m?e.fillStyle=v:g&&(b?e.fillStyle=b:s=!1),f?e.strokeStyle=y:x&&(_?e.strokeStyle=_:n=!1)}var w,N,S=t.getGlobalScale();d.setScale(S[0],S[1],t.segmentIgnoreThreshold),e.setLineDash&&a.lineDash&&(w=(i=vj(t))[0],N=i[1]);var C=!0;(c||4&u)&&(d.setDPR(e.dpr),l?d.setContext(null):(d.setContext(e),C=!1),d.reset(),t.buildPath(d,t.shape,r),d.toStatic(),t.pathUpdated()),C&&d.rebuildPath(e,l?o:1),w&&(e.setLineDash(w),e.lineDashOffset=N),r||(a.strokeFirst?(n&&Nj(e,a),s&&wj(e,a)):(s&&wj(e,a),n&&Nj(e,a))),w&&e.setLineDash([])}(e,t,p,h),h&&(a.batchFill=p.fill||"",a.batchStroke=p.stroke||"")):t instanceof ep?(3!==a.lastDrawType&&(l=!0,a.lastDrawType=3),Tj(e,t,c,l,a),function(e,t,a){var r,i=a.text;if(null!=i&&(i+=""),i){e.font=a.font||gn,e.textAlign=a.textAlign,e.textBaseline=a.textBaseline;var n=void 0,s=void 0;e.setLineDash&&a.lineDash&&(n=(r=vj(t))[0],s=r[1]),n&&(e.setLineDash(n),e.lineDashOffset=s),a.strokeFirst?(bj(a)&&e.strokeText(i,a.x,a.y),jj(a)&&e.fillText(i,a.x,a.y)):(jj(a)&&e.fillText(i,a.x,a.y),bj(a)&&e.strokeText(i,a.x,a.y)),n&&e.setLineDash([])}}(e,t,p)):t instanceof rp?(2!==a.lastDrawType&&(l=!0,a.lastDrawType=2),function(e,t,a,r,i){Mj(e,Aj(t,i.inHover),a&&Aj(a,i.inHover),r,i)}(e,t,c,l,a),function(e,t,a){var r=t.__image=Nu(a.image,t.__image,t,t.onload);if(r&&Cu(r)){var i=a.x||0,n=a.y||0,s=t.getWidth(),o=t.getHeight(),l=r.width/r.height;if(null==s&&null!=o?s=o*l:null==o&&null!=s?o=s/l:null==s&&null==o&&(s=r.width,o=r.height),a.sWidth&&a.sHeight){var c=a.sx||0,d=a.sy||0;e.drawImage(r,c,d,a.sWidth,a.sHeight,i,n,s,o)}else if(a.sx&&a.sy){var u=s-(c=a.sx),h=o-(d=a.sy);e.drawImage(r,c,d,u,h,i,n,s,o)}else e.drawImage(r,i,n,s,o)}}(e,t,p)):t.getTemporalDisplayables&&(4!==a.lastDrawType&&(l=!0,a.lastDrawType=4),function(e,t,a){var r=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var n,s,o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:a.viewWidth,viewHeight:a.viewHeight,inHover:a.inHover};for(n=t.getCursor(),s=r.length;n<s;n++){(d=r[n]).beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),Lj(e,d,o,n===s-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),o.prevEl=d}for(var l=0,c=i.length;l<c;l++){var d;(d=i[l]).beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),Lj(e,d,o,l===c-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),o.prevEl=d}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}(e,t,a)),h&&r&&Ij(e,a),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),a.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var zj=new rj,Ej=new Dl(100),Rj=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Oj(e,t){if("none"===e)return null;var a=t.getDevicePixelRatio(),r=t.getZr(),i="svg"===r.painter.type;e.dirty&&zj.delete(e);var n=zj.get(e);if(n)return n;var s=En(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===s.backgroundColor&&(s.backgroundColor=null);var o={repeat:"repeat"};return function(e){for(var t,n=[a],o=!0,l=0;l<Rj.length;++l){var c=s[Rj[l]];if(null!=c&&!$n(c)&&!Kn(c)&&!Zn(c)&&"boolean"!=typeof c){o=!1;break}n.push(c)}if(o){t=n.join(",")+(i?"-svg":"");var d=Ej.get(t);d&&(i?e.svgElement=d:e.image=d)}var u,h=Bj(s.dashArrayX),p=function(e){if(!e||"object"==typeof e&&0===e.length)return[0,0];if(Zn(e)){var t=Math.ceil(e);return[t,t]}var a=qn(e,function(e){return Math.ceil(e)});return e.length%2?a.concat(a):a}(s.dashArrayY),m=Fj(s.symbol),f=(b=h,qn(b,function(e){return qj(e)})),g=qj(p),x=!i&&vn.createCanvas(),v=i&&{tag:"g",attrs:{},key:"dcl",children:[]},y=function(){for(var e=1,t=0,a=f.length;t<a;++t)e=Bd(e,f[t]);var r=1;for(t=0,a=m.length;t<a;++t)r=Bd(r,m[t].length);e*=r;var i=g*f.length*m.length;return{width:Math.max(1,Math.min(e,s.maxTileWidth)),height:Math.max(1,Math.min(i,s.maxTileHeight))}}();var b;x&&(x.width=y.width*a,x.height=y.height*a,u=x.getContext("2d"));(function(){u&&(u.clearRect(0,0,x.width,x.height),s.backgroundColor&&(u.fillStyle=s.backgroundColor,u.fillRect(0,0,x.width,x.height)));for(var e=0,t=0;t<p.length;++t)e+=p[t];if(e<=0)return;var n=-g,o=0,l=0,c=0;for(;n<y.height;){if(o%2==0){for(var d=l/2%m.length,f=0,b=0,_=0;f<2*y.width;){var j=0;for(t=0;t<h[c].length;++t)j+=h[c][t];if(j<=0)break;if(b%2==0){var w=.5*(1-s.symbolSize),N=f+h[c][b]*w,S=n+p[o]*w,C=h[c][b]*s.symbolSize,k=p[o]*s.symbolSize,M=_/2%m[d].length;T(N,S,C,k,m[d][M])}f+=h[c][b],++_,++b===h[c].length&&(b=0)}++c===h.length&&(c=0)}n+=p[o],++l,++o===p.length&&(o=0)}function T(e,t,n,o,l){var c=i?1:a,d=hj(l,e*c,t*c,n*c,o*c,s.color,s.symbolKeepAspect);if(i){var h=r.painter.renderOneToVNode(d);h&&v.children.push(h)}else Pj(u,d)}})(),o&&Ej.put(t,x||v);e.image=x,e.svgElement=v,e.svgWidth=y.width,e.svgHeight=y.height}(o),o.rotation=s.rotation,o.scaleX=o.scaleY=i?1:1/a,zj.set(e,o),e.dirty=!1,o}function Fj(e){if(!e||0===e.length)return[["rect"]];if(Kn(e))return[[e]];for(var t=!0,a=0;a<e.length;++a)if(!Kn(e[a])){t=!1;break}if(t)return Fj([e]);var r=[];for(a=0;a<e.length;++a)Kn(e[a])?r.push([e[a]]):r.push(e[a]);return r}function Bj(e){if(!e||0===e.length)return[[0,0]];if(Zn(e))return[[i=Math.ceil(e),i]];for(var t=!0,a=0;a<e.length;++a)if(!Zn(e[a])){t=!1;break}if(t)return Bj([e]);var r=[];for(a=0;a<e.length;++a)if(Zn(e[a])){var i=Math.ceil(e[a]);r.push([i,i])}else{(i=qn(e[a],function(e){return Math.ceil(e)})).length%2==1?r.push(i.concat(i)):r.push(i)}return r}function qj(e){for(var t=0,a=0;a<e.length;++a)t+=e[a];return e.length%2==1?2*t:t}var Vj=new Bs,Hj={};var Wj=2e3,Gj=4500,Uj={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:Wj,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:Gj,ARIA:6e3,DECAL:7e3}},$j="__flagInMainProcess",Yj="__mainProcessVersion",Kj="__pendingUpdate",Xj="__needsUpdateStatus",Zj=/^[a-zA-Z0-9_]+$/,Qj="__connectUpdateStatus";function Jj(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];if(!this.isDisposed())return tw(this,e,t);this.id}}function ew(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return tw(this,e,t)}}function tw(e,t,a){return a[0]=a[0]&&a[0].toLowerCase(),Bs.prototype[t].apply(e,a)}var aw,rw,iw,nw,sw,ow,lw,cw,dw,uw,hw,pw,mw,fw,gw,xw,vw,yw,bw,_w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t}(Bs),jw=_w.prototype;jw.on=ew("on"),jw.off=ew("off");var ww=function(e){function t(t,a,r){var i=e.call(this,new Y_)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],r=r||{},i._dom=t;i[Yj]=1,r.ssr;var n=i._zr=bd(t,{renderer:r.renderer||"canvas",devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:ns(r.useDirtyRect,!1),useCoarsePointer:ns(r.useCoarsePointer,"auto"),pointerSize:r.pointerSize});i._ssr=r.ssr,i._throttledZrFlush=m_(Gn(n.flush,n),17),i._updateTheme(a),i._locale=function(e){if(Kn(e)){var t=Jg[e.toUpperCase()]||{};return e===Xg||e===Zg?Pn(t):Ln(Pn(t),Pn(Jg[Qg]),!1)}return Ln(Pn(e),Pn(Jg[Qg]),!1)}(r.locale||tx),i._coordSysMgr=new Yx;var s=i._api=gw(i);function o(e,t){return e.__prio-t.__prio}return Xo(Iw,o),Xo(Tw,o),i._scheduler=new k_(i,s,Tw,Iw),i._messageCenter=new _w,i._initEvents(),i.resize=Gn(i.resize,i),n.animation.on("frame",i._onframe,i),uw(n,i),hw(n,i),hs(i),i}return pn(t,e),t.prototype._onframe=function(){if(!this._disposed){yw(this);var e=this._scheduler;if(this[Kj]){var t=this[Kj].silent;this[$j]=!0,bw(this);try{aw(this),nw.update.call(this,null,this[Kj].updateParams)}catch(s){throw this[$j]=!1,this[Kj]=null,s}this._zr.flush(),this[$j]=!1,this[Kj]=null,cw.call(this,t),dw.call(this,t)}else if(e.unfinished){var a=1,r=this._model,i=this._api;e.unfinished=!1;do{var n=+new Date;e.performSeriesTasks(r),e.performDataProcessorTasks(r),ow(this,r),e.performVisualTasks(r),fw(this,this._model,i,"remain",{}),a-=+new Date-n}while(a>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,t,a){if(!this[$j])if(this._disposed)this.id;else{var r,i,n;if(Qn(t)&&(a=t.lazyUpdate,r=t.silent,i=t.replaceMerge,n=t.transition,t=t.notMerge),this[$j]=!0,bw(this),!this._model||t){var s=new ry(this._api),o=this._theme,l=this._model=new Xv;l.scheduler=this._scheduler,l.ssr=this._ssr,l.init(null,null,null,o,this._locale,s)}this._model.setOption(e,{replaceMerge:i},Dw);var c={seriesTransition:n,optionChanged:!0};if(a)this[Kj]={silent:r,updateParams:c},this[$j]=!1,this.getZr().wakeUp();else{try{aw(this),nw.update.call(this,null,c)}catch(d){throw this[Kj]=null,this[$j]=!1,d}this._ssr||this._zr.flush(),this[Kj]=null,this[$j]=!1,cw.call(this,r),dw.call(this,r)}}},t.prototype.setTheme=function(e,t){if(!this[$j])if(this._disposed)this.id;else{var a=this._model;if(a){var r=t&&t.silent,i=null;this[Kj]&&(null==r&&(r=this[Kj].silent),i=this[Kj].updateParams,this[Kj]=null),this[$j]=!0,bw(this);try{this._updateTheme(e),a.setTheme(this._theme),aw(this),nw.update.call(this,{type:"setTheme"},i)}catch(n){throw this[$j]=!1,n}this[$j]=!1,cw.call(this,r),dw.call(this,r)}}},t.prototype._updateTheme=function(e){Kn(e)&&(e=Aw[e]),e&&((e=Pn(e))&&Ny(e,!0),this._theme=e)},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||fn.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){return e=e||{},this._zr.painter.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){return e=e||{},this._zr.painter.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){var e=this._zr;return Bn(e.storage.getDisplayList(),function(e){e.stopAnimation(null,!0)}),e.painter.toDataURL()},t.prototype.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,a=this._model,r=[],i=this;Bn(t,function(e){a.eachComponent({mainType:e},function(e){var t=i._componentsMap[e.__viewId];t.group.ignore||(r.push(t),t.group.ignore=!0)})});var n="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Bn(r,function(e){e.group.ignore=!1}),n}this.id},t.prototype.getConnectedDataURL=function(e){if(!this._disposed){var t="svg"===e.type,a=this.group,r=Math.min,i=Math.max,n=1/0;if(zw[a]){var s=n,o=n,l=-1/0,c=-1/0,d=[],u=e&&e.pixelRatio||this.getDevicePixelRatio();Bn(Lw,function(n,u){if(n.group===a){var h=t?n.getZr().painter.getSvgDom().innerHTML:n.renderToCanvas(Pn(e)),p=n.getDom().getBoundingClientRect();s=r(p.left,s),o=r(p.top,o),l=i(p.right,l),c=i(p.bottom,c),d.push({dom:h,left:p.left,top:p.top})}});var h=(l*=u)-(s*=u),p=(c*=u)-(o*=u),m=vn.createCanvas(),f=bd(m,{renderer:t?"svg":"canvas"});if(f.resize({width:h,height:p}),t){var g="";return Bn(d,function(e){var t=e.left-s,a=e.top-o;g+='<g transform="translate('+t+","+a+')">'+e.dom+"</g>"}),f.painter.getSvgRoot().innerHTML=g,e.connectedBackgroundColor&&f.painter.setBackgroundColor(e.connectedBackgroundColor),f.refreshImmediately(),f.painter.toDataURL()}return e.connectedBackgroundColor&&f.add(new dp({shape:{x:0,y:0,width:h,height:p},style:{fill:e.connectedBackgroundColor}})),Bn(d,function(e){var t=new rp({style:{x:e.left*u-s,y:e.top*u-o,image:e.dom}});f.add(t)}),f.refreshImmediately(),m.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}this.id},t.prototype.convertToPixel=function(e,t,a){return sw(this,"convertToPixel",e,t,a)},t.prototype.convertToLayout=function(e,t,a){return sw(this,"convertToLayout",e,t,a)},t.prototype.convertFromPixel=function(e,t,a){return sw(this,"convertFromPixel",e,t,a)},t.prototype.containPixel=function(e,t){var a;if(!this._disposed)return Bn(nu(this._model,e),function(e,r){r.indexOf("Models")>=0&&Bn(e,function(e){var i=e.coordinateSystem;if(i&&i.containPoint)a=a||!!i.containPoint(t);else if("seriesModels"===r){var n=this._chartsMap[e.__viewId];n&&n.containPoint&&(a=a||n.containPoint(t,e))}},this)},this),!!a;this.id},t.prototype.getVisual=function(e,t){var a=nu(this._model,e,{defaultMainType:"series"}),r=a.seriesModel.getData(),i=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?r.indexOfRawIndex(a.dataIndex):null;return null!=i?function(e,t,a){switch(a){case"color":return e.getItemVisual(t,"style")[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,a)}}(r,i,t):function(e,t){switch(t){case"color":return e.getVisual("style")[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}(r,t)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;Bn(Sw,function(t){var a=function(a){var r,i=e.getModel(),n=a.target;if("globalout"===t?r={}:n&&ej(n,function(e){var t=Cp(e);if(t&&null!=t.dataIndex){var a=t.dataModel||i.getSeriesByIndex(t.seriesIndex);return r=a&&a.getDataParams(t.dataIndex,t.dataType,n)||{},!0}if(t.eventData)return r=zn({},t.eventData),!0},!0),r){var s=r.componentType,o=r.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",o=r.seriesIndex);var l=s&&null!=o&&i.getComponent(s,o),c=l&&e["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];r.event=a,r.type=t,e._$eventProcessor.eventInfo={targetEl:n,packedEvent:r,model:l,view:c},e.trigger(t,r)}};a.zrEventfulCallAtLast=!0,e._zr.on(t,a,e)});var t=this._messageCenter;Bn(Mw,function(a,r){t.on(r,function(t){e.trigger(r,t)})}),function(e,t,a){e.on("selectchanged",function(e){var r=a.getModel();e.isFromClick?(J_("map","selectchanged",t,r,e),J_("pie","selectchanged",t,r,e)):"select"===e.fromAction?(J_("map","selected",t,r,e),J_("pie","selected",t,r,e)):"unselect"===e.fromAction&&(J_("map","unselected",t,r,e),J_("pie","unselected",t,r,e))})}(t,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed?this.id:this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed)this.id;else{this._disposed=!0,this.getDom()&&cu(this.getDom(),Rw,"");var e=this,t=e._api,a=e._model;Bn(e._componentsViews,function(e){e.dispose(a,t)}),Bn(e._chartsViews,function(e){e.dispose(a,t)}),e._zr.dispose(),e._dom=e._model=e._chartsMap=e._componentsMap=e._chartsViews=e._componentsViews=e._scheduler=e._api=e._zr=e._throttledZrFlush=e._theme=e._coordSysMgr=e._messageCenter=null,delete Lw[e.id]}},t.prototype.resize=function(e){if(!this[$j])if(this._disposed)this.id;else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var a=t.resetOption("media"),r=e&&e.silent;this[Kj]&&(null==r&&(r=this[Kj].silent),a=!0,this[Kj]=null),this[$j]=!0,bw(this);try{a&&aw(this),nw.update.call(this,{type:"resize",animation:zn({duration:0},e&&e.animation)})}catch(i){throw this[$j]=!1,i}this[$j]=!1,cw.call(this,r),dw.call(this,r)}}},t.prototype.showLoading=function(e,t){if(this._disposed)this.id;else if(Qn(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),Pw[e]){var a=Pw[e](this._api,t),r=this._zr;this._loadingFX=a,r.add(a)}},t.prototype.hideLoading=function(){this._disposed?this.id:(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var t=zn({},e);return t.type=kw[e.type],t},t.prototype.dispatchAction=function(e,t){if(this._disposed)this.id;else if(Qn(t)||(t={silent:!!t}),Cw[e.type]&&this._model)if(this[$j])this._pendingActions.push(e);else{var a=t.silent;lw.call(this,e,a);var r=t.flush;r?this._zr.flush():!1!==r&&fn.browser.weChat&&this._throttledZrFlush(),cw.call(this,a),dw.call(this,a)}},t.prototype.updateLabelLayout=function(){Vj.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed)this.id;else{var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(e){e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()})}function t(e){for(var t=[],a=e.currentStates,r=0;r<a.length;r++){var i=a[r];"emphasis"!==i&&"blur"!==i&&"select"!==i&&t.push(i)}e.selected&&e.states.select&&t.push("select"),2===e.hoverState&&e.states.emphasis?t.push("emphasis"):1===e.hoverState&&e.states.blur&&t.push("blur"),e.useStates(t)}function a(e,t){if(!e.preventAutoZ){var a=vg(e);t.eachRendered(function(e){return yg(e,a.z,a.zlevel),!0})}}function r(e,t){t.eachRendered(function(e){if(!Ff(e)){var t=e.getTextContent(),a=e.getTextGuideLine();e.stateTransition&&(e.stateTransition=null),t&&t.stateTransition&&(t.stateTransition=null),a&&a.stateTransition&&(a.stateTransition=null),e.hasState()?(e.prevStates=e.currentStates,e.clearStates()):e.prevStates&&(e.prevStates=null)}})}function i(e,a){var r=e.getModel("stateAnimation"),i=e.isAnimationEnabled(),n=r.get("duration"),s=n>0?{duration:n,delay:r.get("delay"),easing:r.get("easing")}:null;a.eachRendered(function(e){if(e.states&&e.states.emphasis){if(Ff(e))return;if(e instanceof Qh&&function(e){var t=Tp(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var a=e.states.select||{};t.selectFill=a.style&&a.style.fill||null,t.selectStroke=a.style&&a.style.stroke||null}(e),e.__dirty){var a=e.prevStates;a&&e.useStates(a)}if(i){e.stateTransition=s;var r=e.getTextContent(),n=e.getTextGuideLine();r&&(r.stateTransition=s),n&&(n.stateTransition=s)}e.__dirty&&t(e)}})}aw=function(e){var t=e._scheduler;t.restorePipelines(e._model),t.prepareStageTasks(),rw(e,!0),rw(e,!1),t.plan()},rw=function(e,t){for(var a=e._model,r=e._scheduler,i=t?e._componentsViews:e._chartsViews,n=t?e._componentsMap:e._chartsMap,s=e._zr,o=e._api,l=0;l<i.length;l++)i[l].__alive=!1;function c(e){var l=e.__requireNewView;e.__requireNewView=!1;var c="_ec_"+e.id+"_"+e.type,d=!l&&n[c];if(!d){var u=hu(e.type);(d=new(t?t_.getClass(u.main,u.sub):n_.getClass(u.sub))).init(a,o),n[c]=d,i.push(d),s.add(d.group)}e.__viewId=d.__id=c,d.__alive=!0,d.__model=e,d.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!t&&r.prepareView(d,e,a,o)}t?a.eachComponent(function(e,t){"series"!==e&&c(t)}):a.eachSeries(c);for(l=0;l<i.length;){var d=i[l];d.__alive?l++:(!t&&d.renderTask.dispose(),s.remove(d.group),d.dispose(a,o),i.splice(l,1),n[d.__id]===d&&delete n[d.__id],d.__id=d.group.__ecComponentInfo=null)}},iw=function(e,t,a,r,i){var n=e._model;if(n.setUpdatePayload(a),r){var s={};s[r+"Id"]=a[r+"Id"],s[r+"Index"]=a[r+"Index"],s[r+"Name"]=a[r+"Name"];var o={mainType:r,query:s};i&&(o.subType=i);var l,c=a.excludeSeriesId;null!=c&&(l=xs(),Bn(Gd(c),function(e){var t=Jd(e,null);null!=t&&l.set(t,!0)})),n&&n.eachComponent(o,function(t){if(!(l&&null!=l.get(t.id)))if(bm(a))if(t instanceof $b)a.type!==Pp||a.notBlur||t.get(["emphasis","disabled"])||function(e,t,a){var r=e.seriesIndex,i=e.getData(t.dataType);if(i){var n=au(i,t);n=($n(n)?n[0]:n)||0;var s=i.getItemGraphicEl(n);if(!s)for(var o=i.count(),l=0;!s&&l<o;)s=i.getItemGraphicEl(l++);if(s){var c=Cp(s);om(r,c.focus,c.blurScope,a)}else{var d=e.get(["emphasis","focus"]),u=e.get(["emphasis","blurScope"]);null!=d&&om(r,d,u,a)}}}(t,a,e._api);else{var r=cm(t.mainType,t.componentIndex,a.name,e._api),i=r.focusSelf,n=r.dispatchers;a.type===Pp&&i&&!a.notBlur&&lm(t.mainType,t.componentIndex,e._api),n&&Bn(n,function(e){a.type===Pp?em(e):tm(e)})}else ym(a)&&t instanceof $b&&(!function(e,t){if(ym(t)){var a=t.dataType,r=au(e.getData(a),t);$n(r)||(r=[r]),e[t.type===Rp?"toggleSelect":t.type===zp?"select":"unselect"](r,a)}}(t,a,e._api),dm(t),vw(e))},e),n&&n.eachComponent(o,function(t){l&&null!=l.get(t.id)||d(e["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},e)}else Bn([].concat(e._componentsViews).concat(e._chartsViews),d);function d(r){r&&r.__alive&&r[t]&&r[t](r.__model,n,e._api,a)}},nw={prepareAndUpdate:function(e){aw(this),nw.update.call(this,e,e&&{optionChanged:null!=e.newOption})},update:function(t,a){var r=this._model,i=this._api,n=this._zr,s=this._coordSysMgr,o=this._scheduler;if(r){r.setUpdatePayload(t),o.restoreData(r,t),o.performSeriesTasks(r),s.create(r,i),o.performDataProcessorTasks(r,t),ow(this,r),s.update(r,i),e(r),o.performVisualTasks(r,t);var l=r.get("backgroundColor")||"transparent";n.setBackgroundColor(l);var c=r.get("darkMode");null!=c&&"auto"!==c&&n.setDarkMode(c),pw(this,r,i,t,a),Vj.trigger("afterupdate",r,i)}},updateTransform:function(t){var a=this,r=this._model,i=this._api;if(r){r.setUpdatePayload(t);var n=[];r.eachComponent(function(e,s){if("series"!==e){var o=a.getViewOfComponentModel(s);if(o&&o.__alive)if(o.updateTransform){var l=o.updateTransform(s,r,i,t);l&&l.update&&n.push(o)}else n.push(o)}});var s=xs();r.eachSeries(function(e){var n=a._chartsMap[e.__viewId];if(n.updateTransform){var o=n.updateTransform(e,r,i,t);o&&o.update&&s.set(e.uid,1)}else s.set(e.uid,1)}),e(r),this._scheduler.performVisualTasks(r,t,{setDirty:!0,dirtyMap:s}),fw(this,r,i,t,{},s),Vj.trigger("afterupdate",r,i)}},updateView:function(t){var a=this._model;a&&(a.setUpdatePayload(t),n_.markUpdateMethod(t,"updateView"),e(a),this._scheduler.performVisualTasks(a,t,{setDirty:!0}),pw(this,a,this._api,t,{}),Vj.trigger("afterupdate",a,this._api))},updateVisual:function(t){var a=this,r=this._model;r&&(r.setUpdatePayload(t),r.eachSeries(function(e){e.getData().clearAllVisual()}),n_.markUpdateMethod(t,"updateVisual"),e(r),this._scheduler.performVisualTasks(r,t,{visualType:"visual",setDirty:!0}),r.eachComponent(function(e,i){if("series"!==e){var n=a.getViewOfComponentModel(i);n&&n.__alive&&n.updateVisual(i,r,a._api,t)}}),r.eachSeries(function(e){a._chartsMap[e.__viewId].updateVisual(e,r,a._api,t)}),Vj.trigger("afterupdate",r,this._api))},updateLayout:function(e){nw.update.call(this,e)}},sw=function(e,t,a,r,i){if(e._disposed)e.id;else for(var n,s=e._model,o=e._coordSysMgr.getCoordinateSystems(),l=nu(s,a),c=0;c<o.length;c++){var d=o[c];if(d[t]&&null!=(n=d[t](s,l,r,i)))return n}},ow=function(e,t){var a=e._chartsMap,r=e._scheduler;t.eachSeries(function(e){r.updateStreamModes(e,a[e.__viewId])})},lw=function(e,t){var a=this,r=this.getModel(),i=e.type,n=e.escapeConnect,s=Cw[i],o=(s.update||"update").split(":"),l=o.pop(),c=null!=o[0]&&hu(o[0]);this[$j]=!0,bw(this);var d=[e],u=!1;e.batch&&(u=!0,d=qn(e.batch,function(t){return(t=En(zn({},t),e)).batch=null,t}));var h,p=[],m=[],f=s.nonRefinedEventType,g=ym(e),x=bm(e);if(x&&sm(this._api),Bn(d,function(t){var i=s.action(t,r,a._api);if(s.refineEvent?m.push(i):h=i,(h=h||zn({},t)).type=f,p.push(h),x){var n=su(e),o=n.queryOptionMap,d=n.mainTypeSpecified?o.keys()[0]:"series";iw(a,l,t,d),vw(a)}else g?(iw(a,l,t,"series"),vw(a)):c&&iw(a,l,t,c.main,c.sub)}),"none"!==l&&!x&&!g&&!c)try{this[Kj]?(aw(this),nw.update.call(this,e),this[Kj]=null):nw[l].call(this,e)}catch(_){throw this[$j]=!1,_}if(h=u?{type:f,escapeConnect:n,batch:p}:p[0],this[$j]=!1,!t){var v=void 0;if(s.refineEvent){var y=s.refineEvent(m,e,r,this._api).eventContent;cs(Qn(y)),(v=En({type:s.refinedEventType},y)).fromAction=e.type,v.fromActionPayload=e,v.escapeConnect=!0}var b=this._messageCenter;b.trigger(h.type,h),v&&b.trigger(v.type,v)}},cw=function(e){for(var t=this._pendingActions;t.length;){var a=t.shift();lw.call(this,a,e)}},dw=function(e){!e&&this.trigger("updated")},uw=function(e,t){e.on("rendered",function(a){t.trigger("rendered",a),!e.animation.isFinished()||t[Kj]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")})},hw=function(e,t){e.on("mouseover",function(e){var a=ej(e.target,vm);a&&(!function(e,t,a){var r=Cp(e),i=cm(r.componentMainType,r.componentIndex,r.componentHighDownName,a),n=i.dispatchers,s=i.focusSelf;n?(s&&lm(r.componentMainType,r.componentIndex,a),Bn(n,function(e){return Qp(e,t)})):(om(r.seriesIndex,r.focus,r.blurScope,a),"self"===r.focus&&lm(r.componentMainType,r.componentIndex,a),Qp(e,t))}(a,e,t._api),vw(t))}).on("mouseout",function(e){var a=ej(e.target,vm);a&&(!function(e,t,a){sm(a);var r=Cp(e),i=cm(r.componentMainType,r.componentIndex,r.componentHighDownName,a).dispatchers;i?Bn(i,function(e){return Jp(e,t)}):Jp(e,t)}(a,e,t._api),vw(t))}).on("click",function(e){var a=ej(e.target,function(e){return null!=Cp(e).dataIndex},!0);if(a){var r=a.selected?"unselect":"select",i=Cp(a);t._api.dispatchAction({type:r,dataType:i.dataType,dataIndexInside:i.dataIndex,seriesIndex:i.seriesIndex,isFromClick:!0})}})},pw=function(e,t,a,r,i){!function(e){var t=[],a=[],r=!1;if(e.eachComponent(function(e,i){var n=i.get("zlevel")||0,s=i.get("z")||0,o=i.getZLevelKey();r=r||!!o,("series"===e?a:t).push({zlevel:n,z:s,idx:i.componentIndex,type:e,key:o})}),r){var i,n,s=t.concat(a);Xo(s,function(e,t){return e.zlevel===t.zlevel?e.z-t.z:e.zlevel-t.zlevel}),Bn(s,function(t){var a=e.getComponent(t.type,t.idx),r=t.zlevel,s=t.key;null!=i&&(r=Math.max(i,r)),s?(r===i&&s!==n&&r++,n=s):n&&(r===i&&r++,n=""),i=r,a.setZLevel(r)})}}(t),mw(e,t,a,r,i),Bn(e._chartsViews,function(e){e.__alive=!1}),fw(e,t,a,r,i),Bn(e._chartsViews,function(e){e.__alive||e.remove(t,a)})},mw=function(e,t,n,s,o,l){Bn(l||e._componentsViews,function(e){var o=e.__model;r(o,e),e.render(o,t,n,s),a(o,e),i(o,e)})},fw=function(e,t,n,s,o,l){var c=e._scheduler;o=zn(o||{},{updatedSeries:t.getSeries()}),Vj.trigger("series:beforeupdate",t,n,o);var d=!1;t.eachSeries(function(t){var a=e._chartsMap[t.__viewId];a.__alive=!0;var i=a.renderTask;c.updatePayload(i,s),r(t,a),l&&l.get(t.uid)&&i.dirty(),i.perform(c.getPerformArgs(i))&&(d=!0),a.group.silent=!!t.get("silent"),function(e,t){var a=e.get("blendMode")||null;t.eachRendered(function(e){e.isGroup||(e.style.blend=a)})}(t,a),dm(t)}),c.unfinished=d||c.unfinished,Vj.trigger("series:layoutlabels",t,n,o),Vj.trigger("series:transition",t,n,o),t.eachSeries(function(t){var r=e._chartsMap[t.__viewId];a(t,r),i(t,r)}),function(e,t){var a=e._zr,r=a.storage,i=0;r.traverse(function(e){e.isGroup||i++}),i>t.get("hoverLayerThreshold")&&!fn.node&&!fn.worker&&t.eachSeries(function(t){if(!t.preventUsingHoverLayer){var a=e._chartsMap[t.__viewId];a.__alive&&a.eachRendered(function(e){e.states.emphasis&&(e.states.emphasis.hoverLayer=!0)})}})}(e,t),Vj.trigger("series:afterupdate",t,n,o)},vw=function(e){e[Xj]=!0,e.getZr().wakeUp()},bw=function(e){e[Yj]=(e[Yj]+1)%1e3},yw=function(e){e[Xj]&&(e.getZr().storage.traverse(function(e){Ff(e)||t(e)}),e[Xj]=!1)},gw=function(e){return new(function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return pn(a,t),a.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},a.prototype.getComponentByElement=function(t){for(;t;){var a=t.__ecComponentInfo;if(null!=a)return e._model.getComponent(a.mainType,a.index);t=t.parent}},a.prototype.enterEmphasis=function(t,a){em(t,a),vw(e)},a.prototype.leaveEmphasis=function(t,a){tm(t,a),vw(e)},a.prototype.enterBlur=function(t){!function(e){Yp(e,Hp)}(t),vw(e)},a.prototype.leaveBlur=function(t){am(t),vw(e)},a.prototype.enterSelect=function(t){rm(t),vw(e)},a.prototype.leaveSelect=function(t){im(t),vw(e)},a.prototype.getModel=function(){return e.getModel()},a.prototype.getViewOfComponentModel=function(t){return e.getViewOfComponentModel(t)},a.prototype.getViewOfSeriesModel=function(t){return e.getViewOfSeriesModel(t)},a.prototype.getMainProcessVersion=function(){return e[Yj]},a}(ty))(e)},xw=function(e){function t(e,t){for(var a=0;a<e.length;a++){e[a][Qj]=t}}Bn(kw,function(a,r){e._messageCenter.on(r,function(a){if(zw[e.group]&&0!==e[Qj]){if(a&&a.escapeConnect)return;var r=e.makeActionFromEvent(a),i=[];Bn(Lw,function(t){t!==e&&t.group===e.group&&i.push(t)}),t(i,0),Bn(i,function(e){1!==e[Qj]&&e.dispatchAction(r)}),t(i,2)}})})}}(),t}(Bs),Nw=ww.prototype;Nw.on=Jj("on"),Nw.off=Jj("off"),Nw.one=function(e,t,a){var r=this;this.on.call(this,e,function a(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t&&t.apply&&t.apply(this,i),r.off(e,a)},a)};var Sw=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Cw={},kw={},Mw={},Tw=[],Dw=[],Iw=[],Aw={},Pw={},Lw={},zw={},Ew=+new Date-0,Rw="_echarts_instance_";function Ow(e,t,a){var r=!(a&&a.ssr);if(r){var i=function(e){return Lw[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,Rw)]}(e);if(i)return i}var n=new ww(e,t,a);return n.id="ec_"+Ew++,Lw[n.id]=n,r&&cu(e,Rw,n.id),xw(n),Vj.trigger("afterinit",n),n}function Fw(e,t){Aw[e]=t}function Bw(e){Rn(Dw,e)<0&&Dw.push(e)}function qw(e,t){Uw(Tw,e,t,2e3)}function Vw(e,t){Vj.on(e,t)}function Hw(e,t,a){var r,i,n,s,o;function l(e){return e.toLowerCase()}Yn(t)&&(a=t,t=""),Qn(e)?(r=e.type,i=e.event,s=e.update,o=e.publishNonRefinedEvent,a||(a=e.action),n=e.refineEvent):(r=e,i=t),i=l(i||r);var c=n?l(r):i;Cw[r]||(cs(Zj.test(r)&&Zj.test(i)),n&&cs(i!==r),Cw[r]={actionType:r,refinedEventType:i,nonRefinedEventType:c,update:s,action:a,refineEvent:n},Mw[i]=1,n&&o&&(Mw[c]=1),kw[c]=r)}function Ww(e,t){Uw(Iw,e,t,3e3,"visual")}var Gw=[];function Uw(e,t,a,r,i){if((Yn(t)||Qn(t))&&(a=t,t=r),!(Rn(Gw,a)>=0)){Gw.push(a);var n=k_.wrapStageHandler(a,i);n.__prio=t,n.__raw=a,e.push(n)}}function $w(e,t){Pw[e]=t}var Yw=function(e){var t=(e=Pn(e)).type;t||Vd("");var a=t.split(":");2!==a.length&&Vd("");var r=!1;"echarts"===a[0]&&(t=a[1],r=!0),e.__isBuiltIn=r,ub.set(t,e)};function Kw(e,t,a,r){return{eventContent:{selected:um(a),isFromClick:t.isFromClick||!1}}}function Xw(e){return null==e?0:e.length||1}function Zw(e){return e}Ww(Wj,j_),Ww(Gj,N_),Ww(Gj,S_),Ww(Wj,Z_),Ww(Gj,Q_),Ww(7e3,function(e,t){e.eachRawSeries(function(a){if(!e.isSeriesFiltered(a)){var r=a.getData();r.hasItemVisual()&&r.each(function(e){var a=r.getItemVisual(e,"decal");a&&(r.ensureUniqueItemVisual(e,"style").decal=Oj(a,t))});var i=r.getVisual("decal");if(i)r.getVisual("style").decal=Oj(i,t)}})}),Bw(Ny),qw(900,function(e){var t=xs();e.eachSeries(function(e){var a=e.get("stack");if(a){var r=t.get(a)||t.set(a,[]),i=e.getData(),n={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:e};if(!n.stackedDimension||!n.isStackedByIndex&&!n.stackedByDimension)return;r.push(n)}}),t.each(function(e){0!==e.length&&("seriesDesc"===(e[0].seriesModel.get("stackOrder")||"seriesAsc")&&e.reverse(),Bn(e,function(t,a){t.data.setCalculationInfo("stackedOnSeries",a>0?e[a-1].seriesModel:null)}),function(e){Bn(e,function(t,a){var r=[],i=[NaN,NaN],n=[t.stackResultDimension,t.stackedOverDimension],s=t.data,o=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";s.modify(n,function(n,c,d){var u,h,p=s.get(t.stackedDimension,d);if(isNaN(p))return i;o?h=s.getRawIndex(d):u=s.get(t.stackedByDimension,d);for(var m=NaN,f=a-1;f>=0;f--){var g=e[f];if(o||(h=g.data.rawIndexOf(g.stackedByDimension,u)),h>=0){var x=g.data.getByRawIndex(g.stackResultDimension,h);if("all"===l||"positive"===l&&x>0||"negative"===l&&x<0||"samesign"===l&&p>=0&&x>0||"samesign"===l&&p<=0&&x<0){p=Dd(p,x),m=x;break}}}return r[0]=p,r[1]=m,r})})}(e))})}),$w("default",function(e,t){En(t=t||{},{text:"loading",textColor:gv.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:gv.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var a=new gd,r=new dp({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});a.add(r);var i,n=new mp({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new dp({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return a.add(s),t.showSpinner&&((i=new yf({shape:{startAngle:-C_/2,endAngle:-C_/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*C_/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*C_/2}).delay(300).start("circularInOut"),a.add(i)),a.resize=function(){var a=n.getBoundingRect().width,o=t.showSpinner?t.spinnerRadius:0,l=(e.getWidth()-2*o-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:o),c=e.getHeight()/2;t.showSpinner&&i.setShape({cx:l,cy:c}),s.setShape({x:l-o,y:c-o,width:2*o,height:2*o}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},a.resize(),a}),Hw({type:Pp,event:Pp,update:Pp},_s),Hw({type:Lp,event:Lp,update:Lp},_s),Hw({type:zp,event:Op,update:zp,action:_s,refineEvent:Kw,publishNonRefinedEvent:!0}),Hw({type:Ep,event:Op,update:Ep,action:_s,refineEvent:Kw,publishNonRefinedEvent:!0}),Hw({type:Rp,event:Op,update:Rp,action:_s,refineEvent:Kw,publishNonRefinedEvent:!0}),Fw("default",{}),Fw("dark",$_);var Qw=function(){function e(e,t,a,r,i,n){this._old=e,this._new=t,this._oldKeyGetter=a||Zw,this._newKeyGetter=r||Zw,this.context=i,this._diffModeMultiple="multiple"===n}return e.prototype.add=function(e){return this._add=e,this},e.prototype.update=function(e){return this._update=e,this},e.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},e.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},e.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},e.prototype.remove=function(e){return this._remove=e,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var e=this._old,t=this._new,a={},r=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,a,i,"_newKeyGetter");for(var n=0;n<e.length;n++){var s=r[n],o=a[s],l=Xw(o);if(l>1){var c=o.shift();1===o.length&&(a[s]=o[0]),this._update&&this._update(c,n)}else 1===l?(a[s]=null,this._update&&this._update(o,n)):this._remove&&this._remove(n)}this._performRestAdd(i,a)},e.prototype._executeMultiple=function(){var e=this._old,t=this._new,a={},r={},i=[],n=[];this._initIndexMap(e,a,i,"_oldKeyGetter"),this._initIndexMap(t,r,n,"_newKeyGetter");for(var s=0;s<i.length;s++){var o=i[s],l=a[o],c=r[o],d=Xw(l),u=Xw(c);if(d>1&&1===u)this._updateManyToOne&&this._updateManyToOne(c,l),r[o]=null;else if(1===d&&u>1)this._updateOneToMany&&this._updateOneToMany(c,l),r[o]=null;else if(1===d&&1===u)this._update&&this._update(c,l),r[o]=null;else if(d>1&&u>1)this._updateManyToMany&&this._updateManyToMany(c,l),r[o]=null;else if(d>1)for(var h=0;h<d;h++)this._remove&&this._remove(l[h]);else this._remove&&this._remove(l)}this._performRestAdd(n,r)},e.prototype._performRestAdd=function(e,t){for(var a=0;a<e.length;a++){var r=e[a],i=t[r],n=Xw(i);if(n>1)for(var s=0;s<n;s++)this._add&&this._add(i[s]);else 1===n&&this._add&&this._add(i);t[r]=null}},e.prototype._initIndexMap=function(e,t,a,r){for(var i=this._diffModeMultiple,n=0;n<e.length;n++){var s="_ec_"+this[r](e[n],n);if(i||(a[n]=s),t){var o=t[s],l=Xw(o);0===l?(t[s]=n,i&&a.push(s)):1===l?t[s]=[o,n]:o.push(n)}}},e}(),Jw=function(){function e(e,t){this._encode=e,this._schema=t}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function eN(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}var tN=function(){return function(e){this.otherDims={},null!=e&&zn(this,e)}}(),aN=ru(),rN={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},iN=function(){function e(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=oN(this.source)))},e.prototype.getSourceDimensionIndex=function(e){return ns(this._dimNameMap.get(e),-1)},e.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},e.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Oy(this.source),a=!lN(e),r="",i=[],n=0,s=0;n<e;n++){var o=void 0,l=void 0,c=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===n)o=t?d.name:null,l=d.type,c=d.ordinalMeta,s++;else{var u=this.getSourceDimension(n);u&&(o=t?u.name:null,l=u.type)}i.push({property:o,type:l,ordinalMeta:c}),!t||null==o||d&&d.isCalculationCoord||(r+=a?o.replace(/\`/g,"`1").replace(/\$/g,"`2"):o),r+="$",r+=rN[l]||"f",c&&(r+=c.uid),r+="$"}var h=this.source;return{dimensions:i,hash:[h.seriesLayoutBy,h.startIndex,r].join("$$")}},e.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,a=0;t<this._fullDimCount;t++){var r=void 0,i=this.dimensions[a];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(r=i.name),a++;else{var n=this.getSourceDimension(t);n&&(r=n.name)}e.push(r)}return e},e.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function nN(e){return e instanceof iN}function sN(e){for(var t=xs(),a=0;a<(e||[]).length;a++){var r=e[a],i=Qn(r)?r.name:r;null!=i&&null==t.get(i)&&t.set(i,a)}return t}function oN(e){var t=aN(e);return t.dimNameMap||(t.dimNameMap=sN(e.dimensionsDefine))}function lN(e){return e>30}var cN,dN,uN,hN,pN,mN,fN,gN=Qn,xN=qn,vN="undefined"==typeof Int32Array?Array:Int32Array,yN=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],bN=["_approximateExtent"],_N=function(){function e(e,t){var a;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r=!1;nN(e)?(a=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,a=e),a=a||["x","y"];for(var i={},n=[],s={},o=!1,l={},c=0;c<a.length;c++){var d=a[c],u=Kn(d)?new tN({name:d}):d instanceof tN?d:new tN(d),h=u.name;u.type=u.type||"float",u.coordDim||(u.coordDim=h,u.coordDimIndex=0);var p=u.otherDims=u.otherDims||{};n.push(h),i[h]=u,null!=l[h]&&(o=!0),u.createInvertedIndices&&(s[h]=[]);var m=c;Zn(u.storeDimIndex)&&(m=u.storeDimIndex),0===p.itemName&&(this._nameDimIdx=m),0===p.itemId&&(this._idDimIdx=m),r&&(u.storeDimIndex=c)}if(this.dimensions=n,this._dimInfos=i,this._initGetDimensionInfo(o),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var f=this._dimIdxToName=xs();Bn(n,function(e){f.set(i[e].storeDimIndex,e)})}}return e.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(null==t)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var a=this._dimIdxToName.get(t);if(null!=a)return a;var r=this._schema.getSourceDimension(t);return r?r.name:void 0},e.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(null!=t)return t;if(null==e)return-1;var a=this._getDimInfo(e);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},e.prototype._recognizeDimIndex=function(e){if(Zn(e)||null!=e&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},e.prototype._getStoreDimIndex=function(e){return this.getDimensionIndex(e)},e.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},e.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(e){return t.hasOwnProperty(e)?t[e]:void 0}:function(e){return t[e]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(e,t){var a=this._dimSummary;if(null==t)return a.encodeFirstDimNotExtra[e];var r=a.encode[e];return r?r[t]:null},e.prototype.mapDimensionsAll=function(e){return(this._dimSummary.encode[e]||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(e,t,a){var r,i=this;if(e instanceof Sb&&(r=e),!r){var n=this.dimensions,s=Ay(e)||Fn(e)?new Fy(e,n.length):e;r=new Sb;var o=xN(n,function(e){return{type:i._dimInfos[e].type,property:e}});r.initData(s,o,a)}this._store=r,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,r.count()),this._dimSummary=function(e,t){var a={},r=a.encode={},i=xs(),n=[],s=[],o={};Bn(e.dimensions,function(t){var a,l=e.getDimensionInfo(t),c=l.coordDim;if(c){var d=l.coordDimIndex;eN(r,c)[d]=t,l.isExtraCoord||(i.set(c,1),"ordinal"!==(a=l.type)&&"time"!==a&&(n[0]=t),eN(o,c)[d]=e.getDimensionIndex(l.name)),l.defaultTooltip&&s.push(t)}Sv.each(function(e,t){var a=eN(r,t),i=l.otherDims[t];null!=i&&!1!==i&&(a[i]=l.name)})});var l=[],c={};i.each(function(e,t){var a=r[t];c[t]=a[0],l=l.concat(a)}),a.dataDimsOnCoord=l,a.dataDimIndicesOnCoord=qn(l,function(t){return e.getDimensionInfo(t).storeDimIndex}),a.encodeFirstDimNotExtra=c;var d=r.label;d&&d.length&&(n=d.slice());var u=r.tooltip;return u&&u.length?s=u.slice():s.length||(s=n.slice()),r.defaultedLabel=n,r.defaultedTooltip=s,a.userOutput=new Jw(o,t),a}(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},e.prototype.appendValues=function(e,t){var a=this._store.appendValues(e,t&&t.length),r=a.start,i=a.end,n=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=r;s<i;s++){var o=s-r;this._nameList[s]=t[o],n&&fN(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,a=0;a<t.length;a++){var r=this._dimInfos[t[a]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return null==this._idDimIdx&&e.getSource().sourceFormat!==Dv&&!e.fillStorage},e.prototype._doInit=function(e,t){if(!(e>=t)){var a=this._store.getProvider();this._updateOrdinalMeta();var r=this._nameList,i=this._idList;if(a.getSource().sourceFormat===Cv&&!a.pure)for(var n=[],s=e;s<t;s++){var o=a.getItem(s,n);if(!this.hasItemOption&&Kd(o)&&(this.hasItemOption=!0),o){var l=o.name;null==r[s]&&null!=l&&(r[s]=Jd(l,null));var c=o.id;null==i[s]&&null!=c&&(i[s]=Jd(c,null))}}if(this._shouldMakeIdFromName())for(s=e;s<t;s++)fN(this,s);cN(this)}},e.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},e.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},e.prototype.setCalculationInfo=function(e,t){gN(e)?zn(this._calculationInfo,e):this._calculationInfo[e]=t},e.prototype.getName=function(e){var t=this.getRawIndex(e),a=this._nameList[t];return null==a&&null!=this._nameDimIdx&&(a=uN(this,this._nameDimIdx,t)),null==a&&(a=""),a},e.prototype._getCategory=function(e,t){var a=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[a]:a},e.prototype.getId=function(e){return dN(this,this.getRawIndex(e))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(e,t){var a=this._store,r=this._dimInfos[e];if(r)return a.get(r.storeDimIndex,t)},e.prototype.getByRawIndex=function(e,t){var a=this._store,r=this._dimInfos[e];if(r)return a.getByRawIndex(r.storeDimIndex,t)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},e.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},e.prototype.getValues=function(e,t){var a=this,r=this._store;return $n(e)?r.getValues(xN(e,function(e){return a._getStoreDimIndex(e)}),t):r.getValues(e)},e.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,a=0,r=t.length;a<r;a++)if(isNaN(this._store.get(t[a],e)))return!1;return!0},e.prototype.indexOfName=function(e){for(var t=0,a=this._store.count();t<a;t++)if(this.getName(t)===e)return t;return-1},e.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},e.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},e.prototype.rawIndexOf=function(e,t){var a=e&&this._invertedIndicesMap[e],r=a&&a[t];return null==r||isNaN(r)?-1:r},e.prototype.each=function(e,t,a){Yn(e)&&(a=t,t=e,e=[]);var r=a||this,i=xN(hN(e),this._getStoreDimIndex,this);this._store.each(i,r?Gn(t,r):t)},e.prototype.filterSelf=function(e,t,a){Yn(e)&&(a=t,t=e,e=[]);var r=a||this,i=xN(hN(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,r?Gn(t,r):t),this},e.prototype.selectRange=function(e){var t=this,a={};return Bn(Wn(e),function(r){var i=t._getStoreDimIndex(r);a[i]=e[r]}),this._store=this._store.selectRange(a),this},e.prototype.mapArray=function(e,t,a){Yn(e)&&(a=t,t=e,e=[]),a=a||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},a),r},e.prototype.map=function(e,t,a,r){var i=a||r||this,n=xN(hN(e),this._getStoreDimIndex,this),s=mN(this);return s._store=this._store.map(n,i?Gn(t,i):t),s},e.prototype.modify=function(e,t,a,r){var i=a||r||this,n=xN(hN(e),this._getStoreDimIndex,this);this._store.modify(n,i?Gn(t,i):t)},e.prototype.downSample=function(e,t,a,r){var i=mN(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,a,r),i},e.prototype.minmaxDownSample=function(e,t){var a=mN(this);return a._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),a},e.prototype.lttbDownSample=function(e,t){var a=mN(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),a},e.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},e.prototype.getItemModel=function(e){var t=this.hostModel,a=this.getRawDataItem(e);return new Ug(a,t,t&&t.ecModel)},e.prototype.diff=function(e){var t=this;return new Qw(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(t){return dN(e,t)},function(e){return dN(t,e)})},e.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},e.prototype.setVisual=function(e,t){this._visual=this._visual||{},gN(e)?zn(this._visual,e):this._visual[e]=t},e.prototype.getItemVisual=function(e,t){var a=this._itemVisuals[e],r=a&&a[t];return null==r?this.getVisual(t):r},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(e,t){var a=this._itemVisuals,r=a[e];r||(r=a[e]={});var i=r[t];return null==i&&($n(i=this.getVisual(t))?i=i.slice():gN(i)&&(i=zn({},i)),r[t]=i),i},e.prototype.setItemVisual=function(e,t,a){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,gN(t)?zn(r,t):r[t]=a},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(e,t){gN(e)?zn(this._layout,e):this._layout[e]=t},e.prototype.getLayout=function(e){return this._layout[e]},e.prototype.getItemLayout=function(e){return this._itemLayouts[e]},e.prototype.setItemLayout=function(e,t,a){this._itemLayouts[e]=a?zn(this._itemLayouts[e]||{},t):t},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(e,t){!function(e,t,a,r){if(r){var i=Cp(r);i.dataIndex=a,i.dataType=t,i.seriesIndex=e,i.ssrType="chart","group"===r.type&&r.traverse(function(r){var i=Cp(r);i.seriesIndex=e,i.dataIndex=a,i.dataType=t,i.ssrType="chart"})}}(this.hostModel&&this.hostModel.seriesIndex,this.dataType,e,t),this._graphicEls[e]=t},e.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},e.prototype.eachItemGraphicEl=function(e,t){Bn(this._graphicEls,function(a,r){a&&e&&e.call(t,a,r)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:xN(this.dimensions,this._getDimInfo,this),this.hostModel)),pN(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(e,t){var a=this[e];Yn(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=a.apply(this,arguments);return t.apply(this,[e].concat(os(arguments)))})},e.internalField=(cN=function(e){var t=e._invertedIndicesMap;Bn(t,function(a,r){var i=e._dimInfos[r],n=i.ordinalMeta,s=e._store;if(n){a=t[r]=new vN(n.categories.length);for(var o=0;o<a.length;o++)a[o]=-1;for(o=0;o<s.count();o++)a[s.get(i.storeDimIndex,o)]=o}})},uN=function(e,t,a){return Jd(e._getCategory(t,a),null)},dN=function(e,t){var a=e._idList[t];return null==a&&null!=e._idDimIdx&&(a=uN(e,e._idDimIdx,t)),null==a&&(a="e\0\0"+t),a},hN=function(e){return $n(e)||(e=null!=e?[e]:[]),e},mN=function(t){var a=new e(t._schema?t._schema:xN(t.dimensions,t._getDimInfo,t),t.hostModel);return pN(a,t),a},pN=function(e,t){Bn(yN.concat(t.__wrappedMethods||[]),function(a){t.hasOwnProperty(a)&&(e[a]=t[a])}),e.__wrappedMethods=t.__wrappedMethods,Bn(bN,function(a){e[a]=Pn(t[a])}),e._calculationInfo=zn({},t._calculationInfo)},void(fN=function(e,t){var a=e._nameList,r=e._idList,i=e._nameDimIdx,n=e._idDimIdx,s=a[t],o=r[t];if(null==s&&null!=i&&(a[t]=s=uN(e,i,t)),null==o&&null!=n&&(r[t]=o=uN(e,n,t)),null==o&&null!=s){var l=e._nameRepeatCount,c=l[s]=(l[s]||0)+1;o=s,c>1&&(o+="__ec__"+c),r[t]=o}})),e}();function jN(e,t){Ay(e)||(e=Ly(e));var a=(t=t||{}).coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],i=xs(),n=[],s=function(e,t,a,r){var i=Math.max(e.dimensionsDetectedCount||1,t.length,a.length,r||0);return Bn(t,function(e){var t;Qn(e)&&(t=e.dimsDef)&&(i=Math.max(i,t.length))}),i}(e,a,r,t.dimensionsCount),o=t.canOmitUnusedDimensions&&lN(s),l=r===e.dimensionsDefine,c=l?oN(e):sN(r),d=t.encodeDefine;!d&&t.encodeDefaulter&&(d=t.encodeDefaulter(e,s));for(var u=xs(d),h=new vb(s),p=0;p<h.length;p++)h[p]=-1;function m(e){var t=h[e];if(t<0){var a=r[e],i=Qn(a)?a:{name:a},s=new tN,o=i.name;null!=o&&null!=c.get(o)&&(s.name=s.displayName=o),null!=i.type&&(s.type=i.type),null!=i.displayName&&(s.displayName=i.displayName);var l=n.length;return h[e]=l,s.storeDimIndex=e,n.push(s),s}return n[t]}if(!o)for(p=0;p<s;p++)m(p);u.each(function(e,t){var a=Gd(e).slice();if(1===a.length&&!Kn(a[0])&&a[0]<0)u.set(t,!1);else{var r=u.set(t,[]);Bn(a,function(e,a){var i=Kn(e)?c.get(e):e;null!=i&&i<s&&(r[a]=i,g(m(i),t,a))})}});var f=0;function g(e,t,a){null!=Sv.get(t)?e.otherDims[t]=a:(e.coordDim=t,e.coordDimIndex=a,i.set(t,!0))}Bn(a,function(e){var t,a,r,i;if(Kn(e))t=e,i={};else{t=(i=e).name;var n=i.ordinalMeta;i.ordinalMeta=null,(i=zn({},i)).ordinalMeta=n,a=i.dimsDef,r=i.otherDims,i.name=i.coordDim=i.coordDimIndex=i.dimsDef=i.otherDims=null}var o=u.get(t);if(!1!==o){if(!(o=Gd(o)).length)for(var c=0;c<(a&&a.length||1);c++){for(;f<s&&null!=m(f).coordDim;)f++;f<s&&o.push(f++)}Bn(o,function(e,n){var s=m(e);if(l&&null!=i.type&&(s.type=i.type),g(En(s,i),t,n),null==s.name&&a){var o=a[n];!Qn(o)&&(o={name:o}),s.name=s.displayName=o.name,s.defaultTooltip=o.defaultTooltip}r&&En(s.otherDims,r)})}});var x=t.generateCoord,v=t.generateCoordCount,y=null!=v;v=x?v||1:0;var b=x||"value";function _(e){null==e.name&&(e.name=e.coordDim)}if(o)Bn(n,function(e){_(e)}),n.sort(function(e,t){return e.storeDimIndex-t.storeDimIndex});else for(var j=0;j<s;j++){var w=m(j);null==w.coordDim&&(w.coordDim=wN(b,i,y),w.coordDimIndex=0,(!x||v<=0)&&(w.isExtraCoord=!0),v--),_(w),null!=w.type||qv(e,j)!==Lv&&(!w.isExtraCoord||null==w.otherDims.itemName&&null==w.otherDims.seriesName)||(w.type="ordinal")}return function(e){for(var t=xs(),a=0;a<e.length;a++){var r=e[a],i=r.name,n=t.get(i)||0;n>0&&(r.name=i+(n-1)),n++,t.set(i,n)}}(n),new iN({source:e,dimensions:n,fullDimensionCount:s,dimensionOmitted:o})}function wN(e,t,a){if(a||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}var NN=function(){return function(e){this.coordSysDims=[],this.axisMap=xs(),this.categoryAxisMap=xs(),this.coordSysName=e}}();var SN={cartesian2d:function(e,t,a,r){var i=e.getReferringComponents("xAxis",ou).models[0],n=e.getReferringComponents("yAxis",ou).models[0];t.coordSysDims=["x","y"],a.set("x",i),a.set("y",n),CN(i)&&(r.set("x",i),t.firstCategoryDimIndex=0),CN(n)&&(r.set("y",n),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,a,r){var i=e.getReferringComponents("singleAxis",ou).models[0];t.coordSysDims=["single"],a.set("single",i),CN(i)&&(r.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,a,r){var i=e.getReferringComponents("polar",ou).models[0],n=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],a.set("radius",n),a.set("angle",s),CN(n)&&(r.set("radius",n),t.firstCategoryDimIndex=0),CN(s)&&(r.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,a,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,a,r){var i=e.ecModel,n=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=n.dimensions.slice();Bn(n.parallelAxisIndex,function(e,n){var o=i.getComponent("parallelAxis",e),l=s[n];a.set(l,o),CN(o)&&(r.set(l,o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=n))})},matrix:function(e,t,a,r){var i=e.getReferringComponents("matrix",ou).models[0];t.coordSysDims=["x","y"];var n=i.getDimensionModel("x"),s=i.getDimensionModel("y");a.set("x",n),a.set("y",s),r.set("x",n),r.set("y",s)}};function CN(e){return"category"===e.get("type")}function kN(e,t,a){var r,i,n,s=(a=a||{}).byIndex,o=a.stackedCoordDimension;!function(e){return!nN(e.schema)}(t)?(i=t.schema,r=i.dimensions,n=t.store):r=t;var l,c,d,u,h=!(!e||!e.get("stack"));if(Bn(r,function(e,t){Kn(e)&&(r[t]=e={name:e}),h&&!e.isExtraCoord&&(s||l||!e.ordinalMeta||(l=e),c||"ordinal"===e.type||"time"===e.type||o&&o!==e.coordDim||(c=e))}),!c||s||l||(s=!0),c){d="__\0ecstackresult_"+e.id,u="__\0ecstackedover_"+e.id,l&&(l.createInvertedIndices=!0);var p=c.coordDim,m=c.type,f=0;Bn(r,function(e){e.coordDim===p&&f++});var g={name:d,coordDim:p,coordDimIndex:f,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},x={name:u,coordDim:u,coordDimIndex:f+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};i?(n&&(g.storeDimIndex=n.ensureCalculationDimension(u,m),x.storeDimIndex=n.ensureCalculationDimension(d,m)),i.appendCalculationDimension(g),i.appendCalculationDimension(x)):(r.push(g),r.push(x))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:s,stackedOverDimension:u,stackResultDimension:d}}function MN(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function TN(e,t,a){a=a||{};var r,i,n=t.getSourceManager();i=(r=n.getSource()).sourceFormat===Cv;var s=function(e){var t=e.get("coordinateSystem"),a=new NN(t),r=SN[t];if(r)return r(e,a,a.axisMap,a.categoryAxisMap),a}(t),o=function(e,t){var a,r=e.get("coordinateSystem"),i=Yx.get(r);return t&&t.coordSysDims&&(a=qn(t.coordSysDims,function(e){var a={name:e},r=t.axisMap.get(e);if(r){var i=r.get("type");a.type=function(e){return"category"===e?"ordinal":"time"===e?"time":"float"}(i)}return a})),a||(a=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),a}(t,s),l=a.useEncodeDefaulter,c=Yn(l)?l:l?Un(Ov,o,t):null,d=jN(r,{coordDimensions:o,generateCoord:a.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!i}),u=function(e,t,a){var r,i;return a&&Bn(e,function(e,n){var s=e.coordDim,o=a.categoryAxisMap.get(s);o&&(null==r&&(r=n),e.ordinalMeta=o.getOrdinalMeta(),t&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(i=!0)}),i||null==r||(e[r].otherDims.itemName=0),r}(d.dimensions,a.createInvertedIndices,s),h=i?null:n.getSharedDataStore(d),p=kN(t,{schema:d,store:h}),m=new _N(d,t);m.setCalculationInfo(p);var f=null!=u&&function(e){if(e.sourceFormat===Cv){return!$n(Yd(function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[])))}}(r)?function(e,t,a,r){return r===u?a:this.defaultDimValueGetter(e,t,a,r)}:null;return m.hasItemOption=!1,m.initData(i?r:h,null,f),m}function DN(e){return"interval"===e.type||"log"===e.type}function IN(e,t,a,r,i){var n={},s=n.interval=Ed(t/a);null!=r&&s<r&&(s=n.interval=r),null!=i&&s>i&&(s=n.interval=i);var o=n.intervalPrecision=PN(s);return function(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),LN(e,0,t),LN(e,1,t),e[0]>e[1]&&(e[0]=e[1])}(n.niceTickExtent=[Md(Math.ceil(e[0]/s)*s,o),Md(Math.floor(e[1]/s)*s,o)],e),n}function AN(e){var t=Math.pow(10,zd(e)),a=e/t;return a?2===a?a=3:3===a?a=5:a*=2:a=1,Md(a*t)}function PN(e){return Td(e)+2}function LN(e,t,a){e[t]=Math.max(Math.min(e[t],a[1]),a[0])}function zN(e,t){return e>=t[0]&&e<=t[1]}var EN=function(){function e(){this.normalize=RN,this.scale=ON}return e.prototype.updateMethods=function(e){e.hasBreaks()?(this.normalize=Gn(e.normalize,e),this.scale=Gn(e.scale,e)):(this.normalize=RN,this.scale=ON)},e}();function RN(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function ON(e,t){return e*(t[1]-t[0])+t[0]}function FN(e,t,a){var r=Math.log(e);return[Math.log(a?t[0]:Math.max(0,t[0]))/r,Math.log(a?t[1]:Math.max(0,t[1]))/r]}var BN=function(){function e(e){this._calculator=new EN,this._setting=e||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(e){return this._setting[e]},e.prototype._innerUnionExtent=function(e){var t=this._extent;this._innerSetExtent(e[0]<t[0]?e[0]:t[0],e[1]>t[1]?e[1]:t[1])},e.prototype.unionExtentFromData=function(e,t){this._innerUnionExtent(e.getApproximateExtent(t))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(e,t){this._innerSetExtent(e,t)},e.prototype._innerSetExtent=function(e,t){var a=this._extent;isNaN(e)||(a[0]=e),isNaN(t)||(a[1]=t),this._brkCtx&&this._brkCtx.update(a)},e.prototype.setBreaksFromOption=function(e){},e.prototype._innerSetBreak=function(e){this._brkCtx&&(this._brkCtx.setBreaks(e),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},e.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},e.prototype.hasBreaks=function(){return!!this._brkCtx&&this._brkCtx.hasBreaks()},e.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},e.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(e){this._isBlank=e},e}();vu(BN);var qN=0,VN=function(){function e(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++qN,this._onCollect=e.onCollect}return e.createByAxisModel=function(t){var a=t.option,r=a.data,i=r&&qn(r,HN);return new e({categories:i,needCollect:!i,deduplication:!1!==a.dedplication})},e.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},e.prototype.parseAndCollect=function(e){var t,a=this._needCollect;if(!Kn(e)&&!a)return e;if(a&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,this._onCollect&&this._onCollect(e,t),t;var r=this._getOrCreateMap();return null==(t=r.get(e))&&(a?(t=this.categories.length,this.categories[t]=e,r.set(e,t),this._onCollect&&this._onCollect(e,t)):t=NaN),t},e.prototype._getOrCreateMap=function(){return this._map||(this._map=xs(this.categories))},e}();function HN(e){return Qn(e)&&null!=e.value?e.value:e+""}var WN=function(e){function t(t){var a=e.call(this,t)||this;a.type="ordinal";var r=a.getSetting("ordinalMeta");return r||(r=new VN({})),$n(r)&&(r=new VN({categories:qn(r,function(e){return Qn(e)?e.value:e})})),a._ordinalMeta=r,a._extent=a.getSetting("extent")||[0,r.categories.length-1],a}return pn(t,e),t.prototype.parse=function(e){return null==e?NaN:Kn(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return zN(e,this._extent)&&e>=0&&e<this._ordinalMeta.categories.length},t.prototype.normalize=function(e){return e=this._getTickNumber(e),this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(this._calculator.scale(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],t=this._extent,a=t[0];a<=t[1];)e.push({value:a}),a++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var t=e.ordinalNumbers,a=this._ordinalNumbersByTick=[],r=this._ticksByOrdinalNumber=[],i=0,n=this._ordinalMeta.categories.length,s=Math.min(n,t.length);i<s;++i){var o=t[i];a[i]=o,r[o]=i}for(var l=0;i<n;++i){for(;null!=r[l];)l++;a.push(l),r[l]=i}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var t=this._ticksByOrdinalNumber;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getRawOrdinalNumber=function(e){var t=this._ordinalNumbersByTick;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var t=this.getRawOrdinalNumber(e.value),a=this._ordinalMeta.categories[t];return null==a?"":a+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(BN);BN.registerClass(WN);var GN=Md,UN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return pn(t,e),t.prototype.parse=function(e){return null==e||""===e?NaN:Number(e)},t.prototype.contain=function(e){return zN(e,this._extent)},t.prototype.normalize=function(e){return this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return this._calculator.scale(e,this._extent)},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=PN(e)},t.prototype.getTicks=function(e){e=e||{};var t=this._interval,a=this._extent,r=this._niceExtent,i=this._intervalPrecision,n=[];if(!t)return n;e.breakTicks;a[0]<r[0]&&(e.expandToNicedExtent?n.push({value:GN(r[0]-t,i)}):n.push({value:a[0]}));for(var s=function(e,a){return Math.round((a-e)/t)},o=r[0];o<=r[1];){if(n.push({value:o}),o=GN(o+t,i),this._brkCtx){var l=this._brkCtx.calcNiceTickMultiple(o,s);l>=0&&(o=GN(o+l*t,i))}if(n.length>0&&o===n[n.length-1].value)break;if(n.length>1e4)return[]}var c=n.length?n[n.length-1].value:r[1];return a[1]>c&&(e.expandToNicedExtent?n.push({value:GN(c+t,i)}):n.push({value:a[1]})),e.breakTicks,n},t.prototype.getMinorTicks=function(e){for(var t=this.getTicks({expandToNicedExtent:!0}),a=[],r=this.getExtent(),i=1;i<t.length;i++){var n=t[i],s=t[i-1];if(!s.break&&!n.break){for(var o=0,l=[],c=(n.value-s.value)/e,d=PN(c);o<e-1;){var u=GN(s.value+(o+1)*c,d);u>r[0]&&u<r[1]&&l.push(u),o++}var h=rx();h&&h.pruneTicksByBreak("auto",l,this._getNonTransBreaks(),function(e){return e},this._interval,r),a.push(l)}}return a},t.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},t.prototype.getLabel=function(e,t){if(null==e)return"";var a=t&&t.precision;return null==a?a=Td(e.value)||0:"auto"===a&&(a=this._intervalPrecision),Rx(GN(e.value,a,!0))},t.prototype.calcNiceTicks=function(e,t,a){e=e||5;var r=this._extent.slice(),i=this._getExtentSpanWithBreaks();if(isFinite(i)){i<0&&(i=-i,r.reverse(),this._innerSetExtent(r[0],r[1]),r=this._extent.slice());var n=IN(r,i,e,t,a);this._intervalPrecision=n.intervalPrecision,this._interval=n.interval,this._niceExtent=n.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var t=this._extent.slice();if(t[0]===t[1])if(0!==t[0]){var a=Math.abs(t[0]);e.fixMax||(t[1]+=a/2),t[0]-=a/2}else t[1]=1;var r=t[1]-t[0];isFinite(r)||(t[0]=0,t[1]=1),this._innerSetExtent(t[0],t[1]),t=this._extent.slice(),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval,n=this._intervalPrecision;e.fixMin||(t[0]=GN(Math.floor(t[0]/i)*i,n)),e.fixMax||(t[1]=GN(Math.ceil(t[1]/i)*i,n)),this._innerSetExtent(t[0],t[1])},t.prototype.setNiceExtent=function(e,t){this._niceExtent=[e,t]},t.type="interval",t}(BN);BN.registerClass(UN);var $N="undefined"!=typeof Float32Array,YN=$N?Float32Array:Array;function KN(e){return $n(e)?$N?new Float32Array(e):e:new YN(e)}function XN(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function ZN(e){return e.dim+e.index}function QN(e,t){var a=[];return t.eachSeriesByType(e,function(e){tS(e)&&a.push(e)}),a}function JN(e){var t=function(e){var t={};Bn(e,function(e){var a=e.coordinateSystem.getBaseAxis();if("time"===a.type||"value"===a.type)for(var r=e.getData(),i=a.dim+"_"+a.index,n=r.getDimensionIndex(r.mapDimension(a.dim)),s=r.getStore(),o=0,l=s.count();o<l;++o){var c=s.get(n,o);t[i]?t[i].push(c):t[i]=[c]}});var a={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(i){i.sort(function(e,t){return e-t});for(var n=null,s=1;s<i.length;++s){var o=i[s]-i[s-1];o>0&&(n=null===n?o:Math.min(n,o))}a[r]=n}}return a}(e),a=[];return Bn(e,function(e){var r,i=e.coordinateSystem.getBaseAxis(),n=i.getExtent();if("category"===i.type)r=i.getBandWidth();else if("value"===i.type||"time"===i.type){var s=i.dim+"_"+i.index,o=t[s],l=Math.abs(n[1]-n[0]),c=i.scale.getExtent(),d=Math.abs(c[1]-c[0]);r=o?l/d*o:l}else{var u=e.getData();r=Math.abs(n[1]-n[0])/u.count()}var h=Cd(e.get("barWidth"),r),p=Cd(e.get("barMaxWidth"),r),m=Cd(e.get("barMinWidth")||(aS(e)?.5:1),r),f=e.get("barGap"),g=e.get("barCategoryGap"),x=e.get("defaultBarGap");a.push({bandWidth:r,barWidth:h,barMaxWidth:p,barMinWidth:m,barGap:f,barCategoryGap:g,defaultBarGap:x,axisKey:ZN(i),stackId:XN(e)})}),function(e){var t={};Bn(e,function(e,a){var r=e.axisKey,i=e.bandWidth,n=t[r]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:null,gap:e.defaultBarGap||0,stacks:{}},s=n.stacks;t[r]=n;var o=e.stackId;s[o]||n.autoWidthCount++,s[o]=s[o]||{width:0,maxWidth:0};var l=e.barWidth;l&&!s[o].width&&(s[o].width=l,l=Math.min(n.remainedWidth,l),n.remainedWidth-=l);var c=e.barMaxWidth;c&&(s[o].maxWidth=c);var d=e.barMinWidth;d&&(s[o].minWidth=d);var u=e.barGap;null!=u&&(n.gap=u);var h=e.barCategoryGap;null!=h&&(n.categoryGap=h)});var a={};return Bn(t,function(e,t){a[t]={};var r=e.stacks,i=e.bandWidth,n=e.categoryGap;if(null==n){var s=Wn(r).length;n=Math.max(35-4*s,15)+"%"}var o=Cd(n,i),l=Cd(e.gap,1),c=e.remainedWidth,d=e.autoWidthCount,u=(c-o)/(d+(d-1)*l);u=Math.max(u,0),Bn(r,function(e){var t=e.maxWidth,a=e.minWidth;if(e.width){r=e.width;t&&(r=Math.min(r,t)),a&&(r=Math.max(r,a)),e.width=r,c-=r+l*r,d--}else{var r=u;t&&t<r&&(r=Math.min(t,c)),a&&a>r&&(r=a),r!==u&&(e.width=r,c-=r+l*r,d--)}}),u=(c-o)/(d+(d-1)*l),u=Math.max(u,0);var h,p=0;Bn(r,function(e,t){e.width||(e.width=u),h=e,p+=e.width*(1+l)}),h&&(p-=h.width*l);var m=-p/2;Bn(r,function(e,r){a[t][r]=a[t][r]||{bandWidth:i,offset:m,width:e.width},m+=e.width*(1+l)})}),a}(a)}function eS(e,t){var a=QN(e,t),r=JN(a);Bn(a,function(e){var t=e.getData(),a=e.coordinateSystem.getBaseAxis(),i=XN(e),n=r[ZN(a)][i],s=n.offset,o=n.width;t.setLayout({bandWidth:n.bandWidth,offset:s,size:o})})}function tS(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function aS(e){return e.pipelineContext&&e.pipelineContext.large}var rS=function(e){function t(t){var a=e.call(this,t)||this;return a.type="time",a}return pn(t,e),t.prototype.getLabel=function(e){var t=this.getSetting("useUTC");return yx(e.value,hx[function(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(xx(this._minLevelUnit))]||hx.second,t,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,t,a){var r=this.getSetting("useUTC");return function(e,t,a,r,i){var n=null;if(Kn(a))n=a;else if(Yn(a)){var s={time:e.time,level:e.time.level},o=null;o&&o.makeAxisLabelFormatterParamBreak(s,e.break),n=a(e.value,t,s)}else{var l=e.time;if(l){var c=a[l.lowerTimeUnit][l.upperTimeUnit];n=c[Math.min(l.level,c.length-1)]||""}else{var d=bx(e.value,i);n=a[d][d][0]}}return yx(new Date(e.value),n,i,r)}(e,t,a,this.getSetting("locale"),r)},t.prototype.getTicks=function(e){var t=this._interval,a=this._extent,r=[];if(!t)return r;var i=this.getSetting("useUTC"),n=bx(a[1],i);r.push({value:a[0],time:{level:0,upperTimeUnit:n,lowerTimeUnit:n}});var s=function(e,t,a,r,i,n){var s=1e4,o=mx,l=0;function c(e,t,a,i,o,c,d){for(var u=function(e,t){var a=new Date(0);a[e](1);var r=a.getTime();a[e](1+t);var i=a.getTime()-r;return function(e,t){return Math.max(0,Math.round((t-e)/i))}}(o,e),h=t,p=new Date(h);h<a&&h<=r[1]&&(d.push({value:h}),!(l++>s));)if(p[o](p[i]()+e),h=p.getTime(),n){var m=n.calcNiceTickMultiple(h,u);m>0&&(p[o](p[i]()+m*e),h=p.getTime())}d.push({value:h,notAdd:!0})}function d(e,i,n){var s=[],o=!i.length;if(!function(e,t,a,r){return _x(new Date(t),e,r).getTime()===_x(new Date(a),e,r).getTime()}(xx(e),r[0],r[1],a)){o&&(i=[{value:dS(r[0],e,a)},{value:r[1]}]);for(var l=0;l<i.length-1;l++){var d=i[l].value,u=i[l+1].value;if(d!==u){var h=void 0,p=void 0,m=void 0,f=!1;switch(e){case"year":h=Math.max(1,Math.round(t/ox/365)),p=jx(a),m=Dx(a);break;case"half-year":case"quarter":case"month":h=sS(t),p=Nx(a),m=Ix(a);break;case"week":case"half-week":case"day":h=nS(t),p=Sx(a),m=Ax(a),f=!0;break;case"half-day":case"quarter-day":case"hour":h=oS(t),p=Cx(a),m=Px(a);break;case"minute":h=lS(t,!0),p=kx(a),m=Lx(a);break;case"second":h=lS(t,!1),p=Mx(a),m=zx(a);break;case"millisecond":h=cS(t),p=Tx(a),m=Ex(a)}u>=r[0]&&d<=r[1]&&c(h,d,u,p,m,f,s),"year"===e&&n.length>1&&0===l&&n.unshift({value:n[0].value-h})}}for(l=0;l<s.length;l++)n.push(s[l])}}for(var u=[],h=[],p=0,m=0,f=0;f<o.length;++f){var g=xx(o[f]);if(vx(o[f]))if(d(o[f],u[u.length-1]||[],h),g!==(o[f+1]?xx(o[f+1]):null)){if(h.length){m=p,h.sort(function(e,t){return e.value-t.value});for(var x=[],v=0;v<h.length;++v){var y=h[v].value;0!==v&&h[v-1].value===y||(x.push(h[v]),y>=r[0]&&y<=r[1]&&p++)}var b=i/t;if(p>1.5*b&&m>b/1.5)break;if(u.push(x),p>b||e===o[f])break}h=[]}}var _=Hn(qn(u,function(e){return Hn(e,function(e){return e.value>=r[0]&&e.value<=r[1]&&!e.notAdd})}),function(e){return e.length>0}),j=[],w=_.length-1;for(f=0;f<_.length;++f)for(var N=_[f],S=0;S<N.length;++S){var C=bx(N[S].value,a);j.push({value:N[S].value,time:{level:w-f,upperTimeUnit:C,lowerTimeUnit:C}})}j.sort(function(e,t){return e.value-t.value});var k=[];for(f=0;f<j.length;++f)0!==f&&j[f].value===j[f-1].value||k.push(j[f]);return k}(this._minLevelUnit,this._approxInterval,i,a,this._getExtentSpanWithBreaks(),this._brkCtx);r=r.concat(s);var o=bx(a[1],i);r.push({value:a[1],time:{level:0,upperTimeUnit:o,lowerTimeUnit:o}}),this.getSetting("useUTC");var l=px.length-1,c=0;return Bn(r,function(e){l=Math.min(l,Rn(px,e.time.upperTimeUnit)),c=Math.max(c,e.time.level)}),r},t.prototype.calcNiceExtent=function(e){var t=this.getExtent();if(t[0]===t[1]&&(t[0]-=ox,t[1]+=ox),t[1]===-1/0&&t[0]===1/0){var a=new Date;t[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),t[0]=t[1]-ox}this._innerSetExtent(t[0],t[1]),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,t,a){e=e||10;var r=this._getExtentSpanWithBreaks();this._approxInterval=r/e,null!=t&&this._approxInterval<t&&(this._approxInterval=t),null!=a&&this._approxInterval>a&&(this._approxInterval=a);var i=iS.length,n=Math.min(function(e,t,a,r){for(;a<r;){var i=a+r>>>1;e[i][1]<t?a=i+1:r=i}return a}(iS,this._approxInterval,0,i),i-1);this._interval=iS[n][1],this._intervalPrecision=PN(this._interval),this._minLevelUnit=iS[Math.max(n-1,0)][0]},t.prototype.parse=function(e){return Zn(e)?e:+Ld(e)},t.prototype.contain=function(e){return zN(e,this._extent)},t.prototype.normalize=function(e){return this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return this._calculator.scale(e,this._extent)},t.type="time",t}(UN),iS=[["second",ix],["minute",nx],["hour",sx],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",lx/2],["year",lx]];function nS(e,t){return(e/=ox)>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function sS(e){return(e/=2592e6)>6?6:e>3?3:e>2?2:1}function oS(e){return(e/=sx)>12?12:e>6?6:e>3.5?4:e>2?2:1}function lS(e,t){return(e/=t?nx:ix)>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function cS(e){return Ed(e)}function dS(e,t,a){var r=Math.max(0,Rn(px,t)-1);return _x(new Date(e),px[r],a).getTime()}BN.registerClass(rS);var uS=Md,hS=Math.floor,pS=Math.ceil,mS=Math.pow,fS=Math.log,gS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new UN,t}return pn(t,e),t.prototype.getTicks=function(t){t=t||{};var a=this._extent.slice(),r=this._originalScale.getExtent(),i=e.prototype.getTicks.call(this,t),n=this.base;return this._originalScale._innerGetBreaks(),qn(i,function(e){var t=e.value,i=null,s=mS(n,t);return t===a[0]&&this._fixMin?i=r[0]:t===a[1]&&this._fixMax&&(i=r[1]),null!=i&&(s=xS(s,i)),{value:s,break:undefined}},this)},t.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},t.prototype.setExtent=function(t,a){this._originalScale.setExtent(t,a);var r=FN(this.base,[t,a]);e.prototype.setExtent.call(this,r[0],r[1])},t.prototype.getExtent=function(){var t=this.base,a=e.prototype.getExtent.call(this);a[0]=mS(t,a[0]),a[1]=mS(t,a[1]);var r=this._originalScale.getExtent();return this._fixMin&&(a[0]=xS(a[0],r[0])),this._fixMax&&(a[1]=xS(a[1],r[1])),a},t.prototype.unionExtentFromData=function(e,t){this._originalScale.unionExtentFromData(e,t);var a=FN(this.base,e.getApproximateExtent(t),!0);this._innerUnionExtent(a)},t.prototype.calcNiceTicks=function(e){e=e||10;var t=this._extent.slice(),a=this._getExtentSpanWithBreaks();if(isFinite(a)&&!(a<=0)){var r,i=(r=a,Math.pow(10,zd(r)));for(e/a*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var n=[uS(pS(t[0]/i)*i),uS(hS(t[1]/i)*i)];this._interval=i,this._intervalPrecision=PN(i),this._niceExtent=n}},t.prototype.calcNiceExtent=function(t){e.prototype.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},t.prototype.contain=function(t){return t=fS(t)/fS(this.base),e.prototype.contain.call(this,t)},t.prototype.normalize=function(t){return t=fS(t)/fS(this.base),e.prototype.normalize.call(this,t)},t.prototype.scale=function(t){return t=e.prototype.scale.call(this,t),mS(this.base,t)},t.prototype.setBreaksFromOption=function(e){},t.type="log",t}(UN);function xS(e,t){return uS(e,Td(t))}BN.registerClass(gS);var vS=function(){function e(e,t,a){this._prepareParams(e,t,a)}return e.prototype._prepareParams=function(e,t,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var r=this._isOrdinal="ordinal"===e.type;this._needCrossZero="interval"===e.type&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);null==i&&(i=t.get("startValue",!0));var n=this._modelMinRaw=i;Yn(n)?this._modelMinNum=_S(e,n({min:a[0],max:a[1]})):"dataMin"!==n&&(this._modelMinNum=_S(e,n));var s=this._modelMaxRaw=t.get("max",!0);if(Yn(s)?this._modelMaxNum=_S(e,s({min:a[0],max:a[1]})):"dataMax"!==s&&(this._modelMaxNum=_S(e,s)),r)this._axisDataLen=t.getCategories().length;else{var o=t.get("boundaryGap"),l=$n(o)?o:[o||0,o||0];"boolean"==typeof l[0]||"boolean"==typeof l[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[rd(l[0],1),rd(l[1],1)]}},e.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,a=this._dataMax,r=this._axisDataLen,i=this._boundaryGapInner,n=e?null:a-t||Math.abs(t),s="dataMin"===this._modelMinRaw?t:this._modelMinNum,o="dataMax"===this._modelMaxRaw?a:this._modelMaxNum,l=null!=s,c=null!=o;null==s&&(s=e?r?0:NaN:t-i[0]*n),null==o&&(o=e?r?r-1:NaN:a+i[1]*n),(null==s||!isFinite(s))&&(s=NaN),(null==o||!isFinite(o))&&(o=NaN);var d=rs(s)||rs(o)||e&&!r;this._needCrossZero&&(s>0&&o>0&&!l&&(s=0),s<0&&o<0&&!c&&(o=0));var u=this._determinedMin,h=this._determinedMax;return null!=u&&(s=u,l=!0),null!=h&&(o=h,c=!0),{min:s,max:o,minFixed:l,maxFixed:c,isBlank:d}},e.prototype.modifyDataMinMax=function(e,t){this[bS[e]]=t},e.prototype.setDeterminedMinMax=function(e,t){this[yS[e]]=t},e.prototype.freeze=function(){this.frozen=!0},e}(),yS={min:"_determinedMin",max:"_determinedMax"},bS={min:"_dataMin",max:"_dataMax"};function _S(e,t){return null==t?null:rs(t)?NaN:e.parse(t)}function jS(e,t){var a=e.type,r=function(e,t,a){var r=e.rawExtentInfo;return r||(r=new vS(e,t,a),e.rawExtentInfo=r,r)}(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var i=r.min,n=r.max,s=t.ecModel;if(s&&"time"===a){var o=QN("bar",s),l=!1;if(Bn(o,function(e){l=l||e.getBaseAxis()===t.axis}),l){var c=JN(o),d=function(e,t,a,r){var i=a.axis.getExtent(),n=Math.abs(i[1]-i[0]),s=function(e,t){if(e&&t)return e[ZN(t)]}(r,a.axis);if(void 0===s)return{min:e,max:t};var o=1/0;Bn(s,function(e){o=Math.min(e.offset,o)});var l=-1/0;Bn(s,function(e){l=Math.max(e.offset+e.width,l)}),o=Math.abs(o),l=Math.abs(l);var c=o+l,d=t-e,u=d/(1-(o+l)/n)-d;return t+=u*(l/c),e-=u*(o/c),{min:e,max:t}}(i,n,t,c);i=d.min,n=d.max}}return{extent:[i,n],fixMin:r.minFixed,fixMax:r.maxFixed}}function wS(e,t){var a=t,r=jS(e,a),i=r.extent,n=a.get("splitNumber");e instanceof gS&&(e.base=a.get("logBase"));var s=e.type,o=a.get("interval"),l="interval"===s||"time"===s;e.setBreaksFromOption(IS(a)),e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:n,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?a.get("minInterval"):null,maxInterval:l?a.get("maxInterval"):null}),null!=o&&e.setInterval&&e.setInterval(o)}function NS(e){var t=e.getLabelModel().get("formatter");if("time"===e.type){var a=fx(t);return function(t,r){return e.scale.getFormattedLabel(t,r,a)}}if(Kn(t))return function(a){var r=e.scale.getLabel(a);return t.replace("{value}",null!=r?r:"")};if(Yn(t)){if("category"===e.type)return function(a,r){return t(SS(e,a),a.value-e.scale.getExtent()[0],null)};var r=null;return function(a,i){var n=null;return r&&(n=r.makeAxisLabelFormatterParamBreak(n,a.break)),t(SS(e,a),i,n)}}return function(t){return e.scale.getLabel(t)}}function SS(e,t){return"category"===e.type?e.scale.getLabel(t):t.value}function CS(e){var t=e.get("interval");return null==t?"auto":t}function kS(e){return"category"===e.type&&0===CS(e.getLabelModel())}function MS(e,t){var a={};return Bn(e.mapDimensionsAll(t),function(t){a[function(e,t){return MN(e,t)?e.getCalculationInfo("stackResultDimension"):t}(e,t)]=!0}),Wn(a)}function TS(e){return"middle"===e||"center"===e}function DS(e){return e.getShallow("show")}function IS(e){e.get("breaks",!0)}var AS=function(){function e(){}return e.prototype.getNeedCrossZero=function(){return!this.option.scale},e.prototype.getCoordSysModel=function(){},e}(),PS=[],LS={registerPreprocessor:Bw,registerProcessor:qw,registerPostInit:function(e){Vw("afterinit",e)},registerPostUpdate:function(e){Vw("afterupdate",e)},registerUpdateLifecycle:Vw,registerAction:Hw,registerCoordinateSystem:function(e,t){Yx.register(e,t)},registerLayout:function(e,t){Uw(Iw,e,t,1e3,"layout")},registerVisual:Ww,registerTransform:Yw,registerLoading:$w,registerMap:function(e,t,a){var r=Hj["registerMap"];r&&r(e,t,a)},registerImpl:function(e,t){Hj[e]=t},PRIORITY:Uj,ComponentModel:fv,ComponentView:t_,SeriesModel:$b,ChartView:n_,registerComponentModel:function(e){fv.registerClass(e)},registerComponentView:function(e){t_.registerClass(e)},registerSeriesModel:function(e){$b.registerClass(e)},registerChartView:function(e){n_.registerClass(e)},registerCustomSeries:function(e,t){},registerSubTypeDefaulter:function(e,t){fv.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){var a;a=t,xd[e]=a}};function zS(e){$n(e)?Bn(e,function(e){zS(e)}):Rn(PS,e)>=0||(PS.push(e),Yn(e)&&(e={install:e}),e.install(LS))}var ES=ru(),RS=ru(),OS=1,FS=2;function BS(e){return{out:{noPxChangeTryDetermine:[]},kind:e}}function qS(e,t){var a=qn(t,function(t){return e.scale.parse(t)});return"time"===e.type&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}function VS(e,t){var a=e.getLabelModel().get("customValues");if(a){var r=NS(e),i=e.scale.getExtent();return{labels:qn(Hn(qS(e,a),function(e){return e>=i[0]&&e<=i[1]}),function(t){var a={value:t};return{formattedLabel:r(a),rawLabel:e.scale.getLabel(a),tickValue:t,time:void 0,break:void 0}})}}return"category"===e.type?function(e,t){var a=e.getLabelModel(),r=WS(e,a,t);return!a.get("show")||e.scale.isBlank()?{labels:[]}:r}(e,t):function(e){var t=e.scale.getTicks(),a=NS(e);return{labels:qn(t,function(t,r){return{formattedLabel:a(t,r),rawLabel:e.scale.getLabel(t),tickValue:t.value,time:t.time,break:t.break}})}}(e)}function HS(e,t,a){var r=e.getTickModel().get("customValues");if(r){var i=e.scale.getExtent();return{ticks:Hn(qS(e,r),function(e){return e>=i[0]&&e<=i[1]})}}return"category"===e.type?function(e,t){var a,r,i=GS(e),n=CS(t),s=YS(i,n);if(s)return s;t.get("show")&&!e.scale.isBlank()||(a=[]);if(Yn(n))a=JS(e,n,!0);else if("auto"===n){var o=WS(e,e.getLabelModel(),BS(FS));r=o.labelCategoryInterval,a=qn(o.labels,function(e){return e.tickValue})}else a=QS(e,r=n,!0);return KS(i,n,{ticks:a,tickCategoryInterval:r})}(e,t):{ticks:qn(e.scale.getTicks(a),function(e){return e.value})}}function WS(e,t,a){var r,i,n=US(e),s=CS(t),o=a.kind===OS;if(!o){var l=YS(n,s);if(l)return l}Yn(s)?r=JS(e,s):(i="auto"===s?function(e,t){if(t.kind===OS){var a=e.calculateCategoryInterval(t);return t.out.noPxChangeTryDetermine.push(function(){return RS(e).autoInterval=a,!0}),a}var r=RS(e).autoInterval;return null!=r?r:RS(e).autoInterval=e.calculateCategoryInterval(t)}(e,a):s,r=QS(e,i));var c={labels:r,labelCategoryInterval:i};return o?a.out.noPxChangeTryDetermine.push(function(){return KS(n,s,c),!0}):KS(n,s,c),c}var GS=$S("axisTick"),US=$S("axisLabel");function $S(e){return function(t){return RS(t)[e]||(RS(t)[e]={list:[]})}}function YS(e,t){for(var a=0;a<e.list.length;a++)if(e.list[a].key===t)return e.list[a].value}function KS(e,t,a){return e.list.push({key:t,value:a}),a}function XS(e,t,a){return null==ZS(e,t,a)}function ZS(e,t,a){var r=ES(e.model),i=e.getExtent(),n=r.lastAutoInterval,s=r.lastTickCount;if(null!=n&&null!=s&&Math.abs(n-t)<=1&&Math.abs(s-a)<=1&&n>t&&r.axisExtent0===i[0]&&r.axisExtent1===i[1])return n;r.lastTickCount=a,r.lastAutoInterval=t,r.axisExtent0=i[0],r.axisExtent1=i[1]}function QS(e,t,a){var r=NS(e),i=e.scale,n=i.getExtent(),s=e.getLabelModel(),o=[],l=Math.max((t||0)+1,1),c=n[0],d=i.count();0!==c&&l>1&&d/l>2&&(c=Math.round(Math.ceil(c/l)*l));var u=kS(e),h=s.get("showMinLabel")||u,p=s.get("showMaxLabel")||u;h&&c!==n[0]&&f(n[0]);for(var m=c;m<=n[1];m+=l)f(m);function f(e){var t={value:e};o.push(a?e:{formattedLabel:r(t),rawLabel:i.getLabel(t),tickValue:e,time:void 0,break:void 0})}return p&&m-l!==n[1]&&f(n[1]),o}function JS(e,t,a){var r=e.scale,i=NS(e),n=[];return Bn(r.getTicks(),function(e){var s=r.getLabel(e),o=e.value;t(e.value,s)&&n.push(a?o:{formattedLabel:i(e),rawLabel:s,tickValue:o,time:void 0,break:void 0})}),n}var eC=[0,1],tC=function(){function e(e,t,a){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=a||[0,0]}return e.prototype.contain=function(e){var t=this._extent,a=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return e>=a&&e<=r},e.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(e){return function(e,t){var a=Math.log,r=Math.LN10,i=Math.floor(a(e[1]-e[0])/r),n=Math.round(a(Nd(t[1]-t[0]))/r),s=Math.min(Math.max(-i+n,0),20);return isFinite(s)?s:20}(e||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(e,t){var a=this._extent;a[0]=e,a[1]=t},e.prototype.dataToCoord=function(e,t){var a=this._extent,r=this.scale;return e=r.normalize(r.parse(e)),this.onBand&&"ordinal"===r.type&&aC(a=a.slice(),r.count()),Sd(e,eC,a,t)},e.prototype.coordToData=function(e,t){var a=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&aC(a=a.slice(),r.count());var i=Sd(e,a,eC,t);return this.scale.scale(i)},e.prototype.pointToData=function(e,t){},e.prototype.getTicksCoords=function(e){var t=(e=e||{}).tickModel||this.getTickModel(),a=qn(HS(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}).ticks,function(e){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(e):e),tickValue:e}},this);return function(e,t,a,r){var i=t.length;if(!e.onBand||a||!i)return;var n,s,o=e.getExtent();if(1===i)t[0].coord=o[0],t[0].onBand=!0,n=t[1]={coord:o[1],tickValue:t[0].tickValue,onBand:!0};else{var l=t[i-1].tickValue-t[0].tickValue,c=(t[i-1].coord-t[0].coord)/l;Bn(t,function(e){e.coord-=c/2,e.onBand=!0});var d=e.scale.getExtent();s=1+d[1]-t[i-1].tickValue,n={coord:t[i-1].coord+c*s,tickValue:d[1]+1,onBand:!0},t.push(n)}var u=o[0]>o[1];h(t[0].coord,o[0])&&(r?t[0].coord=o[0]:t.shift());r&&h(o[0],t[0].coord)&&t.unshift({coord:o[0],onBand:!0});h(o[1],n.coord)&&(r?n.coord=o[1]:t.pop());r&&h(n.coord,o[1])&&t.push({coord:o[1],onBand:!0});function h(e,t){return e=Md(e),t=Md(t),u?e>t:e<t}}(this,a,t.get("alignWithLabel"),e.clamp),a},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return e>0&&e<100||(e=5),qn(this.scale.getMinorTicks(e),function(e){return qn(e,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this)},this)},e.prototype.getViewLabels=function(e){return VS(this,e=e||BS(FS)).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),a=t[1]-t[0]+(this.onBand?1:0);0===a&&(a=1);var r=Math.abs(e[1]-e[0]);return Math.abs(r)/a},e.prototype.calculateCategoryInterval=function(e){return function(e,t){var a=t.kind,r=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),i=NS(e),n=(r.axisRotate-r.labelRotate)/180*Math.PI,s=e.scale,o=s.getExtent(),l=s.count();if(o[1]-o[0]<1)return 0;var c=1;l>40&&(c=Math.max(1,Math.floor(l/40)));for(var d=o[0],u=e.dataToCoord(d+1)-e.dataToCoord(d),h=Math.abs(u*Math.cos(n)),p=Math.abs(u*Math.sin(n)),m=0,f=0;d<=o[1];d+=c){var g,x,v=Jc(i({value:d}),r.font,"center","top");g=1.3*v.width,x=1.3*v.height,m=Math.max(m,g,7),f=Math.max(f,x,7)}var y=m/h,b=f/p;isNaN(y)&&(y=1/0),isNaN(b)&&(b=1/0);var _=Math.max(0,Math.floor(Math.min(y,b)));if(a===OS)return t.out.noPxChangeTryDetermine.push(Gn(XS,null,e,_,l)),_;var j=ZS(e,_,l);return null!=j?j:_}(this,e=e||BS(FS))},e}();function aC(e,t){var a=(e[1]-e[0])/t/2;e[0]+=a,e[1]-=a}function rC(e,t,a,r,i,n,s,o){var l=i-e,c=n-t,d=a-e,u=r-t,h=Math.sqrt(d*d+u*u),p=(l*(d/=h)+c*(u/=h))/h;p*=h;var m=s[0]=e+p*d,f=s[1]=t+p*u;return Math.sqrt((m-i)*(m-i)+(f-n)*(f-n))}var iC=new go,nC=new go,sC=new go,oC=new go,lC=new go,cC=[],dC=new go;function uC(e,t){if(t<=180&&t>0){t=t/180*Math.PI,iC.fromArray(e[0]),nC.fromArray(e[1]),sC.fromArray(e[2]),go.sub(oC,iC,nC),go.sub(lC,sC,nC);var a=oC.len(),r=lC.len();if(!(a<.001||r<.001)){oC.scale(1/a),lC.scale(1/r);var i=oC.dot(lC);if(Math.cos(t)<i){var n=rC(nC.x,nC.y,sC.x,sC.y,iC.x,iC.y,cC);dC.fromArray(cC),dC.scaleAndAdd(lC,n/Math.tan(Math.PI-t));var s=sC.x!==nC.x?(dC.x-nC.x)/(sC.x-nC.x):(dC.y-nC.y)/(sC.y-nC.y);if(isNaN(s))return;s<0?go.copy(dC,nC):s>1&&go.copy(dC,sC),dC.toArray(e[1])}}}}function hC(e,t,a){if(a<=180&&a>0){a=a/180*Math.PI,iC.fromArray(e[0]),nC.fromArray(e[1]),sC.fromArray(e[2]),go.sub(oC,nC,iC),go.sub(lC,sC,nC);var r=oC.len(),i=lC.len();if(!(r<.001||i<.001))if(oC.scale(1/r),lC.scale(1/i),oC.dot(t)<Math.cos(a)){var n=rC(nC.x,nC.y,sC.x,sC.y,iC.x,iC.y,cC);dC.fromArray(cC);var s=Math.PI/2,o=s+Math.acos(lC.dot(t))-a;if(o>=s)go.copy(dC,sC);else{dC.scaleAndAdd(lC,n/Math.tan(Math.PI/2-o));var l=sC.x!==nC.x?(dC.x-nC.x)/(sC.x-nC.x):(dC.y-nC.y)/(sC.y-nC.y);if(isNaN(l))return;l<0?go.copy(dC,nC):l>1&&go.copy(dC,sC)}dC.toArray(e[1])}}}function pC(e,t,a,r){var i="normal"===a,n=i?e:e.ensureState(a);n.ignore=t;var s=r.get("smooth");s&&!0===s&&(s=.3),n.shape=n.shape||{},s>0&&(n.shape.smooth=s);var o=r.getModel("lineStyle").getLineStyle();i?e.useStyle(o):n.style=o}function mC(e,t){var a=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),a>0&&r.length>=3){var i=As(r[0],r[1]),n=As(r[1],r[2]);if(!i||!n)return e.lineTo(r[1][0],r[1][1]),void e.lineTo(r[2][0],r[2][1]);var s=Math.min(i,n)*a,o=Ls([],r[1],r[0],s/i),l=Ls([],r[1],r[2],s/n),c=Ls([],o,l,.5);e.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var d=1;d<r.length;d++)e.lineTo(r[d][0],r[d][1])}var fC=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"];function gC(e,t,a){a=a||3,t?e.dirty|=a:e.dirty&=~a}function xC(e,t){return t=t||3,null==e.dirty||!!(e.dirty&t)}function vC(e){if(e)return xC(e)&&yC(e,e.label,e),e}function yC(e,t,a){var r=t.getComputedTransform();e.transform=xg(e.transform,r);var i=e.localRect=gg(e.localRect,t.getBoundingRect()),n=t.style,s=n.margin,o=a&&a.marginForce,l=a&&a.minMarginForce,c=a&&a.marginDefault,d=n.__marginType;null==d&&c&&(s=c,d=zg.textMargin);for(var u=0;u<4;u++)bC[u]=d===zg.minMargin&&l&&null!=l[u]?l[u]:o&&null!=o[u]?o[u]:s?s[u]:0;d===zg.textMargin&&lg(i,bC,!1,!1);var h=e.rect=gg(e.rect,i);return r&&h.applyTransform(r),d===zg.minMargin&&lg(h,bC,!1,!1),e.axisAligned=mg(r),(e.label=e.label||{}).ignore=t.ignore,gC(e,!1),gC(e,!0,2),e}var bC=[0,0,0,0];function _C(e,t){for(var a=0;a<fC.length;a++){var r=fC[a];null==e[r]&&(e[r]=t[r])}return vC(e)}function jC(e){var t=e.obb;return t&&!xC(e,2)||(e.obb=t=t||new Af,t.fromBoundingRect(e.localRect,e.transform),gC(e,!1,2)),t}function wC(e,t,a,r){return!(!e||!t)&&(!(e.label&&e.label.ignore||t.label&&t.label.ignore)&&(!!e.rect.intersect(t.rect,a,r)&&(!(!e.axisAligned||!t.axisAligned)||jC(e).intersect(jC(t),a,r))))}var NC=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return pn(t,e),t.prototype.getInitialData=function(e){return TN(0,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new gd,a=hj("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(a),a.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),i=this.getData().getVisual("symbolRotate"),n="none"===r?"circle":r,s=.8*e.itemHeight,o=hj(n,(e.itemWidth-s)/2,(e.itemHeight-s)/2,s,s,e.itemStyle.fill);t.add(o),o.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?i:e.iconRotate||0;return o.rotation=l*Math.PI/180,o.setOrigin([e.itemWidth/2,e.itemHeight/2]),n.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill=gv.color.neutral00,o.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}($b);function SC(e,t){var a=e.mapDimensionsAll("defaultedLabel"),r=a.length;if(1===r){var i=Zy(e,t,a[0]);return null!=i?i+"":null}if(r){for(var n=[],s=0;s<a.length;s++)n.push(Zy(e,t,a[s]));return n.join(" ")}}function CC(e,t){var a=e.mapDimensionsAll("defaultedLabel");if(!$n(t))return t+"";for(var r=[],i=0;i<a.length;i++){var n=e.getDimensionIndex(a[i]);n>=0&&r.push(t[n])}return r.join(" ")}var kC=function(e){function t(t,a,r,i){var n=e.call(this)||this;return n.updateData(t,a,r,i),n}return pn(t,e),t.prototype._createSymbol=function(e,t,a,r,i,n){this.removeAll();var s=hj(e,-1,-1,2,2,null,n);s.attr({z2:ns(i,100),culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),s.drift=MC,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){em(this.childAt(0))},t.prototype.downplay=function(){tm(this.childAt(0))},t.prototype.setZ=function(e,t){var a=this.childAt(0);a.zlevel=e,a.z=t},t.prototype.setDraggable=function(e,t){var a=this.childAt(0);a.draggable=e,a.cursor=!t&&e?"move":a.cursor},t.prototype.updateData=function(e,a,r,i){this.silent=!1;var n=e.getItemVisual(a,"symbol")||"circle",s=e.hostModel,o=t.getSymbolSize(e,a),l=t.getSymbolZ2(e,a),c=n!==this._symbolType,d=i&&i.disableAnimation;if(c){var u=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(n,e,a,o,l,u)}else{(p=this.childAt(0)).silent=!1;var h={scaleX:o[0]/2,scaleY:o[1]/2};d?p.attr(h):Rf(p,h,s,a),Hf(p)}if(this._updateCommon(e,a,o,r,i),c){var p=this.childAt(0);if(!d){h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:p.style.opacity}};p.scaleX=p.scaleY=0,p.style.opacity=0,Of(p,h,s,a)}}d&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,t,a,r,i){var n,s,o,l,c,d,u,h,p,m=this.childAt(0),f=e.hostModel;if(r&&(n=r.emphasisItemStyle,s=r.blurItemStyle,o=r.selectItemStyle,l=r.focus,c=r.blurScope,u=r.labelStatesModels,h=r.hoverScale,p=r.cursorStyle,d=r.emphasisDisabled),!r||e.hasItemOption){var g=r&&r.itemModel?r.itemModel:e.getItemModel(t),x=g.getModel("emphasis");n=x.getModel("itemStyle").getItemStyle(),o=g.getModel(["select","itemStyle"]).getItemStyle(),s=g.getModel(["blur","itemStyle"]).getItemStyle(),l=x.get("focus"),c=x.get("blurScope"),d=x.get("disabled"),u=Sg(g),h=x.getShallow("scale"),p=g.getShallow("cursor")}var v=e.getItemVisual(t,"symbolRotate");m.attr("rotation",(v||0)*Math.PI/180||0);var y=pj(e.getItemVisual(t,"symbolOffset"),a);y&&(m.x=y[0],m.y=y[1]),p&&m.attr("cursor",p);var b=e.getItemVisual(t,"style"),_=b.fill;if(m instanceof rp){var j=m.style;m.useStyle(zn({image:j.image,x:j.x,y:j.y,width:j.width,height:j.height},b))}else m.__isEmptyBrush?m.useStyle(zn({},b)):m.useStyle(b),m.style.decal=null,m.setColor(_,i&&i.symbolInnerColor),m.style.strokeNoScale=!0;var w=e.getItemVisual(t,"liftZ"),N=this._z2;null!=w?null==N&&(this._z2=m.z2,m.z2+=w):null!=N&&(m.z2=N,this._z2=null);var S=i&&i.useNameLabel;Ng(m,u,{labelFetcher:f,labelDataIndex:t,defaultText:function(t){return S?e.getName(t):SC(e,t)},inheritColor:_,defaultOpacity:b.opacity}),this._sizeX=a[0]/2,this._sizeY=a[1]/2;var C=m.ensureState("emphasis");C.style=n,m.ensureState("select").style=o,m.ensureState("blur").style=s;var k=null==h||!0===h?Math.max(1.1,3/this._sizeY):isFinite(h)&&h>0?+h:1;C.scaleX=this._sizeX*k,C.scaleY=this._sizeY*k,this.setSymbolScale(1),pm(this,l,c,d)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,t,a){var r=this.childAt(0),i=Cp(this).dataIndex,n=a&&a.animation;if(this.silent=r.silent=!0,a&&a.fadeLabel){var s=r.getTextContent();s&&Bf(s,{style:{opacity:0}},t,{dataIndex:i,removeOpt:n,cb:function(){r.removeTextContent()}})}else r.removeTextContent();Bf(r,{style:{opacity:0},scaleX:0,scaleY:0},t,{dataIndex:i,cb:e,removeOpt:n})},t.getSymbolSize=function(e,t){return $n(a=e.getItemVisual(t,"symbolSize"))||(a=[+a,+a]),[a[0]||0,a[1]||0];var a},t.getSymbolZ2=function(e,t){return e.getItemVisual(t,"z2")},t}(gd);function MC(e,t){this.parent.drift(e,t)}function TC(e,t,a,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(a))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(a,"symbol")}function DC(e){return null==e||Qn(e)||(e={isIgnore:e}),e||{}}function IC(e){var t=e.hostModel,a=t.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:Sg(t),cursorStyle:t.get("cursor")}}var AC=function(){function e(e){this.group=new gd,this._SymbolCtor=e||kC}return e.prototype.updateData=function(e,t){this._progressiveEls=null,t=DC(t);var a=this.group,r=e.hostModel,i=this._data,n=this._SymbolCtor,s=t.disableAnimation,o=IC(e),l={disableAnimation:s},c=t.getSymbolPoint||function(t){return e.getItemLayout(t)};i||a.removeAll(),e.diff(i).add(function(r){var i=c(r);if(TC(e,i,r,t)){var s=new n(e,r,o,l);s.setPosition(i),e.setItemGraphicEl(r,s),a.add(s)}}).update(function(d,u){var h=i.getItemGraphicEl(u),p=c(d);if(TC(e,p,d,t)){var m=e.getItemVisual(d,"symbol")||"circle",f=h&&h.getSymbolType&&h.getSymbolType();if(!h||f&&f!==m)a.remove(h),(h=new n(e,d,o,l)).setPosition(p);else{h.updateData(e,d,o,l);var g={x:p[0],y:p[1]};s?h.attr(g):Rf(h,g,r)}a.add(h),e.setItemGraphicEl(d,h)}else a.remove(h)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&t.fadeOut(function(){a.remove(t)},r)}).execute(),this._getSymbolPoint=c,this._data=e},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(t,a){var r=e._getSymbolPoint(a);t.setPosition(r),t.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=IC(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,a){function r(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],a=DC(a);for(var i=e.start;i<e.end;i++){var n=t.getItemLayout(i);if(TC(t,n,i,a)){var s=new this._SymbolCtor(t,i,this._seriesScope);s.traverse(r),s.setPosition(n),this.group.add(s),t.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(e){pg(this._progressiveEls||this.group,e)},e.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)},a.hostModel)}):t.removeAll()},e}();function PC(e,t,a){var r=e.getBaseAxis(),i=e.getOtherAxis(r),n=function(e,t){var a=0,r=e.scale.getExtent();"start"===t?a=r[0]:"end"===t?a=r[1]:Zn(t)&&!isNaN(t)?a=t:r[0]>0?a=r[0]:r[1]<0&&(a=r[1]);return a}(i,a),s=r.dim,o=i.dim,l=t.mapDimension(o),c=t.mapDimension(s),d="x"===o||"radius"===o?1:0,u=qn(e.dimensions,function(e){return t.mapDimension(e)}),h=!1,p=t.getCalculationInfo("stackResultDimension");return MN(t,u[0])&&(h=!0,u[0]=p),MN(t,u[1])&&(h=!0,u[1]=p),{dataDimsForPoint:u,valueStart:n,valueAxisDim:o,baseAxisDim:s,stacked:!!h,valueDim:l,baseDim:c,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function LC(e,t,a,r){var i=NaN;e.stacked&&(i=a.get(a.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=e.valueStart);var n=e.baseDataOffset,s=[];return s[n]=a.get(e.baseDim,r),s[1-n]=i,t.dataToPoint(s)}var zC=Math.min,EC=Math.max;function RC(e,t){return isNaN(e)||isNaN(t)}function OC(e,t,a,r,i,n,s,o,l){for(var c,d,u,h,p,m,f=a,g=0;g<r;g++){var x=t[2*f],v=t[2*f+1];if(f>=i||f<0)break;if(RC(x,v)){if(l){f+=n;continue}break}if(f===a)e[n>0?"moveTo":"lineTo"](x,v),u=x,h=v;else{var y=x-c,b=v-d;if(y*y+b*b<.5){f+=n;continue}if(s>0){for(var _=f+n,j=t[2*_],w=t[2*_+1];j===x&&w===v&&g<r;)g++,f+=n,j=t[2*(_+=n)],w=t[2*_+1],y=(x=t[2*f])-c,b=(v=t[2*f+1])-d;var N=g+1;if(l)for(;RC(j,w)&&N<r;)N++,j=t[2*(_+=n)],w=t[2*_+1];var S=.5,C=0,k=0,M=void 0,T=void 0;if(N>=r||RC(j,w))p=x,m=v;else{C=j-c,k=w-d;var D=x-c,I=j-x,A=v-d,P=w-v,L=void 0,z=void 0;if("x"===o){var E=C>0?1:-1;p=x-E*(L=Math.abs(D))*s,m=v,M=x+E*(z=Math.abs(I))*s,T=v}else if("y"===o){var R=k>0?1:-1;p=x,m=v-R*(L=Math.abs(A))*s,M=x,T=v+R*(z=Math.abs(P))*s}else L=Math.sqrt(D*D+A*A),p=x-C*s*(1-(S=(z=Math.sqrt(I*I+P*P))/(z+L))),m=v-k*s*(1-S),T=v+k*s*S,M=zC(M=x+C*s*S,EC(j,x)),T=zC(T,EC(w,v)),M=EC(M,zC(j,x)),m=v-(k=(T=EC(T,zC(w,v)))-v)*L/z,p=zC(p=x-(C=M-x)*L/z,EC(c,x)),m=zC(m,EC(d,v)),M=x+(C=x-(p=EC(p,zC(c,x))))*z/L,T=v+(k=v-(m=EC(m,zC(d,v))))*z/L}e.bezierCurveTo(u,h,p,m,x,v),u=M,h=T}else e.lineTo(x,v)}c=x,d=v,f+=n}return g}var FC=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),BC=function(e){function t(t){var a=e.call(this,t)||this;return a.type="ec-polyline",a}return pn(t,e),t.prototype.getDefaultStyle=function(){return{stroke:gv.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new FC},t.prototype.buildPath=function(e,t){var a=t.points,r=0,i=a.length/2;if(t.connectNulls){for(;i>0&&RC(a[2*i-2],a[2*i-1]);i--);for(;r<i&&RC(a[2*r],a[2*r+1]);r++);}for(;r<i;)r+=OC(e,a,r,i,i,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var a,r,i=this.path.data,n=Ih.CMD,s="x"===t,o=[],l=0;l<i.length;){var c=void 0,d=void 0,u=void 0,h=void 0,p=void 0,m=void 0,f=void 0;switch(i[l++]){case n.M:a=i[l++],r=i[l++];break;case n.L:if(c=i[l++],d=i[l++],(f=s?(e-a)/(c-a):(e-r)/(d-r))<=1&&f>=0){var g=s?(d-r)*f+r:(c-a)*f+a;return s?[e,g]:[g,e]}a=c,r=d;break;case n.C:c=i[l++],d=i[l++],u=i[l++],h=i[l++],p=i[l++],m=i[l++];var x=s?gl(a,c,u,p,e,o):gl(r,d,h,m,e,o);if(x>0)for(var v=0;v<x;v++){var y=o[v];if(y<=1&&y>=0){g=s?ml(r,d,h,m,y):ml(a,c,u,p,y);return s?[e,g]:[g,e]}}a=p,r=m}}},t}(Qh),qC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t}(FC),VC=function(e){function t(t){var a=e.call(this,t)||this;return a.type="ec-polygon",a}return pn(t,e),t.prototype.getDefaultShape=function(){return new qC},t.prototype.buildPath=function(e,t){var a=t.points,r=t.stackedOnPoints,i=0,n=a.length/2,s=t.smoothMonotone;if(t.connectNulls){for(;n>0&&RC(a[2*n-2],a[2*n-1]);n--);for(;i<n&&RC(a[2*i],a[2*i+1]);i++);}for(;i<n;){var o=OC(e,a,i,n,n,1,t.smooth,s,t.connectNulls);OC(e,r,i+o-1,o,n,-1,t.stackedOnSmooth,s,t.connectNulls),i+=o+1,e.closePath()}},t}(Qh);function HC(e,t,a,r,i){var n=e.getArea(),s=n.x,o=n.y,l=n.width,c=n.height,d=a.get(["lineStyle","width"])||0;s-=d/2,o-=d/2,l+=d,c+=d,l=Math.ceil(l),s!==Math.floor(s)&&(s=Math.floor(s),l++);var u=new dp({shape:{x:s,y:o,width:l,height:c}});if(t){var h=e.getBaseAxis(),p=h.isHorizontal(),m=h.inverse;p?(m&&(u.shape.x+=l),u.shape.width=0):(m||(u.shape.y+=c),u.shape.height=0);var f=Yn(i)?function(e){i(e,u)}:null;Of(u,{shape:{width:l,height:c,x:s,y:o}},a,null,r,f)}return u}function WC(e,t,a){var r=e.getArea(),i=Md(r.r0,1),n=Md(r.r,1),s=new af({shape:{cx:Md(e.cx,1),cy:Md(e.cy,1),r0:i,r:n,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});t&&("angle"===e.getBaseAxis().dim?s.shape.endAngle=r.startAngle:s.shape.r=i,Of(s,{shape:{endAngle:r.endAngle,r:n}},a));return s}function GC(e,t){return e.type===t}function UC(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return;return!0}}function $C(e){for(var t=1/0,a=1/0,r=-1/0,i=-1/0,n=0;n<e.length;){var s=e[n++],o=e[n++];isNaN(s)||(t=Math.min(s,t),r=Math.max(s,r)),isNaN(o)||(a=Math.min(o,a),i=Math.max(o,i))}return[[t,a],[r,i]]}function YC(e,t){var a=$C(e),r=a[0],i=a[1],n=$C(t),s=n[0],o=n[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function KC(e){return Zn(e)?e:e?.5:0}function XC(e,t,a,r,i){var n=a.getBaseAxis(),s="x"===n.dim||"radius"===n.dim?0:1,o=[],l=0,c=[],d=[],u=[],h=[];if(i){for(l=0;l<e.length;l+=2){var p=t||e;isNaN(p[l])||isNaN(p[l+1])||h.push(e[l],e[l+1])}e=h}for(l=0;l<e.length-2;l+=2)switch(u[0]=e[l+2],u[1]=e[l+3],d[0]=e[l],d[1]=e[l+1],o.push(d[0],d[1]),r){case"end":c[s]=u[s],c[1-s]=d[1-s],o.push(c[0],c[1]);break;case"middle":var m=(d[s]+u[s])/2,f=[];c[s]=f[s]=m,c[1-s]=d[1-s],f[1-s]=u[1-s],o.push(c[0],c[1]),o.push(f[0],f[1]);break;default:c[s]=d[s],c[1-s]=u[1-s],o.push(c[0],c[1])}return o.push(e[l++],e[l++]),o}function ZC(e,t){var a,r,i=[],n=e.length;function s(e,t,a){var r=e.coord;return{coord:a,color:function(e,t,a){if(t&&t.length&&e>=0&&e<=1){var r=e*(t.length-1),i=Math.floor(r),n=Math.ceil(r),s=Hl(t[i]),o=Hl(t[n]),l=r-i,c=$l([Al(Rl(s[0],o[0],l)),Al(Rl(s[1],o[1],l)),Al(Rl(s[2],o[2],l)),Pl(Rl(s[3],o[3],l))],"rgba");return a?{color:c,leftIndex:i,rightIndex:n,value:r}:c}}((a-r)/(t.coord-r),[e.color,t.color])}}for(var o=0;o<n;o++){var l=e[o],c=l.coord;if(c<0)a=l;else{if(c>t){r?i.push(s(r,l,t)):a&&i.push(s(a,l,0),s(a,l,t));break}a&&(i.push(s(a,l,0)),a=null),i.push(l),r=l}}return i}function QC(e,t,a){var r=e.get("showAllSymbol"),i="auto"===r;if(!r||i){var n=a.getAxesByScale("ordinal")[0];if(n&&(!i||!function(e,t){var a=e.getExtent(),r=Math.abs(a[1]-a[0])/e.scale.count();isNaN(r)&&(r=0);for(var i=t.count(),n=Math.max(1,Math.round(i/5)),s=0;s<i;s+=n)if(1.5*kC.getSymbolSize(t,s)[e.isHorizontal()?1:0]>r)return!1;return!0}(n,t))){var s=t.mapDimension(n.dim),o={};return Bn(n.getViewLabels(),function(e){var t=n.scale.getRawOrdinalNumber(e.tickValue);o[t]=1}),function(e){return!o.hasOwnProperty(t.get(s,e))}}}}function JC(e,t){return isNaN(e)||isNaN(t)}function ek(e,t){return[e[2*t],e[2*t+1]]}function tk(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Ip.length;t++)if(e.get([Ip[t],"endLabel","show"]))return!0;return!1}function ak(e,t,a,r){if(GC(t,"cartesian2d")){var i=r.getModel("endLabel"),n=i.get("valueAnimation"),s=r.getData(),o={lastFrameIndex:0},l=tk(r)?function(a,r){e._endLabelOnDuring(a,r,s,o,n,i,t)}:null,c=t.getBaseAxis().isHorizontal(),d=HC(t,a,r,function(){var t=e._endLabel;t&&a&&null!=o.originalX&&t.attr({x:o.originalX,y:o.originalY})},l);if(!r.get("clip",!0)){var u=d.shape,h=Math.max(u.width,u.height);c?(u.y-=h,u.height+=2*h):(u.x-=h,u.width+=2*h)}return l&&l(1,d),d}return WC(t,a,r)}var rk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.init=function(){var e=new gd,t=new AC;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e,this._changePolyState=Gn(this._changePolyState,this)},t.prototype.render=function(e,t,a){var r=e.coordinateSystem,i=this.group,n=e.getData(),s=e.getModel("lineStyle"),o=e.getModel("areaStyle"),l=n.getLayout("points")||[],c="polar"===r.type,d=this._coordSys,u=this._symbolDraw,h=this._polyline,p=this._polygon,m=this._lineGroup,f=!t.ssr&&e.get("animation"),g=!o.isEmpty(),x=o.get("origin"),v=PC(r,n,x),y=g&&function(e,t,a){if(!a.valueDim)return[];for(var r=t.count(),i=KN(2*r),n=0;n<r;n++){var s=LC(a,e,t,n);i[2*n]=s[0],i[2*n+1]=s[1]}return i}(r,n,v),b=e.get("showSymbol"),_=e.get("connectNulls"),j=b&&!c&&QC(e,n,r),w=this._data;w&&w.eachItemGraphicEl(function(e,t){e.__temp&&(i.remove(e),w.setItemGraphicEl(t,null))}),b||u.remove(),i.add(m);var N,S=!c&&e.get("step");r&&r.getArea&&e.get("clip",!0)&&(null!=(N=r.getArea()).width?(N.x-=.1,N.y-=.1,N.width+=.2,N.height+=.2):N.r0&&(N.r0-=.5,N.r+=.5)),this._clipShapeForSymbol=N;var C=function(e,t,a){var r=e.getVisual("visualMeta");if(r&&r.length&&e.count()&&"cartesian2d"===t.type){for(var i,n,s=r.length-1;s>=0;s--){var o=e.getDimensionInfo(r[s].dimension);if("x"===(i=o&&o.coordDim)||"y"===i){n=r[s];break}}if(n){var l=t.getAxis(i),c=qn(n.stops,function(e){return{coord:l.toGlobalCoord(l.dataToCoord(e.value)),color:e.color}}),d=c.length,u=n.outerColors.slice();d&&c[0].coord>c[d-1].coord&&(c.reverse(),u.reverse());var h=ZC(c,"x"===i?a.getWidth():a.getHeight()),p=h.length;if(!p&&d)return c[0].coord<0?u[1]?u[1]:c[d-1].color:u[0]?u[0]:c[0].color;var m=h[0].coord-10,f=h[p-1].coord+10,g=f-m;if(g<.001)return"transparent";Bn(h,function(e){e.offset=(e.coord-m)/g}),h.push({offset:p?h[p-1].offset:.5,color:u[1]||"transparent"}),h.unshift({offset:p?h[0].offset:.5,color:u[0]||"transparent"});var x=new jf(0,0,0,0,h,!0);return x[i]=m,x[i+"2"]=f,x}}}(n,r,a)||n.getVisual("style")[n.getVisual("drawType")];if(h&&d.type===r.type&&S===this._step){g&&!p?p=this._newPolygon(l,y):p&&!g&&(m.remove(p),p=this._polygon=null),c||this._initOrUpdateEndLabel(e,r,Wx(C));var k=m.getClipPath();if(k)Of(k,{shape:ak(this,r,!1,e).shape},e);else m.setClipPath(ak(this,r,!0,e));b&&u.updateData(n,{isIgnore:j,clipShape:N,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),UC(this._stackedOnPoints,y)&&UC(this._points,l)||(f?this._doUpdateAnimation(n,y,r,a,S,x,_):(S&&(y&&(y=XC(y,l,r,S,_)),l=XC(l,null,r,S,_)),h.setShape({points:l}),p&&p.setShape({points:l,stackedOnPoints:y})))}else b&&u.updateData(n,{isIgnore:j,clipShape:N,disableAnimation:!0,getSymbolPoint:function(e){return[l[2*e],l[2*e+1]]}}),f&&this._initSymbolLabelAnimation(n,r,N),S&&(y&&(y=XC(y,l,r,S,_)),l=XC(l,null,r,S,_)),h=this._newPolyline(l),g?p=this._newPolygon(l,y):p&&(m.remove(p),p=this._polygon=null),c||this._initOrUpdateEndLabel(e,r,Wx(C)),m.setClipPath(ak(this,r,!0,e));var M=e.getModel("emphasis"),T=M.get("focus"),D=M.get("blurScope"),I=M.get("disabled");(h.useStyle(En(s.getLineStyle(),{fill:"none",stroke:C,lineJoin:"bevel"})),gm(h,e,"lineStyle"),h.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(h.getState("emphasis").style.lineWidth=+h.style.lineWidth+1);Cp(h).seriesIndex=e.seriesIndex,pm(h,T,D,I);var A=KC(e.get("smooth")),P=e.get("smoothMonotone");if(h.setShape({smooth:A,smoothMonotone:P,connectNulls:_}),p){var L=n.getCalculationInfo("stackedOnSeries"),z=0;p.useStyle(En(o.getAreaStyle(),{fill:C,opacity:.7,lineJoin:"bevel",decal:n.getVisual("style").decal})),L&&(z=KC(L.get("smooth"))),p.setShape({smooth:A,stackedOnSmooth:z,smoothMonotone:P,connectNulls:_}),gm(p,e,"areaStyle"),Cp(p).seriesIndex=e.seriesIndex,pm(p,T,D,I)}var E=this._changePolyState;n.eachItemGraphicEl(function(e){e&&(e.onHoverStateChange=E)}),this._polyline.onHoverStateChange=E,this._data=n,this._coordSys=r,this._stackedOnPoints=y,this._points=l,this._step=S,this._valueOrigin=x,e.get("triggerLineEvent")&&(this.packEventData(e,h),p&&this.packEventData(e,p))},t.prototype.packEventData=function(e,t){Cp(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,t,a,r){var i=e.getData(),n=au(i,r);if(this._changePolyState("emphasis"),!(n instanceof Array)&&null!=n&&n>=0){var s=i.getLayout("points"),o=i.getItemGraphicEl(n);if(!o){var l=s[2*n],c=s[2*n+1];if(isNaN(l)||isNaN(c))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,c))return;var d=e.get("zlevel")||0,u=e.get("z")||0;(o=new kC(i,n)).x=l,o.y=c,o.setZ(d,u);var h=o.getSymbolPath().getTextContent();h&&(h.zlevel=d,h.z=u,h.z2=this._polyline.z2+1),o.__temp=!0,i.setItemGraphicEl(n,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else n_.prototype.highlight.call(this,e,t,a,r)},t.prototype.downplay=function(e,t,a,r){var i=e.getData(),n=au(i,r);if(this._changePolyState("normal"),null!=n&&n>=0){var s=i.getItemGraphicEl(n);s&&(s.__temp?(i.setItemGraphicEl(n,null),this.group.remove(s)):s.downplay())}else n_.prototype.downplay.call(this,e,t,a,r)},t.prototype._changePolyState=function(e){var t=this._polygon;Kp(this._polyline,e),t&&Kp(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new BC({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new VC({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(a),this._polygon=a,a},t.prototype._initSymbolLabelAnimation=function(e,t,a){var r,i,n=t.getBaseAxis(),s=n.inverse;"cartesian2d"===t.type?(r=n.isHorizontal(),i=!1):"polar"===t.type&&(r="angle"===n.dim,i=!0);var o=e.hostModel,l=o.get("animationDuration");Yn(l)&&(l=l(null));var c=o.get("animationDelay")||0,d=Yn(c)?c(null):c;e.eachItemGraphicEl(function(e,n){var o=e;if(o){var u=[e.x,e.y],h=void 0,p=void 0,m=void 0;if(a)if(i){var f=a,g=t.pointToCoord(u);r?(h=f.startAngle,p=f.endAngle,m=-g[1]/180*Math.PI):(h=f.r0,p=f.r,m=g[0])}else{var x=a;r?(h=x.x,p=x.x+x.width,m=e.x):(h=x.y+x.height,p=x.y,m=e.y)}var v=p===h?0:(m-h)/(p-h);s&&(v=1-v);var y=Yn(c)?c(n):l*v+d,b=o.getSymbolPath(),_=b.getTextContent();o.attr({scaleX:0,scaleY:0}),o.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:y}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:y}),b.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,t,a){var r=e.getModel("endLabel");if(tk(e)){var i=e.getData(),n=this._polyline,s=i.getLayout("points");if(!s)return n.removeTextContent(),void(this._endLabel=null);var o=this._endLabel;o||((o=this._endLabel=new mp({z2:200})).ignoreClip=!0,n.setTextContent(this._endLabel),n.disableLabelAnimation=!0);var l=function(e){for(var t=e.length/2;t>0&&JC(e[2*t-2],e[2*t-1]);t--);return t-1}(s);l>=0&&(Ng(n,Sg(e,"endLabel"),{inheritColor:a,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,a){return null!=a?CC(i,a):SC(i,e)},enableTextSetter:!0},function(e,t){var a=t.getBaseAxis(),r=a.isHorizontal(),i=a.inverse,n=r?i?"right":"left":"center",s=r?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||n,verticalAlign:e.get("verticalAlign")||s}}}(r,t)),n.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,a,r,i,n,s){var o=this._endLabel,l=this._polyline;if(o){e<1&&null==r.originalX&&(r.originalX=o.x,r.originalY=o.y);var c=a.getLayout("points"),d=a.hostModel,u=d.get("connectNulls"),h=n.get("precision"),p=n.get("distance")||0,m=s.getBaseAxis(),f=m.isHorizontal(),g=m.inverse,x=t.shape,v=g?f?x.x:x.y+x.height:f?x.x+x.width:x.y,y=(f?p:0)*(g?-1:1),b=(f?0:-p)*(g?-1:1),_=f?"x":"y",j=function(e,t,a){for(var r,i,n=e.length/2,s="x"===a?0:1,o=0,l=-1,c=0;c<n;c++)if(i=e[2*c+s],!isNaN(i)&&!isNaN(e[2*c+1-s]))if(0!==c){if(r<=t&&i>=t||r>=t&&i<=t){l=c;break}o=c,r=i}else r=i;return{range:[o,l],t:(t-r)/(i-r)}}(c,v,_),w=j.range,N=w[1]-w[0],S=void 0;if(N>=1){if(N>1&&!u){var C=ek(c,w[0]);o.attr({x:C[0]+y,y:C[1]+b}),i&&(S=d.getRawValue(w[0]))}else{(C=l.getPointOn(v,_))&&o.attr({x:C[0]+y,y:C[1]+b});var k=d.getRawValue(w[0]),M=d.getRawValue(w[1]);i&&(S=function(e,t,a,r,i){var n=null==t||"auto"===t;if(null==r)return r;if(Zn(r))return Md(m=Hd(a||0,r,i),n?Math.max(Td(a||0),Td(r)):t);if(Kn(r))return i<1?a:r;for(var s=[],o=a,l=r,c=Math.max(o?o.length:0,l.length),d=0;d<c;++d){var u=e.getDimensionInfo(d);if(u&&"ordinal"===u.type)s[d]=(i<1&&o?o:l)[d];else{var h=o&&o[d]?o[d]:0,p=l[d],m=Hd(h,p,i);s[d]=Md(m,n?Math.max(Td(h),Td(p)):t)}}return s}(a,h,k,M,j.t))}r.lastFrameIndex=w[0]}else{var T=1===e||r.lastFrameIndex>0?w[0]:0;C=ek(c,T);i&&(S=d.getRawValue(T)),o.attr({x:C[0]+y,y:C[1]+b})}if(i){var D=Ag(o);"function"==typeof D.setLabelText&&D.setLabelText(S)}}},t.prototype._doUpdateAnimation=function(e,t,a,r,i,n,s){var o=this._polyline,l=this._polygon,c=e.hostModel,d=function(e,t,a,r,i,n,s){for(var o=function(e,t){var a=[];return t.diff(e).add(function(e){a.push({cmd:"+",idx:e})}).update(function(e,t){a.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){a.push({cmd:"-",idx:e})}).execute(),a}(e,t),l=[],c=[],d=[],u=[],h=[],p=[],m=[],f=PC(i,t,s),g=e.getLayout("points")||[],x=t.getLayout("points")||[],v=0;v<o.length;v++){var y=o[v],b=!0,_=void 0,j=void 0;switch(y.cmd){case"=":_=2*y.idx,j=2*y.idx1;var w=g[_],N=g[_+1],S=x[j],C=x[j+1];(isNaN(w)||isNaN(N))&&(w=S,N=C),l.push(w,N),c.push(S,C),d.push(a[_],a[_+1]),u.push(r[j],r[j+1]),m.push(t.getRawIndex(y.idx1));break;case"+":var k=y.idx,M=f.dataDimsForPoint,T=i.dataToPoint([t.get(M[0],k),t.get(M[1],k)]);j=2*k,l.push(T[0],T[1]),c.push(x[j],x[j+1]);var D=LC(f,i,t,k);d.push(D[0],D[1]),u.push(r[j],r[j+1]),m.push(t.getRawIndex(k));break;case"-":b=!1}b&&(h.push(y),p.push(p.length))}p.sort(function(e,t){return m[e]-m[t]});var I=l.length,A=KN(I),P=KN(I),L=KN(I),z=KN(I),E=[];for(v=0;v<p.length;v++){var R=p[v],O=2*v,F=2*R;A[O]=l[F],A[O+1]=l[F+1],P[O]=c[F],P[O+1]=c[F+1],L[O]=d[F],L[O+1]=d[F+1],z[O]=u[F],z[O+1]=u[F+1],E[v]=h[R]}return{current:A,next:P,stackedOnCurrent:L,stackedOnNext:z,status:E}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),u=d.current,h=d.stackedOnCurrent,p=d.next,m=d.stackedOnNext;if(i&&(h=XC(d.stackedOnCurrent,d.current,a,i,s),u=XC(d.current,null,a,i,s),m=XC(d.stackedOnNext,d.next,a,i,s),p=XC(d.next,null,a,i,s)),YC(u,p)>3e3||l&&YC(h,m)>3e3)return o.stopAnimation(),o.setShape({points:p}),void(l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:m})));o.shape.__points=d.current,o.shape.points=u;var f={shape:{points:p}};d.current!==u&&(f.shape.__points=d.next),o.stopAnimation(),Rf(o,f,c),l&&(l.setShape({points:u,stackedOnPoints:h}),l.stopAnimation(),Rf(l,{shape:{stackedOnPoints:m}},c),o.shape.points!==l.shape.points&&(l.shape.points=o.shape.points));for(var g=[],x=d.status,v=0;v<x.length;v++){if("="===x[v].cmd){var y=e.getItemGraphicEl(x[v].idx1);y&&g.push({el:y,ptIdx:v})}}o.animators&&o.animators.length&&o.animators[0].during(function(){l&&l.dirtyShape();for(var e=o.shape.__points,t=0;t<g.length;t++){var a=g[t].el,r=2*g[t].ptIdx;a.x=e[r],a.y=e[r+1],a.markRedraw()}})},t.prototype.remove=function(e){var t=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(e,r){e.__temp&&(t.remove(e),a.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(n_);var ik={average:function(e){for(var t=0,a=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],a++);return 0===a?NaN:t/a},sum:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a]||0;return t},max:function(e){for(var t=-1/0,a=0;a<e.length;a++)e[a]>t&&(t=e[a]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,a=0;a<e.length;a++)e[a]<t&&(t=e[a]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},nk=function(e){return Math.round(e.length/2)};function sk(e){return{seriesType:e,reset:function(e,t,a){var r=e.getData(),i=e.get("sampling"),n=e.coordinateSystem,s=r.count();if(s>10&&"cartesian2d"===n.type&&i){var o=n.getBaseAxis(),l=n.getOtherAxis(o),c=o.getExtent(),d=a.getDevicePixelRatio(),u=Math.abs(c[1]-c[0])*(d||1),h=Math.round(s/u);if(isFinite(h)&&h>1){"lttb"===i?e.setData(r.lttbDownSample(r.mapDimension(l.dim),1/h)):"minmax"===i&&e.setData(r.minmaxDownSample(r.mapDimension(l.dim),1/h));var p=void 0;Kn(i)?p=ik[i]:Yn(i)&&(p=i),p&&e.setData(r.downSample(r.mapDimension(l.dim),1/h,p,nk))}}}}}var ok=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.getInitialData=function(e,t){return TN(0,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,a){var r=this.coordinateSystem;if(r&&r.clampData){var i=r.clampData(e),n=r.dataToPoint(i);if(a)Bn(r.getAxes(),function(e,a){if("category"===e.type&&null!=t){var r=e.getTicksCoords(),s=e.getTickModel().get("alignWithLabel"),o=i[a],l="x1"===t[a]||"y1"===t[a];if(l&&!s&&(o+=1),r.length<2)return;if(2===r.length)return void(n[a]=e.toGlobalCoord(e.getExtent()[l?1:0]));for(var c=void 0,d=void 0,u=1,h=0;h<r.length;h++){var p=r[h].coord,m=h===r.length-1?r[h-1].tickValue+u:r[h].tickValue;if(m===o){d=p;break}if(m<o)c=p;else if(null!=c&&m>o){d=(p+c)/2;break}1===h&&(u=m-r[0].tickValue)}null==d&&(c?c&&(d=r[r.length-1].coord):d=r[0].coord),n[a]=e.toGlobalCoord(d)}});else{var s=this.getData(),o=s.getLayout("offset"),l=s.getLayout("size"),c=r.getBaseAxis().isHorizontal()?0:1;n[c]+=o+l/2}return n}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},t}($b);$b.registerClass(ok);var lk=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.getInitialData=function(){return TN(0,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Kg(ok.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:gv.color.primary,borderWidth:2}},realtimeSort:!1}),t}(ok),ck=function(){return function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}}(),dk=function(e){function t(t){var a=e.call(this,t)||this;return a.type="sausage",a}return pn(t,e),t.prototype.getDefaultShape=function(){return new ck},t.prototype.buildPath=function(e,t){var a=t.cx,r=t.cy,i=Math.max(t.r0||0,0),n=Math.max(t.r,0),s=.5*(n-i),o=i+s,l=t.startAngle,c=t.endAngle,d=t.clockwise,u=2*Math.PI,h=d?c-l<u:l-c<u;h||(l=c-(d?u:-u));var p=Math.cos(l),m=Math.sin(l),f=Math.cos(c),g=Math.sin(c);h?(e.moveTo(p*i+a,m*i+r),e.arc(p*o+a,m*o+r,s,-Math.PI+l,l,!d)):e.moveTo(p*n+a,m*n+r),e.arc(a,r,n,l,c,!d),e.arc(f*o+a,g*o+r,s,c-2*Math.PI,c-Math.PI,!d),0!==i&&e.arc(a,r,i,c,l,d)},t}(Qh);function uk(e,t,a){return t*Math.sin(e)*(a?-1:1)}function hk(e,t,a){return t*Math.cos(e)*(a?1:-1)}function pk(e,t,a){var r=e.get("borderRadius");if(null==r)return a?{cornerRadius:0}:null;$n(r)||(r=[r,r,r,r]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:qn(r,function(e){return rd(e,i)})}}var mk=Math.max,fk=Math.min;var gk=function(e){function t(){var a=e.call(this)||this;return a.type=t.type,a._isFirstFrame=!0,a}return pn(t,e),t.prototype.render=function(e,t,a,r){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var i=e.get("coordinateSystem");"cartesian2d"!==i&&"polar"!==i||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,r))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){pg(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,a,r){var i,n=this.group,s=e.getData(),o=this._data,l=e.coordinateSystem,c=l.getBaseAxis();"cartesian2d"===l.type?i=c.isHorizontal():"polar"===l.type&&(i="angle"===c.dim);var d=e.isAnimationEnabled()?e:null,u=function(e,t){var a=e.get("realtimeSort",!0),r=t.getBaseAxis();if(a&&"category"===r.type&&"cartesian2d"===t.type)return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}(e,l);u&&this._enableRealtimeSort(u,s,a);var h=e.get("clip",!0)||u,p=function(e,t){var a=e.getArea&&e.getArea();if(GC(e,"cartesian2d")){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(a.x-=i,a.width+=2*i):(a.y-=i,a.height+=2*i)}}return a}(l,s);n.removeClipPath();var m=e.get("roundCap",!0),f=e.get("showBackground",!0),g=e.getModel("backgroundStyle"),x=g.get("borderRadius")||0,v=[],y=this._backgroundEls,b=r&&r.isInitSort,_=r&&"changeAxisOrder"===r.type;function j(e){var t=Nk[l.type](s,e);if(!t)return null;var a=function(e,t,a){var r="polar"===e.type?af:dp;return new r({shape:Ik(t,a,e),silent:!0,z2:0})}(l,i,t);return a.useStyle(g.getItemStyle()),"cartesian2d"===l.type?a.setShape("r",x):a.setShape("cornerRadius",x),v[e]=a,a}s.diff(o).add(function(t){var a=s.getItemModel(t),r=Nk[l.type](s,t,a);if(r&&(f&&j(t),s.hasValue(t)&&wk[l.type](r))){var o=!1;h&&(o=xk[l.type](p,r));var g=vk[l.type](e,s,t,r,i,d,c.model,!1,m);u&&(g.forceLabelAnimation=!0),Ck(g,s,t,a,r,e,i,"polar"===l.type),b?g.attr({shape:r}):u?yk(u,d,g,r,t,i,!1,!1):Of(g,{shape:r},e,t),s.setItemGraphicEl(t,g),n.add(g),g.ignore=o}}).update(function(t,a){var r=s.getItemModel(t),w=Nk[l.type](s,t,r);if(w){if(f){var N=void 0;0===y.length?N=j(a):((N=y[a]).useStyle(g.getItemStyle()),"cartesian2d"===l.type?N.setShape("r",x):N.setShape("cornerRadius",x),v[t]=N);var S=Nk[l.type](s,t);Rf(N,{shape:Ik(i,S,l)},d,t)}var C=o.getItemGraphicEl(a);if(s.hasValue(t)&&wk[l.type](w)){var k=!1;if(h&&(k=xk[l.type](p,w))&&n.remove(C),C&&("sector"===C.type&&m||"sausage"===C.type&&!m)&&(C&&Vf(C,e,a),C=null),C?Hf(C):C=vk[l.type](e,s,t,w,i,d,c.model,!0,m),u&&(C.forceLabelAnimation=!0),_){var M=C.getTextContent();if(M){var T=Ag(M);null!=T.prevValue&&(T.prevValue=T.value)}}else Ck(C,s,t,r,w,e,i,"polar"===l.type);b?C.attr({shape:w}):u?yk(u,d,C,w,t,i,!0,_):Rf(C,{shape:w},e,t,null),s.setItemGraphicEl(t,C),C.ignore=k,n.add(C)}else n.remove(C)}}).remove(function(t){var a=o.getItemGraphicEl(t);a&&Vf(a,e,t)}).execute();var w=this._backgroundGroup||(this._backgroundGroup=new gd);w.removeAll();for(var N=0;N<v.length;++N)w.add(v[N]);n.add(w),this._backgroundEls=v,this._data=s},t.prototype._renderLarge=function(e,t,a){this._clear(),Tk(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Tk(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&function(e,t,a,r,i){return e?"polar"===e.type?WC(e,t,a):"cartesian2d"===e.type?HC(e,t,a,r,i):null:null}(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,a){var r=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var n=function(e){var a=t.getItemGraphicEl(e),r=a&&a.shape;return r&&Math.abs(i.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(t,n,i,a)},a.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,a){var r=[];return e.each(e.mapDimension(t.dim),function(e,t){var i=a(t);i=null==i?NaN:i,r.push({dataIndex:t,mappedValue:i,ordinalNumber:e})}),r.sort(function(e,t){return t.mappedValue-e.mappedValue}),{ordinalNumbers:qn(r,function(e){return e.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var r=a.scale,i=e.mapDimension(a.dim),n=Number.MAX_VALUE,s=0,o=r.getOrdinalMeta().categories.length;s<o;++s){var l=e.rawIndexOf(i,r.getRawOrdinalNumber(s)),c=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(c>n)return!0;n=c}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,r=a.getExtent(),i=Math.max(0,r[0]),n=Math.min(r[1],a.getOrdinalMeta().categories.length-1);i<=n;++i)if(e.ordinalNumbers[i]!==a.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,a,r){if(this._isOrderChangedWithinSameData(e,t,a)){var i=this._dataSort(e,a,t);this._isOrderDifferentInView(i,a)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,a){var r=t.baseAxis,i=this._dataSort(e,r,function(a){return e.get(e.mapDimension(t.otherAxis.dim),a)});a.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(t){Vf(t,e,Cp(t).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(n_),xk={cartesian2d:function(e,t){var a=t.width<0?-1:1,r=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,n=e.y+e.height,s=mk(t.x,e.x),o=fk(t.x+t.width,i),l=mk(t.y,e.y),c=fk(t.y+t.height,n),d=o<s,u=c<l;return t.x=d&&s>i?o:s,t.y=u&&l>n?c:l,t.width=d?0:o-s,t.height=u?0:c-l,a<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),d||u},polar:function(e,t){var a=t.r0<=t.r?1:-1;if(a<0){var r=t.r;t.r=t.r0,t.r0=r}var i=fk(t.r,e.r),n=mk(t.r0,e.r0);t.r=i,t.r0=n;var s=i-n<0;if(a<0){r=t.r;t.r=t.r0,t.r0=r}return s}},vk={cartesian2d:function(e,t,a,r,i,n,s,o,l){var c=new dp({shape:zn({},r),z2:1});(c.__dataIndex=a,c.name="item",n)&&(c.shape[i?"height":"width"]=0);return c},polar:function(e,t,a,r,i,n,s,o,l){var c=!i&&l?dk:af,d=new c({shape:r,z2:1});d.name="item";var u,h,p=Sk(i);if(d.calculateTextPosition=(u=p,h=({isRoundCap:c===dk}||{}).isRoundCap,function(e,t,a){var r=t.position;if(!r||r instanceof Array)return id(e,t,a);var i=u(r),n=null!=t.distance?t.distance:5,s=this.shape,o=s.cx,l=s.cy,c=s.r,d=s.r0,p=(c+d)/2,m=s.startAngle,f=s.endAngle,g=(m+f)/2,x=h?Math.abs(c-d)/2:0,v=Math.cos,y=Math.sin,b=o+c*v(m),_=l+c*y(m),j="left",w="top";switch(i){case"startArc":b=o+(d-n)*v(g),_=l+(d-n)*y(g),j="center",w="top";break;case"insideStartArc":b=o+(d+n)*v(g),_=l+(d+n)*y(g),j="center",w="bottom";break;case"startAngle":b=o+p*v(m)+uk(m,n+x,!1),_=l+p*y(m)+hk(m,n+x,!1),j="right",w="middle";break;case"insideStartAngle":b=o+p*v(m)+uk(m,-n+x,!1),_=l+p*y(m)+hk(m,-n+x,!1),j="left",w="middle";break;case"middle":b=o+p*v(g),_=l+p*y(g),j="center",w="middle";break;case"endArc":b=o+(c+n)*v(g),_=l+(c+n)*y(g),j="center",w="bottom";break;case"insideEndArc":b=o+(c-n)*v(g),_=l+(c-n)*y(g),j="center",w="top";break;case"endAngle":b=o+p*v(f)+uk(f,n+x,!0),_=l+p*y(f)+hk(f,n+x,!0),j="left",w="middle";break;case"insideEndAngle":b=o+p*v(f)+uk(f,-n+x,!0),_=l+p*y(f)+hk(f,-n+x,!0),j="right",w="middle";break;default:return id(e,t,a)}return(e=e||{}).x=b,e.y=_,e.align=j,e.verticalAlign=w,e}),n){var m=i?"r":"endAngle",f={};d.shape[m]=i?r.r0:r.startAngle,f[m]=r[m],(o?Rf:Of)(d,{shape:f},n)}return d}};function yk(e,t,a,r,i,n,s,o){var l,c;n?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(s?Rf:Of)(a,{shape:l},t,i,null),(s?Rf:Of)(a,{shape:c},t?e.baseAxis.model:null,i)}function bk(e,t){for(var a=0;a<t.length;a++)if(!isFinite(e[t[a]]))return!0;return!1}var _k=["x","y","width","height"],jk=["cx","cy","r","startAngle","endAngle"],wk={cartesian2d:function(e){return!bk(e,_k)},polar:function(e){return!bk(e,jk)}},Nk={cartesian2d:function(e,t,a){var r=e.getItemLayout(t);if(!r)return null;var i=a?function(e,t){var a=e.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var r=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),n=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,i,n)}(a,r):0,n=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+n*i/2,y:r.y+s*i/2,width:r.width-n*i,height:r.height-s*i}},polar:function(e,t,a){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Sk(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function Ck(e,t,a,r,i,n,s,o){var l=t.getItemVisual(a,"style");if(o){if(!n.get("roundCap")){var c=e.shape;zn(c,pk(r.getModel("itemStyle"),c,!0)),e.setShape(c)}}else{var d=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",d)}e.useStyle(l);var u=r.getShallow("cursor");u&&e.attr("cursor",u);var h=o?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Sg(r);Ng(e,p,{labelFetcher:n,labelDataIndex:a,defaultText:SC(n.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var m=e.getTextContent();if(o&&m){var f=r.get(["label","position"]);e.textConfig.inside="middle"===f||null,function(e,t,a,r){if(Zn(r))e.setTextConfig({rotation:r});else if($n(t))e.setTextConfig({rotation:0});else{var i,n=e.shape,s=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,l=(s+o)/2,c=a(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=l;break;case"startAngle":case"insideStartAngle":i=s;break;case"endAngle":case"insideEndAngle":i=o;break;default:return void e.setTextConfig({rotation:0})}var d=1.5*Math.PI-i;"middle"===c&&d>Math.PI/2&&d<1.5*Math.PI&&(d-=Math.PI),e.setTextConfig({rotation:d})}}(e,"outside"===f?h:f,Sk(s),r.get(["label","rotate"]))}!function(e,t,a,r){if(e){var i=Ag(e);i.prevValue=i.value,i.value=a;var n=t.normal;i.valueAnimation=n.get("valueAnimation"),i.valueAnimation&&(i.precision=n.get("precision"),i.defaultInterpolatedText=r,i.statesModels=t)}}(m,p,n.getRawValue(a),function(e){return CC(t,e)});var g=r.getModel(["emphasis"]);pm(e,g.get("focus"),g.get("blurScope"),g.get("disabled")),gm(e,r),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(i)&&(e.style.fill="none",e.style.stroke="none",Bn(e.states,function(e){e.style&&(e.style.fill=e.style.stroke="none")}))}var kk=function(){return function(){}}(),Mk=function(e){function t(t){var a=e.call(this,t)||this;return a.type="largeBar",a}return pn(t,e),t.prototype.getDefaultShape=function(){return new kk},t.prototype.buildPath=function(e,t){for(var a=t.points,r=this.baseDimIdx,i=1-this.baseDimIdx,n=[],s=[],o=this.barWidth,l=0;l<a.length;l+=3)s[r]=o,s[i]=a[l+2],n[r]=a[l+r],n[i]=a[l+i],e.rect(n[0],n[1],s[0],s[1])},t}(Qh);function Tk(e,t,a,r){var i=e.getData(),n=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),o=i.getLayout("size"),l=e.getModel("backgroundStyle"),c=i.getLayout("largeBackgroundPoints");if(c){var d=new Mk({shape:{points:c},incremental:!!r,silent:!0,z2:0});d.baseDimIdx=n,d.largeDataIndices=s,d.barWidth=o,d.useStyle(l.getItemStyle()),t.add(d),a&&a.push(d)}var u=new Mk({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=n,u.largeDataIndices=s,u.barWidth=o,t.add(u),u.useStyle(i.getVisual("style")),u.style.stroke=null,Cp(u).seriesIndex=e.seriesIndex,e.get("silent")||(u.on("mousedown",Dk),u.on("mousemove",Dk)),a&&a.push(u)}var Dk=m_(function(e){var t=function(e,t,a){for(var r=e.baseDimIdx,i=1-r,n=e.shape.points,s=e.largeDataIndices,o=[],l=[],c=e.barWidth,d=0,u=n.length/3;d<u;d++){var h=3*d;if(l[r]=c,l[i]=n[h+2],o[r]=n[h+r],o[i]=n[h+i],l[i]<0&&(o[i]+=l[i],l[i]=-l[i]),t>=o[0]&&t<=o[0]+l[0]&&a>=o[1]&&a<=o[1]+l[1])return s[d]}return-1}(this,e.offsetX,e.offsetY);Cp(this).dataIndex=t>=0?t:null},30,!1);function Ik(e,t,a){if(GC(a,"cartesian2d")){var r=t,i=a.getArea();return{x:e?r.x:i.x,y:e?i.y:r.y,width:e?r.width:i.width,height:e?i.height:r.height}}var n=t;return{cx:(i=a.getArea()).cx,cy:i.cy,r0:e?i.r0:n.r0,r:e?i.r:n.r,startAngle:e?n.startAngle:0,endAngle:e?n.endAngle:2*Math.PI}}function Ak(e){e.registerChartView(gk),e.registerSeriesModel(lk),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,Un(eS,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,{seriesType:"bar",plan:a_(),reset:function(e){if(tS(e)){var t=e.getData(),a=e.coordinateSystem,r=a.getBaseAxis(),i=a.getOtherAxis(r),n=t.getDimensionIndex(t.mapDimension(i.dim)),s=t.getDimensionIndex(t.mapDimension(r.dim)),o=e.get("showBackground",!0),l=t.mapDimension(i.dim),c=t.getCalculationInfo("stackResultDimension"),d=MN(t,l)&&!!t.getCalculationInfo("stackedOnSeries"),u=i.isHorizontal(),h=function(e,t){var a=t.model.get("startValue");return a||(a=0),t.toGlobalCoord(t.dataToCoord("log"===t.type?a>0?a:1:a))}(0,i),p=aS(e),m=e.get("barMinHeight")||0,f=c&&t.getDimensionIndex(c),g=t.getLayout("size"),x=t.getLayout("offset");return{progress:function(e,t){for(var r,i=e.count,l=p&&KN(3*i),c=p&&o&&KN(3*i),v=p&&KN(i),y=a.master.getRect(),b=u?y.width:y.height,_=t.getStore(),j=0;null!=(r=e.next());){var w=_.get(d?f:n,r),N=_.get(s,r),S=h,C=void 0;d&&(C=+w-_.get(n,r));var k=void 0,M=void 0,T=void 0,D=void 0;if(u){var I=a.dataToPoint([w,N]);d&&(S=a.dataToPoint([C,N])[0]),k=S,M=I[1]+x,T=I[0]-S,D=g,Math.abs(T)<m&&(T=(T<0?-1:1)*m)}else I=a.dataToPoint([N,w]),d&&(S=a.dataToPoint([N,C])[1]),k=I[0]+x,M=S,T=g,D=I[1]-S,Math.abs(D)<m&&(D=(D<=0?-1:1)*m);p?(l[j]=k,l[j+1]=M,l[j+2]=u?T:D,c&&(c[j]=u?y.x:k,c[j+1]=u?M:y.y,c[j+2]=b),v[r]=r):t.setItemLayout(r,{x:k,y:M,width:T,height:D}),j+=3}p&&t.setLayout({largePoints:l,largeDataIndices:v,largeBackgroundPoints:c,valueAxisHorizontal:u})}}}}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,sk("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)})})}var Pk=2*Math.PI,Lk=Math.PI/180;function zk(e,t,a){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension("value"),i=ov(e,a),n=i.cx,s=i.cy,o=i.r,l=i.r0,c=i.viewRect,d=-e.get("startAngle")*Lk,u=e.get("endAngle"),h=e.get("padAngle")*Lk;u="auto"===u?d-Pk:-u*Lk;var p=e.get("minAngle")*Lk+h,m=0;t.each(r,function(e){!isNaN(e)&&m++});var f=t.getSum(r),g=Math.PI/(f||m)*2,x=e.get("clockwise"),v=e.get("roseType"),y=e.get("stillShowZeroSum"),b=t.getDataExtent(r);b[0]=0;var _=x?1:-1,j=[d,u],w=_*h/2;Dh(j,!x),d=j[0],u=j[1];var N=Ek(e);N.startAngle=d,N.endAngle=u,N.clockwise=x,N.cx=n,N.cy=s,N.r=o,N.r0=l;var S=Math.abs(u-d),C=S,k=0,M=d;if(t.setLayout({viewRect:c,r:o}),t.each(r,function(e,a){var r;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:n,cy:s,r0:l,r:v?NaN:o});else{(r="area"!==v?0===f&&y?g:e*g:S/m)<p?(r=p,C-=p):k+=e;var i=M+_*r,c=0,d=0;h>r?d=c=M+_*r/2:(c=M+w,d=i-w),t.setItemLayout(a,{angle:r,startAngle:c,endAngle:d,clockwise:x,cx:n,cy:s,r0:l,r:v?Sd(e,b,[l,o]):o}),M=i}}),C<Pk&&m)if(C<=.001){var T=S/m;t.each(r,function(e,a){if(!isNaN(e)){var r=t.getItemLayout(a);r.angle=T;var i=0,n=0;T<h?n=i=d+_*(a+.5)*T:(i=d+_*a*T+w,n=d+_*(a+1)*T-w),r.startAngle=i,r.endAngle=n}})}else g=C/k,M=d,t.each(r,function(e,a){if(!isNaN(e)){var r=t.getItemLayout(a),i=r.angle===p?p:e*g,n=0,s=0;i<h?s=n=M+_*i/2:(n=M+w,s=M+_*i-w),r.startAngle=n,r.endAngle=s,M+=_*i}})})}var Ek=ru();var Rk=Math.PI/180;function Ok(e,t,a,r,i,n,s,o,l,c){if(!(e.length<2)){for(var d=e.length,u=0;u<d;u++)if("outer"===e[u].position&&"labelLine"===e[u].labelAlignTo){var h=e[u].label.x-c;e[u].linePoints[1][0]+=h,e[u].label.x=c}(function(e,t,a,r){var i=e.length,n=Gf[t],s=Uf[t];if(i<2)return!1;e.sort(function(e,t){return e.rect[n]-t.rect[n]});for(var o,l=0,c=!1,d=0;d<i;d++){var u=e[d],h=u.rect;(o=h[n]-l)<0&&(h[n]-=o,u.label[n]-=o,c=!0),l=h[n]+h[s]}var p,m,f=e[0],g=e[i-1];function x(){p=f.rect[n]-a,m=r-g.rect[n]-g.rect[s]}function v(e,t,a){if(e<0){var r=Math.min(t,-e);if(r>0){y(r*a,0,i);var n=r+e;n<0&&b(-n*a,1)}else b(-e*a,1)}}function y(t,a,r){0!==t&&(c=!0);for(var i=a;i<r;i++){var s=e[i];s.rect[n]+=t,s.label[n]+=t}}function b(t,a){for(var r=[],o=0,l=1;l<i;l++){var c=e[l-1].rect,d=Math.max(e[l].rect[n]-c[n]-c[s],0);r.push(d),o+=d}if(o){var u=Math.min(Math.abs(t)/o,a);if(t>0)for(l=0;l<i-1;l++)y(r[l]*u,0,l+1);else for(l=i-1;l>0;l--)y(-r[l-1]*u,l,i)}}function _(e){var t=e<0?-1:1;e=Math.abs(e);for(var a=Math.ceil(e/(i-1)),r=0;r<i-1;r++)if(t>0?y(a,0,r+1):y(-a,i-r-1,i),(e-=a)<=0)return}return x(),p<0&&b(-p,.8),m<0&&b(m,.8),x(),v(p,m,1),v(m,p,-1),x(),p<0&&_(-p),m<0&&_(m),c})(e,1,l,l+s)&&function(e){for(var n={list:[],maxY:0},s={list:[],maxY:0},o=0;o<e.length;o++)if("none"===e[o].labelAlignTo){var l=e[o],c=l.label.y>a?s:n,d=Math.abs(l.label.y-a);if(d>=c.maxY){var u=l.label.x-t-l.len2*i,h=r+l.len,m=Math.abs(u)<h?Math.sqrt(d*d/(1-u*u/h/h)):h;c.rB=m,c.maxY=d}c.list.push(l)}p(n),p(s)}(e)}function p(e){for(var n=e.rB,s=n*n,o=0;o<e.list.length;o++){var l=e.list[o],c=Math.abs(l.label.y-a),d=r+l.len,u=d*d,h=Math.sqrt(Math.abs((1-c*c/s)*u)),p=t+(h+l.len2)*i,m=p-l.label.x;Fk(l,l.targetTextWidth-m*i,!0),l.label.x=p}}}function Fk(e,t,a){if(null==e.labelStyleWidth){var r=e.label,i=r.style,n=e.rect,s=i.backgroundColor,o=i.padding,l=o?o[1]+o[3]:0,c=i.overflow,d=n.width+(s?0:l);if(t<d||a){if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var u=r.getBoundingRect();r.setStyle("width",Math.ceil(u.width)),r.setStyle("backgroundColor",s)}else{var h=t-l,p=t<d?h:a?h>e.unconstrainedWidth?null:h:null;r.setStyle("width",p)}Bk(n,r)}}}function Bk(e,t){Vk.rect=e,yC(Vk,t,qk)}var qk={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},Vk={};function Hk(e){return"center"===e.position}function Wk(e){var t,a,r=e.getData(),i=[],n=!1,s=(e.get("minShowLabelAngle")||0)*Rk,o=r.getLayout("viewRect"),l=r.getLayout("r"),c=o.width,d=o.x,u=o.y,h=o.height;function p(e){e.ignore=!0}r.each(function(e){var o=r.getItemGraphicEl(e),u=o.shape,m=o.getTextContent(),f=o.getTextGuideLine(),g=r.getItemModel(e),x=g.getModel("label"),v=x.get("position")||g.get(["emphasis","label","position"]),y=x.get("distanceToLabelLine"),b=x.get("alignTo"),_=Cd(x.get("edgeDistance"),c),j=x.get("bleedMargin");null==j&&(j=Math.min(c,h)>200?10:2);var w=g.getModel("labelLine"),N=w.get("length");N=Cd(N,c);var S=w.get("length2");if(S=Cd(S,c),Math.abs(u.endAngle-u.startAngle)<s)return Bn(m.states,p),m.ignore=!0,void(f&&(Bn(f.states,p),f.ignore=!0));if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(m)){var C,k,M,T,D=(u.startAngle+u.endAngle)/2,I=Math.cos(D),A=Math.sin(D);t=u.cx,a=u.cy;var P="inside"===v||"inner"===v;if("center"===v)C=u.cx,k=u.cy,T="center";else{var L=(P?(u.r+u.r0)/2*I:u.r*I)+t,z=(P?(u.r+u.r0)/2*A:u.r*A)+a;if(C=L+3*I,k=z+3*A,!P){var E=L+I*(N+l-u.r),R=z+A*(N+l-u.r),O=E+(I<0?-1:1)*S;C="edge"===b?I<0?d+_:d+c-_:O+(I<0?-y:y),k=R,M=[[L,z],[E,R],[O,R]]}T=P?"center":"edge"===b?I>0?"right":"left":I>0?"left":"right"}var F=Math.PI,B=0,q=x.get("rotate");if(Zn(q))B=q*(F/180);else if("center"===v)B=0;else if("radial"===q||!0===q){B=I<0?-D+F:-D}else if("tangential"===q&&"outside"!==v&&"outer"!==v){var V=Math.atan2(I,A);V<0&&(V=2*F+V),A>0&&(V=F+V),B=V-F}if(n=!!B,m.x=C,m.y=k,m.rotation=B,m.setStyle({verticalAlign:"middle"}),P){m.setStyle({align:T});var H=m.states.select;H&&(H.x+=m.x,H.y+=m.y)}else{var W=new Do(0,0,0,0);Bk(W,m),i.push({label:m,labelLine:f,position:v,len:N,len2:S,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new go(I,A),linePoints:M,textAlign:T,labelDistance:y,labelAlignTo:b,edgeDistance:_,bleedMargin:j,rect:W,unconstrainedWidth:W.width,labelStyleWidth:m.style.width})}o.setTextConfig({inside:P})}}),!n&&e.get("avoidLabelOverlap")&&function(e,t,a,r,i,n,s,o){for(var l=[],c=[],d=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=0;h<e.length;h++){var p=e[h].label;Hk(e[h])||(p.x<t?(d=Math.min(d,p.x),l.push(e[h])):(u=Math.max(u,p.x),c.push(e[h])))}for(h=0;h<e.length;h++)if(!Hk(g=e[h])&&g.linePoints){if(null!=g.labelStyleWidth)continue;p=g.label;var m=g.linePoints,f=void 0;f="edge"===g.labelAlignTo?p.x<t?m[2][0]-g.labelDistance-s-g.edgeDistance:s+i-g.edgeDistance-m[2][0]-g.labelDistance:"labelLine"===g.labelAlignTo?p.x<t?d-s-g.bleedMargin:s+i-u-g.bleedMargin:p.x<t?p.x-s-g.bleedMargin:s+i-p.x-g.bleedMargin,g.targetTextWidth=f,Fk(g,f,!1)}for(Ok(c,t,a,r,1,0,n,0,o,u),Ok(l,t,a,r,-1,0,n,0,o,d),h=0;h<e.length;h++){var g;if(!Hk(g=e[h])&&g.linePoints){p=g.label,m=g.linePoints;var x="edge"===g.labelAlignTo,v=p.style.padding,y=v?v[1]+v[3]:0,b=p.style.backgroundColor?0:y,_=g.rect.width+b,j=m[1][0]-m[2][0];x?p.x<t?m[2][0]=s+g.edgeDistance+_+g.labelDistance:m[2][0]=s+i-g.edgeDistance-_-g.labelDistance:(p.x<t?m[2][0]=p.x+g.labelDistance:m[2][0]=p.x-g.labelDistance,m[1][0]=m[2][0]+j),m[1][1]=m[2][1]=p.y}}}(i,t,a,l,c,h,d,u);for(var m=0;m<i.length;m++){var f=i[m],g=f.label,x=f.labelLine,v=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:f.textAlign}),v&&(Bn(g.states,p),g.ignore=!0);var y=g.states.select;y&&(y.x+=g.x,y.y+=g.y)}if(x){var b=f.linePoints;v||!b?(Bn(x.states,p),x.ignore=!0):(uC(b,f.minTurnAngle),hC(b,f.surfaceNormal,f.maxSurfaceAngle),x.setShape({points:b}),g.__hostTarget.textGuideLineConfig={anchor:new go(b[0][0],b[0][1])})}}}var Gk=function(e){function t(t,a,r){var i=e.call(this)||this;i.z2=2;var n=new mp;return i.setTextContent(n),i.updateData(t,a,r,!0),i}return pn(t,e),t.prototype.updateData=function(e,t,a,r){var i=this,n=e.hostModel,s=e.getItemModel(t),o=s.getModel("emphasis"),l=e.getItemLayout(t),c=zn(pk(s.getModel("itemStyle"),l,!0),l);if(isNaN(c.startAngle))i.setShape(c);else{if(r){i.setShape(c);var d=n.getShallow("animationType");n.ecModel.ssr?(Of(i,{scaleX:0,scaleY:0},n,{dataIndex:t,isFrom:!0}),i.originX=c.cx,i.originY=c.cy):"scale"===d?(i.shape.r=l.r0,Of(i,{shape:{r:l.r}},n,t)):null!=a?(i.setShape({startAngle:a,endAngle:a}),Of(i,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},n,t)):(i.shape.endAngle=l.startAngle,Rf(i,{shape:{endAngle:l.endAngle}},n,t))}else Hf(i),Rf(i,{shape:c},n,t);i.useStyle(e.getItemVisual(t,"style")),gm(i,s);var u=(l.startAngle+l.endAngle)/2,h=n.get("selectedOffset"),p=Math.cos(u)*h,m=Math.sin(u)*h,f=s.getShallow("cursor");f&&i.attr("cursor",f),this._updateLabel(n,e,t),i.ensureState("emphasis").shape=zn({r:l.r+(o.get("scale")&&o.get("scaleSize")||0)},pk(o.getModel("itemStyle"),l)),zn(i.ensureState("select"),{x:p,y:m,shape:pk(s.getModel(["select","itemStyle"]),l)}),zn(i.ensureState("blur"),{shape:pk(s.getModel(["blur","itemStyle"]),l)});var g=i.getTextGuideLine(),x=i.getTextContent();g&&zn(g.ensureState("select"),{x:p,y:m}),zn(x.ensureState("select"),{x:p,y:m}),pm(this,o.get("focus"),o.get("blurScope"),o.get("disabled"))}},t.prototype._updateLabel=function(e,t,a){var r=this,i=t.getItemModel(a),n=i.getModel("labelLine"),s=t.getItemVisual(a,"style"),o=s&&s.fill,l=s&&s.opacity;Ng(r,Sg(i),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:o,defaultOpacity:l,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var c=r.getTextContent();r.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=i.get(["label","position"]);if("outside"!==d&&"outer"!==d)r.removeTextGuideLine();else{var u=this.getTextGuideLine();u||(u=new df,this.setTextGuideLine(u)),function(e,t,a){var r=e.getTextGuideLine(),i=e.getTextContent();if(i){for(var n=t.normal,s=n.get("show"),o=i.ignore,l=0;l<Ap.length;l++){var c=Ap[l],d=t[c],u="normal"===c;if(d){var h=d.get("show");if((u?o:ns(i.states[c]&&i.states[c].ignore,o))||!ns(h,s)){var p=u?r:r&&r.states[c];p&&(p.ignore=!0),r&&pC(r,!0,c,d);continue}r||(r=new df,e.setTextGuideLine(r),u||!o&&s||pC(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),pC(r,!1,c,d)}}if(r){En(r.style,a),r.style.fill=null;var m=n.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=m||!1,r.buildPath=mC}}else r&&e.removeTextGuideLine()}(this,function(e,t){t=t||"labelLine";for(var a={normal:e.getModel(t)},r=0;r<Ip.length;r++){var i=Ip[r];a[i]=e.getModel([i,t])}return a}(i),{stroke:o,opacity:ss(n.get(["lineStyle","opacity"]),l,1)})}},t}(af),Uk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return pn(t,e),t.prototype.render=function(e,t,a,r){var i,n=e.getData(),s=this._data,o=this.group;if(!s&&n.count()>0){for(var l=n.getItemLayout(0),c=1;isNaN(l&&l.startAngle)&&c<n.count();++c)l=n.getItemLayout(c);l&&(i=l.startAngle)}if(this._emptyCircleSector&&o.remove(this._emptyCircleSector),0===n.count()&&e.get("showEmptyCircle")){var d=Ek(e),u=new af({shape:Pn(d)});u.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,o.add(u)}n.diff(s).add(function(e){var t=new Gk(n,e,i);n.setItemGraphicEl(e,t),o.add(t)}).update(function(e,t){var a=s.getItemGraphicEl(t);a.updateData(n,e,i),a.off("click"),o.add(a),n.setItemGraphicEl(e,a)}).remove(function(t){Vf(s.getItemGraphicEl(t),e,t)}).execute(),Wk(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=n)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var a=t.getData().getItemLayout(0);if(a){var r=e[0]-a.cx,i=e[1]-a.cy,n=Math.sqrt(r*r+i*i);return n<=a.r&&n>=a.r0}},t.type="pie",t}(n_);var $k,Yk=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),Kk=ru(),Xk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Yk(Gn(this.getData,this),Gn(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return function(e,t,a){t=$n(t)&&{coordDimensions:t}||zn({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=jN(r,t).dimensions,n=new _N(i,e);return n.initData(r,a),n}(this,{coordDimensions:["value"],encodeDefaulter:Un(Fv,this)})},t.prototype.getDataParams=function(t){var a=this.getData(),r=Kk(a),i=r.seats;if(!i){var n=[];a.each(a.mapDimension("value"),function(e){n.push(e)}),i=r.seats=function(e,t){var a=Vn(e,function(e,t){return e+(isNaN(t)?0:t)},0);if(0===a)return[];for(var r=Math.pow(10,t),i=qn(e,function(e){return(isNaN(e)?0:e)/a*r*100}),n=100*r,s=qn(i,function(e){return Math.floor(e)}),o=Vn(s,function(e,t){return e+t},0),l=qn(i,function(e,t){return e-s[t]});o<n;){for(var c=Number.NEGATIVE_INFINITY,d=null,u=0,h=l.length;u<h;++u)l[u]>c&&(c=l[u],d=u);++s[d],l[d]=0,++o}return qn(s,function(e){return e/r})}(n,a.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,t);return s.percent=i[t]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){Ud(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}($b);$k={fullType:Xk.type,getCoord2:function(e){return e.getShallow("center")}},Zx.set($k.fullType,{getCoord2:void 0}).getCoord2=$k.getCoord2;var Zk={left:0,right:0,top:0,bottom:0},Qk=["25%","25%"],Jk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.mergeDefaultAndTheme=function(t,a){var r=pv(t.outerBounds);e.prototype.mergeDefaultAndTheme.apply(this,arguments),r&&t.outerBounds&&hv(t.outerBounds,r)},t.prototype.mergeOption=function(t,a){e.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&hv(this.option.outerBounds,t.outerBounds)},t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:Zk,outerBoundsContain:"all",outerBoundsClampWidth:Qk[0],outerBoundsClampHeight:Qk[1],backgroundColor:gv.color.transparent,borderWidth:1,borderColor:gv.color.neutral30},t}(fv),eM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ou).models[0]},t.type="cartesian2dAxis",t}(fv);On(eM,AS);var tM={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:gv.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:gv.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:gv.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[gv.color.backgroundTint,gv.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:gv.color.neutral00,borderColor:gv.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},aM=Ln({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},tM),rM=Ln({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:gv.color.axisMinorSplitLine,width:1}}},tM);const iM={category:aM,value:rM,time:Ln({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},rM),log:En({logBase:10},rM)};var nM={value:1,category:1,time:1,log:1};function sM(e,t,a,r){Bn(nM,function(i,n){var s=Ln(Ln({},iM[n],!0),r,!0),o=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t+"Axis."+n,a}return pn(a,e),a.prototype.mergeDefaultAndTheme=function(e,t){var a=uv(this),r=a?pv(e):{};Ln(e,t.getTheme().get(n+"Axis")),Ln(e,this.getDefaultOption()),e.type=oM(e),a&&hv(e,r,a)},a.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=VN.createByAxisModel(this))},a.prototype.getCategories=function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},a.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},a.prototype.updateAxisBreaks=function(e){return{breaks:[]}},a.type=t+"Axis."+n,a.defaultOption=s,a}(a);e.registerComponentModel(o)}),e.registerSubTypeDefaulter(t+"Axis",oM)}function oM(e){return e.type||(e.data?"category":"value")}var lM=function(){function e(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return e.prototype.getAxis=function(e){return this._axes[e]},e.prototype.getAxes=function(){return qn(this._dimList,function(e){return this._axes[e]},this)},e.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Hn(this.getAxes(),function(t){return t.scale.type===e})},e.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},e}(),cM=["x","y"];function dM(e){return("interval"===e.type||"time"===e.type)&&!e.hasBreaks()}var uM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=cM,t}return pn(t,e),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,t=this.getAxis("y").scale;if(dM(e)&&dM(t)){var a=e.getExtent(),r=t.getExtent(),i=this.dataToPoint([a[0],r[0]]),n=this.dataToPoint([a[1],r[1]]),s=a[1]-a[0],o=r[1]-r[0];if(s&&o){var l=(n[0]-i[0])/s,c=(n[1]-i[1])/o,d=i[0]-a[0]*l,u=i[1]-r[0]*c,h=this._transform=[l,0,0,c,d,u];this._invTransform=fo([],h)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var t=this.getAxis("x"),a=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&a.contain(a.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,t){var a=this.dataToPoint(e),r=this.dataToPoint(t),i=this.getArea(),n=new Do(a[0],a[1],r[0]-a[0],r[1]-a[1]);return i.intersect(n)},t.prototype.dataToPoint=function(e,t,a){a=a||[];var r=e[0],i=e[1];if(this._transform&&null!=r&&isFinite(r)&&null!=i&&isFinite(i))return zs(a,e,this._transform);var n=this.getAxis("x"),s=this.getAxis("y");return a[0]=n.toGlobalCoord(n.dataToCoord(r,t)),a[1]=s.toGlobalCoord(s.dataToCoord(i,t)),a},t.prototype.clampData=function(e,t){var a=this.getAxis("x").scale,r=this.getAxis("y").scale,i=a.getExtent(),n=r.getExtent(),s=a.parse(e[0]),o=r.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(i[0],i[1]),s),Math.max(i[0],i[1])),t[1]=Math.min(Math.max(Math.min(n[0],n[1]),o),Math.max(n[0],n[1])),t},t.prototype.pointToData=function(e,t,a){if(a=a||[],this._invTransform)return zs(a,e,this._invTransform);var r=this.getAxis("x"),i=this.getAxis("y");return a[0]=r.coordToData(r.toLocalCoord(e[0]),t),a[1]=i.coordToData(i.toLocalCoord(e[1]),t),a},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(e){e=e||0;var t=this.getAxis("x").getGlobalExtent(),a=this.getAxis("y").getGlobalExtent(),r=Math.min(t[0],t[1])-e,i=Math.min(a[0],a[1])-e,n=Math.max(t[0],t[1])-r+e,s=Math.max(a[0],a[1])-i+e;return new Do(r,i,n,s)},t}(lM),hM=function(e){function t(t,a,r,i,n){var s=e.call(this,t,a,r)||this;return s.index=0,s.type=i||"value",s.position=n||"bottom",s}return pn(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},t.prototype.pointToData=function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(tC),pM="expandAxisBreak",mM=Math.PI,fM=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],gM=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],xM=ru(),vM=ru(),yM=function(){function e(e){this.recordMap={},this.resolveAxisNameOverlap=e}return e.prototype.ensureRecord=function(e){var t=e.axis.dim,a=e.componentIndex,r=this.recordMap,i=r[t]||(r[t]=[]);return i[a]||(i[a]={ready:{}})},e}();var bM=[1,0,0,1,0,0],_M=new Do(0,0,0,0),jM=function(e,t,a,r,i,n){if(TS(e.nameLocation)){var s=n.stOccupiedRect;s&&wM((o={},l=s,c=n.transGroup.transform,o.transform=xg(o.transform,c),o.localRect=gg(o.localRect,l),o.rect=gg(o.rect,l),c&&o.rect.applyTransform(c),o.axisAligned=mg(c),o.obb=void 0,(o.label=o.label||{}).ignore=!1,o),r,i)}else NM(n.labelInfoList,n.dirVec,r,i);var o,l,c};function wM(e,t,a){var r=new go;wC(e,t,r,{direction:Math.atan2(a.y,a.x),bidirectional:!1,touchThreshold:.05})&&function(e,t){if(e){e.label.x+=t.x,e.label.y+=t.y,e.label.markRedraw();var a=e.transform;a&&(a[4]+=t.x,a[5]+=t.y);var r=e.rect;r&&(r.x+=t.x,r.y+=t.y);var i=e.obb;i&&i.fromBoundingRect(e.localRect,a)}}(t,r)}function NM(e,t,a,r){for(var i=go.dot(r,t)>=0,n=0,s=e.length;n<s;n++){var o=e[i?n:s-1-n];o.label.ignore||wM(o,a,r)}}var SM=function(){function e(e,t,a,r){this.group=new gd,this._axisModel=e,this._api=t,this._local={},this._shared=r||new yM(jM),this._resetCfgDetermined(a)}return e.prototype.updateCfg=function(e){var t=this._cfg.raw;t.position=e.position,t.labelOffset=e.labelOffset,this._resetCfgDetermined(t)},e.prototype.__getRawCfg=function(){return this._cfg.raw},e.prototype._resetCfgDetermined=function(e){var t=this._axisModel,a=t.getDefaultOption?t.getDefaultOption():{},r=ns(e.axisName,t.get("name")),i=t.get("nameMoveOverlap");null!=i&&"auto"!==i||(i=ns(e.defaultNameMoveOverlap,!0));var n={raw:e,position:e.position,rotation:e.rotation,nameDirection:ns(e.nameDirection,1),tickDirection:ns(e.tickDirection,1),labelDirection:ns(e.labelDirection,1),labelOffset:ns(e.labelOffset,0),silent:ns(e.silent,!0),axisName:r,nameLocation:ss(t.get("nameLocation"),a.nameLocation,"end"),shouldNameMoveOverlap:EM(r)&&i,optionHideOverlap:t.get(["axisLabel","hideOverlap"]),showMinorTicks:t.get(["minorTick","show"])};this._cfg=n;var s=new gd({x:n.position[0],y:n.position[1],rotation:n.rotation});s.updateTransform(),this._transformGroup=s;var o=this._shared.ensureRecord(t);o.transGroup=this._transformGroup,o.dirVec=new go(Math.cos(-n.rotation),Math.sin(-n.rotation))},e.prototype.build=function(e,t){var a=this;return e||(e={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),Bn(CM,function(r){e[r]&&kM[r](a._cfg,a._local,a._shared,a._axisModel,a.group,a._transformGroup,a._api,t||{})}),this},e.innerTextLayout=function(e,t,a){var r,i,n=Id(t-e);return Ad(n)?(i=a>0?"top":"bottom",r="center"):Ad(n-mM)?(i=a>0?"bottom":"top",r="center"):(i="middle",r=n>0&&n<mM?a>0?"right":"left":a>0?"left":"right"),{rotation:n,textAlign:r,textVerticalAlign:i}},e.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},e.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},e}(),CM=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],kM={axisLine:function(e,t,a,r,i,n,s){var o=r.get(["axisLine","show"]);if("auto"===o&&(o=!0,null!=e.raw.axisLineAutoShow&&(o=!!e.raw.axisLineAutoShow)),o){var l=r.axis.getExtent(),c=n.transform,d=[l[0],0],u=[l[1],0],h=d[0]>u[0];c&&(zs(d,d,c),zs(u,u,c));var p=zn({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),m={strokeContainThreshold:e.raw.strokeContainThreshold||5,silent:!0,z2:1,style:p};if(r.get(["axisLine","breakLine"])&&r.axis.scale.hasBreaks())null.buildAxisBreakLine(r,i,n,m);else{var f=new pf(zn({shape:{x1:d[0],y1:d[1],x2:u[0],y2:u[1]}},m));eg(f.shape,f.style.lineWidth),f.anid="line",i.add(f)}var g=r.get(["axisLine","symbol"]);if(null!=g){var x=r.get(["axisLine","symbolSize"]);Kn(g)&&(g=[g,g]),(Kn(x)||Zn(x))&&(x=[x,x]);var v=pj(r.get(["axisLine","symbolOffset"])||0,x),y=x[0],b=x[1];Bn([{rotate:e.rotation+Math.PI/2,offset:v[0],r:0},{rotate:e.rotation-Math.PI/2,offset:v[1],r:Math.sqrt((d[0]-u[0])*(d[0]-u[0])+(d[1]-u[1])*(d[1]-u[1]))}],function(t,a){if("none"!==g[a]&&null!=g[a]){var r=hj(g[a],-y/2,-b/2,y,b,p.stroke,!0),n=t.r+t.offset,s=h?u:d;r.attr({rotation:t.rotate,x:s[0]+n*Math.cos(e.rotation),y:s[1]-n*Math.sin(e.rotation),silent:!0,z2:11}),i.add(r)}})}}},axisTickLabelEstimate:function(e,t,a,r,i,n,s,o){IM(t,i,o)&&MM(e,t,a,r,i,n,s,OS)},axisTickLabelDetermine:function(e,t,a,r,i,n,s,o){IM(t,i,o)&&MM(e,t,a,r,i,n,s,FS);var l=function(e,t,a,r){var i=r.axis,n=r.getModel("axisTick"),s=n.get("show");"auto"===s&&(s=!0,null!=e.raw.axisTickAutoShow&&(s=!!e.raw.axisTickAutoShow));if(!s||i.scale.isBlank())return[];for(var o=n.getModel("lineStyle"),l=e.tickDirection*n.get("length"),c=DM(i.getTicksCoords(),a.transform,l,En(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<c.length;d++)t.add(c[d]);return c}(e,i,n,r);!function(e,t,a){if(e.showMinorTicks)return;Bn(t,function(e){if(e&&e.label.ignore)for(var t=0;t<a.length;t++){var r=a[t],i=vM(r),n=xM(e.label);if(null!=i.tickValue&&!i.onBand&&i.tickValue===n.tickValue)return void TM(r)}})}(e,t.labelLayoutList,l),function(e,t,a,r,i){var n=r.axis,s=r.getModel("minorTick");if(!e.showMinorTicks||n.scale.isBlank())return;var o=n.getMinorTicksCoords();if(!o.length)return;for(var l=s.getModel("lineStyle"),c=i*s.get("length"),d=En(l.getLineStyle(),En(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var h=DM(o[u],a.transform,c,d,"minorticks_"+u),p=0;p<h.length;p++)t.add(h[p])}(e,i,n,r,e.tickDirection)},axisName:function(e,t,a,r,i,n,s,o){var l=a.ensureRecord(r);t.nameEl&&(i.remove(t.nameEl),t.nameEl=l.nameLayout=l.nameLocation=null);var c=e.axisName;if(EM(c)){var d=e.nameLocation,u=e.nameDirection,h=r.getModel("nameTextStyle"),p=r.get("nameGap")||0,m=r.axis.getExtent(),f=r.axis.inverse?-1:1,g=new go(0,0),x=new go(0,0);"start"===d?(g.x=m[0]-f*p,x.x=-f):"end"===d?(g.x=m[1]+f*p,x.x=f):(g.x=(m[0]+m[1])/2,g.y=e.labelOffset+u*p,x.y=u);var v=[1,0,0,1,0,0];x.transform(mo(v,v,e.rotation));var y,b,_=r.get("nameRotate");null!=_&&(_=_*mM/180),TS(d)?y=SM.innerTextLayout(e.rotation,null!=_?_:e.rotation,u):(y=function(e,t,a,r){var i,n,s=Id(a-e),o=r[0]>r[1],l="start"===t&&!o||"start"!==t&&o;Ad(s-mM/2)?(n=l?"bottom":"top",i="center"):Ad(s-1.5*mM)?(n=l?"top":"bottom",i="center"):(n="middle",i=s<1.5*mM&&s>mM/2?l?"left":"right":l?"right":"left");return{rotation:s,textAlign:i,textVerticalAlign:n}}(e.rotation,d,_||0,m),null!=(b=e.raw.axisNameAvailableWidth)&&(b=Math.abs(b/Math.sin(y.rotation)),!isFinite(b)&&(b=null)));var j=h.getFont(),w=r.get("nameTruncate",!0)||{},N=w.ellipsis,S=is(e.raw.nameTruncateMaxWidth,w.maxWidth,b),C=o.nameMarginLevel||0,k=new mp({x:g.x,y:g.y,rotation:y.rotation,silent:SM.isLabelSilent(r),style:Cg(h,{text:c,font:j,overflow:"truncate",width:S,ellipsis:N,fill:h.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:h.get("align")||y.textAlign,verticalAlign:h.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(ug({el:k,componentModel:r,itemName:c}),k.__fullText=c,k.anid="name",r.get("triggerEvent")){var M=SM.makeAxisEventDataBase(r);M.targetType="axisName",M.name=c,Cp(k).eventData=M}n.add(k),k.updateTransform(),t.nameEl=k;var T=l.nameLayout=vC({label:k,priority:k.z2,defaultAttr:{ignore:k.ignore},marginDefault:TS(d)?fM[C]:gM[C]});if(l.nameLocation=d,i.add(k),k.decomposeTransform(),e.shouldNameMoveOverlap&&T){var D=a.ensureRecord(r);a.resolveAxisNameOverlap(e,a,r,T,x,D)}}}};function MM(e,t,a,r,i,n,s,o){AM(t)||function(e,t,a,r,i,n){var s=i.axis,o=is(e.raw.axisLabelShow,i.get(["axisLabel","show"])),l=new gd;a.add(l);var c=BS(r);if(!o||s.scale.isBlank())return void PM(t,[],l,c);var d=i.getModel("axisLabel"),u=s.getViewLabels(c),h=(is(e.raw.labelRotate,d.get("rotate"))||0)*mM/180,p=SM.innerTextLayout(e.rotation,h,e.labelDirection),m=i.getCategories&&i.getCategories(!0),f=[],g=i.get("triggerEvent"),x=1/0,v=-1/0;Bn(u,function(e,t){var a,r="ordinal"===s.scale.type?s.scale.getRawOrdinalNumber(e.tickValue):e.tickValue,o=e.formattedLabel,c=e.rawLabel,h=d;if(m&&m[r]){var y=m[r];Qn(y)&&y.textStyle&&(h=new Ug(y.textStyle,d,i.ecModel))}var b=h.getTextColor()||i.get(["axisLine","lineStyle","color"]),_=h.getShallow("align",!0)||p.textAlign,j=ns(h.getShallow("alignMinLabel",!0),_),w=ns(h.getShallow("alignMaxLabel",!0),_),N=h.getShallow("verticalAlign",!0)||h.getShallow("baseline",!0)||p.textVerticalAlign,S=ns(h.getShallow("verticalAlignMinLabel",!0),N),C=ns(h.getShallow("verticalAlignMaxLabel",!0),N),k=10+((null===(a=e.time)||void 0===a?void 0:a.level)||0);x=Math.min(x,k),v=Math.max(v,k);var M=new mp({x:0,y:0,rotation:0,silent:SM.isLabelSilent(i),z2:k,style:Cg(h,{text:o,align:0===t?j:t===u.length-1?w:_,verticalAlign:0===t?S:t===u.length-1?C:N,fill:Yn(b)?b("category"===s.type?c:"value"===s.type?r+"":r,t):b})});M.anid="label_"+r;var T=xM(M);if(T.break=e.break,T.tickValue=r,T.layoutRotation=p.rotation,ug({el:M,componentModel:i,itemName:o,formatterParamsExtra:{isTruncated:function(){return M.isTruncated},value:c,tickIndex:t}}),g){var D=SM.makeAxisEventDataBase(i);D.targetType="axisLabel",D.value=c,D.tickIndex=t,e.break&&(D.break={start:e.break.parsedBreak.vmin,end:e.break.parsedBreak.vmax}),"category"===s.type&&(D.dataIndex=r),Cp(M).eventData=D,e.break&&function(e,t,a,r){a.on("click",function(a){var i={type:pM,breaks:[{start:r.parsedBreak.breakOption.start,end:r.parsedBreak.breakOption.end}]};i[e.axis.dim+"AxisIndex"]=e.componentIndex,t.dispatchAction(i)})}(i,n,M,e.break)}f.push(M),l.add(M)});var y=qn(f,function(e){return{label:e,priority:xM(e).break?e.z2+(v-x+1):e.z2,defaultAttr:{ignore:e.ignore}}});PM(t,y,l,c)}(e,t,i,o,r,s);var l=t.labelLayoutList;!function(e,t,a,r){var i=t.get(["axisLabel","margin"]);Bn(a,function(a,n){var s=vC(a);if(s){var o=s.label,l=xM(o);s.suggestIgnore=o.ignore,o.ignore=!1,Uc(LM,zM),LM.x=t.axis.dataToCoord(l.tickValue),LM.y=e.labelOffset+e.labelDirection*i,LM.rotation=l.layoutRotation,r.add(LM),LM.updateTransform(),r.remove(LM),LM.decomposeTransform(),Uc(o,LM),o.markRedraw(),gC(s,!0),vC(s)}})}(e,r,l,n),e.rotation;var c=e.optionHideOverlap;!function(e,t,a){if(kS(e.axis))return;function r(e,r,i){var n=vC(t[r]),s=vC(t[i]);if(n&&s)if(!1===e||n.suggestIgnore)TM(n.label);else if(s.suggestIgnore)TM(s.label);else{var o=.1;if(!a){var l=[0,0,0,0];n=_C({marginForce:l},n),s=_C({marginForce:l},s)}wC(n,s,null,{touchThreshold:o})&&TM(e?s.label:n.label)}}var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]),s=t.length;r(i,0,1),r(n,s-1,s-2)}(r,l,c),c&&function(e){var t=[];function a(e){if(!e.ignore){var t=e.ensureState("emphasis");null==t.ignore&&(t.ignore=!1)}e.ignore=!0}e.sort(function(e,t){return(t.suggestIgnore?1:0)-(e.suggestIgnore?1:0)||t.priority-e.priority});for(var r=0;r<e.length;r++){var i=vC(e[r]);if(!i.label.ignore){for(var n=i.label,s=i.labelLine,o=!1,l=0;l<t.length;l++)if(wC(i,t[l],null,{touchThreshold:.05})){o=!0;break}o?(a(n),s&&a(s)):t.push(i)}}}(Hn(l,function(e){return e&&!e.label.ignore})),function(e,t,a,r){var i,n=a.axis,s=t.ensureRecord(a),o=[],l=EM(e.axisName)&&TS(e.nameLocation);Bn(r,function(e){var t=vC(e);if(t&&!t.label.ignore){o.push(t);var a=s.transGroup;l&&(a.transform?fo(bM,a.transform):co(bM),t.transform&&ho(bM,bM,t.transform),Do.copy(_M,t.localRect),_M.applyTransform(bM),i?i.union(_M):Do.copy(i=new Do(0,0,0,0),_M))}});var c=Math.abs(s.dirVec.x)>.1?"x":"y",d=s.transGroup[c];if(o.sort(function(e,t){return Math.abs(e.label[c]-d)-Math.abs(t.label[c]-d)}),l&&i){var u=n.getExtent(),h=Math.min(u[0],u[1]),p=Math.max(u[0],u[1])-h;i.union(new Do(h,0,p,1))}s.stOccupiedRect=i,s.labelInfoList=o}(e,a,r,l)}function TM(e){e&&(e.ignore=!0)}function DM(e,t,a,r,i){for(var n=[],s=[],o=[],l=0;l<e.length;l++){var c=e[l].coord;s[0]=c,s[1]=0,o[0]=c,o[1]=a,t&&(zs(s,s,t),zs(o,o,t));var d=new pf({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});eg(d.shape,d.style.lineWidth),d.anid=i+"_"+e[l].tickValue,n.push(d);var u=vM(d);u.onBand=!!e[l].onBand,u.tickValue=e[l].tickValue}return n}function IM(e,t,a){if(AM(e)){var r=e.axisLabelsCreationContext.out.noPxChangeTryDetermine;if(a.noPxChange){for(var i=!0,n=0;n<r.length;n++)i=i&&r[n]();if(i)return!1}r.length&&(t.remove(e.labelGroup),PM(e,null,null,null))}return!0}function AM(e){return!!e.labelLayoutList}function PM(e,t,a,r){e.labelLayoutList=t,e.labelGroup=a,e.axisLabelsCreationContext=r}var LM=new dp,zM=new dp;function EM(e){return!!e}function RM(e,t,a){a=a||{};var r=t.axis,i={},n=r.getAxesOnZeroOf()[0],s=r.position,o=n?"onZero":s,l=r.dim,c=[e.x,e.x+e.width,e.y,e.y+e.height],d={left:0,right:1,top:0,bottom:1,onZero:2},u=t.get("offset")||0,h="x"===l?[c[2]-u,c[3]+u]:[c[0]-u,c[1]+u];if(n){var p=n.toGlobalCoord(n.dataToCoord(0));h[d.onZero]=Math.max(Math.min(p,h[1]),h[0])}i.position=["y"===l?h[d[o]]:c[0],"x"===l?h[d[o]]:c[3]],i.rotation=Math.PI/2*("x"===l?0:1);i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],i.labelOffset=n?h[d[s]]-h[d.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),is(a.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var m=t.get(["axisLabel","rotate"]);return i.labelRotate="top"===o?-m:m,i.z2=1,i}function OM(e){var t={xAxisModel:null,yAxisModel:null};return Bn(t,function(a,r){var i=r.replace(/Model$/,""),n=e.getReferringComponents(i,ou).models[0];t[r]=n}),t}var FM=[[3,1],[0,2]],BM=function(){function e(e,t,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cM,this._initCartesian(e,t,a),this.model=e}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(e,t){var a=this._axesMap;function r(e){var t,a=Wn(e),r=a.length;if(r){for(var i=[],n=r-1;n>=0;n--){var s=e[+a[n]],o=s.model,l=s.scale;DN(l)&&o.get("alignTicks")&&null==o.get("interval")?i.push(s):(wS(l,o),DN(l)&&(t=s))}i.length&&(t||wS((t=i.pop()).scale,t.model),Bn(i,function(e){!function(e,t,a){var r=UN.prototype,i=r.getTicks.call(a),n=r.getTicks.call(a,{expandToNicedExtent:!0}),s=i.length-1,o=r.getInterval.call(a),l=jS(e,t),c=l.extent,d=l.fixMin,u=l.fixMax;"log"===e.type&&(c=FN(e.base,c,!0)),e.setBreaksFromOption(IS(t)),e.setExtent(c[0],c[1]),e.calcNiceExtent({splitNumber:s,fixMin:d,fixMax:u});var h=r.getExtent.call(e);d&&(c[0]=h[0]),u&&(c[1]=h[1]);var p=r.getInterval.call(e),m=c[0],f=c[1];if(d&&u)p=(f-m)/s;else if(d)for(f=c[0]+p*s;f<c[1]&&isFinite(f)&&isFinite(c[1]);)p=AN(p),f=c[0]+p*s;else if(u)for(m=c[1]-p*s;m>c[0]&&isFinite(m)&&isFinite(c[0]);)p=AN(p),m=c[1]-p*s;else{e.getTicks().length-1>s&&(p=AN(p));var g=p*s;(m=Md((f=Math.ceil(c[1]/p)*p)-g))<0&&c[0]>=0?(m=0,f=Md(g)):f>0&&c[1]<=0&&(f=0,m=-Md(g))}var x=(i[0].value-n[0].value)/o,v=(i[s].value-n[s].value)/o;r.setExtent.call(e,m+p*x,f+p*v),r.setInterval.call(e,p),(x||v)&&r.setNiceExtent.call(e,m+p,f-p)}(e.scale,e.model,t.scale)}))}}this._updateScale(e,this.model),r(a.x),r(a.y);var i={};Bn(a.x,function(e){VM(a,"y",e,i)}),Bn(a.y,function(e){VM(a,"x",e,i)}),this.resize(this.model,t)},e.prototype.resize=function(e,t,a){var r=dv(e,t),i=this._rect=lv(e.getBoxLayoutParams(),r.refContainer),n=this._axesMap,s=this._coordsList,o=e.get("containLabel");if(WM(n,i),!a){var l=function(e,t,a,r,i){var n=new yM(YM);return Bn(a,function(a){return Bn(a,function(a){if(DS(a.model)){var s=!r;a.axisBuilder=function(e,t,a,r,i,n){for(var s=RM(e,a),o=!1,l=!1,c=0;c<t.length;c++)DN(t[c].getOtherAxis(a.axis).scale)&&(o=l=!0,"category"===a.axis.type&&a.axis.onBand&&(l=!1));return s.axisLineAutoShow=o,s.axisTickAutoShow=l,s.defaultNameMoveOverlap=n,new SM(a,r,s,i)}(e,t,a.model,i,n,s)}})}),n}(i,s,n,o,t),c=void 0;if(o)c=UM(i.clone(),"axisLabel",null,i,n,l,r);else{var d=function(e,t,a){var r,i=e.get("outerBoundsMode",!0);"same"===i?r=t.clone():null!=i&&"auto"!==i||(r=lv(e.get("outerBounds",!0)||Zk,a.refContainer));var n,s=e.get("outerBoundsContain",!0);n=null==s||"auto"===s||Rn(["all","axisLabel"],s)<0?"all":s;var o=[kd(ns(e.get("outerBoundsClampWidth",!0),Qk[0]),t.width),kd(ns(e.get("outerBoundsClampHeight",!0),Qk[1]),t.height)];return{outerBoundsRect:r,parsedOuterBoundsContain:n,outerBoundsClamp:o}}(e,i,r),u=d.outerBoundsRect,h=d.parsedOuterBoundsContain,p=d.outerBoundsClamp;u&&(c=UM(u,h,p,i,n,l,r))}$M(i,n,FS,null,c,r)}Bn(this._coordsList,function(e){e.calcAffineTransform()})},e.prototype.getAxis=function(e,t){var a=this._axesMap[e];if(null!=a)return a[t||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(e,t){if(null!=e&&null!=t){var a="x"+e+"y"+t;return this._coordsMap[a]}Qn(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,i=this._coordsList;r<i.length;r++)if(i[r].getAxis("x").index===e||i[r].getAxis("y").index===t)return i[r]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(e,t,a){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.dataToPoint(a):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(a)):null},e.prototype.convertFromPixel=function(e,t,a){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.pointToData(a):r.axis?r.axis.coordToData(r.axis.toLocalCoord(a)):null},e.prototype._findConvertTarget=function(e){var t,a,r=e.seriesModel,i=e.xAxisModel||r&&r.getReferringComponents("xAxis",ou).models[0],n=e.yAxisModel||r&&r.getReferringComponents("yAxis",ou).models[0],s=e.gridModel,o=this._coordsList;if(r)Rn(o,t=r.coordinateSystem)<0&&(t=null);else if(i&&n)t=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)a=this.getAxis("x",i.componentIndex);else if(n)a=this.getAxis("y",n.componentIndex);else if(s){s.coordinateSystem===this&&(t=this._coordsList[0])}return{cartesian:t,axis:a}},e.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},e.prototype._initCartesian=function(e,t,a){var r=this,i=this,n={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},o={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function l(t){return function(a,r){if(qM(a,e)){var l=a.get("position");"x"===t?"top"!==l&&"bottom"!==l&&(l=n.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=n.left?"right":"left"),n[l]=!0;var c=new hM(t,function(e,t){if(t=t||e.get("type"))switch(t){case"category":return new WN({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new rS({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(BN.getClass(t)||UN)}}(a),[0,0],a.get("type"),l),d="category"===c.type;c.onBand=d&&a.get("boundaryGap"),c.inverse=a.get("inverse"),a.axis=c,c.model=a,c.grid=i,c.index=r,i._axesList.push(c),s[t][r]=c,o[t]++}}}this._axesMap=s,Bn(s.x,function(t,a){Bn(s.y,function(i,n){var s="x"+a+"y"+n,o=new uM(s);o.master=r,o.model=e,r._coordsMap[s]=o,r._coordsList.push(o),o.addAxis(t),o.addAxis(i)})})},e.prototype._updateScale=function(e,t){function a(e,t){Bn(MS(e,t.dim),function(a){t.scale.unionExtentFromData(e,a)})}Bn(this._axesList,function(e){if(e.scale.setExtent(1/0,-1/0),"category"===e.type){var t=e.model.get("categorySortInfo");e.scale.setSortInfo(t)}}),e.eachSeries(function(e){if(function(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}(e)){var r=OM(e),i=r.xAxisModel,n=r.yAxisModel;if(!qM(i,t)||!qM(n,t))return;var s=this.getCartesian(i.componentIndex,n.componentIndex),o=e.getData(),l=s.getAxis("x"),c=s.getAxis("y");a(o,l),a(o,c)}},this)},e.prototype.getTooltipAxes=function(e){var t=[],a=[];return Bn(this.getCartesians(),function(r){var i=null!=e&&"auto"!==e?r.getAxis(e):r.getBaseAxis(),n=r.getOtherAxis(i);Rn(t,i)<0&&t.push(i),Rn(a,n)<0&&a.push(n)}),{baseAxes:t,otherAxes:a}},e.create=function(t,a){var r=[];return t.eachComponent("grid",function(i,n){var s=new e(i,t,a);s.name="grid_"+n,s.resize(i,a,!0),i.coordinateSystem=s,r.push(s)}),t.eachSeries(function(e){!function(e){var t=e.targetModel,a=e.coordSysType,r=e.coordSysProvider,i=e.isDefaultDataCoordSys,n=tv(t),s=n.kind,o=n.coordSysType;if(i&&s!==Jx&&(s=Jx,o=a),s===Qx||o!==a)return!1;var l=r(a,t);!!l&&(s===Jx?t.coordinateSystem=l:t.boxCoordinateSystem=l)}({targetModel:e,coordSysType:"cartesian2d",coordSysProvider:function(){var t=OM(e),a=t.xAxisModel,r=t.yAxisModel;return a.getCoordSysModel().coordinateSystem.getCartesian(a.componentIndex,r.componentIndex)}})}),r},e.dimensions=cM,e}();function qM(e,t){return e.getCoordSysModel()===t}function VM(e,t,a,r){a.getAxesOnZeroOf=function(){return i?[i]:[]};var i,n=e[t],s=a.model,o=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(o){if(null!=l)HM(n[l])&&(i=n[l]);else for(var c in n)if(n.hasOwnProperty(c)&&HM(n[c])&&!r[d(n[c])]){i=n[c];break}i&&(r[d(i)]=!0)}function d(e){return e.dim+"_"+e.index}}function HM(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),a=t[0],r=t[1];return!(a>0&&r>0||a<0&&r<0)}(e)}function WM(e,t){Bn(e.x,function(e){return GM(e,t.x,t.width)}),Bn(e.y,function(e){return GM(e,t.y,t.height)})}function GM(e,t,a){var r=[0,a],i=e.inverse?1:0;e.setExtent(r[i],r[1-i]),function(e,t){var a=e.getExtent(),r=a[0]+a[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return r-e+t}}(e,t)}function UM(e,t,a,r,i,n,s){$M(r,i,OS,t,!1,s);var o=[0,0,0,0];c(0),c(1),d(r,0,NaN),d(r,1,NaN);var l=null==function(e,t,a){if(e&&t)for(var r=0,i=e.length;r<i;r++)if(t.call(a,e[r],r,e))return e[r]}(o,function(e){return e>0});return lg(r,o,!0,!0,a),WM(i,r),l;function c(e){Bn(i[Gf[e]],function(t){if(DS(t.model)){var a=n.ensureRecord(t.model),r=a.labelInfoList;if(r)for(var i=0;i<r.length;i++){var s=r[i],o=t.scale.normalize(xM(s.label).tickValue);o=1===e?1-o:o,d(s.rect,e,o),d(s.rect,1-e,NaN)}var l=a.nameLayout;if(l){o=TS(a.nameLocation)?.5:NaN;d(l.rect,e,o),d(l.rect,1-e,NaN)}}})}function d(t,a,r){var i=e[Gf[a]]-t[Gf[a]],n=t[Uf[a]]+t[Gf[a]]-(e[Uf[a]]+e[Gf[a]]);i=u(i,1-r),n=u(n,r);var s=FM[a][0],l=FM[a][1];o[s]=wd(o[s],i),o[l]=wd(o[l],n)}function u(e,t){return e>0&&!rs(t)&&t>1e-4&&(e/=t),e}}function $M(e,t,a,r,i,n){var s=a===FS;Bn(t,function(t){return Bn(t,function(t){DS(t.model)&&(!function(e,t,a){var r=RM(t,a);e.updateCfg(r)}(t.axisBuilder,e,t.model),t.axisBuilder.build(s?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:i}))})});var o={x:0,y:0};function l(t){o[Gf[1-t]]=e[Uf[t]]<=.5*n.refContainer[Uf[t]]?0:1-t==1?2:1}l(0),l(1),Bn(t,function(e,t){return Bn(e,function(e){DS(e.model)&&(("all"===r||s)&&e.axisBuilder.build({axisName:!0},{nameMarginLevel:o[t]}),s&&e.axisBuilder.build({axisLine:!0}))})})}var YM=function(e,t,a,r,i,n){var s="x"===a.axis.dim?"y":"x";jM(e,0,0,r,i,n),TS(e.nameLocation)||Bn(t.recordMap[s],function(e){e&&e.labelInfoList&&e.dirVec&&NM(e.labelInfoList,e.dirVec,r,i)})};function KM(e,t){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,a){var r=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),n=i.get("link",!0)||[],s=[];Bn(a.getCoordinateSystems(),function(a){if(a.axisPointerEnabled){var o=JM(a.model),l=e.coordSysAxesInfo[o]={};e.coordSysMap[o]=a;var c=a.model.getModel("tooltip",r);if(Bn(a.getAxes(),Un(p,!1,null)),a.getTooltipAxes&&r&&c.get("show")){var d="axis"===c.get("trigger"),u="cross"===c.get(["axisPointer","type"]),h=a.getTooltipAxes(c.get(["axisPointer","axis"]));(d||u)&&Bn(h.baseAxes,Un(p,!u||"cross",d)),u&&Bn(h.otherAxes,Un(p,"cross",!1))}}function p(r,o,d){var u=d.model.getModel("axisPointer",i),h=u.get("show");if(h&&("auto"!==h||r||QM(u))){null==o&&(o=u.get("triggerTooltip")),u=r?function(e,t,a,r,i,n){var s=t.getModel("axisPointer"),o={};Bn(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){o[e]=Pn(s.get(e))}),o.snap="category"!==e.type&&!!n,"cross"===s.get("type")&&(o.type="line");var l=o.label||(o.label={});if(null==l.show&&(l.show=!1),"cross"===i){var c=s.get(["label","show"]);if(l.show=null==c||c,!n){var d=o.lineStyle=s.get("crossStyle");d&&En(l,d.textStyle)}}return e.model.getModel("axisPointer",new Ug(o,a,r))}(d,c,i,t,r,o):u;var p=u.get("snap"),m=u.get("triggerEmphasis"),f=JM(d.model),g=o||p||"category"===d.type,x=e.axesInfo[f]={key:f,axis:d,coordSys:a,axisPointerModel:u,triggerTooltip:o,triggerEmphasis:m,involveSeries:g,snap:p,useHandle:QM(u),seriesModels:[],linkGroup:null};l[f]=x,e.seriesInvolved=e.seriesInvolved||g;var v=function(e,t){for(var a=t.model,r=t.dim,i=0;i<e.length;i++){var n=e[i]||{};if(XM(n[r+"AxisId"],a.id)||XM(n[r+"AxisIndex"],a.componentIndex)||XM(n[r+"AxisName"],a.name))return i}}(n,d);if(null!=v){var y=s[v]||(s[v]={axesInfo:{}});y.axesInfo[f]=x,y.mapper=n[v].mapper,x.linkGroup=y}}}})}(a,e,t),a.seriesInvolved&&function(e,t){t.eachSeries(function(t){var a=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);a&&a.model&&"none"!==r&&!1!==r&&"item"!==r&&!1!==i&&!1!==t.get(["axisPointer","show"],!0)&&Bn(e.coordSysAxesInfo[JM(a.model)],function(e){var r=e.axis;a.getAxis(r.dim)===r&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())})})}(a,e),a}function XM(e,t){return"all"===e||$n(e)&&Rn(e,t)>=0||e===t}function ZM(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[JM(e)]}function QM(e){return!!e.get(["handle","show"])}function JM(e){return e.type+"||"+e.id}var eT={},tT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.render=function(t,a,r,i){this.axisPointerClass&&function(e){var t=ZM(e);if(t){var a=t.axisPointerModel,r=t.axis.scale,i=a.option,n=a.get("status"),s=a.get("value");null!=s&&(s=r.parse(s));var o=QM(a);null==n&&(i.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==s||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,o&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},t.prototype.updateAxisPointer=function(e,t,a,r){this._doUpdateAxisPointerClass(e,a,!1)},t.prototype.remove=function(e,t){var a=this._axisPointer;a&&a.remove(t)},t.prototype.dispose=function(t,a){this._disposeAxisPointer(a),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,a,r){var i=t.getAxisPointerClass(this.axisPointerClass);if(i){var n=function(e){var t=ZM(e);return t&&t.axisPointerModel}(e);n?(this._axisPointer||(this._axisPointer=new i)).render(e,n,a,r):this._disposeAxisPointer(a)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){eT[e]=t},t.getAxisPointerClass=function(e){return e&&eT[e]},t.type="axis",t}(t_),aT=ru();var rT=["splitArea","splitLine","minorSplitLine","breakArea"],iT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.axisPointerClass="CartesianAxisPointer",a}return pn(t,e),t.prototype.render=function(t,a,r,i){this.group.removeAll();var n=this._axisGroup;(this._axisGroup=new gd,this.group.add(this._axisGroup),DS(t))&&(this._axisGroup.add(t.axis.axisBuilder.group),Bn(rT,function(e){t.get([e,"show"])&&nT[e](this,this._axisGroup,t,t.getCoordSysModel(),r)},this),i&&"changeAxisOrder"===i.type&&i.isInitSort||ig(n,this._axisGroup,t),e.prototype.render.call(this,t,a,r,i))},t.prototype.remove=function(){aT(this).splitAreaColors=null},t.type="cartesianAxis",t}(tT),nT={splitLine:function(e,t,a,r,i){var n=a.axis;if(!n.scale.isBlank()){var s=a.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),c=!1!==s.get("showMinLine"),d=!1!==s.get("showMaxLine");l=$n(l)?l:[l];for(var u=r.coordinateSystem.getRect(),h=n.isHorizontal(),p=0,m=n.getTicksCoords({tickModel:s,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),f=[],g=[],x=o.getLineStyle(),v=0;v<m.length;v++){var y=n.toGlobalCoord(m[v].coord);if((0!==v||c)&&(v!==m.length-1||d)){var b=m[v].tickValue;h?(f[0]=y,f[1]=u.y,g[0]=y,g[1]=u.y+u.height):(f[0]=u.x,f[1]=y,g[0]=u.x+u.width,g[1]=y);var _=p++%l.length,j=new pf({anid:null!=b?"line_"+b:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},style:En({stroke:l[_]},x),silent:!0});eg(j.shape,x.lineWidth),t.add(j)}}}},minorSplitLine:function(e,t,a,r,i){var n=a.axis,s=a.getModel("minorSplitLine").getModel("lineStyle"),o=r.coordinateSystem.getRect(),l=n.isHorizontal(),c=n.getMinorTicksCoords();if(c.length)for(var d=[],u=[],h=s.getLineStyle(),p=0;p<c.length;p++)for(var m=0;m<c[p].length;m++){var f=n.toGlobalCoord(c[p][m].coord);l?(d[0]=f,d[1]=o.y,u[0]=f,u[1]=o.y+o.height):(d[0]=o.x,d[1]=f,u[0]=o.x+o.width,u[1]=f);var g=new pf({anid:"minor_line_"+c[p][m].tickValue,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:u[0],y2:u[1]},style:h,silent:!0});eg(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,a,r,i){!function(e,t,a,r){var i=a.axis;if(!i.scale.isBlank()){var n=a.getModel("splitArea"),s=n.getModel("areaStyle"),o=s.get("color"),l=r.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:n,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(c.length){var d=o.length,u=aT(e).splitAreaColors,h=xs(),p=0;if(u)for(var m=0;m<c.length;m++){var f=u.get(c[m].tickValue);if(null!=f){p=(f+(d-1)*m)%d;break}}var g=i.toGlobalCoord(c[0].coord),x=s.getAreaStyle();for(o=$n(o)?o:[o],m=1;m<c.length;m++){var v=i.toGlobalCoord(c[m].coord),y=void 0,b=void 0,_=void 0,j=void 0;i.isHorizontal()?(y=g,b=l.y,_=v-y,j=l.height,g=y+_):(y=l.x,b=g,_=l.width,g=b+(j=v-b));var w=c[m-1].tickValue;null!=w&&h.set(w,p),t.add(new dp({anid:null!=w?"area_"+w:null,shape:{x:y,y:b,width:_,height:j},style:En({fill:o[p]},x),autoBatch:!0,silent:!0})),p=(p+1)%d}aT(e).splitAreaColors=h}}}(e,t,a,r)},breakArea:function(e,t,a,r,i){a.axis.scale}},sT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.type="xAxis",t}(iT),oT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=sT.type,t}return pn(t,e),t.type="yAxis",t}(iT),lT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="grid",t}return pn(t,e),t.prototype.render=function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new dp({shape:e.coordinateSystem.getRect(),style:En({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(t_),cT={offset:0};function dT(e){e.registerComponentView(lT),e.registerComponentModel(Jk),e.registerCoordinateSystem("cartesian2d",BM),sM(e,"x",eM,cT),sM(e,"y",eM,cT),e.registerComponentView(sT),e.registerComponentView(oT),e.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var uT=ru(),hT=Pn,pT=Gn;function mT(e,t,a,r){fT(uT(a).lastProp,r)||(uT(a).lastProp=r,t?Rf(a,r,e):(a.stopAnimation(),a.attr(r)))}function fT(e,t){if(Qn(e)&&Qn(t)){var a=!0;return Bn(t,function(t,r){a=a&&fT(e[r],t)}),!!a}return e===t}function gT(e,t){e[t.get(["label","show"])?"show":"hide"]()}function xT(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function vT(e,t,a){var r=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(e){"group"!==e.type&&(null!=r&&(e.z=r),null!=i&&(e.zlevel=i),e.silent=a)})}function yT(e,t,a,r,i){var n=bT(a.get("value"),t.axis,t.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),s=a.getModel("label"),o=Fx(s.get("padding")||0),l=s.getFont(),c=Jc(n,l),d=i.position,u=c.width+o[1]+o[3],h=c.height+o[0]+o[2],p=i.align;"right"===p&&(d[0]-=u),"center"===p&&(d[0]-=u/2);var m=i.verticalAlign;"bottom"===m&&(d[1]-=h),"middle"===m&&(d[1]-=h/2),function(e,t,a,r){var i=r.getWidth(),n=r.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+a,n)-a,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(d,u,h,r);var f=s.get("backgroundColor");f&&"auto"!==f||(f=t.get(["axisLine","lineStyle","color"])),e.label={x:d[0],y:d[1],style:Cg(s,{text:n,font:l,fill:s.getTextColor(),padding:o,backgroundColor:f}),z2:10}}function bT(e,t,a,r,i){e=t.scale.parse(e);var n=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var o={value:SS(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Bn(r,function(e){var t=a.getSeriesByIndex(e.seriesIndex),r=e.dataIndexInside,i=t&&t.getDataParams(r);i&&o.seriesData.push(i)}),Kn(s)?n=s.replace("{value}",n):Yn(s)&&(n=s(o))}return n}function _T(e,t,a){var r=[1,0,0,1,0,0];return mo(r,r,a.rotation),po(r,r,a.position),ag([e.dataToCoord(t),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],r)}var jT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.makeElOption=function(e,t,a,r,i){var n=a.axis,s=n.grid,o=r.get("type"),l=wT(s,n).getOtherAxis(n).getGlobalExtent(),c=n.toGlobalCoord(n.dataToCoord(t,!0));if(o&&"none"!==o){var d=function(e){var t,a=e.get("type"),r=e.getModel(a+"Style");return"line"===a?(t=r.getLineStyle()).fill=null:"shadow"===a&&((t=r.getAreaStyle()).stroke=null),t}(r),u=NT[o](n,c,l);u.style=d,e.graphicKey=u.type,e.pointer=u}!function(e,t,a,r,i,n){var s=SM.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=i.get(["label","margin"]),yT(t,r,i,n,{position:_T(r.axis,e,a),align:s.textAlign,verticalAlign:s.textVerticalAlign})}(t,e,RM(s.getRect(),a),a,r,i)},t.prototype.getHandleTransform=function(e,t,a){var r=RM(t.axis.grid.getRect(),t,{labelInside:!1});r.labelMargin=a.get(["handle","margin"]);var i=_T(t.axis,e,r);return{x:i[0],y:i[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,a,r){var i=a.axis,n=i.grid,s=i.getGlobalExtent(!0),o=wT(n,i).getOtherAxis(i).getGlobalExtent(),l="x"===i.dim?0:1,c=[e.x,e.y];c[l]+=t[l],c[l]=Math.min(s[1],c[l]),c[l]=Math.max(s[0],c[l]);var d=(o[1]+o[0])/2,u=[d,d];u[l]=c[l];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:u,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},t}(function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(e,t,a,r){var i=t.get("value"),n=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=a,r||this._lastValue!==i||this._lastStatus!==n){this._lastValue=i,this._lastStatus=n;var s=this._group,o=this._handle;if(!n||"hide"===n)return s&&s.hide(),void(o&&o.hide());s&&s.show(),o&&o.show();var l={};this.makeElOption(l,i,e,t,a);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=c;var d=this._moveAnimation=this.determineAnimation(e,t);if(s){var u=Un(mT,t,d);this.updatePointerEl(s,l,u),this.updateLabelEl(s,l,u,t)}else s=this._group=new gd,this.createPointerEl(s,l,e,t),this.createLabelEl(s,l,e,t),a.getZr().add(s);vT(s,t,!0),this._renderHandle(i)}},e.prototype.remove=function(e){this.clear(e)},e.prototype.dispose=function(e){this.clear(e)},e.prototype.determineAnimation=function(e,t){var a=t.get("animation"),r=e.axis,i="category"===r.type,n=t.get("snap");if(!n&&!i)return!1;if("auto"===a||null==a){var s=this.animationThreshold;if(i&&r.getBandWidth()>s)return!0;if(n){var o=ZM(e).seriesDataCount,l=r.getExtent();return Math.abs(l[0]-l[1])/o>s}return!1}return!0===a},e.prototype.makeElOption=function(e,t,a,r,i){},e.prototype.createPointerEl=function(e,t,a,r){var i=t.pointer;if(i){var n=uT(e).pointerEl=new _g[i.type](hT(t.pointer));e.add(n)}},e.prototype.createLabelEl=function(e,t,a,r){if(t.label){var i=uT(e).labelEl=new mp(hT(t.label));e.add(i),gT(i,r)}},e.prototype.updatePointerEl=function(e,t,a){var r=uT(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),a(r,{shape:t.pointer.shape}))},e.prototype.updateLabelEl=function(e,t,a,r){var i=uT(e).labelEl;i&&(i.setStyle(t.label.style),a(i,{x:t.label.x,y:t.label.y}),gT(i,r))},e.prototype._renderHandle=function(e){if(!this._dragging&&this.updateHandleTransform){var t,a=this._axisPointerModel,r=this._api.getZr(),i=this._handle,n=a.getModel("handle"),s=a.get("status");if(!n.get("show")||!s||"hide"===s)return i&&r.remove(i),void(this._handle=null);this._handle||(t=!0,i=this._handle=ng(n.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){no(e.event)},onmousedown:pT(this._onHandleDragMove,this,0,0),drift:pT(this._onHandleDragMove,this),ondragend:pT(this._onHandleDragEnd,this)}),r.add(i)),vT(i,a,!1),i.setStyle(n.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var o=n.get("size");$n(o)||(o=[o,o]),i.scaleX=o[0]/2,i.scaleY=o[1]/2,f_(this,"_doDispatchAxisPointer",n.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},e.prototype._moveHandleToValue=function(e,t){mT(this._axisPointerModel,!t&&this._moveAnimation,this._handle,xT(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(e,t){var a=this._handle;if(a){this._dragging=!0;var r=this.updateHandleTransform(xT(a),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,a.stopAnimation(),a.attr(xT(r)),uT(a).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),a=this._group,r=this._handle;t&&a&&(this._lastGraphicKey=null,a&&t.remove(a),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),g_(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(e,t,a){return{x:e[a=a||0],y:e[1-a],width:t[a],height:t[1-a]}},e}());function wT(e,t){var a={};return a[t.dim+"AxisIndex"]=t.index,e.getCartesian(a)}var NT={line:function(e,t,a){var r,i,n;return{type:"Line",subPixelOptimize:!0,shape:(r=[t,a[0]],i=[t,a[1]],n=ST(e),{x1:r[n=n||0],y1:r[1-n],x2:i[n],y2:i[1-n]})}},shadow:function(e,t,a){var r,i,n,s=Math.max(1,e.getBandWidth()),o=a[1]-a[0];return{type:"Rect",shape:(r=[t-s/2,a[0]],i=[s,o],n=ST(e),{x:r[n=n||0],y:r[1-n],width:i[n],height:i[1-n]})}}};function ST(e){return"x"===e.dim?0:1}var CT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:gv.color.border,width:1,type:"dashed"},shadowStyle:{color:gv.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:gv.color.neutral00,padding:[5,7,5,7],backgroundColor:gv.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:gv.color.accent40,throttle:40}},t}(fv),kT=ru(),MT=Bn;function TT(e,t,a){if(!fn.node){var r=t.getZr();kT(r).records||(kT(r).records={}),function(e,t){if(kT(e).initialized)return;function a(a,r){e.on(a,function(a){var i=function(e){var t={showTip:[],hideTip:[]},a=function(r){var i=t[r.type];i?i.push(r):(r.dispatchAction=a,e.dispatchAction(r))};return{dispatchAction:a,pendings:t}}(t);MT(kT(e).records,function(e){e&&r(e,a,i.dispatchAction)}),function(e,t){var a,r=e.showTip.length,i=e.hideTip.length;r?a=e.showTip[r-1]:i&&(a=e.hideTip[i-1]);a&&(a.dispatchAction=null,t.dispatchAction(a))}(i.pendings,t)})}kT(e).initialized=!0,a("click",Un(IT,"click")),a("mousemove",Un(IT,"mousemove")),a("globalout",DT)}(r,t),(kT(r).records[e]||(kT(r).records[e]={})).handler=a}}function DT(e,t,a){e.handler("leave",null,a)}function IT(e,t,a,r){t.handler(e,a,r)}function AT(e,t){if(!fn.node){var a=t.getZr();(kT(a).records||{})[e]&&(kT(a).records[e]=null)}}var PT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.render=function(e,t,a){var r=t.getComponent("tooltip"),i=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";TT("axisPointer",a,function(e,t,a){"none"!==i&&("leave"===e||i.indexOf(e)>=0)&&a({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},t.prototype.remove=function(e,t){AT("axisPointer",t)},t.prototype.dispose=function(e,t){AT("axisPointer",t)},t.type="axisPointer",t}(t_);function LT(e,t){var a,r=[],i=e.seriesIndex;if(null==i||!(a=t.getSeriesByIndex(i)))return{point:[]};var n=a.getData(),s=au(n,e);if(null==s||s<0||$n(s))return{point:[]};var o=n.getItemGraphicEl(s),l=a.coordinateSystem;if(a.getTooltipPosition)r=a.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(e.isStacked){var c=l.getBaseAxis(),d=l.getOtherAxis(c).dim,u=c.dim,h="x"===d||"radius"===d?1:0,p=n.mapDimension(u),m=[];m[h]=n.get(p,s),m[1-h]=n.get(n.getCalculationInfo("stackResultDimension"),s),r=l.dataToPoint(m)||[]}else r=l.dataToPoint(n.getValues(qn(l.dimensions,function(e){return n.mapDimension(e)}),s))||[];else if(o){var f=o.getBoundingRect().clone();f.applyTransform(o.transform),r=[f.x+f.width/2,f.y+f.height/2]}return{point:r,el:o}}var zT=ru();function ET(e,t,a){var r=e.currTrigger,i=[e.x,e.y],n=e,s=e.dispatchAction||Gn(a.dispatchAction,a),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){qT(i)&&(i=LT({seriesIndex:n.seriesIndex,dataIndex:n.dataIndex},t).point);var l=qT(i),c=n.axesInfo,d=o.axesInfo,u="leave"===r||qT(i),h={},p={},m={list:[],map:{}},f={showPointer:Un(OT,p),showTooltip:Un(FT,m)};Bn(o.coordSysMap,function(e,t){var a=l||e.containPoint(i);Bn(o.coordSysAxesInfo[t],function(e,t){var r=e.axis,n=function(e,t){for(var a=0;a<(e||[]).length;a++){var r=e[a];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}(c,e);if(!u&&a&&(!c||n)){var s=n&&n.value;null!=s||l||(s=r.pointToData(i)),null!=s&&RT(e,s,f,!1,h)}})});var g={};return Bn(d,function(e,t){var a=e.linkGroup;a&&!p[t]&&Bn(a.axesInfo,function(t,r){var i=p[r];if(t!==e&&i){var n=i.value;a.mapper&&(n=e.axis.scale.parse(a.mapper(n,BT(t),BT(e)))),g[e.key]=n}})}),Bn(g,function(e,t){RT(d[t],e,f,!0,h)}),function(e,t,a){var r=a.axesInfo=[];Bn(t,function(t,a){var i=t.axisPointerModel.option,n=e[a];n?(!t.useHandle&&(i.status="show"),i.value=n.value,i.seriesDataIndices=(n.payloadBatch||[]).slice()):!t.useHandle&&(i.status="hide"),"show"===i.status&&r.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:i.value})})}(p,d,h),function(e,t,a,r){if(qT(t)||!e.list.length)return void r({type:"hideTip"});var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}(m,i,e,s),function(e,t,a){var r=a.getZr(),i="axisPointerLastHighlights",n=zT(r)[i]||{},s=zT(r)[i]={};Bn(e,function(e,t){var a=e.axisPointerModel.option;"show"===a.status&&e.triggerEmphasis&&Bn(a.seriesDataIndices,function(e){var t=e.seriesIndex+" | "+e.dataIndex;s[t]=e})});var o=[],l=[];Bn(n,function(e,t){!s[t]&&l.push(e)}),Bn(s,function(e,t){!n[t]&&o.push(e)}),l.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}(d,0,a),h}}function RT(e,t,a,r,i){var n=e.axis;if(!n.scale.isBlank()&&n.containData(t))if(e.involveSeries){var s=function(e,t){var a=t.axis,r=a.dim,i=e,n=[],s=Number.MAX_VALUE,o=-1;return Bn(t.seriesModels,function(t,l){var c,d,u=t.getData().mapDimensionsAll(r);if(t.getAxisTooltipData){var h=t.getAxisTooltipData(u,e,a);d=h.dataIndices,c=h.nestestValue}else{if(!(d=t.indicesOfNearest(r,u[0],e,"category"===a.type?.5:null)).length)return;c=t.getData().get(u[0],d[0])}if(null!=c&&isFinite(c)){var p=e-c,m=Math.abs(p);m<=s&&((m<s||p>=0&&o<0)&&(s=m,o=p,i=c,n.length=0),Bn(d,function(e){n.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:n,snapToValue:i}}(t,e),o=s.payloadBatch,l=s.snapToValue;o[0]&&null==i.seriesIndex&&zn(i,o[0]),!r&&e.snap&&n.containData(l)&&null!=l&&(t=l),a.showPointer(e,t,o),a.showTooltip(e,s,l)}else a.showPointer(e,t)}function OT(e,t,a,r){e[t.key]={value:a,payloadBatch:r}}function FT(e,t,a,r){var i=a.payloadBatch,n=t.axis,s=n.model,o=t.axisPointerModel;if(t.triggerTooltip&&i.length){var l=t.coordSys.model,c=JM(l),d=e.map[c];d||(d=e.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(d)),d.dataByAxis.push({axisDim:n.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function BT(e){var t=e.axis.model,a={},r=a.axisDim=e.axis.dim;return a.axisIndex=a[r+"AxisIndex"]=t.componentIndex,a.axisName=a[r+"AxisName"]=t.name,a.axisId=a[r+"AxisId"]=t.id,a}function qT(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}function VT(e){tT.registerAxisPointerClass("CartesianAxisPointer",jT),e.registerComponentModel(CT),e.registerComponentView(PT),e.registerPreprocessor(function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!$n(t)&&(e.axisPointer.link=[t])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=KM(e,t)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ET)}function HT(e){zS(dT),zS(VT)}var WT=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:gv.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:gv.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:gv.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:gv.color.tertiary,fontSize:14}},t}(fv);function GT(e){var t=e.get("confine");return null!=t?!!t:"richText"===e.get("renderMode")}function UT(e){if(fn.domSupported)for(var t=document.documentElement.style,a=0,r=e.length;a<r;a++)if(e[a]in t)return e[a]}var $T=UT(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function YT(e,t){if(!e)return t;t=Ox(t,!0);var a=e.indexOf(t);return(e=-1===a?t:"-"+e.slice(0,a)+"-"+t).toLowerCase()}var KT=YT(UT(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),XT=YT($T,"transform"),ZT="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(fn.transform3dSupported?"will-change:transform;":"");function QT(e,t,a){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!fn.transformSupported)return a?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var n=fn.transform3dSupported,s="translate"+(n?"3d":"")+"("+r+","+i+(n?",0":"")+")";return a?"top:0;left:0;"+XT+":"+s+";":[["top",0],["left",0],[$T,s]]}function JT(e,t,a,r){var i=[],n=e.get("transitionDuration"),s=e.get("backgroundColor"),o=e.get("shadowBlur"),l=e.get("shadowColor"),c=e.get("shadowOffsetX"),d=e.get("shadowOffsetY"),u=e.getModel("textStyle"),h=Vb(e,"html"),p=c+"px "+d+"px "+o+"px "+l;return i.push("box-shadow:"+p),t&&n>0&&i.push(function(e,t,a){var r="cubic-bezier(0.23,1,0.32,1)",i="",n="";return a&&(n="opacity"+(i=" "+e/2+"s "+r)+",visibility"+i),t||(i=" "+e+"s "+r,n+=(n.length?",":"")+(fn.transformSupported?""+XT+i:",left"+i+",top"+i)),KT+":"+n}(n,a,r)),s&&i.push("background-color:"+s),Bn(["width","color","radius"],function(t){var a="border-"+t,r=Ox(a),n=e.get(r);null!=n&&i.push(a+":"+n+("color"===t?"":"px"))}),i.push(function(e){var t=[],a=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont());var i=ns(e.get("lineHeight"),Math.round(3*a/2));a&&t.push("line-height:"+i+"px");var n=e.get("textShadowColor"),s=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return n&&s&&t.push("text-shadow:"+o+"px "+l+"px "+s+"px "+n),Bn(["decoration","align"],function(a){var r=e.get(a);r&&t.push("text-"+a+":"+r)}),t.join(";")}(u)),null!=h&&i.push("padding:"+Fx(h).join("px ")+"px"),i.join(";")+";"}function eD(e,t,a,r,i){var n=t&&t.painter;if(a){var s=n&&n.getViewportRoot();s&&function(e,t,a,r,i){Us(Gs,t,r,i,!0)&&Us(e,a,Gs[0],Gs[1])}(e,s,a,r,i)}else{e[0]=r,e[1]=i;var o=n&&n.getViewportRootOffset();o&&(e[0]+=o.offsetLeft,e[1]+=o.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var tD=function(){function e(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,fn.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var r=this._zr=e.getZr(),i=t.appendTo,n=i&&(Kn(i)?document.querySelector(i):ts(i)?i:Yn(i)&&i(e.getDom()));eD(this._styleCoord,r,n,e.getWidth()/2,e.getHeight()/2),(n||e.getDom()).appendChild(a),this._api=e,this._container=n;var s=this;a.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},a.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=r.handler;ro(r.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},a.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),a=(n="position",(s=(i=t).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(i))?s[n]:null),r=t.style;"absolute"!==r.position&&"absolute"!==a&&(r.position="relative")}var i,n,s,o=e.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this._enableDisplayTransition=e.get("displayTransition")&&e.get("transitionDuration")>0,this.el.className=e.get("className")||""},e.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,r=a.style,i=this._styleCoord;a.innerHTML?r.cssText=ZT+JT(e,!this._firstShow,this._longHide,this._enableDisplayTransition)+QT(i[0],i[1],!0)+"border-color:"+Wx(t)+";"+(e.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,t,a,r,i){var n=this.el;if(null!=e){var s="";if(Kn(i)&&"item"===a.get("trigger")&&!GT(a)&&(s=function(e,t,a){if(!Kn(a)||"inside"===a)return"";var r=e.get("backgroundColor"),i=e.get("borderWidth");t=Wx(t);var n,s,o="left"===(n=a)?"right":"right"===n?"left":"top"===n?"bottom":"top",l=Math.max(1.5*Math.round(i),6),c="",d=XT+":";Rn(["left","right"],o)>-1?(c+="top:50%",d+="translateY(-50%) rotate("+(s="left"===o?-225:-45)+"deg)"):(c+="left:50%",d+="translateX(-50%) rotate("+(s="top"===o?225:45)+"deg)");var u=s*Math.PI/180,h=l+i,p=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),m=t+" solid "+i+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",(c+=";"+o+":-"+Math.round(100*((p-Math.SQRT2*i)/2+Math.SQRT2*i-(p-h)/2))/100+"px")+";"+d+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"].join("")+'"></div>'}(a,r,i)),Kn(e))n.innerHTML=e+s;else if(e){n.innerHTML="",$n(e)||(e=[e]);for(var o=0;o<e.length;o++)ts(e[o])&&e[o].parentNode!==n&&n.appendChild(e[o]);if(s&&n.childNodes.length){var l=document.createElement("div");l.innerHTML=s,n.appendChild(l)}}}else n.innerHTML=""},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},e.prototype.moveTo=function(e,t){if(this.el){var a=this._styleCoord;if(eD(a,this._zr,this._container,e,t),null!=a[0]&&null!=a[1]){var r=this.el.style;Bn(QT(a[0],a[1]),function(e){r[e[0]]=e[1]})}}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){var e=this,t=this.el.style;this._enableDisplayTransition?(t.visibility="hidden",t.opacity="0"):t.display="none",fn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Gn(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this._zr;!function(e,t){function a(e){var t=e[Ws];t&&(t.clearMarkers&&t.clearMarkers(),delete e[Ws])}e&&a(e),t&&a(t)}(e&&e.painter&&e.painter.getViewportRoot(),this._container);var t=this.el;if(t){t.onmouseenter=t.onmousemove=t.onmouseleave=null;var a=t.parentNode;a&&a.removeChild(t)}this.el=this._container=null},e}(),aD=function(){function e(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),nD(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return e.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(e,t,a,r,i){var n=this;Qn(e)&&Vd(""),this.el&&this._zr.remove(this.el);var s=a.getModel("textStyle");this.el=new mp({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:s.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:Vb(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),Bn(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(e){n.el.style[e]=a.get(e)}),Bn(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(e){n.el.style[e]=s.get(e)||0}),this._zr.add(this.el);var o=this;this.el.on("mouseover",function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0}),this.el.on("mouseout",function(){o._enterable&&o._show&&o.hideLater(o._hideDelay),o._inContent=!1})},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),a=iD(e.style);return[t.width+a.left+a.right,t.height+a.top+a.bottom]},e.prototype.moveTo=function(e,t){var a=this.el;if(a){var r=this._styleCoord;nD(r,this._zr,e,t),e=r[0],t=r[1];var i=a.style,n=rD(i.borderWidth||0),s=iD(i);a.x=e+n+s.left,a.y=t+n+s.top,a.markRedraw()}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Gn(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function rD(e){return Math.max(0,e)}function iD(e){var t=rD(e.shadowBlur||0),a=rD(e.shadowOffsetX||0),r=rD(e.shadowOffsetY||0);return{left:rD(t-a),right:rD(t+a),top:rD(t-r),bottom:rD(t+r)}}function nD(e,t,a,r){e[0]=a,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var sD=new dp({shape:{x:-1,y:-1,width:2,height:2}}),oD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.init=function(e,t){if(!fn.node&&t.getDom()){var a,r=e.getComponent("tooltip"),i=this._renderMode="auto"===(a=r.get("renderMode"))?fn.domSupported?"html":"richText":a||"html";this._tooltipContent="richText"===i?new aD(t):new tD(t,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},t.prototype.render=function(e,t,a){if(!fn.node&&a.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=a;var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?f_(this,"_updatePosition",50,"fixRate"):g_(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");TT("itemTooltip",this._api,Gn(function(t,a,r){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(a,r):"leave"===t&&this._hide(r))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,t=this._ecModel,a=this._api,r=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==r&&"click"!==r){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&i.manuallyShowTip(e,t,a,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,t,a,r){if(r.from!==this.uid&&!fn.node&&a.getDom()){var i=cD(r,a);this._ticket="";var n=r.dataByCoordSys,s=function(e,t,a){var r=su(e).queryOptionMap,i=r.keys()[0];if(!i||"series"===i)return;var n=lu(t,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=n.models[0];if(!s)return;var o,l=a.getViewOfComponentModel(s);if(l.group.traverse(function(t){var a=Cp(t).tooltipConfig;if(a&&a.name===e.name)return o=t,!0}),o)return{componentMainType:i,componentIndex:s.componentIndex,el:o}}(r,t,a);if(s){var o=s.el.getBoundingRect().clone();o.applyTransform(s.el.transform),this._tryShow({offsetX:o.x+o.width/2,offsetY:o.y+o.height/2,target:s.el,position:r.position,positionDefault:"bottom"},i)}else if(r.tooltip&&null!=r.x&&null!=r.y){var l=sD;l.x=r.x,l.y=r.y,l.update(),Cp(l).tooltipConfig={name:null,option:r.tooltip},this._tryShow({offsetX:r.x,offsetY:r.y,target:l},i)}else if(n)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:n,tooltipOption:r.tooltipOption},i);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,t,a,r))return;var c=LT(r,t),d=c.point[0],u=c.point[1];null!=d&&null!=u&&this._tryShow({offsetX:d,offsetY:u,target:c.el,position:r.position,positionDefault:"bottom"},i)}else null!=r.x&&null!=r.y&&(a.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:a.getZr().findHover(r.x,r.y).target},i))}},t.prototype.manuallyHideTip=function(e,t,a,r){var i=this._tooltipContent;this._tooltipModel&&i.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,r.from!==this.uid&&this._hide(cD(r,a))},t.prototype._manuallyAxisShowTip=function(e,t,a,r){var i=r.seriesIndex,n=r.dataIndex,s=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=i&&null!=n&&null!=s){var o=t.getSeriesByIndex(i);if(o)if("axis"===lD([o.getData().getItemModel(n),o,(o.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return a.dispatchAction({type:"updateAxisPointer",seriesIndex:i,dataIndex:n,position:r.position}),!0}},t.prototype._tryShow=function(e,t){var a=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;if(r&&r.length)this._showAxisTooltip(r,e);else if(a){var i,n;if("legend"===Cp(a).ssrType)return;this._lastDataByCoordSys=null,ej(a,function(e){if(e.tooltipDisabled)return i=n=null,!0;i||n||(null!=Cp(e).dataIndex?i=e:null!=Cp(e).tooltipConfig&&(n=e))},!0),i?this._showSeriesItemTooltip(e,i,t):n?this._showComponentItemTooltip(e,n,t):this._hide(t)}else this._lastDataByCoordSys=null,this._hide(t)}},t.prototype._showOrMove=function(e,t){var a=e.get("showDelay");t=Gn(t,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(t,a):t()},t.prototype._showAxisTooltip=function(e,t){var a=this._ecModel,r=this._tooltipModel,i=[t.offsetX,t.offsetY],n=lD([t.tooltipOption],r),s=this._renderMode,o=[],l=Pb("section",{blocks:[],noHeader:!0}),c=[],d=new Hb;Bn(e,function(e){Bn(e.dataByAxis,function(e){var t=a.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value;if(t&&null!=i){var n=bT(i,t.axis,a,e.seriesDataIndices,e.valueLabelOpt),u=Pb("section",{header:n,noHeader:!ds(n),sortBlocks:!0,blocks:[]});l.blocks.push(u),Bn(e.seriesDataIndices,function(l){var h=a.getSeriesByIndex(l.seriesIndex),p=l.dataIndexInside,m=h.getDataParams(p);if(!(m.dataIndex<0)){m.axisDim=e.axisDim,m.axisIndex=e.axisIndex,m.axisType=e.axisType,m.axisId=e.axisId,m.axisValue=SS(t.axis,{value:i}),m.axisValueLabel=n,m.marker=d.makeTooltipMarker("item",Wx(m.color),s);var f=eb(h.formatTooltip(p,!0,null)),g=f.frag;if(g){var x=lD([h],r).get("valueFormatter");u.blocks.push(x?zn({valueFormatter:x},g):g)}f.text&&c.push(f.text),o.push(m)}})}})}),l.blocks.reverse(),c.reverse();var u=t.position,h=n.get("order"),p=Fb(l,d,s,h,a.get("useUTC"),n.get("textStyle"));p&&c.unshift(p);var m="richText"===s?"\n\n":"<br/>",f=c.join(m);this._showOrMove(n,function(){this._updateContentNotChangedOnAxis(e,o)?this._updatePosition(n,u,i[0],i[1],this._tooltipContent,o):this._showTooltipContent(n,f,o,Math.random()+"",i[0],i[1],u,null,d)})},t.prototype._showSeriesItemTooltip=function(e,t,a){var r=this._ecModel,i=Cp(t),n=i.seriesIndex,s=r.getSeriesByIndex(n),o=i.dataModel||s,l=i.dataIndex,c=i.dataType,d=o.getData(c),u=this._renderMode,h=e.positionDefault,p=lD([d.getItemModel(l),o,s&&(s.coordinateSystem||{}).model],this._tooltipModel,h?{position:h}:null),m=p.get("trigger");if(null==m||"item"===m){var f=o.getDataParams(l,c),g=new Hb;f.marker=g.makeTooltipMarker("item",Wx(f.color),u);var x=eb(o.formatTooltip(l,!1,c)),v=p.get("order"),y=p.get("valueFormatter"),b=x.frag,_=b?Fb(y?zn({valueFormatter:y},b):b,g,u,v,r.get("useUTC"),p.get("textStyle")):x.text,j="item_"+o.name+"_"+l;this._showOrMove(p,function(){this._showTooltipContent(p,_,f,j,e.offsetX,e.offsetY,e.position,e.target,g)}),a({type:"showTip",dataIndexInside:l,dataIndex:d.getRawIndex(l),seriesIndex:n,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,t,a){var r="html"===this._renderMode,i=Cp(t),n=i.tooltipConfig.option||{},s=n.encodeHTMLContent;if(Kn(n)){n={content:n,formatter:n},s=!0}s&&r&&n.content&&((n=Pn(n)).content=Xs(n.content));var o=[n],l=this._ecModel.getComponent(i.componentMainType,i.componentIndex);l&&o.push(l),o.push({formatter:n.content});var c=e.positionDefault,d=lD(o,this._tooltipModel,c?{position:c}:null),u=d.get("content"),h=Math.random()+"",p=new Hb;this._showOrMove(d,function(){var a=Pn(d.get("formatterParams")||{});this._showTooltipContent(d,u,a,h,e.offsetX,e.offsetY,e.position,t,p)}),a({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,t,a,r,i,n,s,o,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var c=this._tooltipContent;c.setEnterable(e.get("enterable"));var d=e.get("formatter");s=s||e.get("position");var u=t,h=this._getNearestPoint([i,n],a,e.get("trigger"),e.get("borderColor"),e.get("defaultBorderColor",!0)).color;if(d)if(Kn(d)){var p=e.ecModel.get("useUTC"),m=$n(a)?a[0]:a;u=d,m&&m.axisType&&m.axisType.indexOf("time")>=0&&(u=yx(m.axisValue,u,p)),u=Hx(u,a,!0)}else if(Yn(d)){var f=Gn(function(t,r){t===this._ticket&&(c.setContent(r,l,e,h,s),this._updatePosition(e,s,i,n,c,a,o))},this);this._ticket=r,u=d(a,r,f)}else u=d;c.setContent(u,l,e,h,s),c.show(e,h),this._updatePosition(e,s,i,n,c,a,o)}},t.prototype._getNearestPoint=function(e,t,a,r,i){return"axis"===a||$n(t)?{color:r||i}:$n(t)?void 0:{color:r||t.color||t.borderColor}},t.prototype._updatePosition=function(e,t,a,r,i,n,s){var o=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var c=i.getSize(),d=e.get("align"),u=e.get("verticalAlign"),h=s&&s.getBoundingRect().clone();if(s&&h.applyTransform(s.transform),Yn(t)&&(t=t([a,r],n,i.el,h,{viewSize:[o,l],contentSize:c.slice()})),$n(t))a=Cd(t[0],o),r=Cd(t[1],l);else if(Qn(t)){var p=t;p.width=c[0],p.height=c[1];var m=lv(p,{width:o,height:l});a=m.x,r=m.y,d=null,u=null}else if(Kn(t)&&s){var f=function(e,t,a,r){var i=a[0],n=a[1],s=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,c=t.width,d=t.height;switch(e){case"inside":o=t.x+c/2-i/2,l=t.y+d/2-n/2;break;case"top":o=t.x+c/2-i/2,l=t.y-n-s;break;case"bottom":o=t.x+c/2-i/2,l=t.y+d+s;break;case"left":o=t.x-i-s,l=t.y+d/2-n/2;break;case"right":o=t.x+c+s,l=t.y+d/2-n/2}return[o,l]}(t,h,c,e.get("borderWidth"));a=f[0],r=f[1]}else{f=function(e,t,a,r,i,n,s){var o=a.getSize(),l=o[0],c=o[1];null!=n&&(e+l+n+2>r?e-=l+n:e+=n);null!=s&&(t+c+s>i?t-=c+s:t+=s);return[e,t]}(a,r,i,o,l,d?null:20,u?null:20);a=f[0],r=f[1]}if(d&&(a-=dD(d)?c[0]/2:"right"===d?c[0]:0),u&&(r-=dD(u)?c[1]/2:"bottom"===u?c[1]:0),GT(e)){f=function(e,t,a,r,i){var n=a.getSize(),s=n[0],o=n[1];return e=Math.min(e+s,r)-s,t=Math.min(t+o,i)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}(a,r,i,o,l);a=f[0],r=f[1]}i.moveTo(a,r)},t.prototype._updateContentNotChangedOnAxis=function(e,t){var a=this._lastDataByCoordSys,r=this._cbParamsList,i=!!a&&a.length===e.length;return i&&Bn(a,function(a,n){var s=a.dataByAxis||[],o=(e[n]||{}).dataByAxis||[];(i=i&&s.length===o.length)&&Bn(s,function(e,a){var n=o[a]||{},s=e.seriesDataIndices||[],l=n.seriesDataIndices||[];(i=i&&e.value===n.value&&e.axisType===n.axisType&&e.axisId===n.axisId&&s.length===l.length)&&Bn(s,function(e,t){var a=l[t];i=i&&e.seriesIndex===a.seriesIndex&&e.dataIndex===a.dataIndex}),r&&Bn(e.seriesDataIndices,function(e){var a=e.seriesIndex,n=t[a],s=r[a];n&&s&&s.data!==n.data&&(i=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=t,!!i},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,t){!fn.node&&t.getDom()&&(g_(this,"_updatePosition"),this._tooltipContent.dispose(),AT("itemTooltip",t))},t.type="tooltip",t}(t_);function lD(e,t,a){var r,i=t.ecModel;a?(r=new Ug(a,i,i),r=new Ug(t.option,r,i)):r=t;for(var n=e.length-1;n>=0;n--){var s=e[n];s&&(s instanceof Ug&&(s=s.get("tooltip",!0)),Kn(s)&&(s={formatter:s}),s&&(r=new Ug(s,r,i)))}return r}function cD(e,t){return e.dispatchAction||Gn(t.dispatchAction,t)}function dD(e){return"center"===e||"middle"===e}function uD(e){zS(VT),e.registerComponentModel(WT),e.registerComponentView(oD),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},_s),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},_s)}var hD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode={type:"box",ignoreSize:!0},a}return pn(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:gv.size.m,backgroundColor:gv.color.transparent,borderColor:gv.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:gv.color.primary},subtextStyle:{fontSize:12,color:gv.color.quaternary}},t}(fv),pD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.render=function(e,t,a){if(this.group.removeAll(),e.get("show")){var r=this.group,i=e.getModel("textStyle"),n=e.getModel("subtextStyle"),s=e.get("textAlign"),o=ns(e.get("textBaseline"),e.get("textVerticalAlign")),l=new mp({style:Cg(i,{text:e.get("text"),fill:i.getTextColor()},{disableBox:!0}),z2:10}),c=l.getBoundingRect(),d=e.get("subtext"),u=new mp({style:Cg(n,{text:d,fill:n.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),h=e.get("link"),p=e.get("sublink"),m=e.get("triggerEvent",!0);l.silent=!h&&!m,u.silent=!p&&!m,h&&l.on("click",function(){Gx(h,"_"+e.get("target"))}),p&&u.on("click",function(){Gx(p,"_"+e.get("subtarget"))}),Cp(l).eventData=Cp(u).eventData=m?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(l),d&&r.add(u);var f=r.getBoundingRect(),g=e.getBoxLayoutParams();g.width=f.width,g.height=f.height;var x=lv(g,dv(e,a).refContainer,e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?x.x+=x.width:"center"===s&&(x.x+=x.width/2)),o||("center"===(o=e.get("top")||e.get("bottom"))&&(o="middle"),"bottom"===o?x.y+=x.height:"middle"===o&&(x.y+=x.height/2),o=o||"top"),r.x=x.x,r.y=x.y,r.markRedraw();var v={align:s,verticalAlign:o};l.setStyle(v),u.setStyle(v),f=r.getBoundingRect();var y=x.margin,b=e.getItemStyle(["color","opacity"]);b.fill=e.get("backgroundColor");var _=new dp({shape:{x:f.x-y[3],y:f.y-y[0],width:f.width+y[1]+y[3],height:f.height+y[0]+y[2],r:e.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});r.add(_)}},t.type="title",t}(t_);function mD(e){e.registerComponentModel(hD),e.registerComponentView(pD)}var fD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode={type:"box",ignoreSize:!0},a}return pn(t,e),t.prototype.init=function(e,t,a){this.mergeDefaultAndTheme(e,a),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,a=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),$n(t)&&Bn(t,function(e,r){Kn(e)&&(e={type:e}),t[r]=Ln(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(a,e.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,a=0;a<e.length;a++){var r=e[a].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],a=[];e.eachRawSeries(function(r){var i,n=r.name;if(a.push(n),r.legendVisualProvider){var s=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(a=a.concat(s)),s.length?t=t.concat(s):i=!0}else i=!0;i&&eu(r)&&t.push(r.name)}),this._availableNames=a;var r=this.get("data")||t,i=xs(),n=qn(r,function(e){return(Kn(e)||Zn(e))&&(e={name:e}),i.get(e.name)?null:(i.set(e.name,!0),new Ug(e,this,this.ecModel))},this);this._data=Hn(n,function(e){return!!e})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&Bn(this._data,function(e){t[e.get("name")]=!1});t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;Bn(e,function(e){t[e.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;Bn(e,function(e){var a=e.get("name",!0);t.hasOwnProperty(a)||(t[a]=!0),t[a]=!t[a]})},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&Rn(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:gv.size.m,align:"auto",backgroundColor:gv.color.transparent,borderColor:gv.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:gv.color.disabled,inactiveBorderColor:gv.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:gv.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:gv.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:gv.color.tertiary,borderWidth:1,borderColor:gv.color.border},emphasis:{selectorLabel:{show:!0,color:gv.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},t}(fv),gD=Un,xD=Bn,vD=gd,yD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.newlineDisabled=!1,a}return pn(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new vD),this.group.add(this._selectorGroup=new vD),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,a){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),n=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===n?"right":"left");var s=e.get("selector",!0),o=e.get("selectorPosition",!0);!s||o&&"auto"!==o||(o="horizontal"===n?"end":"start"),this.renderInner(i,e,t,a,s,n,o);var l=dv(e,a).refContainer,c=e.getBoxLayoutParams(),d=e.get("padding"),u=lv(c,l,d),h=this.layoutInner(e,i,u,r,s,o),p=lv(En({width:h.width,height:h.height},c),l,d);this.group.x=p.x-h.x,this.group.y=p.y-h.y,this.group.markRedraw(),this.group.add(this._backgroundEl=function(e,t){var a=Fx(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),new dp({shape:{x:e.x-a[3],y:e.y-a[0],width:e.width+a[1]+a[3],height:e.height+a[0]+a[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}(h,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,a,r,i,n,s){var o=this.getContentGroup(),l=xs(),c=t.get("selectedMode"),d=t.get("triggerEvent"),u=[];a.eachRawSeries(function(e){!e.get("legendHoverLink")&&u.push(e.id)}),xD(t.getData(),function(i,n){var s=this,h=i.get("name");if(!this.newlineDisabled&&(""===h||"\n"===h)){var p=new vD;return p.newline=!0,void o.add(p)}var m=a.getSeriesByName(h)[0];if(!l.get(h))if(m){var f=m.getData(),g=f.getVisual("legendLineStyle")||{},x=f.getVisual("legendIcon"),v=f.getVisual("style"),y=this._createItem(m,h,n,i,t,e,g,v,x,c,r);y.on("click",gD(bD,h,null,r,u)).on("mouseover",gD(jD,m.name,null,r,u)).on("mouseout",gD(wD,m.name,null,r,u)),a.ssr&&y.eachChild(function(e){var t=Cp(e);t.seriesIndex=m.seriesIndex,t.dataIndex=n,t.ssrType="legend"}),d&&y.eachChild(function(e){s.packEventData(e,t,m,n,h)}),l.set(h,!0)}else a.eachRawSeries(function(s){var o=this;if(!l.get(h)&&s.legendVisualProvider){var p=s.legendVisualProvider;if(!p.containName(h))return;var m=p.indexOfName(h),f=p.getItemVisual(m,"style"),g=p.getItemVisual(m,"legendIcon"),x=Hl(f.fill);x&&0===x[3]&&(x[3]=.2,f=zn(zn({},f),{fill:$l(x,"rgba")}));var v=this._createItem(s,h,n,i,t,e,{},f,g,c,r);v.on("click",gD(bD,null,h,r,u)).on("mouseover",gD(jD,null,h,r,u)).on("mouseout",gD(wD,null,h,r,u)),a.ssr&&v.eachChild(function(e){var t=Cp(e);t.seriesIndex=s.seriesIndex,t.dataIndex=n,t.ssrType="legend"}),d&&v.eachChild(function(e){o.packEventData(e,t,s,n,h)}),l.set(h,!0)}},this)},this),i&&this._createSelector(i,t,r,n,s)},t.prototype.packEventData=function(e,t,a,r,i){var n={componentType:"legend",componentIndex:t.componentIndex,dataIndex:r,value:i,seriesIndex:a.seriesIndex};Cp(e).eventData=n},t.prototype._createSelector=function(e,t,a,r,i){var n=this.getSelectorGroup();xD(e,function(e){var r=e.type,i=new mp({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect",legendId:t.id})}});n.add(i),Ng(i,{normal:t.getModel("selectorLabel"),emphasis:t.getModel(["emphasis","selectorLabel"])},{defaultText:e.title}),hm(i)})},t.prototype._createItem=function(e,t,a,r,i,n,s,o,l,c,d){var u=e.visualDrawType,h=i.get("itemWidth"),p=i.get("itemHeight"),m=i.isSelected(t),f=r.get("symbolRotate"),g=r.get("symbolKeepAspect"),x=r.get("icon"),v=function(e,t,a,r,i,n,s){function o(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),xD(e,function(a,r){"inherit"===e[r]&&(e[r]=t[r])})}var l=t.getModel("itemStyle"),c=l.getItemStyle(),d=0===e.lastIndexOf("empty",0)?"fill":"stroke",u=l.getShallow("decal");c.decal=u&&"inherit"!==u?Oj(u,s):r.decal,"inherit"===c.fill&&(c.fill=r[i]);"inherit"===c.stroke&&(c.stroke=r[d]);"inherit"===c.opacity&&(c.opacity=("fill"===i?r:a).opacity);o(c,r);var h=t.getModel("lineStyle"),p=h.getLineStyle();if(o(p,a),"auto"===c.fill&&(c.fill=r.fill),"auto"===c.stroke&&(c.stroke=r.fill),"auto"===p.stroke&&(p.stroke=r.fill),!n){var m=t.get("inactiveBorderWidth"),f=c[d];c.lineWidth="auto"===m?r.lineWidth>0&&f?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),p.stroke=h.get("inactiveColor"),p.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:p}}(l=x||l||"roundRect",r,s,o,u,m,d),y=new vD,b=r.getModel("textStyle");if(!Yn(e.getLegendIcon)||x&&"inherit"!==x){var _="inherit"===x&&e.getData().getVisual("symbol")?"inherit"===f?e.getData().getVisual("symbolRotate"):f:0;y.add(function(e){var t=e.icon||"roundRect",a=hj(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);a.setStyle(e.itemStyle),a.rotation=(e.iconRotate||0)*Math.PI/180,a.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill=gv.color.neutral00,a.style.lineWidth=2);return a}({itemWidth:h,itemHeight:p,icon:l,iconRotate:_,itemStyle:v.itemStyle,symbolKeepAspect:g}))}else y.add(e.getLegendIcon({itemWidth:h,itemHeight:p,icon:l,iconRotate:f,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:g}));var j="left"===n?h+5:-5,w=n,N=i.get("formatter"),S=t;Kn(N)&&N?S=N.replace("{name}",null!=t?t:""):Yn(N)&&(S=N(t));var C=m?b.getTextColor():r.get("inactiveColor");y.add(new mp({style:Cg(b,{text:S,x:j,y:p/2,fill:C,align:w,verticalAlign:"middle"},{inheritColor:C})}));var k=new dp({shape:y.getBoundingRect(),style:{fill:"transparent"}}),M=r.getModel("tooltip");return M.get("show")&&ug({el:k,componentModel:i,itemName:t,itemTooltipOption:M.option}),y.add(k),y.eachChild(function(e){e.silent=!0}),k.silent=!c,this.getContentGroup().add(y),hm(y),y.__legendDataIndex=a,y},t.prototype.layoutInner=function(e,t,a,r,i,n){var s=this.getContentGroup(),o=this.getSelectorGroup();sv(e.get("orient"),s,e.get("itemGap"),a.width,a.height);var l=s.getBoundingRect(),c=[-l.x,-l.y];if(o.markRedraw(),s.markRedraw(),i){sv("horizontal",o,e.get("selectorItemGap",!0));var d=o.getBoundingRect(),u=[-d.x,-d.y],h=e.get("selectorButtonGap",!0),p=e.getOrient().index,m=0===p?"width":"height",f=0===p?"height":"width",g=0===p?"y":"x";"end"===n?u[p]+=l[m]+h:c[p]+=d[m]+h,u[1-p]+=l[f]/2-d[f]/2,o.x=u[0],o.y=u[1],s.x=c[0],s.y=c[1];var x={x:0,y:0};return x[m]=l[m]+h+d[m],x[f]=Math.max(l[f],d[f]),x[g]=Math.min(0,d[g]+u[1-p]),x}return s.x=c[0],s.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(t_);function bD(e,t,a,r){wD(e,t,a,r),a.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),jD(e,t,a,r)}function _D(e){for(var t,a=e.getZr().storage.getDisplayList(),r=0,i=a.length;r<i&&!(t=a[r].states.emphasis);)r++;return t&&t.hoverLayer}function jD(e,t,a,r){_D(a)||a.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function wD(e,t,a,r){_D(a)||a.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function ND(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(e){for(var a=0;a<t.length;a++)if(!t[a].isSelected(e.name))return!1;return!0})}function SD(e,t,a){var r="allSelect"===e||"inverseSelect"===e,i={},n=[];a.eachComponent({mainType:"legend",query:t},function(a){r?a[e]():a[e](t.name),CD(a,i),n.push(a.componentIndex)});var s={};return a.eachComponent("legend",function(e){Bn(i,function(t,a){e[t?"select":"unSelect"](a)}),CD(e,s)}),r?{selected:s,legendIndex:n}:{name:t.name,selected:s}}function CD(e,t){var a=t||{};return Bn(e.getData(),function(t){var r=t.get("name");if("\n"!==r&&""!==r){var i=e.isSelected(r);bs(a,r)?a[r]=a[r]&&i:a[r]=i}}),a}function kD(e){e.registerComponentModel(fD),e.registerComponentView(yD),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,ND),e.registerSubTypeDefaulter("legend",function(){return"plain"}),function(e){e.registerAction("legendToggleSelect","legendselectchanged",Un(SD,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",Un(SD,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",Un(SD,"inverseSelect")),e.registerAction("legendSelect","legendselected",Un(SD,"select")),e.registerAction("legendUnSelect","legendunselected",Un(SD,"unSelect"))}(e)}var MD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return pn(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,a,r){var i=pv(t);e.prototype.init.call(this,t,a,r),TD(this,t,i)},t.prototype.mergeOption=function(t,a){e.prototype.mergeOption.call(this,t,a),TD(this,this.option,t)},t.type="legend.scroll",t.defaultOption=Kg(fD.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:gv.color.accent50,pageIconInactiveColor:gv.color.accent10,pageIconSize:15,pageTextStyle:{color:gv.color.tertiary},animationDurationUpdate:800}),t}(fD);function TD(e,t,a){var r=[1,1];r[e.getOrient().index]=0,hv(t,a,{type:"box",ignoreSize:!!r})}var DD=gd,ID=["width","height"],AD=["x","y"],PD=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.newlineDisabled=!0,a._currentIndex=0,a}return pn(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new DD),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new DD)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,a,r,i,n,s,o){var l=this;e.prototype.renderInner.call(this,t,a,r,i,n,s,o);var c=this._controllerGroup,d=a.get("pageIconSize",!0),u=$n(d)?d:[d,d];p("pagePrev",0);var h=a.getModel("pageTextStyle");function p(e,t){var r=e+"DataIndex",n=ng(a.get("pageIcons",!0)[a.getOrient().name][t],{onclick:Gn(l._pageGo,l,r,a,i)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});n.name=e,c.add(n)}c.add(new mp({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},t.prototype.layoutInner=function(e,t,a,r,i,n){var s=this.getSelectorGroup(),o=e.getOrient().index,l=ID[o],c=AD[o],d=ID[1-o],u=AD[1-o];i&&sv("horizontal",s,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),p=s.getBoundingRect(),m=[-p.x,-p.y],f=Pn(a);i&&(f[l]=a[l]-p[l]-h);var g=this._layoutContentAndController(e,r,f,o,l,d,u,c);if(i){if("end"===n)m[o]+=g[l]+h;else{var x=p[l]+h;m[o]-=x,g[c]-=x}g[l]+=p[l]+h,m[1-o]+=g[u]+g[d]/2-p[d]/2,g[d]=Math.max(g[d],p[d]),g[u]=Math.min(g[u],p[u]+m[1-o]),s.x=m[0],s.y=m[1],s.markRedraw()}return g},t.prototype._layoutContentAndController=function(e,t,a,r,i,n,s,o){var l=this.getContentGroup(),c=this._containerGroup,d=this._controllerGroup;sv(e.get("orient"),l,e.get("itemGap"),r?a.width:null,r?null:a.height),sv("horizontal",d,e.get("pageButtonItemGap",!0));var u=l.getBoundingRect(),h=d.getBoundingRect(),p=this._showController=u[i]>a[i],m=[-u.x,-u.y];t||(m[r]=l[o]);var f=[0,0],g=[-h.x,-h.y],x=ns(e.get("pageButtonGap",!0),e.get("itemGap",!0));p&&("end"===e.get("pageButtonPosition",!0)?g[r]+=a[i]-h[i]:f[r]+=h[i]+x);g[1-r]+=u[n]/2-h[n]/2,l.setPosition(m),c.setPosition(f),d.setPosition(g);var v={x:0,y:0};if(v[i]=p?a[i]:u[i],v[n]=Math.max(u[n],h[n]),v[s]=Math.min(0,h[s]+g[1-r]),c.__rectSize=a[i],p){var y={x:0,y:0};y[i]=Math.max(a[i]-h[i]-x,0),y[n]=v[n],c.setClipPath(new dp({shape:y})),c.__rectSize=y[i]}else d.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(e);return null!=b.pageIndex&&Rf(l,{x:b.contentPosition[0],y:b.contentPosition[1]},p?e:null),this._updatePageInfoView(e,b),v},t.prototype._pageGo=function(e,t,a){var r=this._getPageInfo(t)[e];null!=r&&a.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var a=this._controllerGroup;Bn(["pagePrev","pageNext"],function(r){var i=null!=t[r+"DataIndex"],n=a.childOfName(r);n&&(n.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),n.cursor=i?"pointer":"default")});var r=a.childOfName("pageText"),i=e.get("pageFormatter"),n=t.pageIndex,s=null!=n?n+1:0,o=t.pageCount;r&&i&&r.setStyle("text",Kn(i)?i.replace("{current}",null==s?"":s+"").replace("{total}",null==o?"":o+""):i({current:s,total:o}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),a=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,n=ID[i],s=AD[i],o=this._findTargetItemIndex(t),l=a.children(),c=l[o],d=l.length,u=d?1:0,h={contentPosition:[a.x,a.y],pageCount:u,pageIndex:u-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return h;var p=v(c);h.contentPosition[i]=-p.s;for(var m=o+1,f=p,g=p,x=null;m<=d;++m)(!(x=v(l[m]))&&g.e>f.s+r||x&&!y(x,f.s))&&(f=g.i>f.i?g:x)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=f.i),++h.pageCount),g=x;for(m=o-1,f=p,g=p,x=null;m>=-1;--m)(x=v(l[m]))&&y(g,x.s)||!(f.i<g.i)||(g=f,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=f.i),++h.pageCount,++h.pageIndex),f=x;return h;function v(e){if(e){var t=e.getBoundingRect(),a=t[s]+e[s];return{s:a,e:a+t[n],i:e.__legendDataIndex}}}function y(e,t){return e.e>=t&&e.s<=t+r}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild(function(r,i){var n=r.__legendDataIndex;null==a&&null!=n&&(a=i),n===e&&(t=i)}),null!=t?t:a):0;var t,a},t.type="legend.scroll",t}(yD);function LD(e){zS(kD),e.registerComponentModel(MD),e.registerComponentView(PD),function(e){e.registerAction("legendScroll","legendscroll",function(e,t){var a=e.scrollDataIndex;null!=a&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(a)})})}(e)}function zD(e){zS(kD),zS(LD)}function ED(e,t,a){var r=vn.createCanvas(),i=t.getWidth(),n=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=n+"px",r.setAttribute("data-zr-dom-id",e)),r.width=i*a,r.height=n*a,r}var RD=function(e){function t(t,a,r){var i,n=e.call(this)||this;n.motionBlur=!1,n.lastFrameAlpha=.7,n.dpr=1,n.virtual=!1,n.config={},n.incremental=!1,n.zlevel=0,n.maxRepaintRectCount=5,n.__dirty=!0,n.__firstTimePaint=!0,n.__used=!1,n.__drawIndex=0,n.__startIndex=0,n.__endIndex=0,n.__prevStartIndex=null,n.__prevEndIndex=null,r=r||Pc,"string"==typeof t?i=ED(t,a,r):Qn(t)&&(t=(i=t).id),n.id=t,n.dom=i;var s=i.style;return s&&(ys(i),i.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),n.painter=a,n.dpr=r,n}return Ns(t,e),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=ED("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,t,a,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var i,n=[],s=this.maxRepaintRectCount,o=!1,l=new Do(0,0,0,0);function c(e){if(e.isFinite()&&!e.isZero())if(0===n.length){(t=new Do(0,0,0,0)).copy(e),n.push(t)}else{for(var t,a=!1,r=1/0,i=0,c=0;c<n.length;++c){var d=n[c];if(d.intersect(e)){var u=new Do(0,0,0,0);u.copy(d),u.union(e),n[c]=u,a=!0;break}if(o){l.copy(e),l.union(d);var h=e.width*e.height,p=d.width*d.height,m=l.width*l.height-h-p;m<r&&(r=m,i=c)}}if(o&&(n[i].union(e),a=!0),!a)(t=new Do(0,0,0,0)).copy(e),n.push(t);o||(o=n.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){if(p=e[d]){var u=p.shouldBePainted(a,r,!0,!0);(m=p.__isRendered&&(1&p.__dirty||!u)?p.getPrevPaintRect():null)&&c(m);var h=u&&(1&p.__dirty||!p.__isRendered)?p.getPaintRect():null;h&&c(h)}}for(d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var p,m;u=(p=t[d])&&p.shouldBePainted(a,r,!0,!0);if(p&&(!u||!p.__zr)&&p.__isRendered)(m=p.getPrevPaintRect())&&c(m)}do{i=!1;for(d=0;d<n.length;)if(n[d].isZero())n.splice(d,1);else{for(var f=d+1;f<n.length;)n[d].intersect(n[f])?(i=!0,n[d].union(n[f]),n.splice(f,1)):f++;d++}}while(i);return this._paintRects=n,n},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,t){var a=this.dpr,r=this.dom,i=r.style,n=this.domBack;i&&(i.width=e+"px",i.height=t+"px"),r.width=e*a,r.height=t*a,n&&(n.width=e*a,n.height=t*a,1!==a&&this.ctxBack.scale(a,a))},t.prototype.clear=function(e,t,a){var r=this.dom,i=this.ctx,n=r.width,s=r.height;t=t||this.clearColor;var o=this.motionBlur&&!e,l=this.lastFrameAlpha,c=this.dpr,d=this;o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,n/c,s/c));var u=this.domBack;function h(e,a,r,n){if(i.clearRect(e,a,r,n),t&&"transparent"!==t){var s=void 0;if(as(t))s=(t.global||t.__width===r&&t.__height===n)&&t.__canvasGradient||fj(i,t,{x:0,y:0,width:r,height:n}),t.__canvasGradient=s,t.__width=r,t.__height=n;else null!=t.image&&(t.scaleX=t.scaleX||c,t.scaleY=t.scaleY||c,s=Sj(i,t,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));i.save(),i.fillStyle=s||t,i.fillRect(e,a,r,n),i.restore()}o&&(i.save(),i.globalAlpha=l,i.drawImage(u,e,a,r,n),i.restore())}!a||o?h(0,0,n,s):a.length&&Bn(a,function(e){h(e.x*c,e.y*c,e.width*c,e.height*c)})},t}(Bs),OD=1e5,FD=314159,BD=.01;var qD=function(){function e(e,t,a,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=a=zn({},a||{}),this.dpr=a.devicePixelRatio||Pc,this._singleCanvas=i,this.root=e,e.style&&(ys(e),e.innerHTML=""),this.storage=t;var n=this._zlevelList;this._prevDisplayList=[];var s=this._layers;if(i){var o=e,l=o.width,c=o.height;null!=a.width&&(l=a.width),null!=a.height&&(c=a.height),this.dpr=a.devicePixelRatio||1,o.width=l*this.dpr,o.height=c*this.dpr,this._width=l,this._height=c;var d=new RD(o,this,this.dpr);d.__builtin__=!0,d.initContext(),s[314159]=d,d.zlevel=FD,n.push(FD),this._domRoot=e}else{this._width=xj(e,0,a),this._height=xj(e,1,a);var u=this._domRoot=function(e,t){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}(this._width,this._height);e.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),a=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,a,e,this._redrawId);for(var i=0;i<r.length;i++){var n=r[i],s=this._layers[n];if(!s.__builtin__&&s.refresh){var o=0===i?this._backgroundColor:null;s.refresh(o)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(e){var t=e.length,a=this._hoverlayer;if(a&&a.clear(),t){for(var r,i={inHover:!0,viewWidth:this._width,viewHeight:this._height},n=0;n<t;n++){var s=e[n];s.__inHover&&(a||(a=this._hoverlayer=this.getLayer(OD)),r||(r=a.ctx).save(),Lj(r,s,i,n===t-1))}r&&r.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(OD)},e.prototype.paintOne=function(e,t){Pj(e,t)},e.prototype._paintList=function(e,t,a,r){if(this._redrawId===r){a=a||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,a),n=i.finished,s=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),n)this.eachLayer(function(e){e.afterBrush&&e.afterBrush()});else{var o=this;el(function(){o._paintList(e,t,a,r)})}}},e.prototype._compositeManually=function(){var e=this.getLayer(FD).ctx,t=this._domRoot.width,a=this._domRoot.height;e.clearRect(0,0,t,a),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,a)})},e.prototype._doPaintList=function(e,t,a){for(var r=this,i=[],n=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var o=this._zlevelList[s],l=this._layers[o];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||a)&&i.push(l)}for(var c=!0,d=!1,u=function(s){var o,l=i[s],u=l.ctx,p=n&&l.createRepaintRects(e,t,h._width,h._height),m=a?l.__startIndex:l.__drawIndex,f=!a&&l.incremental&&Date.now,g=f&&Date.now(),x=l.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,x,p);else if(m===l.__startIndex){var v=e[m];v.incremental&&v.notClear&&!a||l.clear(!1,x,p)}-1===m&&(m=l.__startIndex);var y=function(t){var a={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(o=m;o<l.__endIndex;o++){var i=e[o];if(i.__inHover&&(d=!0),r._doPaintEl(i,l,n,t,a,o===l.__endIndex-1),f)if(Date.now()-g>15)break}a.prevElClipPaths&&u.restore()};if(p)if(0===p.length)o=l.__endIndex;else for(var b=h.dpr,_=0;_<p.length;++_){var j=p[_];u.save(),u.beginPath(),u.rect(j.x*b,j.y*b,j.width*b,j.height*b),u.clip(),y(j),u.restore()}else u.save(),y(),u.restore();l.__drawIndex=o,l.__drawIndex<l.__endIndex&&(c=!1)},h=this,p=0;p<i.length;p++)u(p);return fn.wxa&&Bn(this._layers,function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()}),{finished:c,needsRefreshHover:d}},e.prototype._doPaintEl=function(e,t,a,r,i,n){var s=t.ctx;if(a){var o=e.getPaintRect();(!r||o&&o.intersect(r))&&(Lj(s,e,i,n),e.setPrevPaintRect(o))}else Lj(s,e,i,n)},e.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=FD);var a=this._layers[e];return a||((a=new RD("zr_"+e,this,this.dpr)).zlevel=e,a.__builtin__=!0,this._layerConfig[e]?Ln(a,this._layerConfig[e],!0):this._layerConfig[e-BD]&&Ln(a,this._layerConfig[e-BD],!0),t&&(a.virtual=t),this.insertLayer(e,a),a.initContext()),a},e.prototype.insertLayer=function(e,t){var a=this._layers,r=this._zlevelList,i=r.length,n=this._domRoot,s=null,o=-1;if(!a[e]&&function(e){return!!e&&(!!e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)}(t)){if(i>0&&e>r[0]){for(o=0;o<i-1&&!(r[o]<e&&r[o+1]>e);o++);s=a[r[o]]}if(r.splice(o+1,0,e),a[e]=t,!t.virtual)if(s){var l=s.dom;l.nextSibling?n.insertBefore(t.dom,l.nextSibling):n.appendChild(t.dom)}else n.firstChild?n.insertBefore(t.dom,n.firstChild):n.appendChild(t.dom);t.painter||(t.painter=this)}},e.prototype.eachLayer=function(e,t){for(var a=this._zlevelList,r=0;r<a.length;r++){var i=a[r];e.call(t,this._layers[i],i)}},e.prototype.eachBuiltinLayer=function(e,t){for(var a=this._zlevelList,r=0;r<a.length;r++){var i=a[r],n=this._layers[i];n.__builtin__&&e.call(t,n,i)}},e.prototype.eachOtherLayer=function(e,t){for(var a=this._zlevelList,r=0;r<a.length;r++){var i=a[r],n=this._layers[i];n.__builtin__||e.call(t,n,i)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(e){function t(e){n&&(n.__endIndex!==e&&(n.__dirty=!0),n.__endIndex=e)}if(this.eachBuiltinLayer(function(e,t){e.__dirty=e.__used=!1}),this._singleCanvas)for(var a=1;a<e.length;a++){if((o=e[a]).zlevel!==e[a-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var r,i,n=null,s=0;for(i=0;i<e.length;i++){var o,l=(o=e[i]).zlevel,c=void 0;r!==l&&(r=l,s=0),o.incremental?((c=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,s=1):c=this.getLayer(l+(s>0?BD:0),this._needsManuallyCompositing),c.__builtin__||An("ZLevel "+l+" has been used by unkown layer "+c.id),c!==n&&(c.__used=!0,c.__startIndex!==i&&(c.__dirty=!0),c.__startIndex=i,c.incremental?c.__drawIndex=-1:c.__drawIndex=i,t(i),n=c),1&o.__dirty&&!o.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=i))}t(i),this.eachBuiltinLayer(function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(e){e.clear()},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Bn(this._layers,function(e){e.setUnpainted()})},e.prototype.configLayer=function(e,t){if(t){var a=this._layerConfig;a[e]?Ln(a[e],t,!0):a[e]=t;for(var r=0;r<this._zlevelList.length;r++){var i=this._zlevelList[r];if(i===e||i===e+BD)Ln(this._layers[i],a[e],!0)}}},e.prototype.delLayer=function(e){var t=this._layers,a=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],a.splice(Rn(a,e),1))},e.prototype.resize=function(e,t){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var r=this._opts,i=this.root;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=xj(i,0,r),t=xj(i,1,r),a.style.display="",this._width!==e||t!==this._height){for(var n in a.style.width=e+"px",a.style.height=t+"px",this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(FD).resize(e,t)}return this},e.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new RD("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var a=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,i=t.dom.height;this.eachLayer(function(e){e.__builtin__?a.drawImage(e.dom,0,0,r,i):e.renderToCanvas&&(a.save(),e.renderToCanvas(a),a.restore())})}else for(var n={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),o=0,l=s.length;o<l;o++){var c=s[o];Lj(a,c,n,o===l-1)}return t.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function VD(e){e.registerPainter("canvas",qD)}const HD=$,WD=Y,GD=V,UD=ke.forwardRef(({className:e,...t},a)=>r.jsx(q,{ref:a,className:vr("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));UD.displayName=q.displayName;const $D=ke.forwardRef(({className:e,children:t,...a},i)=>r.jsxs(GD,{children:[r.jsx(UD,{}),r.jsxs(H,{ref:i,className:vr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,r.jsxs(W,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[r.jsx(qe,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$D.displayName=H.displayName;const YD=({className:e,...t})=>r.jsx("div",{className:vr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});YD.displayName="DialogHeader";const KD=({className:e,...t})=>r.jsx("div",{className:vr("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});KD.displayName="DialogFooter";const XD=ke.forwardRef(({className:e,...t},a)=>r.jsx(G,{ref:a,className:vr("text-lg font-semibold leading-none tracking-tight",e),...t}));XD.displayName=G.displayName;const ZD=ke.forwardRef(({className:e,...t},a)=>r.jsx(U,{ref:a,className:vr("text-sm text-muted-foreground",e),...t}));function QD({data:e,date:t}){const[a,i]=ke.useState(!1),n=t?t.toLocaleDateString("pt-BR"):(new Date).toLocaleDateString("pt-BR"),s=e.reduce((e,t)=>e+t.previsto,0),o=e.reduce((e,t)=>e+t.realizado,0),l=o-s,c=s>0?(100*(o/s-1)).toFixed(2):"0.00";return r.jsxs(HD,{open:a,onOpenChange:i,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{variant:"outline",size:"sm",className:"border-border-subtle bg-card-secondary/50 hover:bg-card-secondary/80 hover:text-white hover:transform hover:translate-x-px hover:-translate-y-px",children:[r.jsx(ot,{className:"h-4 w-4 mr-2"}),"Visualizar Dados"]})}),r.jsxs($D,{className:"max-w-6xl max-h-[90vh] overflow-auto bg-card border-border-subtle",children:[r.jsx(YD,{children:r.jsxs(XD,{className:"text-center text-2xl font-semibold text-text-primary",children:["Dados de Carregamento - ",n]})}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"rounded-lg border border-border-subtle overflow-hidden shadow-lg",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gradient-to-r from-[#0528F2] to-[#3b82f6] text-[#F2F2F2]",children:[r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-left font-semibold rounded-tl-lg",children:"Data"}),r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-left font-semibold",children:"Ingrediente"}),r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-right font-semibold",children:"Previsto (kg)"}),r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-right font-semibold",children:"Realizado (kg)"}),r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-right font-semibold",children:"Desvio (kg)"}),r.jsx("th",{className:"border-b-2 border-[#0528F2] p-3 text-right font-semibold rounded-tr-lg",children:"Desvio (%)"})]})}),r.jsxs("tbody",{children:[e.map((e,t)=>{const a=e.diferenca,i=e.previsto>0?(100*(e.realizado/e.previsto-1)).toFixed(2):"0.00",s=t%2==0;return r.jsxs("tr",{className:(s?"bg-[#10276B]":"bg-[#0B1C4D]")+" hover:bg-[rgba(5,40,242,0.2)] transition-colors cursor-pointer",children:[r.jsx("td",{className:"p-3 text-[#F2F2F2]",children:n}),r.jsx("td",{className:"p-3 font-medium text-[#F2F2F2]",children:e.name}),r.jsx("td",{className:"p-3 text-right font-medium text-[#F2F2F2]",children:e.previsto.toLocaleString("pt-BR")}),r.jsx("td",{className:"p-3 text-right font-medium text-[#F2F2F2]",children:e.realizado.toLocaleString("pt-BR")}),r.jsxs("td",{className:"p-3 text-right font-bold "+(a>=0?"text-[#05F283]":"text-[#F2133C]"),children:[a>=0?"+":"",a.toLocaleString("pt-BR")]}),r.jsxs("td",{className:"p-3 text-right font-bold "+(a>=0?"text-[#05F283]":"text-[#F2133C]"),children:[a>=0?"+":"",i,"%"]})]},t)}),r.jsxs("tr",{className:"bg-gradient-to-r from-[#0528F2] to-[#3b82f6] text-[#F2F2F2] font-bold",children:[r.jsx("td",{className:"p-4 text-lg font-bold rounded-bl-lg",colSpan:2,children:"TOTAL GERAL"}),r.jsx("td",{className:"p-4 text-right text-lg font-bold",children:s.toLocaleString("pt-BR")}),r.jsx("td",{className:"p-4 text-right text-lg font-bold",children:o.toLocaleString("pt-BR")}),r.jsxs("td",{className:"p-4 text-right text-lg font-bold "+(l>=0?"text-[#05F283]":"text-[#F2133C]"),children:[l>=0?"+":"",l.toLocaleString("pt-BR")]}),r.jsxs("td",{className:"p-4 text-right text-lg font-bold rounded-br-lg "+(l>=0?"text-[#05F283]":"text-[#F2133C]"),children:[l>=0?"+":"",c,"%"]})]})]})]})})})]})]})}ZD.displayName=U.displayName,zS([Ak,HT,uD,mD,zD,VD]);const JD=ke.memo(function({data:e,height:t=400,date:a,title:i,xAxisData:n,series:s,showLegend:o=!0,yAxisLabel:l,formatTooltip:c}){const d=ke.useRef(null),u=ke.useRef(null),h=ke.useRef(null),p=!e&&n&&s;return ke.useEffect(()=>{if(!d.current)return;const t=d.current.clientWidth,a=d.current.clientHeight;if(0===t||0===a)return;if(!(p||e&&0!==e.length))return void(u.current&&!u.current.isDisposed()&&u.current.clear());if(p&&(!n||0===n.length))return void(u.current&&!u.current.isDisposed()&&u.current.clear());if(!u.current||u.current.isDisposed()){const e=Ow(d.current,null,{renderer:"canvas",useDirtyRect:!1});u.current=e,h.current=new ResizeObserver(()=>{e.resize()}),h.current.observe(d.current)}let r;r=p?{title:i?{text:i,textStyle:{color:"#ffffff"}}:void 0,tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1,textStyle:{color:"#ffffff"},formatter:c||void 0},legend:o?{data:s.map(e=>e.name),textStyle:{color:"#ffffff"},top:20}:void 0,grid:{left:"12%",right:"5%",bottom:"15%",top:o?"15%":"10%",containLabel:!1},xAxis:{type:"category",data:n,axisPointer:{type:"shadow"},axisLabel:{color:"#ffffff",interval:0,rotate:n.length>5?45:0,fontSize:12},axisLine:{lineStyle:{color:"#4b5563"}}},yAxis:{type:"value",name:l,nameLocation:"middle",nameGap:80,nameRotate:90,nameTextStyle:{color:"#ffffff",fontSize:14},axisLabel:{color:"#ffffff",formatter:function(e){return e.toLocaleString("pt-BR")}},axisLine:{lineStyle:{color:"#4b5563"}},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:s.map(e=>({name:e.name,type:"bar",data:e.data,itemStyle:{color:e.color||"#3b82f6",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:e.color||"#3b82f6"}}})),animation:!0,animationDuration:500,animationEasing:"cubicOut"}:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1,textStyle:{color:"#ffffff"},formatter:function(e){if(!Array.isArray(e)||!e.length)return"";const t=e[0].data,a=t.name,r=t.previsto,i=t.realizado,n=t.diferenca,s=r>0?(100*(i/r-1)).toFixed(1):"0";return`\n              <div style="padding: 8px;">\n                <div style="font-weight: bold; margin-bottom: 4px;">${a}</div>\n                <div style="color: #3b82f6;">Previsto: ${r.toLocaleString("pt-BR")} kg</div>\n                <div style="color: #10b981;">Realizado: ${i.toLocaleString("pt-BR")} kg</div>\n                <div style="color: ${n>=0?"#eab308":"#ef4444"}; font-weight: bold;">\n                  Diferena: ${n>0?"+":""}${n.toLocaleString("pt-BR")} kg (${s}%)\n                </div>\n              </div>\n            `}},legend:{data:["Previsto (kg)","Realizado (kg)"],textStyle:{color:"#ffffff"},top:20},grid:{left:"12%",right:"5%",bottom:"15%",top:"15%",containLabel:!1},xAxis:{type:"category",data:e.map(e=>e.name),axisPointer:{type:"shadow"},axisLabel:{color:"#ffffff",interval:0,rotate:45,fontSize:12},axisLine:{lineStyle:{color:"#4b5563"}}},yAxis:{type:"value",name:"Quantidade (kg)",nameLocation:"middle",nameGap:80,nameRotate:90,nameTextStyle:{color:"#ffffff",fontSize:14},axisLabel:{color:"#ffffff",formatter:function(e){return e.toLocaleString("pt-BR")}},axisLine:{lineStyle:{color:"#4b5563"}},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"Previsto (kg)",type:"bar",data:e.map(e=>({value:e.previsto,name:e.name,previsto:e.previsto,realizado:e.realizado,diferenca:e.diferenca})),itemStyle:{color:"#3b82f6",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:"#3b82f6"}}},{name:"Realizado (kg)",type:"bar",data:e.map(e=>({value:e.realizado,name:e.name,previsto:e.previsto,realizado:e.realizado,diferenca:e.diferenca})),itemStyle:{color:"#10b981",borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:"#10b981"}}}],animation:!0,animationDuration:500,animationEasing:"cubicOut"},u.current.setOption(r,{notMerge:!0,lazyUpdate:!1,silent:!1})},[e,a,i,n,s,o,l,c,p]),ke.useEffect(()=>{const e=d.current,t=h.current;return()=>{t&&e&&(t.unobserve(e),t.disconnect()),u.current&&!u.current.isDisposed()&&(u.current.dispose(),u.current=null)}},[]),ke.useEffect(()=>{const e=()=>{u.current&&!u.current.isDisposed()&&u.current.resize()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.jsxs("div",{className:"relative",children:[!p&&e&&e.length>0&&r.jsx("div",{className:"absolute top-0 right-0 z-10",children:r.jsx(QD,{data:e,date:a})}),r.jsx("div",{ref:d,style:{height:`${t}px`,width:"100%"},className:"chart-container"})]})}),eI=()=>{const{data:e,isLoading:t,error:a}=(()=>{const e="b7a05c98-9fc5-4aef-b92f-bfa0586bf495";return qa({queryKey:["historico-consumo",e],queryFn:async()=>{var t;try{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",e).order("data",{ascending:!1}).limit(1);if(r)throw r;const i=null==(t=null==a?void 0:a[0])?void 0:t.data;if(!i)return[];const{data:n,error:s}=await ki.from("fato_historico_consumo").select("grupo_genetico, sexo, qtd_animais").eq("organization_id",e).eq("data",i).not("grupo_genetico","is",null).not("sexo","is",null);if(s)throw s;if(!n||0===n.length)return[];const o=n.reduce((e,t)=>(e[t.grupo_genetico]||(e[t.grupo_genetico]={MA:0,FE:0}),e[t.grupo_genetico][t.sexo]=(e[t.grupo_genetico][t.sexo]||0)+(t.qtd_animais||0),e),{}),l=[];return Object.entries(o).forEach(([e,t])=>{Object.entries(t).forEach(([t,a])=>{a>0&&l.push({grupo_genetico:e,sexo:t,total_animais:a})})}),l}catch(a){throw a}},enabled:!0,staleTime:3e5,refetchOnWindowFocus:!1})})(),[i,n]=ke.useState("TODOS"),s=ke.useMemo(()=>{if(!e||0===e.length)return null;const t=("TODOS"===i?e:e.filter(e=>e.sexo===i)).reduce((e,t)=>(e[t.grupo_genetico]=(e[t.grupo_genetico]||0)+t.total_animais,e),{}),a=Object.entries(t).sort(([,e],[,t])=>t-e).reduce((e,[t,a])=>(e.categories.push(t),e.values.push(a),e),{categories:[],values:[]});return 0===a.categories.length?null:{xAxisData:a.categories,series:[{name:"MA"===i?"Machos":"FE"===i?"Fmeas":"Total de Animais",data:a.values,color:"MA"===i?"#3b82f6":"FE"===i?"#ec4899":"#8b5cf6"}]}},[e,i]),o=ke.useMemo(()=>{if(!e)return 0;return("TODOS"===i?e:e.filter(e=>e.sexo===i)).reduce((e,t)=>e+t.total_animais,0)},[e,i]);return t?r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(lt,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):a?r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Erro ao carregar dados do histrico de consumo"})}):s?r.jsxs(Ii,{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:r.jsx(Xe,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Animais por Grupo Gentico"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",o.toLocaleString("pt-BR")," animais"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ct,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs(en,{value:i,onValueChange:n,children:[r.jsx(an,{className:"w-[140px]",children:r.jsx(tn,{placeholder:"Filtrar por sexo"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"TODOS",children:"Todos"}),r.jsx(on,{value:"MA",children:"Machos"}),r.jsx(on,{value:"FE",children:"Fmeas"})]})]})]})]}),r.jsx("div",{className:"h-[300px]",children:r.jsx(JD,{title:"",xAxisData:s.xAxisData,series:s.series,height:300,showLegend:!1,yAxisLabel:"Quantidade de Animais",formatTooltip:e=>{var t,a;const r=(null==(t=e[0])?void 0:t.value)||0;return`\n              <div class="p-2">\n                <div class="font-semibold">${(null==(a=e[0])?void 0:a.name)||""}</div>\n                <div class="flex items-center justify-between gap-4 mt-1">\n                  <span class="text-muted-foreground">Animais:</span>\n                  <span class="font-medium">${r.toLocaleString("pt-BR")}</span>\n                </div>\n              </div>\n            `}})})]}):r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Nenhum dado disponvel para exibio"})})};zS([function(e){e.registerChartView(rk),e.registerSeriesModel(NC),e.registerLayout({seriesType:"line",plan:a_(),reset:function(e){var t=e.getData(),a=e.coordinateSystem;if(e.pipelineContext,a){var r=qn(a.dimensions,function(e){return t.mapDimension(e)}).slice(0,2),i=r.length,n=t.getCalculationInfo("stackResultDimension");MN(t,r[0])&&(r[0]=n),MN(t,r[1])&&(r[1]=n);var s=t.getStore(),o=t.getDimensionIndex(r[0]),l=t.getDimensionIndex(r[1]);return i&&{progress:function(e,t){for(var r=KN((e.end-e.start)*i),n=[],c=[],d=e.start,u=0;d<e.end;d++){var h=void 0;if(1===i){var p=s.get(o,d);h=a.dataToPoint(p,null,c)}else n[0]=s.get(o,d),n[1]=s.get(l,d),h=a.dataToPoint(n,null,c);r[u++]=h[0],r[u++]=h[1]}t.setLayout("points",r)}}}}}),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,sk("line"))},HT,uD,mD,zD,VD]);const tI=()=>{const{data:e,isLoading:t,error:a}=(()=>{const e="b7a05c98-9fc5-4aef-b92f-bfa0586bf495";return qa({queryKey:["entrada-mensal-animais",e],queryFn:async()=>{try{const{data:t,error:a}=await ki.rpc("get_monthly_entries_with_avg",{org_id:e});if(a){const{data:t,error:a}=await ki.from("fato_historico_consumo").select("data_entrada, qtd_animais, curral, lote").eq("organization_id",e).not("data_entrada","is",null).not("qtd_animais","is",null),{data:r,error:i}=await ki.from("fato_historico_consumo").select("data, qtd_animais").eq("organization_id",e).not("data","is",null).not("qtd_animais","is",null);if(a||i)throw a||i;if(!t||0===t.length)return[];const n=t.reduce((e,t)=>{if(!t.data_entrada||!t.qtd_animais)return e;const a=`${t.data_entrada}-${t.curral}-${t.lote}`;return e[a]||(e[a]={data_entrada:t.data_entrada,qtd_animais:t.qtd_animais}),e},{}),s=Object.values(n).reduce((e,t)=>{const a=new Date(t.data_entrada),r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;return e[r]=(e[r]||0)+t.qtd_animais,e},{}),o=(null==r?void 0:r.reduce((e,t)=>{if(!t.data||!t.qtd_animais)return e;const a=t.data;return e[a]=(e[a]||0)+t.qtd_animais,e},{}))||{},l={};Object.entries(o).forEach(([e,t])=>{const a=new Date(e),r=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;l[r]||(l[r]={total:0,days:0}),l[r].total+=t,l[r].days+=1});const c={};Object.entries(l).forEach(([e,t])=>{c[e]=Math.round(t.total/t.days)});const d=new Set([...Object.keys(s),...Object.keys(c)]);return Array.from(d).map(e=>{const[t,a]=e.split("-"),r=new Date(parseInt(t),parseInt(a)-1);return{mes:e,total_animais:s[e]||0,media_alojados:c[e]||0,mes_formatado:r.toLocaleDateString("pt-BR",{month:"short",year:"numeric"}).replace(".","")}}).sort((e,t)=>e.mes.localeCompare(t.mes)).slice(-12)}return t||[]}catch(a){throw a}},enabled:!0,staleTime:3e5,refetchOnWindowFocus:!1})})(),i=ke.useRef(null),n=ke.useRef(null),{chartData:s,totalAnimais:o,totalMediaAlojados:l,maiorMes:c}=ke.useMemo(()=>{if(!e||0===e.length)return{chartData:null,totalAnimais:0,totalMediaAlojados:0,maiorMes:null};const t=e.reduce((e,t)=>e+t.total_animais,0),a=Math.round(e.reduce((e,t)=>e+t.media_alojados,0)/e.length),r=e.reduce((e,t)=>t.total_animais>e.total_animais?t:e);return{chartData:{categories:e.map(e=>e.mes_formatado),entradaValues:e.map(e=>e.total_animais),mediaValues:e.map(e=>e.media_alojados)},totalAnimais:t,totalMediaAlojados:a,maiorMes:r}},[e]);return ke.useEffect(()=>{if(!i.current||!s)return;if(!n.current||n.current.isDisposed()){const e=Ow(i.current,null,{renderer:"canvas",useDirtyRect:!1});n.current=e}const e={tooltip:{trigger:"axis",backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1,textStyle:{color:"#ffffff"},formatter:function(e){if(!Array.isArray(e)||!e.length)return"";const t=e[0];return`\n            <div style="padding: 8px;">\n              <div style="font-weight: bold; margin-bottom: 4px;">${t.name}</div>\n              <div style="color: #10b981;">\n                Animais: ${t.value.toLocaleString("pt-BR")}\n              </div>\n            </div>\n          `}},legend:{data:["Entrada de Animais","Mdia Alojados"],textStyle:{color:"#ffffff"},top:10},grid:{left:"10%",right:"5%",bottom:"15%",top:"15%",containLabel:!1},xAxis:{type:"category",data:s.categories,axisLabel:{color:"#ffffff",interval:0,rotate:45,fontSize:11},axisLine:{lineStyle:{color:"#4b5563"}}},yAxis:{type:"value",name:"Quantidade",nameLocation:"middle",nameGap:50,nameRotate:90,nameTextStyle:{color:"#ffffff",fontSize:12},axisLabel:{color:"#ffffff",formatter:function(e){return e>=1e3?(e/1e3).toFixed(0)+"k":e.toString()}},axisLine:{lineStyle:{color:"#4b5563"}},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"Entrada de Animais",type:"line",data:s.entradaValues,smooth:!0,lineStyle:{color:"#10b981",width:3},itemStyle:{color:"#10b981",borderColor:"#ffffff",borderWidth:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(16, 185, 129, 0.4)"},{offset:1,color:"rgba(16, 185, 129, 0.1)"}]}},emphasis:{focus:"series",itemStyle:{color:"#10b981",borderColor:"#ffffff",borderWidth:3,shadowBlur:10,shadowColor:"#10b981"}}},{name:"Mdia Alojados",type:"line",data:s.mediaValues,smooth:!0,lineStyle:{color:"#3b82f6",width:3},itemStyle:{color:"#3b82f6",borderColor:"#ffffff",borderWidth:2},emphasis:{focus:"series",itemStyle:{color:"#3b82f6",borderColor:"#ffffff",borderWidth:3,shadowBlur:10,shadowColor:"#3b82f6"}}}],animation:!0,animationDuration:1e3,animationEasing:"cubicOut"};n.current.setOption(e,{notMerge:!0});const t=()=>{n.current&&!n.current.isDisposed()&&n.current.resize()};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[s]),ke.useEffect(()=>()=>{n.current&&!n.current.isDisposed()&&(n.current.dispose(),n.current=null)},[]),t?r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(lt,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):a?r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Erro ao carregar dados de entrada mensal"})}):s?r.jsxs(Ii,{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:r.jsx(et,{className:"h-5 w-5 text-green-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Entrada Mensal de Animais"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Entrada total: ",o.toLocaleString("pt-BR")," | Mdia alojados: ",l.toLocaleString("pt-BR")]})]})]}),c&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:"Pico:"}),r.jsxs("span",{className:"font-medium text-green-500",children:[c.mes_formatado," (",c.total_animais.toLocaleString("pt-BR"),")"]})]})]}),r.jsx("div",{className:"h-[300px]",children:r.jsx("div",{ref:i,style:{height:"100%",width:"100%"},className:"chart-container"})})]}):r.jsx(Ii,{className:"p-6",children:r.jsx("div",{className:"text-center text-muted-foreground",children:"Nenhum dado disponvel para entrada mensal"})})},aI=ke.forwardRef(({className:e,type:t,...a},i)=>r.jsx("input",{type:t,className:vr("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...a}));aI.displayName="Input";const rI=["Ol! Sou o agente especializado em carregamento. Como posso ajudar voc hoje?","Analisando os dados do ltimo carregamento... Detectei um desvio de 2.3kg no Vago 1. Quer que eu investigue?","O consumo de milho est 5% acima do previsto hoje. Isso pode estar relacionado  umidade do ingrediente.","Recomendo verificar a calibrao da balana do Vago 2. H inconsistncias nos ltimos 3 carregamentos.","A eficincia mdia do turno da manh foi de 94.2%. Dentro dos parmetros aceitveis.","Identifiquei que o ingrediente 'Farelo de Trigo' teve variao maior que o esperado. Precisa de ajuste na formulao?","Os dados mostram que o Vago 3 tem performance 8% melhor que os demais. Quer saber os detalhes?","Baseado no histrico, sugiro aumentar o tempo de mistura em 30 segundos para melhorar a homogeneidade."],iI=["Ol! Sou o agente especializado em distribuio. Como posso ajudar voc hoje?","Analisando a eficincia de distribuio... Detectei que o Curral 15 teve eficincia de 89% hoje. Precisa de ateno.","O Tratador Luiz Lopez est com performance consistente de 96%. Agustin Lopez teve variao maior.","Identifiquei que o Trato 1 sempre tem menor preciso -  normal o 'aquecimento' inicial do sistema.","A eficincia por tipo de dieta mostra que TERMINACION tem os melhores resultados hoje.","O vago BAHMAN representa 68% da produo total. Performance excelente.","Recomendo revisar a sequncia do Trato 3 - houve degradao na eficincia neste perodo.","A produtividade por hora mostra pico s 10h. Padro normal de operao identificado."];function nI({isOpen:e,onClose:t,agentType:a="loading"}){const[i,n]=ke.useState([]),[s,o]=ke.useState(""),[l,c]=ke.useState(!1),d=ke.useRef(null),u="loading"===a?rI:iI,h="loading"===a?"Agente de Carregamento":"Agente de Distribuio",p="loading"===a?"Online  Especialista em Desvios":"Online  Especialista em Eficincia";ke.useEffect(()=>{var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth"})},[i]),ke.useEffect(()=>{e&&0===i.length&&setTimeout(()=>{m(u[0])},500)},[e,u]);const m=e=>{const t={id:Date.now().toString(),text:e,sender:"agent",timestamp:new Date};n(e=>[...e,t]),c(!1)},f=()=>{s.trim()&&((e=>{const t={id:Date.now().toString(),text:e,sender:"user",timestamp:new Date};n(e=>[...e,t])})(s),o(""),(()=>{c(!0);const e=2e3*Math.random()+1e3;setTimeout(()=>{const e=u[Math.floor(Math.random()*u.length)];m(e)},e)})())};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Ii,{className:"w-full max-w-md h-[600px] flex flex-col bg-card border-border",children:[r.jsx(Ai,{className:"flex-shrink-0 border-b border-border",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:r.jsx(ut,{className:"h-4 w-4 text-white"})}),r.jsxs("div",{children:[r.jsx(Pi,{className:"text-lg",children:h}),r.jsx("p",{className:"text-sm text-muted-foreground",children:p})]})]}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:r.jsx(qe,{className:"h-4 w-4"})})]})}),r.jsx(zi,{className:"flex-1 overflow-hidden p-0",children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(e=>r.jsx("div",{className:vr("flex","user"===e.sender?"justify-end":"justify-start"),children:r.jsxs("div",{className:"flex items-start space-x-2 max-w-[80%]",children:["agent"===e.sender&&r.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(ut,{className:"h-3 w-3 text-white"})}),r.jsx("div",{className:vr("rounded-lg px-3 py-2 text-sm","user"===e.sender?"bg-primary text-white":"bg-muted text-foreground"),children:e.text}),"user"===e.sender&&r.jsx("div",{className:"w-6 h-6 bg-secondary rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(ht,{className:"h-3 w-3 text-foreground"})})]})},e.id)),l&&r.jsx("div",{className:"flex justify-start",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(ut,{className:"h-3 w-3 text-white"})}),r.jsx("div",{className:"bg-muted rounded-lg px-3 py-2 text-sm",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),r.jsx("div",{ref:d})]}),r.jsx("div",{className:"border-t border-border p-4",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(aI,{value:s,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"===e.key&&f()},placeholder:"Digite sua mensagem...",className:"flex-1"}),r.jsx(qi,{onClick:f,disabled:!s.trim()||l,size:"icon",children:r.jsx(pt,{className:"h-4 w-4"})})]})})]})})]})}):null}const sI=ke.forwardRef(({className:e,...t},a)=>r.jsx(K,{ref:a,className:vr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));sI.displayName=K.displayName;const oI=ke.forwardRef(({className:e,...t},a)=>r.jsx(X,{ref:a,className:vr("aspect-square h-full w-full",e),...t}));oI.displayName=X.displayName;const lI=ke.forwardRef(({className:e,...t},a)=>r.jsx(Z,{ref:a,className:vr("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));lI.displayName=Z.displayName;const cI=ke.forwardRef(({className:e,orientation:t="horizontal",decorative:a=!0,...i},n)=>r.jsx(Q,{ref:n,decorative:a,orientation:t,className:vr("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...i}));cI.displayName=Q.displayName;const dI=$,uI=V,hI=ke.forwardRef(({className:e,...t},a)=>r.jsx(q,{className:vr("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));hI.displayName=q.displayName;const pI=Be("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),mI=ke.forwardRef(({side:e="right",className:t,children:a,...i},n)=>r.jsxs(uI,{children:[r.jsx(hI,{}),r.jsxs(H,{ref:n,className:vr(pI({side:e}),t),...i,children:[a,r.jsxs(W,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[r.jsx(qe,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mI.displayName=H.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(G,{ref:a,className:vr("text-lg font-semibold text-foreground",e),...t})).displayName=G.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(U,{ref:a,className:vr("text-sm text-muted-foreground",e),...t})).displayName=U.displayName;const fI=ke.createContext(null);function gI(){const e=ke.useContext(fI);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const xI=ke.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:a,className:i,style:n,children:s,...o},l)=>{const c=function(){const[e,t]=ke.useState(void 0);return ke.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[d,u]=ke.useState(!1),[h,p]=ke.useState(e),m=t??h,f=ke.useCallback(e=>{const t="function"==typeof e?e(m):e;a?a(t):p(t),document.cookie=`sidebar:state=${t}; path=/; max-age=604800`},[a,m]),g=ke.useCallback(()=>c?u(e=>!e):f(e=>!e),[c,f,u]);ke.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[g]);const x=m?"expanded":"collapsed",v=ke.useMemo(()=>({state:x,open:m,setOpen:f,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:g}),[x,m,f,c,d,u,g]);return r.jsx(fI.Provider,{value:v,children:r.jsx(ji,{delayDuration:0,children:r.jsx("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...n},className:vr("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:l,...o,children:s})})})});xI.displayName="SidebarProvider";const vI=ke.forwardRef(({side:e="left",variant:t="sidebar",collapsible:a="offcanvas",className:i,children:n,...s},o)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=gI();return"none"===a?r.jsx("div",{className:vr("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",i),ref:o,...s,children:n}):l?r.jsx(dI,{open:d,onOpenChange:u,...s,children:r.jsx(mI,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:r.jsx("div",{className:"flex h-full w-full flex-col",children:n})})}):r.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":"collapsed"===c?a:"","data-variant":t,"data-side":e,children:[r.jsx("div",{className:vr("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===t||"inset"===t?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),r.jsx("div",{className:vr("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===t||"inset"===t?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...s,children:r.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:n})})]})});vI.displayName="Sidebar";const yI=ke.forwardRef(({className:e,onClick:t,...a},i)=>{const{toggleSidebar:n}=gI();return r.jsxs(qi,{ref:i,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:vr("h-7 w-7",e),onClick:e=>{null==t||t(e),n()},...a,children:[r.jsx(mt,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});yI.displayName="SidebarTrigger";ke.forwardRef(({className:e,...t},a)=>{const{toggleSidebar:i}=gI();return r.jsx("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:i,title:"Toggle Sidebar",className:vr("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})}).displayName="SidebarRail";ke.forwardRef(({className:e,...t},a)=>r.jsx("main",{ref:a,className:vr("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t})).displayName="SidebarInset";ke.forwardRef(({className:e,...t},a)=>r.jsx(aI,{ref:a,"data-sidebar":"input",className:vr("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t})).displayName="SidebarInput";ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"header",className:vr("flex flex-col gap-2 p-2",e),...t})).displayName="SidebarHeader";ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"footer",className:vr("flex flex-col gap-2 p-2",e),...t})).displayName="SidebarFooter";ke.forwardRef(({className:e,...t},a)=>r.jsx(cI,{ref:a,"data-sidebar":"separator",className:vr("mx-2 w-auto bg-sidebar-border",e),...t})).displayName="SidebarSeparator";const bI=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"content",className:vr("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));bI.displayName="SidebarContent";const _I=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"group",className:vr("relative flex w-full min-w-0 flex-col p-2",e),...t}));_I.displayName="SidebarGroup";const jI=ke.forwardRef(({className:e,asChild:t=!1,...a},i)=>{const n=t?C:"div";return r.jsx(n,{ref:i,"data-sidebar":"group-label",className:vr("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...a})});jI.displayName="SidebarGroupLabel";ke.forwardRef(({className:e,asChild:t=!1,...a},i)=>{const n=t?C:"button";return r.jsx(n,{ref:i,"data-sidebar":"group-action",className:vr("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...a})}).displayName="SidebarGroupAction";const wI=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"group-content",className:vr("w-full text-sm",e),...t}));wI.displayName="SidebarGroupContent";const NI=ke.forwardRef(({className:e,...t},a)=>r.jsx("ul",{ref:a,"data-sidebar":"menu",className:vr("flex w-full min-w-0 flex-col gap-1",e),...t}));NI.displayName="SidebarMenu";const SI=ke.forwardRef(({className:e,...t},a)=>r.jsx("li",{ref:a,"data-sidebar":"menu-item",className:vr("group/menu-item relative",e),...t}));SI.displayName="SidebarMenuItem";const CI=Be("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),kI=ke.forwardRef(({asChild:e=!1,isActive:t=!1,variant:a="default",size:i="default",tooltip:n,className:s,...o},l)=>{const c=e?C:"button",{isMobile:d,state:u}=gI(),h=r.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":i,"data-active":t,className:vr(CI({variant:a,size:i}),s),...o});return n?("string"==typeof n&&(n={children:n}),r.jsxs(wi,{children:[r.jsx(Ni,{asChild:!0,children:h}),r.jsx(Si,{side:"right",align:"center",hidden:"collapsed"!==u||d,...n})]})):h});kI.displayName="SidebarMenuButton";ke.forwardRef(({className:e,asChild:t=!1,showOnHover:a=!1,...i},n)=>{const s=t?C:"button";return r.jsx(s,{ref:n,"data-sidebar":"menu-action",className:vr("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...i})}).displayName="SidebarMenuAction";ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,"data-sidebar":"menu-badge",className:vr("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuBadge";ke.forwardRef(({className:e,showIcon:t=!1,...a},i)=>{const n=ke.useMemo(()=>`${Math.floor(40*Math.random())+50}%`,[]);return r.jsxs("div",{ref:i,"data-sidebar":"menu-skeleton",className:vr("flex h-8 items-center gap-2 rounded-md px-2",e),...a,children:[t&&r.jsx($i,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),r.jsx($i,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})}).displayName="SidebarMenuSkeleton";ke.forwardRef(({className:e,...t},a)=>r.jsx("ul",{ref:a,"data-sidebar":"menu-sub",className:vr("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuSub";ke.forwardRef(({...e},t)=>r.jsx("li",{ref:t,...e})).displayName="SidebarMenuSubItem";ke.forwardRef(({asChild:e=!1,size:t="md",isActive:a,className:i,...n},s)=>{const o=e?C:"a";return r.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":t,"data-active":a,className:vr("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===t&&"text-xs","md"===t&&"text-sm","group-data-[collapsible=icon]:hidden",i),...n})}).displayName="SidebarMenuSubButton";const MI=[{title:"Dashboard",url:"/dashboard",icon:ft}],TI=[{title:"Leitura de Cocho",url:"/feed-reading",icon:Ye},{title:"Anlise de Desvios",url:"/desvios",icon:Ue},{title:"Logstica de Tratos",url:"/logistica",icon:gt},{title:"Nutrio",url:"/nutricao",icon:xt}],DI=[{title:"Cadastros",url:"/cadastros-pasto",icon:Qe},{title:"Estoque Produtos",url:"/estoque-pasto",icon:vt},{title:"Distribuio Proteinado",url:"/distribuicao-pasto",icon:Ke}],II=[{title:"Alertas & Feedbacks",url:"/alerts",icon:Ue},{title:"Otimizaes Recomendadas",url:"/optimizations",icon:Ye}],AI=[{title:"Upload CSV",url:"/csv-upload",icon:gt},{title:"Operaes ETL",url:"/etl-operations",icon:yt},{title:"Dashboard Mtricas",url:"/metrics-dashboard",icon:et},{title:"Relatrios",url:"/reports",icon:gt},{title:"Equipe",url:"/team",icon:Xe},{title:"Configuraes",url:"/settings",icon:bt}];function PI(){const{state:e}=gI(),{user:t,profile:a,organization:i,signOut:n}=Di(),s=Ie().pathname,o="collapsed"===e,l=e=>s===e;return r.jsx(vI,{className:o?"w-16":"w-64",collapsible:"icon",children:r.jsxs(bI,{className:"bg-card-secondary/50 backdrop-blur-sm border-r border-border-subtle flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-border-subtle",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ue,{className:"h-8 w-8 text-accent-primary"}),r.jsx("div",{className:"absolute inset-0 bg-accent-primary/20 blur-lg rounded-full"})]}),!o&&r.jsx("div",{className:"text-xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"ConectaBoi"})]})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs(_I,{children:[r.jsx(jI,{className:"text-text-tertiary",children:"Principal"}),r.jsx(wI,{children:r.jsx(NI,{children:MI.map(e=>r.jsx(SI,{children:r.jsx(kI,{asChild:!0,children:r.jsxs(Ae,{to:e.url,end:!0,className:"flex items-center justify-between w-full py-2 px-4 text-left transition-all duration-200 ease-in-out cursor-pointer group relative overflow-hidden "+(l(e.url)?"bg-accent-primary/20 text-accent-primary border-r-2 border-accent-primary":"text-text-secondary hover:bg-background-secondary/50 hover:text-text-primary"),children:[r.jsx("div",{className:"absolute inset-0 transition-opacity duration-200 "+(l(e.url)?"bg-gradient-to-r from-accent-primary/20 to-transparent opacity-100":"bg-gradient-to-l from-transparent to-accent-primary/25 opacity-0 group-hover:opacity-100")}),r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx(e.icon,{className:"h-4 w-4 flex-shrink-0 transition-all duration-200 "+(l(e.url)?"text-accent-primary":"group-hover:text-accent-primary")}),!o&&r.jsx("span",{className:"truncate transition-all duration-200 "+(l(e.url)?"text-accent-primary font-medium":"group-hover:text-text-primary group-hover:font-medium"),children:e.title})]})]})})},e.title))})})]}),r.jsxs(_I,{children:[r.jsx(jI,{className:"text-text-tertiary",children:"Operacional Confinamento"}),r.jsx(wI,{children:r.jsx(NI,{children:TI.map(e=>r.jsx(SI,{children:r.jsx(kI,{asChild:!0,children:r.jsxs(Ae,{to:e.url,end:!0,className:"flex items-center justify-between w-full py-2 px-4 text-left transition-all duration-200 ease-in-out cursor-pointer group relative overflow-hidden "+(l(e.url)?"bg-accent-primary/20 text-accent-primary border-r-2 border-accent-primary":"text-text-secondary hover:bg-background-secondary/50 hover:text-text-primary"),children:[r.jsx("div",{className:"absolute inset-0 transition-opacity duration-200 "+(l(e.url)?"bg-gradient-to-r from-accent-primary/20 to-transparent opacity-100":"bg-gradient-to-l from-transparent to-accent-primary/25 opacity-0 group-hover:opacity-100")}),r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx(e.icon,{className:"h-4 w-4 flex-shrink-0 transition-all duration-200 "+(l(e.url)?"text-accent-primary":"group-hover:text-accent-primary")}),!o&&r.jsx("span",{className:"truncate transition-all duration-200 "+(l(e.url)?"text-accent-primary font-medium":"group-hover:text-text-primary group-hover:font-medium"),children:e.title})]})]})})},e.title))})})]}),r.jsxs(_I,{children:[r.jsx(jI,{className:"text-text-tertiary",children:"Operacional Pasto"}),r.jsx(wI,{children:r.jsx(NI,{children:DI.map(e=>r.jsx(SI,{children:r.jsx(kI,{asChild:!0,children:r.jsxs(Ae,{to:e.url,end:!0,className:"flex items-center justify-between w-full py-2 px-4 text-left transition-all duration-200 ease-in-out cursor-pointer group relative overflow-hidden "+(l(e.url)?"bg-accent-primary/20 text-accent-primary border-r-2 border-accent-primary":"text-text-secondary hover:bg-background-secondary/50 hover:text-text-primary"),children:[r.jsx("div",{className:"absolute inset-0 transition-opacity duration-200 "+(l(e.url)?"bg-gradient-to-r from-accent-primary/20 to-transparent opacity-100":"bg-gradient-to-l from-transparent to-accent-primary/25 opacity-0 group-hover:opacity-100")}),r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx(e.icon,{className:"h-4 w-4 flex-shrink-0 transition-all duration-200 "+(l(e.url)?"text-accent-primary":"group-hover:text-accent-primary")}),!o&&r.jsx("span",{className:"truncate transition-all duration-200 "+(l(e.url)?"text-accent-primary font-medium":"group-hover:text-text-primary group-hover:font-medium"),children:e.title})]})]})})},e.title))})})]}),r.jsxs(_I,{children:[r.jsx(jI,{className:"text-text-tertiary",children:"Insights de IA"}),r.jsx(wI,{children:r.jsx(NI,{children:II.map(e=>r.jsx(SI,{children:r.jsx(kI,{asChild:!0,children:r.jsxs(Ae,{to:e.url,end:!0,className:"flex items-center justify-between w-full py-2 px-4 text-left transition-all duration-200 ease-in-out cursor-pointer group relative overflow-hidden "+(l(e.url)?"bg-accent-primary/20 text-accent-primary border-r-2 border-accent-primary":"text-text-secondary hover:bg-background-secondary/50 hover:text-text-primary"),children:[r.jsx("div",{className:"absolute inset-0 transition-opacity duration-200 "+(l(e.url)?"bg-gradient-to-r from-accent-primary/20 to-transparent opacity-100":"bg-gradient-to-l from-transparent to-accent-primary/25 opacity-0 group-hover:opacity-100")}),r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx(e.icon,{className:"h-4 w-4 flex-shrink-0 transition-all duration-200 "+(l(e.url)?"text-accent-primary":"group-hover:text-accent-primary")}),!o&&r.jsx("span",{className:"truncate transition-all duration-200 "+(l(e.url)?"text-accent-primary font-medium":"group-hover:text-text-primary group-hover:font-medium"),children:e.title})]})]})})},e.title))})})]}),r.jsxs(_I,{children:[r.jsx(jI,{className:"text-text-tertiary",children:"Gesto"}),r.jsx(wI,{children:r.jsx(NI,{children:AI.map(e=>r.jsx(SI,{children:r.jsx(kI,{asChild:!0,children:r.jsxs(Ae,{to:e.url,end:!0,className:"flex items-center justify-between w-full py-2 px-4 text-left transition-all duration-200 ease-in-out cursor-pointer group relative overflow-hidden "+(l(e.url)?"bg-accent-primary/20 text-accent-primary border-r-2 border-accent-primary":"text-text-secondary hover:bg-background-secondary/50 hover:text-text-primary"),children:[r.jsx("div",{className:"absolute inset-0 transition-opacity duration-200 "+(l(e.url)?"bg-gradient-to-r from-accent-primary/20 to-transparent opacity-100":"bg-gradient-to-l from-transparent to-accent-primary/25 opacity-0 group-hover:opacity-100")}),r.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[r.jsx(e.icon,{className:"h-4 w-4 flex-shrink-0 transition-all duration-200 "+(l(e.url)?"text-accent-primary":"group-hover:text-accent-primary")}),!o&&r.jsx("span",{className:"truncate transition-all duration-200 "+(l(e.url)?"text-accent-primary font-medium":"group-hover:text-text-primary group-hover:font-medium"),children:e.title})]})]})})},e.title))})})]})]}),r.jsx("div",{className:"p-4 border-t border-border-subtle mt-auto",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(Ae,{to:"/user-profile",className:"flex items-center gap-3 flex-1 group",children:[r.jsxs(sI,{className:"h-10 w-10 ring-2 ring-accent-primary/20",children:[r.jsx(oI,{src:(null==a?void 0:a.avatar_url)||"",alt:(null==a?void 0:a.full_name)||"User"}),r.jsx(lI,{className:"bg-accent-primary/10 text-accent-primary font-semibold",children:(null==a?void 0:a.full_name)?a.full_name.split(" ").map(e=>e.charAt(0)).slice(0,2).join("").toUpperCase():(null==(c=null==t?void 0:t.email)?void 0:c.charAt(0).toUpperCase())||"U"})]}),!o&&r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h6",{className:"text-sm font-semibold text-text-primary group-hover:text-accent-primary transition-colors truncate",children:(null==a?void 0:a.full_name)||(null==t?void 0:t.email)||"Usurio"}),r.jsx("span",{className:"text-xs text-text-tertiary truncate block",children:(null==i?void 0:i.name)||"ConectaBoi"})]})]}),!o&&r.jsx("button",{onClick:()=>{n()},className:"p-2 rounded-lg hover:bg-destructive/10 text-text-tertiary hover:text-destructive transition-all duration-200 hover:scale-105","aria-label":"Sair",children:r.jsx(_t,{className:"h-4 w-4"})})]})})]})});var c}const LI=ce,zI=de;ke.forwardRef(({className:e,inset:t,children:a,...i},n)=>r.jsxs(J,{ref:n,className:vr("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...i,children:[a,r.jsx(st,{className:"ml-auto h-4 w-4"})]})).displayName=J.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(ee,{ref:a,className:vr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=ee.displayName;const EI=ke.forwardRef(({className:e,sideOffset:t=4,...a},i)=>r.jsx(te,{children:r.jsx(ae,{ref:i,sideOffset:t,className:vr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));EI.displayName=ae.displayName;const RI=ke.forwardRef(({className:e,inset:t,...a},i)=>r.jsx(re,{ref:i,className:vr("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...a}));RI.displayName=re.displayName;ke.forwardRef(({className:e,children:t,checked:a,...i},n)=>r.jsxs(ie,{ref:n,className:vr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:a,...i,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ne,{children:r.jsx(it,{className:"h-4 w-4"})})}),t]})).displayName=ie.displayName;ke.forwardRef(({className:e,children:t,...a},i)=>r.jsxs(se,{ref:i,className:vr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ne,{children:r.jsx(jt,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=se.displayName;ke.forwardRef(({className:e,inset:t,...a},i)=>r.jsx(oe,{ref:i,className:vr("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a})).displayName=oe.displayName;ke.forwardRef(({className:e,...t},a)=>r.jsx(le,{ref:a,className:vr("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=le.displayName;const OI=[{code:"pt-BR",name:"Portugus",region:"Brasil",flag:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQwAAAC8CAMAAAC672BgAAABKVBMVEUAlED/ywAwJoH/////zgD/zwAAk0EAkUIAj0P/0wD/1AAqH38AAIctIoAuJID/0QAmGn0nH4MiG4QjFnzIux30yAkcC3rZwBeWrivoxBDRvhqhsCnuxg21tiMRDYYPAHdLnTmrsyZZoDdypTOLqy4xmTx/qDBhTXIklz3XqzNkojVIOXobFYV4X2q/uSBoU3BTQndtV26s0rd/ZWdAM31bVZZoY509NIe2kUvRpjiMb2HruyBEPIpNRo/0wxRVq3Ezn1migVeFga7o8+yxr8rAmUXgsyyZelvhsyuohVPEv9eBvZPu7fSQxKBFpWXe3ejT59lzt4fA3cmcmb19eapwa6LJx9r75a4AggDK4tH61Wq0176ezKz76sH3/fj/11ykocHbvHj78NZdHC4jAAALsUlEQVR4nO1dfX/aNhcVFpgQY2Hw6q1di9ttXZKVrBkZ0KQQiEPWlvAWCKxZPMae7/8hHskGZhLLb0AwROePlvxCAB2u7r06ulcCgIGBgYGBgYGBgYGBgYGBgYGBgYGBgYFhDeAx1v0ZwoL465cvX8fX/SlCAT7+KhaJxF4x4wBg55dn0QhG9NkvO+v+LGsGD76JRSaIfQOesnHwOz9HopEZopGfd54sHfH9by1UGHR8u/80HSm/8909Kgw6vnuKxhF/+9yGC8zG87dPzTj4+BtbKgxH+ib+pIxj54dnVC5IlP3h6URZnv81RqfCMI5fn0oKtvNjxMEsJsYR+fEpONI4eOFiFhPjeAG23ZHyOz+5WsXMOn7abuOIv72fZjmysc1Rlo9/74MKg47vtzXKxl+/9MkFZmM7hQ5TtvCP2KvtM46pbOEfWyd0WGWLAMaxTULHPdkigHFsj9DxULYIQMd2CB32skUAOrZA6KDJFpMRxlKpRCKxi4H/S6ViTs/d9BSMj7+hOs5oKhH9fHl+vPcOZZPJLHq3d3x++Uc0kdpSoYMuW0QT0ZNPR9lsLpMWRMRhIFFIZ3LZ7NGnE/xLyl9trtBBlS2iqejlIeZB4GwgYEYOL6MU+9hQoYOnyRbRxMfTTC6N7JgwgdK53OlHe/PYSKGDJltEdw/eJzMOTEz4yCTfH+za0rFxQgdVtkh83kum3Zgwkc7ufU7YvshmCR20eJo6O07aOgp7CMnjs5QtG5sTZfkdimyR+JDzaBUz68h92LU3jg0ROmiyRexsL+vqK+4DZffO7H3PJggdVNkicZLxaRZT4zix9xzhr+igyha750nfZjExjuQ5ZaqEW+igyxapw2wwKgiyh7ZuNNRCh4NsEd3LBOeC4zJ7tNcNq9DhIFtEjxbiArNxRHnlcAodTrLFwlwQNuivHjqhw0m2SCw2RyZs7NnHFMLG81BFWadqi8jucW5xLjgud2wfUwjCJHQ4VlskviwQR6zIfqHaRniEDudqi9hBcjlccFzywOl9wiB0UGWLKdLissgQ007vEwKhw63aYve3QDm4PdK/0d1GZO1Ch2u1RexySQ7DRPbSeV9unUKH8zaAAXdNyw9QxuXt1iZ0eKi2SJwuIcOwInNKjygTOtYidHiotoh+XFokmSL50fVNH1/o8FRtkTicek+EkGgCLTZv0odupvH4QoenagtsGJKsKCqBzJUqGOWSYP6syLIQKOa6m8YjCx0eqy1SxwWtXx92mvAemp1hY6wNyoQUyScl6WN303hEocNztcUZhBd46HfVdhXCdhxcQQhqPI8fj0a6ycqwrlV8MpI88/LejyR0eK+2+BNWq+ACtm5hKw/bEFa7sHZB6Pl6m/9qkDEakX879RsOE2JxJk7cZM4pstd9OlYvdPiptoDda3hxDfV2e3+ErQHqtzCuX3XhRVuvtg0yWu3a1WTmNDSkyuaeCpIqEt3NipyXeWLQsWKhw0OaNcNfBhlVmM9DzED17g5AyHe7XdjVgW6SUb26M7nQq/hBZ1xQFYFD5WKnWKGzkT3w+hFWKnQ4VVs8xN94sNfxLuzdQcxAT9fxnND11hXs3lYxRwS1UQ9OHuQxVV0I60VVUepwKDvMk1Nv84RgdUKHc5PIA5BBdkdm9OgMhw0Dw2HHEl1q7asLw3d8vertY/cavx7BZr2iaX0HMrzPk8jKhA73JpF5/IM5aPRvCiXVTCwmMH8SKgMcdDErFwZbd3pXv4C9FuxdGx5Vw8+gs5H97Oc7WYHQ4SpbPPgMX5IktZLsoyYScDqGSSnfjId49LeGfVSv+RqeUgDg6dIoqBJ1nnzx9a0sXejw2iTyHyapuFgSnPJvUZJVtaQ1jJmDMxDsSoDxAJvHjSrb/2matqdEQ+zFEqOsnyaRGRmiYRLisFRyW42IkqJyGrEQHIhHbYOPFraRZt+eDlH04TRMLE/o8BNPZzgzVB15DJsVL+mliGdNsU4MpJav6lBv4fwM/2BPh7ckdJ6N5Qgd/ptEjDc/MfYHhEGjrnjgwgBewxUwH3e3OGGHXZyr6tURoePBE3MnQT7REoSOIE0iGLEPBhmIUxx9hg0fRTJfWi0dJ+y1i1oeQu2BK819CFKVv7DQwfPBmkQiqU+mxoU4v/qFoMr9JjaKFtTB3SiOk5BmUZ2faZlPPj3oBIsJHcGbRFLHwVVxQVaLHUwCgK39LtT3dTgsKVZO08fByFhE6FikSSTx3kch2zykgsJJaqUBR7CLl3Ff4R1e542tWZjw3nc4mSKg0LFYk0jiKCgZYhmOsc8U1VIDe1F43au1jJS+oM6MQzgKTEYwoWPBJpHEu8AbabI2MIgUVa4B4X6erN96NR02Zo5UfBecjCBCBx8knlrJ+N2BDORsNdL016JaHmI3ismo9u7wqqU4MQ7x90XIIFHWn22skgxRLjgsSuefqhaa2DJaF6BLJkvd9ByPTcYKpwkqD5tFzx5FUDWcdugjnHZ0r0bNMqHxsafJKh2o0uioXrnAkJUG1Hk8S/heu4tTMPT4DhSsLrQijro6t38+mSsQ5nttvJDDflR8/NBKsKKky/eumqCOyVq2ZQZZTllD0gWWkI57Ha2LDyHGMaq1r+CoGr+FhbWk42DRhZoFTnmHVCy6zRxBbZAtqVqXqB3/BqFiGTvSCy3hLYMpO8TaCoSuqgdSb/B6pYb5gPCvIFwsp1ZhAXFnZhSoBB3Wr0q/70H1kEtNWMtf4/XK2sQdsJDsZwyiQLbKRBoX5HmykYW5TRURT5U82Wnxz8Uy65sCC8IYws1wjJMsGhdyZeo81Rs380AkA4Pwfz6pWKogDAJtFUzDCfYITbrcJfenIqlUh057RyaUAibjT19UrKIm0ucmUvTz1GmIBW1MH6QwmP5S0oYF9yydOI5/fH0rq6mW9be9mCDOQCSjE+UZFzaDFWQkm6YhKE577/89v+PnO1lZHbWvjefUaYYTStqcTcgFm/EibuwaV4WKuTNH/jocG8/AV5SNHmRRuQmt61NJa45tgopcd9tnEiv1ASlSkIhphaQkAfgqVsHzRO73reFSLNu7SMo2ooXFGyMrk246BTE8xSrAh9CROs9w8tzYUVktB6p8FCuNBg67QnEooRCVMQE/BW4PSmKp2Ybo5jQUmVQ2CUrICtyAZ6EjcX8Zr9BCp1xwFQIVzfS9ISt9JPBaFDs/5DG0X61JWqejOefiwgB2DLMKXVEs8F0uPRmQRvn+VQhVR2eCEFc3fG8Yy6VBoEJ6wfz20X0jQKXBwDG6IiQgxSAylIX0IHiLhSBo9/VgJFAWL2hCVr9okhXWFgsQsPlGKHagw1oFWeth5ZKRzpOlnsFLeJtvQMC2LLUD6YsQbASmDZBdN5yx4lRLLguSZnqbMLdlgUANe0IRFahphdw3I45YwmFYuGngVVy9U0KS4WbC3bAHArVyCshJDi2RCYGkThNHEJJkSbMK2dC3coJlN/mK5kpOKJIEzXAg0tTBhL/Jl2DZ7d9EBTF2UtSxJe5sRPs3WPbBAEJlsosi1y1xZ1MOBgBLPTJCrDSbpofFKetMDtmcIyPAUg8TUerT2lFhVreyUYeJgGUeMzNTQcSJOurARSiPmQErOIBILNRNdXTzDiACCxxNZb8Lj9ftJULGJh5NRRDs0DJhMLBjA5UVnJtv6qFlIOBxdqhsr40inIVu8HF2INhBh9Rans0+6BA4HIG5+/SOwATscNR5LOXY3OTeH9twbC5gByrPgx21PQd2CPsc2PH8Vni8uCGXTOa2/uIGwK70mAe77GUO7BogK9gFUXNgV4fNgV0qZwW7bnAO7CJKK9gVpXNgl9dawa41ngO78HoO7Cp0K9xbVzZYtvAP59aVzZYt/MOpomPjZQv/oAkd2x5P7WEvdGyJbOEfD4WO7ZEt/OOe0LFdsoV/WIWOrZMt/GMqdGyjbOEfptCxEdUWj4H465dbK1v4B88zs2BgYGBgYGBgYGBgYGBgYGBgYGBgYGBYD/4Ph6mhWlkQbZUAAAAASUVORK5CYII=",fallback:"BR"},{code:"es-PY",name:"Espaol",region:"Paraguay",flag:"data:image/svg+xml,%3csvg%20height='20'%20viewBox='0%200%2028%2020'%20width='28'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='28'%20height='6.67'%20fill='%23D52B1E'/%3e%3crect%20width='28'%20height='6.67'%20y='6.67'%20fill='%23fff'/%3e%3crect%20width='28'%20height='6.67'%20y='13.33'%20fill='%23005496'/%3e%3ccircle%20cx='14'%20cy='10'%20r='3'%20fill='%23F7E000'%20stroke='%23009639'%20stroke-width='0.5'/%3e%3c/svg%3e",fallback:"PY"},{code:"en-US",name:"English",region:"United States",flag:"data:image/svg+xml,%3csvg%20height='20'%20viewBox='0%200%2028%2020'%20width='28'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='28'%20height='20'%20fill='%23B22234'/%3e%3cpath%20d='M0%202h28v2H0zM0%206h28v2H0zM0%2010h28v2H0zM0%2014h28v2H0zM0%2018h28v2H0z'%20fill='%23fff'/%3e%3crect%20width='12'%20height='11'%20fill='%233C3B6E'/%3e%3c/svg%3e",fallback:"US"}];function FI(){const[e,t]=ke.useState(OI[0]);return r.jsxs(LI,{children:[r.jsx(zI,{asChild:!0,children:r.jsx(qi,{variant:"ghost",size:"icon",className:"hover:bg-background-secondary/50",children:r.jsxs(sI,{className:"w-5 h-5",children:[r.jsx(oI,{src:e.flag,alt:e.name}),r.jsx(lI,{className:"text-xs",children:e.fallback})]})})}),r.jsx(EI,{align:"end",className:"w-64 bg-card-primary border-border-subtle z-50",children:OI.map(a=>r.jsxs(RI,{onClick:()=>t(a),className:"flex items-center gap-3 p-3 cursor-pointer",children:[r.jsxs(sI,{className:"w-6 h-6",children:[r.jsx(oI,{src:a.flag,alt:a.name}),r.jsx(lI,{className:"text-xs",children:a.fallback})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium text-text-primary",children:a.name}),r.jsx("span",{className:"text-xs text-text-secondary",children:a.region})]}),e.code===a.code&&r.jsx("div",{className:"ml-auto w-2 h-2 bg-accent-primary rounded-full"})]},a.code))})]})}function BI({children:e}){var t,a;const{user:i,profile:n,organization:s,signOut:o}=Di(),l=De();return r.jsx(xI,{children:r.jsxs("div",{className:"min-h-screen flex w-full bg-background-primary",children:[r.jsx(PI,{}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[r.jsx("header",{className:"bg-card-secondary/50 backdrop-blur-sm border-b border-border-subtle sticky top-0 z-50",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-2 sm:px-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0",children:[r.jsx(yI,{}),r.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",className:"hover:bg-background-secondary/50 hover:text-text-primary",children:r.jsx(wt,{className:"h-5 w-5"})}),r.jsx(aI,{placeholder:"Buscar...",className:"w-64 h-9"})]}),r.jsx(qi,{variant:"ghost",size:"icon",className:"sm:hidden hover:bg-background-secondary/50 hover:text-text-primary",children:r.jsx(wt,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"hidden md:flex items-center gap-2",children:r.jsx("div",{className:"flex items-center"})}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 min-w-0",children:[r.jsx("div",{className:"hidden sm:block",children:r.jsx(FI,{})}),r.jsx(qi,{variant:"ghost",size:"icon",className:"hidden sm:flex hover:bg-background-secondary/50 hover:text-text-primary",children:r.jsx(Nt,{className:"h-5 w-5"})}),r.jsxs("div",{className:"relative",children:[r.jsx(qi,{variant:"ghost",size:"icon",className:"hover:bg-background-secondary/50 hover:text-text-primary",children:r.jsx(St,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),r.jsx("div",{className:"absolute -top-1 -right-1 bg-accent-primary h-2 w-2 rounded-full"})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-3 ml-1 sm:ml-2 min-w-0",children:[r.jsxs(sI,{className:"w-7 h-7 sm:w-8 sm:h-8 ring-2 ring-accent-primary/20 hover:ring-accent-primary/40 transition-all cursor-pointer",children:[r.jsx(oI,{src:null==n?void 0:n.avatar_url}),r.jsx(lI,{className:"bg-accent-primary text-white text-xs sm:text-sm",children:(null==(t=null==n?void 0:n.full_name)?void 0:t.charAt(0))||(null==(a=null==i?void 0:i.email)?void 0:a.charAt(0))})]}),r.jsxs("div",{className:"hidden lg:block min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:null==n?void 0:n.full_name}),r.jsx("p",{className:"text-xs text-text-secondary truncate",children:null==s?void 0:s.name})]})]}),r.jsxs(qi,{variant:"ghost",size:"sm",onClick:async()=>{await o(),l("/")},className:"hidden xl:flex text-text-secondary hover:text-text-primary",children:[r.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Sair"]})]})]})}),r.jsx("main",{className:"flex-1 overflow-auto w-full min-w-0",children:e})]})]})})}function qI(){const[e,t]=ke.useState(!1),{data:a,isLoading:i}=Hi(),{data:n,isLoading:s}=(()=>{const{organization:e}=Di();return qa({queryKey:["eficiencia-consumo",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).order("data",{ascending:!1}).limit(1);if(r)throw r;if(!a||0===a.length)return{eficienciaConsumo:0,dataAtualizacao:(new Date).toISOString().split("T")[0],variacaoOntem:0,percentualVariacao:0,totalRegistros:0,totalAnimais:0};const i=a[0].data,{data:n,error:s}=await ki.from("fato_historico_consumo").select("cms_realizado_kg, cms_previsto_kg, qtd_animais").eq("organization_id",t).eq("data",i).gt("cms_previsto_kg",0).not("cms_realizado_kg","is",null);if(s)throw s;const o=n.map(e=>e.cms_realizado_kg/e.cms_previsto_kg*100),l=o.length>0?o.reduce((e,t)=>e+t,0)/o.length:0,c=n.reduce((e,t)=>e+(t.qtd_animais||0),0),d=new Date(i);d.setDate(d.getDate()-1);const u=d.toISOString().split("T")[0],{data:h,error:p}=await ki.from("fato_historico_consumo").select("cms_realizado_kg, cms_previsto_kg").eq("organization_id",t).eq("data",u).gt("cms_previsto_kg",0).not("cms_realizado_kg","is",null);if(p||!h||0===h.length)return{eficienciaConsumo:parseFloat(l.toFixed(2)),dataAtualizacao:i,variacaoOntem:0,percentualVariacao:0,totalRegistros:n.length,totalAnimais:c};const m=h.map(e=>e.cms_realizado_kg/e.cms_previsto_kg*100),f=m.length>0?m.reduce((e,t)=>e+t,0)/m.length:0,g=l-f,x=f>0?g/f*100:0;return{eficienciaConsumo:parseFloat(l.toFixed(2)),dataAtualizacao:i,variacaoOntem:parseFloat(g.toFixed(2)),percentualVariacao:parseFloat(x.toFixed(2)),totalRegistros:n.length,totalAnimais:c}},enabled:!0,refetchInterval:3e5})})(),{data:o,isLoading:l}=(()=>{const{organization:e}=Di();return qa({queryKey:["dias-confinamento",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).order("data",{ascending:!1}).limit(1);if(r)throw r;if(!a||0===a.length)return{mediaDias:0,dataAtualizacao:(new Date).toISOString().split("T")[0],variacaoOntem:0,percentualVariacao:0,totalRegistros:0,totalAnimais:0,minDias:0,maxDias:0};const i=a[0].data,{data:n,error:s}=await ki.from("fato_historico_consumo").select("dias_confinados, qtd_animais").eq("organization_id",t).eq("data",i).not("dias_confinados","is",null).gt("qtd_animais",0);if(s)throw s;const o=n.reduce((e,t)=>e+t.dias_confinados*t.qtd_animais,0),l=n.reduce((e,t)=>e+t.qtd_animais,0),c=l>0?o/l:0,d=Math.min(...n.map(e=>e.dias_confinados)),u=Math.max(...n.map(e=>e.dias_confinados)),h=new Date(i);h.setDate(h.getDate()-1);const p=h.toISOString().split("T")[0],{data:m,error:f}=await ki.from("fato_historico_consumo").select("dias_confinados, qtd_animais").eq("organization_id",t).eq("data",p).not("dias_confinados","is",null).gt("qtd_animais",0);if(f||!m||0===m.length)return{mediaDias:parseFloat(c.toFixed(1)),dataAtualizacao:i,variacaoOntem:0,percentualVariacao:0,totalRegistros:n.length,totalAnimais:l,minDias:d,maxDias:u};const g=m.reduce((e,t)=>e+t.dias_confinados*t.qtd_animais,0),x=m.reduce((e,t)=>e+t.qtd_animais,0),v=x>0?g/x:0,y=c-v,b=v>0?y/v*100:0;return{mediaDias:parseFloat(c.toFixed(1)),dataAtualizacao:i,variacaoOntem:parseFloat(y.toFixed(1)),percentualVariacao:parseFloat(b.toFixed(2)),totalRegistros:n.length,totalAnimais:l,minDias:d,maxDias:u}},enabled:!0,refetchInterval:3e5})})(),{data:c,isLoading:d}=(()=>{const{organization:e}=Di();return qa({queryKey:["consumo-materia-seca-card",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).not("cms_realizado_kg","is",null).gt("qtd_animais",0).order("data",{ascending:!1}).limit(10);if(r)throw r;if(!a||0===a.length)return null;const i=Array.from(new Set(a.map(e=>e.data))).slice(0,2),n=i[0],s=i.length>1?i[1]:null,o=async e=>{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("cms_realizado_kg, qtd_animais").eq("organization_id",t).eq("data",e).not("cms_realizado_kg","is",null).gt("qtd_animais",0);if(r)throw r;if(!a||0===a.length)return{weightedAverage:0,totalAnimals:0};let i=0,n=0;return a.forEach(e=>{const t=parseFloat(e.cms_realizado_kg)||0,a=parseInt(e.qtd_animais)||0;i+=t*a,n+=a}),{weightedAverage:parseFloat((n>0?i/n:0).toFixed(2)),totalAnimals:n}},l=await o(n);let c={weightedAverage:0};s&&(c=await o(s));const d=l.weightedAverage-c.weightedAverage,u=c.weightedAverage>0?(d/c.weightedAverage*100).toFixed(1):"0.0";return{consumoMedio:l.weightedAverage,totalAnimais:l.totalAnimals,variacaoOntem:parseFloat(d.toFixed(2)),percentualVariacao:u}},enabled:!0,refetchInterval:3e5})})(),{data:u,isLoading:h}=(()=>{const{organization:e}=Di();return qa({queryKey:["peso-medio-ponderado",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).not("peso_estimado_kg","is",null).gt("qtd_animais",0).gt("peso_estimado_kg",0).order("data",{ascending:!1}).limit(10);if(r)throw r;if(!a||0===a.length)return null;const i=Array.from(new Set(a.map(e=>e.data))).slice(0,2),n=i[0],s=i.length>1?i[1]:null,o=async e=>{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("peso_estimado_kg, qtd_animais").eq("organization_id",t).eq("data",e).not("peso_estimado_kg","is",null).gt("qtd_animais",0).gt("peso_estimado_kg",0);if(r)throw r;if(!a||0===a.length)return{weightedAverage:0,totalAnimals:0};let i=0,n=0;return a.forEach(e=>{const t=parseFloat(e.peso_estimado_kg)||0,a=parseInt(e.qtd_animais)||0;i+=t*a,n+=a}),{weightedAverage:parseFloat((n>0?i/n:0).toFixed(2)),totalAnimals:n}},l=await o(n);let c={weightedAverage:0};s&&(c=await o(s));const d=l.weightedAverage-c.weightedAverage,u=c.weightedAverage>0?(d/c.weightedAverage*100).toFixed(1):"0.0";return{pesoMedio:l.weightedAverage,totalAnimais:l.totalAnimals,variacaoOntem:parseFloat(d.toFixed(2)),percentualVariacao:u}},enabled:!0,refetchInterval:3e5})})(),{data:p,isLoading:m}=(()=>{const{organization:e}=Di();return qa({queryKey:["cms-perceito-card",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).not("cms_realizado_pcpv","is",null).gt("qtd_animais",0).gt("cms_realizado_pcpv",0).order("data",{ascending:!1}).limit(10);if(r)throw r;if(!a||0===a.length)return null;const i=Array.from(new Set(a.map(e=>e.data))).slice(0,2),n=i[0],s=i.length>1?i[1]:null,o=async e=>{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("cms_realizado_pcpv, qtd_animais").eq("organization_id",t).eq("data",e).not("cms_realizado_pcpv","is",null).gt("qtd_animais",0).gt("cms_realizado_pcpv",0);if(r)throw r;if(!a||0===a.length)return{weightedAverage:0,totalAnimals:0};let i=0,n=0;return a.forEach(e=>{const t=parseFloat(e.cms_realizado_pcpv)||0,a=parseInt(e.qtd_animais)||0;i+=t*a,n+=a}),{weightedAverage:parseFloat((n>0?i/n:0).toFixed(2)),totalAnimals:n}},l=await o(n);let c={weightedAverage:0};s&&(c=await o(s));const d=l.weightedAverage-c.weightedAverage,u=c.weightedAverage>0?(d/c.weightedAverage*100).toFixed(1):"0.0";return{cmsPerceitoMedio:l.weightedAverage,totalAnimais:l.totalAnimals,variacaoOntem:parseFloat(d.toFixed(2)),percentualVariacao:u}},enabled:!0,refetchInterval:3e5})})(),{data:f,isLoading:g}=(()=>{const{organization:e}=Di();return qa({queryKey:["peso-entrada-card",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).not("peso_entrada_kg","is",null).gt("qtd_animais",0).gt("peso_entrada_kg",0).order("data",{ascending:!1}).limit(10);if(r)throw r;if(!a||0===a.length)return null;const i=Array.from(new Set(a.map(e=>e.data))).slice(0,2),n=i[0],s=i.length>1?i[1]:null,o=async e=>{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("peso_entrada_kg, qtd_animais").eq("organization_id",t).eq("data",e).not("peso_entrada_kg","is",null).gt("qtd_animais",0).gt("peso_entrada_kg",0);if(r)throw r;if(!a||0===a.length)return{weightedAverage:0,totalAnimals:0};let i=0,n=0;return a.forEach(e=>{const t=parseFloat(e.peso_entrada_kg)||0,a=parseInt(e.qtd_animais)||0;i+=t*a,n+=a}),{weightedAverage:parseFloat((n>0?i/n:0).toFixed(2)),totalAnimals:n}},l=await o(n);let c={weightedAverage:0};s&&(c=await o(s));const d=l.weightedAverage-c.weightedAverage,u=c.weightedAverage>0?(d/c.weightedAverage*100).toFixed(1):"0.0";return{pesoEntradaMedio:l.weightedAverage,totalAnimais:l.totalAnimals,variacaoOntem:parseFloat(d.toFixed(2)),percentualVariacao:u}},enabled:!0,refetchInterval:3e5})})(),{data:x,isLoading:v}=(()=>{const{organization:e}=Di();return qa({queryKey:["cmn-realizado-card",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_historico_consumo").select("data").eq("organization_id",t).not("cmn_realizado_kg","is",null).gt("qtd_animais",0).gt("cmn_realizado_kg",0).order("data",{ascending:!1}).limit(10);if(r)throw r;if(!a||0===a.length)return null;const i=Array.from(new Set(a.map(e=>e.data))).slice(0,2),n=i[0],s=i.length>1?i[1]:null,o=async e=>{const{data:a,error:r}=await ki.from("fato_historico_consumo").select("cmn_realizado_kg, qtd_animais").eq("organization_id",t).eq("data",e).not("cmn_realizado_kg","is",null).gt("qtd_animais",0).gt("cmn_realizado_kg",0);if(r)throw r;if(!a||0===a.length)return{weightedAverage:0,totalAnimals:0};let i=0,n=0;return a.forEach(e=>{const t=parseFloat(e.cmn_realizado_kg)||0,a=parseInt(e.qtd_animais)||0;i+=t*a,n+=a}),{weightedAverage:parseFloat((n>0?i/n:0).toFixed(2)),totalAnimals:n}},l=await o(n);let c={weightedAverage:0};s&&(c=await o(s));const d=l.weightedAverage-c.weightedAverage,u=c.weightedAverage>0?(d/c.weightedAverage*100).toFixed(1):"0.0";return{cmnRealizadoMedio:l.weightedAverage,totalAnimais:l.totalAnimals,variacaoOntem:parseFloat(d.toFixed(2)),percentualVariacao:u}},enabled:!0,refetchInterval:3e5})})();return r.jsxs(BI,{children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Dashboard"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Viso geral completa do seu sistema ConectaBoi"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[r.jsxs(qi,{onClick:()=>t(!0),variant:"outline",className:"border-primary text-primary hover:bg-primary/10 w-full sm:w-auto",size:"sm",children:[r.jsx(kt,{className:"h-4 w-4 mr-2"}),"Chat IA"]}),r.jsxs(qi,{onClick:()=>window.location.href="/csv-upload",className:"bg-primary hover:bg-primary/90 w-full sm:w-auto hidden sm:flex",size:"sm",children:[r.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Atualizar BD"]})]})]})}),r.jsxs("div",{className:"mb-8 sm:mb-12",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-4 sm:mb-6",children:"Mtricas Principais"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-6 mb-2 sm:mb-6",children:[r.jsx(Ei,{title:"Quantidade de Cabeas",value:i?"...":(null==a?void 0:a.totalAnimais.toLocaleString("pt-BR"))||"0",subtitle:i?"Carregando...":(null==a?void 0:a.variacaoOntem)?`${a.variacaoOntem>0?"":""} ${a.variacaoOntem>0?"+":""}${a.percentualVariacao}% vs ontem`:" Status estvel",trend:i?"stable":(null==a?void 0:a.variacaoOntem)?a.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ye,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Peso Mdio de Entrada",value:g?"...":(null==f?void 0:f.pesoEntradaMedio)?`${f.pesoEntradaMedio} kg`:"0 kg",subtitle:g?"Carregando...":(null==f?void 0:f.variacaoOntem)?`${f.variacaoOntem>0?"":""} ${f.variacaoOntem>0?"+":""}${f.percentualVariacao}% vs ontem`:" Status estvel",trend:g?"stable":(null==f?void 0:f.variacaoOntem)?f.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ke,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Peso Mdio Estimado",value:h?"...":(null==u?void 0:u.pesoMedio)?`${u.pesoMedio} kg`:"0 kg",subtitle:h?"Carregando...":(null==u?void 0:u.variacaoOntem)?`${u.variacaoOntem>0?"":""} ${u.variacaoOntem>0?"+":""}${u.percentualVariacao}% vs ontem`:" Status estvel",trend:h?"stable":(null==u?void 0:u.variacaoOntem)?u.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Je,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Dias de Confinamento",value:l?"...":(null==o?void 0:o.mediaDias)?`${o.mediaDias} dias`:"0 dias",subtitle:l?"Carregando...":(null==o?void 0:o.variacaoOntem)?`${o.variacaoOntem>0?"":""} ${o.variacaoOntem>0?"+":""}${o.variacaoOntem} dias vs ontem`:" Status estvel",trend:l?"stable":(null==o?void 0:o.variacaoOntem)?o.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(He,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-6",children:[r.jsx(Ei,{title:"CMS Mdio Realizado",value:d?"...":(null==c?void 0:c.consumoMedio)?`${c.consumoMedio} kg`:"0 kg",subtitle:d?"Carregando...":(null==c?void 0:c.variacaoOntem)?`${c.variacaoOntem>0?"":""} ${c.variacaoOntem>0?"+":""}${c.percentualVariacao}% vs ontem`:" Status estvel",trend:d?"stable":(null==c?void 0:c.variacaoOntem)?c.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ye,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"CMN Mdio Realizado",value:v?"...":(null==x?void 0:x.cmnRealizadoMedio)?`${x.cmnRealizadoMedio} kg`:"0 kg",subtitle:v?"Carregando...":(null==x?void 0:x.variacaoOntem)?`${x.variacaoOntem>0?"":""} ${x.variacaoOntem>0?"+":""}${x.percentualVariacao}% vs ontem`:" Status estvel",trend:v?"stable":(null==x?void 0:x.variacaoOntem)?x.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(et,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"CMS Mdio % Peso Vivo",value:m?"...":(null==p?void 0:p.cmsPerceitoMedio)?`${p.cmsPerceitoMedio}%`:"0%",subtitle:m?"Carregando...":(null==p?void 0:p.variacaoOntem)?`${p.variacaoOntem>0?"":""} ${p.variacaoOntem>0?"+":""}${p.percentualVariacao}% vs ontem`:" Status estvel",trend:m?"stable":(null==p?void 0:p.variacaoOntem)?p.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ze,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia de Consumo",value:s?"...":(null==n?void 0:n.eficienciaConsumo)?`${n.eficienciaConsumo}%`:"0%",subtitle:s?"Carregando...":(null==n?void 0:n.variacaoOntem)?`${n.variacaoOntem>0?"":""} ${n.variacaoOntem>0?"+":""}${n.percentualVariacao}% vs ontem`:" Status estvel",trend:s?"stable":(null==n?void 0:n.variacaoOntem)?n.variacaoOntem>0?"up":"down":"stable",icon:r.jsx(Ze,{className:"h-6 w-6"})})]})]}),r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[r.jsx(eI,{}),r.jsx(tI,{})]})}),r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-4 sm:mb-6",children:"Anlises Quantitativas"}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-2 sm:gap-6 mb-2 sm:mb-6",children:[r.jsx(Qi,{}),r.jsx(cn,{}),r.jsx("div",{className:"xl:col-span-2",children:r.jsx(un,{})})]})]}),r.jsxs("div",{className:"mb-8 sm:mb-12",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"Agentes de IA Especializados"}),r.jsxs(Oi,{className:"bg-primary/20 text-primary border-primary/30 w-fit",children:[r.jsx($e,{className:"h-3 w-3 mr-1"}),"4 Agentes Ativos"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 sm:gap-6",children:[r.jsx(Fi,{name:"Nutrio Inteligente",status:"active",description:"Monitora consumo e otimiza frmulas em tempo real",icon:r.jsx(Ze,{className:"h-5 w-5 text-primary"}),metrics:[{label:"Lotes Monitorados",value:"24"},{label:"Ajustes Aplicados",value:"8"}]}),r.jsx(Fi,{name:"Logstica Otimizada",status:"monitoring",description:"Calcula rotas e tempos ideais de distribuio",icon:r.jsx(Qe,{className:"h-5 w-5 text-accent"}),metrics:[{label:"Rotas Ativas",value:"12"},{label:"Economia Tempo",value:"18%"}]}),r.jsx(Fi,{name:"Leitura de Cocho",status:"active",description:"Analisa sobras e padres de consumo",icon:r.jsx(Je,{className:"h-5 w-5 text-primary"}),metrics:[{label:"Pontos Leitura",value:"48"},{label:"Preciso Mdia",value:"97.3%"}]}),r.jsx(Fi,{name:"Deteco de Desvios",status:"alert",description:"Identifica anomalias antes que virem perdas",icon:r.jsx(et,{className:"h-5 w-5 text-destructive"}),metrics:[{label:"Alertas Ativos",value:"3"},{label:"Perdas Evitadas",value:"R$ 18k"}]})]})]}),r.jsx("div",{className:"mb-8 sm:mb-12",children:r.jsx(Vi,{alerts:[{id:"1",type:"critical",title:"Lote 15 - Consumo abaixo do esperado",description:"Reduo de 15% no consumo nas ltimas 4 horas",time:"h 12 minutos"},{id:"2",type:"warning",title:"Desvio na rota de distribuio",description:"Caminho 03 com atraso de 25 minutos",time:"h 45 minutos"},{id:"3",type:"info",title:"Ajuste nutricional aplicado",description:"IA otimizou frmula do Lote 08",time:"h 1 hora"}]})})]}),r.jsx(nI,{isOpen:e,onClose:()=>t(!1),agentType:"loading"})]})}var VI="Tabs",[HI]=u(VI,[ue]),WI=ue(),[GI,UI]=HI(VI),$I=ke.forwardRef((e,t)=>{const{__scopeTabs:a,value:i,onValueChange:n,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=me(l),[h,p]=b({prop:i,onChange:n,defaultProp:s??"",caller:VI});return r.jsx(GI,{scope:a,baseId:y(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:c,children:r.jsx(w.div,{dir:u,"data-orientation":o,...d,ref:t})})});$I.displayName=VI;var YI="TabsList",KI=ke.forwardRef((e,t)=>{const{__scopeTabs:a,loop:i=!0,...n}=e,s=UI(YI,a),o=WI(a);return r.jsx(he,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:r.jsx(w.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:t})})});KI.displayName=YI;var XI="TabsTrigger",ZI=ke.forwardRef((e,t)=>{const{__scopeTabs:a,value:i,disabled:n=!1,...s}=e,o=UI(XI,a),l=WI(a),c=eA(o.baseId,i),d=tA(o.baseId,i),u=i===o.value;return r.jsx(pe,{asChild:!0,...l,focusable:!n,active:u,children:r.jsx(w.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...s,ref:t,onMouseDown:N(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:N(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:N(e.onFocus,()=>{const e="manual"!==o.activationMode;u||n||!e||o.onValueChange(i)})})})});ZI.displayName=XI;var QI="TabsContent",JI=ke.forwardRef((e,t)=>{const{__scopeTabs:a,value:i,forceMount:n,children:s,...o}=e,l=UI(QI,a),c=eA(l.baseId,i),d=tA(l.baseId,i),u=i===l.value,p=ke.useRef(u);return ke.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),r.jsx(h,{present:n||u,children:({present:a})=>r.jsx(w.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!a,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&s})})});function eA(e,t){return`${e}-trigger-${t}`}function tA(e,t){return`${e}-content-${t}`}JI.displayName=QI;var aA=KI,rA=ZI,iA=JI;const nA=$I,sA=ke.forwardRef(({className:e,...t},a)=>r.jsx(aA,{ref:a,className:vr("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));sA.displayName=aA.displayName;const oA=ke.forwardRef(({className:e,...t},a)=>r.jsx(rA,{ref:a,className:vr("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));oA.displayName=rA.displayName;const lA=ke.forwardRef(({className:e,...t},a)=>r.jsx(iA,{ref:a,className:vr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));lA.displayName=iA.displayName;const cA={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},dA={date:Tt({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:Tt({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Tt({formats:{full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},uA={lastWeek:e=>{const t=e.getDay();return"'"+(0===t||6===t?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},hA={code:"pt-BR",formatDistance:(e,t,a)=>{let r;const i=cA[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),(null==a?void 0:a.addSuffix)?a.comparison&&a.comparison>0?"em "+r:"h "+r:r},formatLong:dA,formatRelative:(e,t,a,r)=>{const i=uA[e];return"function"==typeof i?i(t):i},localize:{ordinalNumber:(e,t)=>{const a=Number(e);return"week"===(null==t?void 0:t.unit)?a+"":a+""},era:Dt({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:Dt({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dt({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:Dt({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},defaultWidth:"wide"}),dayPeriod:Dt({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:At({matchPattern:/^(\d+)[o]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:It({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:It({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:It({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:It({matchPatterns:{narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},defaultParseWidth:"any"}),dayPeriod:It({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var pA=function(){return pA=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pA.apply(this,arguments)};function mA(e,t,a){for(var r,i=0,n=t.length;i<n;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function fA(e){return"multiple"===e.mode}function gA(e){return"range"===e.mode}function xA(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var vA={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var yA=Object.freeze({__proto__:null,formatCaption:function(e,t){return Yt(e,"LLLL y",t)},formatDay:function(e,t){return Yt(e,"d",t)},formatMonthCaption:function(e,t){return Yt(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return Yt(e,"cccccc",t)},formatYearCaption:function(e,t){return Yt(e,"yyyy",t)}}),bA=Object.freeze({__proto__:null,labelDay:function(e,t,a){return Yt(e,"do MMMM (EEEE)",a)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return Yt(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var _A=ke.createContext(void 0);function jA(e){var t,a,i=e.initialProps,n={captionLayout:"buttons",classNames:vA,formatters:yA,labels:bA,locale:Et,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},s=function(e){var t=e.fromYear,a=e.toYear,r=e.fromMonth,i=e.toMonth,n=e.fromDate,s=e.toDate;return r?n=Pt(r):t&&(n=new Date(t,0,1)),i?s=Lt(i):a&&(s=new Date(a,11,31)),{fromDate:n?zt(n):void 0,toDate:s?zt(s):void 0}}(i),o=s.fromDate,l=s.toDate,c=null!==(t=i.captionLayout)&&void 0!==t?t:n.captionLayout;"buttons"===c||o&&l||(c="buttons"),(xA(i)||fA(i)||gA(i))&&(a=i.onSelect);var d=pA(pA(pA({},n),i),{captionLayout:c,classNames:pA(pA({},n.classNames),i.classNames),components:pA({},i.components),formatters:pA(pA({},n.formatters),i.formatters),fromDate:o,labels:pA(pA({},n.labels),i.labels),mode:i.mode||n.mode,modifiers:pA(pA({},n.modifiers),i.modifiers),modifiersClassNames:pA(pA({},n.modifiersClassNames),i.modifiersClassNames),onSelect:a,styles:pA(pA({},n.styles),i.styles),toDate:l});return r.jsx(_A.Provider,{value:d,children:e.children})}function wA(){var e=ke.useContext(_A);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function NA(e){var t=wA(),a=t.locale,i=t.classNames,n=t.styles,s=t.formatters.formatCaption;return r.jsx("div",{className:i.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:a})})}function SA(e){return r.jsx("svg",pA({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function CA(e){var t,a,i=e.onChange,n=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,d=wA(),u=null!==(a=null===(t=d.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==a?a:SA;return r.jsxs("div",{className:l,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:n,onChange:i,children:s}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function kA(e){var t,a=wA(),i=a.fromDate,n=a.toDate,s=a.styles,o=a.locale,l=a.formatters.formatMonthCaption,c=a.classNames,d=a.components,u=a.labels.labelMonthDropdown;if(!i)return r.jsx(r.Fragment,{});if(!n)return r.jsx(r.Fragment,{});var h=[];if(Jt(i,n))for(var p=Pt(i),m=i.getMonth();m<=n.getMonth();m++)h.push(ea(p,m));else for(p=Pt(new Date),m=0;m<=11;m++)h.push(ea(p,m));var f=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:CA;return r.jsx(f,{name:"months","aria-label":u(),className:c.dropdown_month,style:s.dropdown_month,onChange:function(t){var a=Number(t.target.value),r=ea(Pt(e.displayMonth),a);e.onChange(r)},value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:h.map(function(e){return r.jsx("option",{value:e.getMonth(),children:l(e,{locale:o})},e.getMonth())})})}function MA(e){var t,a=e.displayMonth,i=wA(),n=i.fromDate,s=i.toDate,o=i.locale,l=i.styles,c=i.classNames,d=i.components,u=i.formatters.formatYearCaption,h=i.labels.labelYearDropdown,p=[];if(!n)return r.jsx(r.Fragment,{});if(!s)return r.jsx(r.Fragment,{});for(var m=n.getFullYear(),f=s.getFullYear(),g=m;g<=f;g++)p.push(ta(aa(new Date),g));var x=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:CA;return r.jsx(x,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:function(t){var r=ta(Pt(a),Number(t.target.value));e.onChange(r)},value:a.getFullYear(),caption:u(a,{locale:o}),children:p.map(function(e){return r.jsx("option",{value:e.getFullYear(),children:u(e,{locale:o})},e.getFullYear())})})}function TA(){var e=wA(),t=function(e){var t=e.month,a=e.defaultMonth,r=e.today,i=t||a||r||new Date,n=e.toDate,s=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return n&&Ot(n,i)<0&&(i=Rt(n,-1*(l-1))),s&&Ot(i,s)<0&&(i=s),Pt(i)}(e),a=function(e,t){var a=ke.useState(e),r=a[0];return[void 0===t?r:t,a[1]]}(t,e.month),r=a[0],i=a[1];return[r,function(t){var a;if(!e.disableNavigation){var r=Pt(t);i(r),null===(a=e.onMonthChange)||void 0===a||a.call(e,r)}}]}var DA=ke.createContext(void 0);function IA(e){var t=wA(),a=TA(),i=a[0],n=a[1],s=function(e,t){for(var a=t.reverseMonths,r=t.numberOfMonths,i=Pt(e),n=Pt(Rt(i,r)),s=Ot(n,i),o=[],l=0;l<s;l++){var c=Rt(i,l);o.push(c)}return a&&(o=o.reverse()),o}(i,t),o=function(e,t){if(!t.disableNavigation){var a=t.toDate,r=t.pagedNavigation,i=t.numberOfMonths,n=void 0===i?1:i,s=r?n:1,o=Pt(e);if(!a)return Rt(o,s);if(!(Ot(a,e)<n))return Rt(o,s)}}(i,t),l=function(e,t){if(!t.disableNavigation){var a=t.fromDate,r=t.pagedNavigation,i=t.numberOfMonths,n=r?void 0===i?1:i:1,s=Pt(e);if(!a)return Rt(s,-n);if(!(Ot(s,a)<=0))return Rt(s,-n)}}(i,t),c=function(e){return s.some(function(t){return Ft(e,t)})},d={currentMonth:i,displayMonths:s,goToMonth:n,goToDate:function(e,a){c(e)||(a&&Bt(e,a)?n(Rt(e,1+-1*t.numberOfMonths)):n(e))},previousMonth:l,nextMonth:o,isDateDisplayed:c};return r.jsx(DA.Provider,{value:d,children:e.children})}function AA(){var e=ke.useContext(DA);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function PA(e){var t,a=wA(),i=a.classNames,n=a.styles,s=a.components,o=AA().goToMonth,l=function(t){o(Rt(t,e.displayIndex?-e.displayIndex:0))},c=null!==(t=null==s?void 0:s.CaptionLabel)&&void 0!==t?t:NA,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:i.caption_dropdowns,style:n.caption_dropdowns,children:[r.jsx("div",{className:i.vhidden,children:d}),r.jsx(kA,{onChange:l,displayMonth:e.displayMonth}),r.jsx(MA,{onChange:l,displayMonth:e.displayMonth})]})}function LA(e){return r.jsx("svg",pA({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function zA(e){return r.jsx("svg",pA({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var EA=ke.forwardRef(function(e,t){var a=wA(),i=a.classNames,n=a.styles,s=[i.button_reset,i.button];e.className&&s.push(e.className);var o=s.join(" "),l=pA(pA({},n.button_reset),n.button);return e.style&&Object.assign(l,e.style),r.jsx("button",pA({},e,{ref:t,type:"button",className:o,style:l}))});function RA(e){var t,a,i=wA(),n=i.dir,s=i.locale,o=i.classNames,l=i.styles,c=i.labels,d=c.labelPrevious,u=c.labelNext,h=i.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var p=d(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),f=u(e.nextMonth,{locale:s}),g=[o.nav_button,o.nav_button_next].join(" "),x=null!==(t=null==h?void 0:h.IconRight)&&void 0!==t?t:zA,v=null!==(a=null==h?void 0:h.IconLeft)&&void 0!==a?a:LA;return r.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&r.jsx(EA,{name:"previous-month","aria-label":p,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===n?r.jsx(x,{className:o.nav_icon,style:l.nav_icon}):r.jsx(v,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&r.jsx(EA,{name:"next-month","aria-label":f,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===n?r.jsx(v,{className:o.nav_icon,style:l.nav_icon}):r.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function OA(e){var t=wA().numberOfMonths,a=AA(),i=a.previousMonth,n=a.nextMonth,s=a.goToMonth,o=a.displayMonths,l=o.findIndex(function(t){return Ft(e.displayMonth,t)}),c=0===l,d=l===o.length-1,u=t>1&&(c||!d),h=t>1&&(d||!c);return r.jsx(RA,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:h,nextMonth:n,previousMonth:i,onPreviousClick:function(){i&&s(i)},onNextClick:function(){n&&s(n)}})}function FA(e){var t,a,i=wA(),n=i.classNames,s=i.disableNavigation,o=i.styles,l=i.captionLayout,c=i.components,d=null!==(t=null==c?void 0:c.CaptionLabel)&&void 0!==t?t:NA;return a=s?r.jsx(d,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===l?r.jsx(PA,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===l?r.jsxs(r.Fragment,{children:[r.jsx(PA,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(OA,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):r.jsxs(r.Fragment,{children:[r.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(OA,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:n.caption,style:o.caption,children:a})}function BA(e){var t=wA(),a=t.footer,i=t.styles,n=t.classNames.tfoot;return a?r.jsx("tfoot",{className:n,style:i.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:a})})}):r.jsx(r.Fragment,{})}function qA(){var e=wA(),t=e.classNames,a=e.styles,i=e.showWeekNumber,n=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=function(e,t,a){for(var r=a?na(new Date):sa(new Date,{locale:e,weekStartsOn:t}),i=[],n=0;n<7;n++){var s=Vt(r,n);i.push(s)}return i}(n,s,o);return r.jsxs("tr",{style:a.head_row,className:t.head_row,children:[i&&r.jsx("td",{style:a.head_cell,className:t.head_cell}),d.map(function(e,i){return r.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":c(e,{locale:n}),children:l(e,{locale:n})},i)})]})}function VA(){var e,t=wA(),a=t.classNames,i=t.styles,n=t.components,s=null!==(e=null==n?void 0:n.HeadRow)&&void 0!==e?e:qA;return r.jsx("thead",{style:i.head,className:a.head,children:r.jsx(s,{})})}function HA(e){var t=wA(),a=t.locale,i=t.formatters.formatDay;return r.jsx(r.Fragment,{children:i(e.date,{locale:a})})}var WA=ke.createContext(void 0);function GA(e){if(!fA(e.initialProps)){return r.jsx(WA.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return r.jsx(UA,{initialProps:e.initialProps,children:e.children})}function UA(e){var t=e.initialProps,a=e.children,i=t.selected,n=t.min,s=t.max,o={disabled:[]};i&&o.disabled.push(function(e){var t=s&&i.length>s-1,a=i.some(function(t){return qt(t,e)});return Boolean(t&&!a)});var l={selected:i,onDayClick:function(e,a,r){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,a,r),!Boolean(a.selected&&n&&(null==i?void 0:i.length)===n))&&!Boolean(!a.selected&&s&&(null==i?void 0:i.length)===s)){var c=i?mA([],i):[];if(a.selected){var d=c.findIndex(function(t){return qt(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,a,r)}},modifiers:o};return r.jsx(WA.Provider,{value:l,children:a})}function $A(){var e=ke.useContext(WA);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var YA,KA,XA=ke.createContext(void 0);function ZA(e){if(!gA(e.initialProps)){return r.jsx(XA.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return r.jsx(QA,{initialProps:e.initialProps,children:e.children})}function QA(e){var t=e.initialProps,a=e.children,i=t.selected,n=i||{},s=n.from,o=n.to,l=t.min,c=t.max,d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],qt(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:Ht(s,l-1),before:Vt(s,l-1)}),s&&o&&d.disabled.push({after:s,before:Vt(s,l-1)}),!s&&o&&d.disabled.push({after:Ht(o,l-1),before:Vt(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:Vt(s,1-c)}),d.disabled.push({after:Vt(s,c-1)})),s&&o){var u=c-(Wt(o,s)+1);d.disabled.push({before:Ht(s,u)}),d.disabled.push({after:Vt(o,u)})}!s&&o&&(d.disabled.push({before:Vt(o,1-c)}),d.disabled.push({after:Vt(o,c-1)}))}return r.jsx(XA.Provider,{value:{selected:i,onDayClick:function(e,a,r){var n,s;null===(n=t.onDayClick)||void 0===n||n.call(t,e,a,r);var o=function(e,t){var a=t||{},r=a.from,i=a.to;if(r&&i){if(qt(i,e)&&qt(r,e))return;if(qt(i,e))return{from:i,to:void 0};if(qt(r,e))return;return Kt(r,e)?{from:e,to:i}:{from:r,to:e}}return i?Kt(e,i)?{from:i,to:e}:{from:e,to:i}:r?Bt(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}(e,i);null===(s=t.onSelect)||void 0===s||s.call(t,o,e,a,r)},modifiers:d},children:a})}function JA(){var e=ke.useContext(XA);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function eP(e){return Array.isArray(e)?mA([],e):void 0!==e?[e]:[]}(KA=YA||(YA={})).Outside="outside",KA.Disabled="disabled",KA.Selected="selected",KA.Hidden="hidden",KA.Today="today",KA.RangeStart="range_start",KA.RangeEnd="range_end",KA.RangeMiddle="range_middle";var tP=YA.Selected,aP=YA.Disabled,rP=YA.Hidden,iP=YA.Today,nP=YA.RangeEnd,sP=YA.RangeMiddle,oP=YA.RangeStart,lP=YA.Outside;var cP=ke.createContext(void 0);function dP(e){var t=wA(),a=function(e,t,a){var r,i=((r={})[tP]=eP(e.selected),r[aP]=eP(e.disabled),r[rP]=eP(e.hidden),r[iP]=[e.today],r[nP]=[],r[sP]=[],r[oP]=[],r[lP]=[],r);return e.fromDate&&i[aP].push({before:e.fromDate}),e.toDate&&i[aP].push({after:e.toDate}),fA(e)?i[aP]=i[aP].concat(t.modifiers[aP]):gA(e)&&(i[aP]=i[aP].concat(a.modifiers[aP]),i[oP]=a.modifiers[oP],i[sP]=a.modifiers[sP],i[nP]=a.modifiers[nP]),i}(t,$A(),JA()),i=function(e){var t={};return Object.entries(e).forEach(function(e){var a=e[0],r=e[1];t[a]=eP(r)}),t}(t.modifiers),n=pA(pA({},a),i);return r.jsx(cP.Provider,{value:n,children:e.children})}function uP(){var e=ke.useContext(cP);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function hP(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(ca(t))return qt(e,t);var a,r,i,n,s;if(function(e){return Array.isArray(e)&&e.every(ca)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return a=e,n=(r=t).from,s=r.to,n&&s?(Wt(s,n)<0&&(n=(i=[s,n])[0],s=i[1]),Wt(a,n)>=0&&Wt(s,a)>=0):s?qt(s,a):!!n&&qt(n,a);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=Wt(t.before,e)>0,l=Wt(t.after,e)<0;return Kt(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?Wt(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?Wt(t.before,e)>0:"function"==typeof t&&t(e)})}function pP(e,t,a){var r=Object.keys(t).reduce(function(a,r){var i=t[r];return hP(e,i)&&a.push(r),a},[]),i={};return r.forEach(function(e){return i[e]=!0}),a&&!Ft(e,a)&&(i.outside=!0),i}function mP(e,t){var a=t.moveBy,r=t.direction,i=t.context,n=t.modifiers,s=t.retry,o=void 0===s?{count:0,lastFocused:e}:s,l=i.weekStartsOn,c=i.fromDate,d=i.toDate,u=i.locale,h={day:Vt,week:Ut,month:Rt,year:Xt,startOfWeek:function(e){return i.ISOWeek?na(e):sa(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return i.ISOWeek?ra(e):ia(e,{locale:u,weekStartsOn:l})}}[a](e,"after"===r?1:-1);"before"===r&&c?h=Zt([c,h]):"after"===r&&d&&(h=Qt([d,h]));var p=!0;if(n){var m=pP(h,n);p=!m.disabled&&!m.hidden}return p?h:o.count>365?o.lastFocused:mP(h,{moveBy:a,direction:r,context:i,modifiers:n,retry:pA(pA({},o),{count:o.count+1})})}var fP=ke.createContext(void 0);function gP(e){var t=AA(),a=uP(),i=ke.useState(),n=i[0],s=i[1],o=ke.useState(),l=o[0],c=o[1],d=function(e,t){for(var a,r,i=Pt(e[0]),n=Lt(e[e.length-1]),s=i;s<=n;){var o=pP(s,t);if(o.disabled||o.hidden)s=Vt(s,1);else{if(o.selected)return s;o.today&&!r&&(r=s),a||(a=s),s=Vt(s,1)}}return r||a}(t.displayMonths,a),u=(null!=n?n:l&&t.isDateDisplayed(l))?l:d,h=function(e){s(e)},p=wA(),m=function(e,r){if(n){var i=mP(n,{moveBy:e,direction:r,context:p,modifiers:a});qt(n,i)||(t.goToDate(i,n),h(i))}},f={focusedDay:n,focusTarget:u,blur:function(){c(n),s(void 0)},focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return r.jsx(fP.Provider,{value:f,children:e.children})}function xP(){var e=ke.useContext(fP);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var vP=ke.createContext(void 0);function yP(e){if(!xA(e.initialProps)){return r.jsx(vP.Provider,{value:{selected:void 0},children:e.children})}return r.jsx(bP,{initialProps:e.initialProps,children:e.children})}function bP(e){var t=e.initialProps,a=e.children,i={selected:t.selected,onDayClick:function(e,a,r){var i,n,s;null===(i=t.onDayClick)||void 0===i||i.call(t,e,a,r),!a.selected||t.required?null===(s=t.onSelect)||void 0===s||s.call(t,e,e,a,r):null===(n=t.onSelect)||void 0===n||n.call(t,void 0,e,a,r)}};return r.jsx(vP.Provider,{value:i,children:a})}function _P(){var e=ke.useContext(vP);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function jP(e,t){var a=[e.classNames.day];return Object.keys(t).forEach(function(t){var r=e.modifiersClassNames[t];if(r)a.push(r);else if(function(e){return Object.values(YA).includes(e)}(t)){var i=e.classNames["day_".concat(t)];i&&a.push(i)}}),a}function wP(e,t,a){var i,n,s,o=wA(),l=xP(),c=function(e,t){return pP(e,uP(),t)}(e,t),d=function(e,t){var a=wA(),r=_P(),i=$A(),n=JA(),s=xP(),o=s.focusDayAfter,l=s.focusDayBefore,c=s.focusWeekAfter,d=s.focusWeekBefore,u=s.blur,h=s.focus,p=s.focusMonthBefore,m=s.focusMonthAfter,f=s.focusYearBefore,g=s.focusYearAfter,x=s.focusStartOfWeek,v=s.focusEndOfWeek;return{onClick:function(s){var o,l,c,d;xA(a)?null===(o=r.onDayClick)||void 0===o||o.call(r,e,t,s):fA(a)?null===(l=i.onDayClick)||void 0===l||l.call(i,e,t,s):gA(a)?null===(c=n.onDayClick)||void 0===c||c.call(n,e,t,s):null===(d=a.onDayClick)||void 0===d||d.call(a,e,t,s)},onFocus:function(r){var i;h(e),null===(i=a.onDayFocus)||void 0===i||i.call(a,e,t,r)},onBlur:function(r){var i;u(),null===(i=a.onDayBlur)||void 0===i||i.call(a,e,t,r)},onKeyDown:function(r){var i;switch(r.key){case"ArrowLeft":r.preventDefault(),r.stopPropagation(),"rtl"===a.dir?o():l();break;case"ArrowRight":r.preventDefault(),r.stopPropagation(),"rtl"===a.dir?l():o();break;case"ArrowDown":r.preventDefault(),r.stopPropagation(),c();break;case"ArrowUp":r.preventDefault(),r.stopPropagation(),d();break;case"PageUp":r.preventDefault(),r.stopPropagation(),r.shiftKey?f():p();break;case"PageDown":r.preventDefault(),r.stopPropagation(),r.shiftKey?g():m();break;case"Home":r.preventDefault(),r.stopPropagation(),x();break;case"End":r.preventDefault(),r.stopPropagation(),v()}null===(i=a.onDayKeyDown)||void 0===i||i.call(a,e,t,r)},onKeyUp:function(r){var i;null===(i=a.onDayKeyUp)||void 0===i||i.call(a,e,t,r)},onMouseEnter:function(r){var i;null===(i=a.onDayMouseEnter)||void 0===i||i.call(a,e,t,r)},onMouseLeave:function(r){var i;null===(i=a.onDayMouseLeave)||void 0===i||i.call(a,e,t,r)},onPointerEnter:function(r){var i;null===(i=a.onDayPointerEnter)||void 0===i||i.call(a,e,t,r)},onPointerLeave:function(r){var i;null===(i=a.onDayPointerLeave)||void 0===i||i.call(a,e,t,r)},onTouchCancel:function(r){var i;null===(i=a.onDayTouchCancel)||void 0===i||i.call(a,e,t,r)},onTouchEnd:function(r){var i;null===(i=a.onDayTouchEnd)||void 0===i||i.call(a,e,t,r)},onTouchMove:function(r){var i;null===(i=a.onDayTouchMove)||void 0===i||i.call(a,e,t,r)},onTouchStart:function(r){var i;null===(i=a.onDayTouchStart)||void 0===i||i.call(a,e,t,r)}}}(e,c),u=function(){var e=wA(),t=_P(),a=$A(),r=JA();return xA(e)?t.selected:fA(e)?a.selected:gA(e)?r.selected:void 0}(),h=Boolean(o.onDayClick||"default"!==o.mode);ke.useEffect(function(){var t;c.outside||l.focusedDay&&h&&qt(l.focusedDay,e)&&(null===(t=a.current)||void 0===t||t.focus())},[l.focusedDay,e,a,h,c.outside]);var p=jP(o,c).join(" "),m=function(e,t){var a=pA({},e.styles.day);return Object.keys(t).forEach(function(t){var r;a=pA(pA({},a),null===(r=e.modifiersStyles)||void 0===r?void 0:r[t])}),a}(o,c),f=Boolean(c.outside&&!o.showOutsideDays||c.hidden),g=null!==(s=null===(n=o.components)||void 0===n?void 0:n.DayContent)&&void 0!==s?s:HA,x={style:m,className:p,children:r.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),role:"gridcell"},v=l.focusTarget&&qt(l.focusTarget,e)&&!c.outside,y=l.focusedDay&&qt(l.focusedDay,e),b=pA(pA(pA({},x),((i={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,i.tabIndex=y||v?0:-1,i)),d);return{isButton:h,isHidden:f,activeModifiers:c,selectedDays:u,buttonProps:b,divProps:x}}function NP(e){var t=ke.useRef(null),a=wP(e.date,e.displayMonth,t);return a.isHidden?r.jsx("div",{role:"gridcell"}):a.isButton?r.jsx(EA,pA({name:"day",ref:t},a.buttonProps)):r.jsx("div",pA({},a.divProps))}function SP(e){var t=e.number,a=e.dates,i=wA(),n=i.onWeekNumberClick,s=i.styles,o=i.classNames,l=i.locale,c=i.labels.labelWeekNumber,d=(0,i.formatters.formatWeekNumber)(Number(t),{locale:l});if(!n)return r.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var u=c(Number(t),{locale:l});return r.jsx(EA,{name:"week-number","aria-label":u,className:o.weeknumber,style:s.weeknumber,onClick:function(e){n(t,a,e)},children:d})}function CP(e){var t,a,i,n=wA(),s=n.styles,o=n.classNames,l=n.showWeekNumber,c=n.components,d=null!==(t=null==c?void 0:c.Day)&&void 0!==t?t:NP,u=null!==(a=null==c?void 0:c.WeekNumber)&&void 0!==a?a:SP;return l&&(i=r.jsx("td",{className:o.cell,style:s.cell,children:r.jsx(u,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:o.row,style:s.row,children:[i,e.dates.map(function(t){return r.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:r.jsx(d,{displayMonth:e.displayMonth,date:t})},$t(t))})]})}function kP(e,t,a){for(var r=(null==a?void 0:a.ISOWeek)?ra(t):ia(t,a),i=(null==a?void 0:a.ISOWeek)?na(e):sa(e,a),n=Wt(r,i),s=[],o=0;o<=n;o++)s.push(Vt(i,o));return s.reduce(function(e,t){var r=(null==a?void 0:a.ISOWeek)?oa(t):la(t,a),i=e.find(function(e){return e.weekNumber===r});return i?(i.dates.push(t),e):(e.push({weekNumber:r,dates:[t]}),e)},[])}function MP(e){var t,a,i,n=wA(),s=n.locale,o=n.classNames,l=n.styles,c=n.hideHead,d=n.fixedWeeks,u=n.components,h=n.weekStartsOn,p=n.firstWeekContainsDate,m=n.ISOWeek,f=function(e,t){var a=kP(Pt(e),Lt(e),t);if(null==t?void 0:t.useFixedWeeks){var r=Gt(e,t);if(r<6){var i=a[a.length-1],n=i.dates[i.dates.length-1],s=Ut(n,6-r),o=kP(Ut(n,1),s,t);a.push.apply(a,o)}}return a}(e.displayMonth,{useFixedWeeks:Boolean(d),ISOWeek:m,locale:s,weekStartsOn:h,firstWeekContainsDate:p}),g=null!==(t=null==u?void 0:u.Head)&&void 0!==t?t:VA,x=null!==(a=null==u?void 0:u.Row)&&void 0!==a?a:CP,v=null!==(i=null==u?void 0:u.Footer)&&void 0!==i?i:BA;return r.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(g,{}),r.jsx("tbody",{className:o.tbody,style:l.tbody,children:f.map(function(t){return r.jsx(x,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),r.jsx(v,{displayMonth:e.displayMonth})]})}var TP="undefined"!=typeof window&&window.document&&window.document.createElement?ke.useLayoutEffect:ke.useEffect,DP=!1,IP=0;function AP(){return"react-day-picker-".concat(++IP)}function PP(e){var t,a,i=wA(),n=i.dir,s=i.classNames,o=i.styles,l=i.components,c=AA().displayMonths,d=function(e){var t,a=null!=e?e:DP?AP():null,r=ke.useState(a),i=r[0],n=r[1];return TP(function(){null===i&&n(AP())},[]),ke.useEffect(function(){!1===DP&&(DP=!0)},[]),null!==(t=null!=e?e:i)&&void 0!==t?t:void 0}(i.id?"".concat(i.id,"-").concat(e.displayIndex):void 0),u=i.id?"".concat(i.id,"-grid-").concat(e.displayIndex):void 0,h=[s.month],p=o.month,m=0===e.displayIndex,f=e.displayIndex===c.length-1,g=!m&&!f;"rtl"===n&&(f=(t=[m,f])[0],m=t[1]),m&&(h.push(s.caption_start),p=pA(pA({},p),o.caption_start)),f&&(h.push(s.caption_end),p=pA(pA({},p),o.caption_end)),g&&(h.push(s.caption_between),p=pA(pA({},p),o.caption_between));var x=null!==(a=null==l?void 0:l.Caption)&&void 0!==a?a:FA;return r.jsxs("div",{className:h.join(" "),style:p,children:[r.jsx(x,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(MP,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function LP(e){var t=wA(),a=t.classNames,i=t.styles;return r.jsx("div",{className:a.months,style:i.months,children:e.children})}function zP(e){var t,a,i=e.initialProps,n=wA(),s=xP(),o=AA(),l=ke.useState(!1),c=l[0],d=l[1];ke.useEffect(function(){n.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),d(!0)))},[n.initialFocus,c,s.focus,s.focusTarget,s]);var u=[n.classNames.root,n.className];n.numberOfMonths>1&&u.push(n.classNames.multiple_months),n.showWeekNumber&&u.push(n.classNames.with_weeknumber);var h=pA(pA({},n.styles.root),n.style),p=Object.keys(i).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var a;return pA(pA({},e),((a={})[t]=i[t],a))},{}),m=null!==(a=null===(t=i.components)||void 0===t?void 0:t.Months)&&void 0!==a?a:LP;return r.jsx("div",pA({className:u.join(" "),style:h,dir:n.dir,id:n.id,nonce:i.nonce,title:i.title,lang:i.lang},p,{children:r.jsx(m,{children:o.displayMonths.map(function(e,t){return r.jsx(PP,{displayIndex:t,displayMonth:e},t)})})}))}function EP(e){var t=e.children,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]])}return a}(e,["children"]);return r.jsx(jA,{initialProps:a,children:r.jsx(IA,{children:r.jsx(yP,{initialProps:a,children:r.jsx(GA,{initialProps:a,children:r.jsx(ZA,{initialProps:a,children:r.jsx(dP,{children:r.jsx(gP,{children:t})})})})})})})}function RP(e){return r.jsx(EP,pA({},e,{children:r.jsx(zP,{initialProps:e})}))}function OP({className:e,classNames:t,showOutsideDays:a=!0,...i}){return r.jsx(RP,{showOutsideDays:a,className:vr("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:vr(Bi({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:vr(Bi({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>r.jsx(nt,{className:"h-4 w-4"}),IconRight:({...e})=>r.jsx(st,{className:"h-4 w-4"})},...i})}OP.displayName="Calendar";var FP="Popover",[BP]=u(FP,[p]),qP=p(),[VP,HP]=BP(FP),WP=e=>{const{__scopePopover:t,children:a,open:i,defaultOpen:n,onOpenChange:s,modal:o=!1}=e,l=qP(t),c=ke.useRef(null),[d,u]=ke.useState(!1),[h,p]=b({prop:i,defaultProp:n??!1,onChange:s,caller:FP});return r.jsx(_,{...l,children:r.jsx(VP,{scope:t,contentId:y(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:ke.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:d,onCustomAnchorAdd:ke.useCallback(()=>u(!0),[]),onCustomAnchorRemove:ke.useCallback(()=>u(!1),[]),modal:o,children:a})})};WP.displayName=FP;var GP="PopoverAnchor";ke.forwardRef((e,t)=>{const{__scopePopover:a,...i}=e,n=HP(GP,a),s=qP(a),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=n;return ke.useEffect(()=>(o(),()=>l()),[o,l]),r.jsx(j,{...s,...i,ref:t})}).displayName=GP;var UP="PopoverTrigger",$P=ke.forwardRef((e,t)=>{const{__scopePopover:a,...i}=e,n=HP(UP,a),s=qP(a),o=v(t,n.triggerRef),l=r.jsx(w.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":nL(n.open),...i,ref:o,onClick:N(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:r.jsx(j,{asChild:!0,...s,children:l})});$P.displayName=UP;var YP="PopoverPortal",[KP,XP]=BP(YP,{forceMount:void 0}),ZP=e=>{const{__scopePopover:t,forceMount:a,children:i,container:n}=e,s=HP(YP,t);return r.jsx(KP,{scope:t,forceMount:a,children:r.jsx(h,{present:a||s.open,children:r.jsx(fe,{asChild:!0,container:n,children:i})})})};ZP.displayName=YP;var QP="PopoverContent",JP=ke.forwardRef((e,t)=>{const a=XP(QP,e.__scopePopover),{forceMount:i=a.forceMount,...n}=e,s=HP(QP,e.__scopePopover);return r.jsx(h,{present:i||s.open,children:s.modal?r.jsx(tL,{...n,ref:t}):r.jsx(aL,{...n,ref:t})})});JP.displayName=QP;var eL=ve("PopoverContent.RemoveScroll"),tL=ke.forwardRef((e,t)=>{const a=HP(QP,e.__scopePopover),i=ke.useRef(null),n=v(t,i),s=ke.useRef(!1);return ke.useEffect(()=>{const e=i.current;if(e)return ge(e)},[]),r.jsx(xe,{as:eL,allowPinchZoom:!0,children:r.jsx(rL,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:N(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),s.current||null==(t=a.triggerRef.current)||t.focus()}),onPointerDownOutside:N(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey,r=2===t.button||a;s.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:N(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),aL=ke.forwardRef((e,t)=>{const a=HP(QP,e.__scopePopover),i=ke.useRef(!1),n=ke.useRef(!1);return r.jsx(rL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,s;null==(r=e.onCloseAutoFocus)||r.call(e,t),t.defaultPrevented||(i.current||null==(s=a.triggerRef.current)||s.focus(),t.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:t=>{var r,s;null==(r=e.onInteractOutside)||r.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));const o=t.target;(null==(s=a.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),rL=ke.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:i,onOpenAutoFocus:n,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,p=HP(QP,a),g=qP(a);return ye(),r.jsx(be,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:n,onUnmountAutoFocus:s,children:r.jsx(m,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx(f,{"data-state":nL(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),iL="PopoverClose";ke.forwardRef((e,t)=>{const{__scopePopover:a,...i}=e,n=HP(iL,a);return r.jsx(w.button,{type:"button",...i,ref:t,onClick:N(e.onClick,()=>n.onOpenChange(!1))})}).displayName=iL;function nL(e){return e?"open":"closed"}ke.forwardRef((e,t)=>{const{__scopePopover:a,...i}=e,n=qP(a);return r.jsx(S,{...n,...i,ref:t})}).displayName="PopoverArrow";var sL=ZP,oL=JP;const lL=WP,cL=$P,dL=ke.forwardRef(({className:e,align:t="center",sideOffset:a=4,...i},n)=>r.jsx(sL,{children:r.jsx(oL,{ref:n,align:t,sideOffset:a,className:vr("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i})}));dL.displayName=oL.displayName,zS([function(e){e.registerChartView(Uk),e.registerSeriesModel(Xk),function(e,t){function a(t,a){var r=[];return t.eachComponent({mainType:"series",subType:e,query:a},function(e){r.push(e.seriesIndex)}),r}Bn([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(e){t(e[0],function(t,r,i){t=zn({},t),i.dispatchAction(zn(t,{type:e[1],seriesIndex:a(r,t)}))})})}("pie",e.registerAction),e.registerLayout(Un(zk,"pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var a=t.findComponents({mainType:"legend"});if(a&&a.length){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),i=0;i<a.length;i++)if(!a[i].isSelected(t))return!1;return!0})}}}),e.registerProcessor(function(e){return{seriesType:e,reset:function(e,t){var a=e.getData();a.filterSelf(function(e){var t=a.mapDimension("value"),r=a.get(t,e);return!(Zn(r)&&!isNaN(r)&&r<0)})}}}("pie"))},mD,uD,zD,VD]);const uL=ke.memo(function({data:e,height:t=400,date:a,showType:i="realizado"}){const n=ke.useRef(null),s=ke.useRef(null),o=ke.useRef(null),l=["#3b82f6","#10b981","#eab308","#ef4444","#8b5cf6","#f97316","#06b6d4","#84cc16","#ec4899","#6366f1"];return ke.useEffect(()=>{if(!n.current)return;const t=n.current.clientWidth,a=n.current.clientHeight;if(0===t||0===a)return;if(!e||0===e.length)return void(s.current&&!s.current.isDisposed()&&s.current.clear());if(!s.current||s.current.isDisposed()){const e=Ow(n.current,null,{renderer:"canvas",useDirtyRect:!1});s.current=e,o.current=new ResizeObserver(()=>{e.resize()}),o.current.observe(n.current)}const r=e.map((e,t)=>({name:e.name,value:"previsto"===i?e.previsto:e.realizado,itemStyle:{color:l[t%l.length]},previsto:e.previsto,realizado:e.realizado,diferenca:e.diferenca})),c=r.reduce((e,t)=>e+t.value,0),d={tooltip:{trigger:"item",backgroundColor:"#1f2937",borderColor:"#374151",borderWidth:1,textStyle:{color:"#ffffff"},formatter:function(e){const t=e.data,a=c>0?(t.value/c*100).toFixed(1):"0",r=t.diferenca,i=t.previsto>0?(100*(t.realizado/t.previsto-1)).toFixed(1):"0";return`\n            <div style="padding: 8px;">\n              <div style="font-weight: bold; margin-bottom: 4px;">${t.name}</div>\n              <div style="color: #3b82f6;">Previsto: ${t.previsto.toLocaleString("pt-BR")} kg</div>\n              <div style="color: #10b981;">Realizado: ${t.realizado.toLocaleString("pt-BR")} kg</div>\n              <div style="color: ${r>=0?"#eab308":"#ef4444"}; font-weight: bold;">\n                Diferena: ${r>0?"+":""}${r.toLocaleString("pt-BR")} kg (${i}%)\n              </div>\n              <div style="margin-top: 4px; color: #ffffff; font-weight: bold;">\n                Participao: ${a}%\n              </div>\n            </div>\n          `}},legend:{type:"scroll",orient:"horizontal",left:"center",bottom:20,itemWidth:14,itemHeight:14,itemGap:20,width:"90%",pageButtonItemGap:10,pageIconSize:12,pageIconColor:"#ffffff",pageIconInactiveColor:"#666666",pageTextStyle:{color:"#ffffff",fontSize:11},textStyle:{color:"#ffffff",fontSize:11,width:120,overflow:"truncate"},tooltip:{show:!0,backgroundColor:"#1f2937",borderColor:"#374151",textStyle:{color:"#ffffff"}},formatter:function(e){const t=r.find(t=>t.name===e);if(!t)return e;const a=c>0?(t.value/c*100).toFixed(1):"0";return`${e.length>15?e.substring(0,12)+"...":e} (${a}%)`}},series:[{name:"Distribuio Realizada",type:"pie",radius:["40%","70%"],center:["50%","45%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold",color:"#ffffff",formatter:function(e){const t=c>0?(e.value/c*100).toFixed(1):"0";return`${e.name}\n${t}%`}}},labelLine:{show:!1},data:r}],title:{text:"Distribuio Realizada por Ingrediente",left:"center",textStyle:{color:"#ffffff",fontSize:16,fontWeight:"bold"},top:0},animation:!0,animationDuration:800,animationEasing:"cubicOut"};s.current.setOption(d,{notMerge:!0,lazyUpdate:!1,silent:!1})},[e,a,i]),ke.useEffect(()=>{const e=n.current,t=o.current;return()=>{t&&e&&(t.unobserve(e),t.disconnect()),s.current&&!s.current.isDisposed()&&s.current.dispose(),s.current=null,o.current=null}},[]),r.jsx("div",{className:"relative",children:r.jsx("div",{ref:n,style:{width:"100%",height:`${t}px`,minHeight:"450px"}})})});function hL({data:e,height:t=400,date:a}){const i=ke.useRef(null),n=ke.useRef(null);return ke.useEffect(()=>{if(!i.current)return;if(!e||0===e.length)return void(n.current&&!n.current.isDisposed()&&n.current.clear());n.current&&!n.current.isDisposed()||(n.current=Ow(i.current));const t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){const a=t[0].dataIndex,r=e[a];return`\n            <div style="font-weight: bold; margin-bottom: 8px;">${r.name}</div>\n            <div style="display: flex; align-items: center; margin-bottom: 4px;">\n              <span style="display: inline-block; width: 12px; height: 12px; background-color: #3b82f6; margin-right: 8px;"></span>\n              Previsto: ${r.previsto.toLocaleString("pt-BR")} kg\n            </div>\n            <div style="display: flex; align-items: center; margin-bottom: 4px;">\n              <span style="display: inline-block; width: 12px; height: 12px; background-color: #10b981; margin-right: 8px;"></span>\n              Realizado: ${r.realizado.toLocaleString("pt-BR")} kg\n            </div>\n            <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #e5e7eb;">\n              <div style="color: ${r.diferenca>=0?"#10b981":"#ef4444"};">\n                Diferena: ${r.diferenca>=0?"+":""}${r.diferenca.toLocaleString("pt-BR")} kg\n              </div>\n              <div style="color: ${r.desvio_percentual>=0?"#10b981":"#ef4444"};">\n                Desvio: ${r.desvio_percentual>=0?"+":""}${r.desvio_percentual.toFixed(2)}%\n              </div>\n            </div>\n          `}},legend:{data:["Previsto","Realizado"],textStyle:{color:"#ffffff"},top:20,left:"center"},grid:{left:"3%",right:"4%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",data:e.map(e=>e.name.length>25?e.name.substring(0,25)+"...":e.name),axisLabel:{rotate:45,interval:0,fontSize:12,color:"#ffffff"},axisLine:{lineStyle:{color:"#4b5563"}}},yAxis:{type:"value",name:"Quantidade (kg)",nameLocation:"middle",nameGap:80,nameRotate:90,nameTextStyle:{color:"#ffffff",fontSize:14},axisLabel:{color:"#ffffff",formatter:function(e){return e.toLocaleString("pt-BR")}},axisLine:{lineStyle:{color:"#4b5563"}},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"Previsto",type:"bar",data:e.map(e=>e.previsto),itemStyle:{color:"#3b82f6",borderRadius:[2,2,0,0]},emphasis:{itemStyle:{color:"#2563eb"}}},{name:"Realizado",type:"bar",data:e.map(e=>e.realizado),itemStyle:{color:"#10b981",borderRadius:[2,2,0,0]},emphasis:{itemStyle:{color:"#059669"}}}],animation:!0,animationDuration:800,animationEasing:"cubicOut"};n.current.setOption(t,{notMerge:!0,lazyUpdate:!1,silent:!1});const a=()=>{n.current&&n.current.resize()};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[e]),ke.useEffect(()=>(i.current,()=>{n.current&&!n.current.isDisposed()&&n.current.dispose(),n.current=null}),[]),r.jsx("div",{ref:i,style:{width:"100%",height:`${t}px`,minHeight:"300px"}})}zS([Ak,HT,uD,zD,VD]);const pL=async e=>{try{let t=ki.from("fato_carregamento").select("data").order("data",{ascending:!1}).limit(1);e&&(t=t.eq("organization_id",e));const{data:a,error:r}=await t;if(r||!a||0===a.length)return null;const[i,n,s]=a[0].data.split("-").map(Number);return new Date(i,n-1,s,12,0,0)}catch(t){return null}};function mL(){const[e,t]=ke.useState(null),[a,i]=ke.useState(!0),{organization:n,loading:s}=Di();ke.useEffect(()=>{(async()=>{if(s)return;if(!(null==n?void 0:n.id))return void i(!1);i(!0);const[e,a]=await Promise.all([pL(n.id),Ui(n.id)]);let r=e;a&&(!e||a>e)&&(r=a),t(r||new Date),i(!1)})()},[null==n?void 0:n.id,s]);const{data:o,loading:l,error:c}=(({date:e,startDate:t,endDate:a,organizationId:r,enabled:i=!0}={})=>{const[n,s]=ke.useState([]),[o,l]=ke.useState(!0),[c,d]=ke.useState(null),{organization:u}=Di();return ke.useEffect(()=>{i?(async()=>{l(!0),d(null);const i=r||(null==u?void 0:u.id);if(!i)return s([]),void l(!1);try{let r=ki.from("fato_carregamento").select("ingrediente, previsto_kg, realizado_kg, data").eq("organization_id",i).not("ingrediente","is",null).not("previsto_kg","is",null).not("realizado_kg","is",null);if(e){const t=e.getFullYear(),a=`${t}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;r=r.eq("data",a)}else if(t&&a){const e=Yt(t,"yyyy-MM-dd"),i=Yt(a,"yyyy-MM-dd");r=r.gte("data",e).lte("data",i)}const{data:n,error:o}=await r;if(o)throw o;if(n&&n.length>0){const e=n.reduce((e,t)=>(e[t.ingrediente]||(e[t.ingrediente]={ingrediente:t.ingrediente,previsto_kg:0,realizado_kg:0}),e[t.ingrediente].previsto_kg+=Number(t.previsto_kg)||0,e[t.ingrediente].realizado_kg+=Number(t.realizado_kg)||0,e),{}),t=Object.values(e).sort((e,t)=>e.ingrediente.localeCompare(t.ingrediente));s(t)}else s([])}catch(n){d(n)}finally{l(!1)}})():l(!1)},[e,t,a,r,null==u?void 0:u.id,i]),{data:n,loading:o,error:c}})({date:e||void 0,organizationId:null==n?void 0:n.id,enabled:!s&&!!(null==n?void 0:n.id)}),{data:d,loading:u,error:h}=Gi({date:e||void 0,organizationId:null==n?void 0:n.id,enabled:!s&&!!(null==n?void 0:n.id)}),p=o.map(e=>({name:e.ingrediente,previsto:Math.round(e.previsto_kg),realizado:Math.round(e.realizado_kg),diferenca:Math.round(e.realizado_kg-e.previsto_kg)})),m=d.map(e=>({name:e.dieta.length>30?e.dieta.substring(0,30)+"...":e.dieta,previsto:Math.round(e.previsto_kg),realizado:Math.round(e.realizado_kg),diferenca:Math.round(e.desvio_kg),desvio_percentual:e.desvio_percentual})),f=p.reduce((e,t)=>e+t.previsto,0),g=p.reduce((e,t)=>e+t.realizado,0),x=f>0?g/f*100:0,v=g-f,y=f>0?v/f*100:0;return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Analytics"}),r.jsx("p",{className:"text-text-secondary",children:"Anlise de dados de carregamento e distribuio"})]})}),r.jsxs(nA,{defaultValue:"carregamento",className:"space-y-8",children:[r.jsxs(sA,{className:"bg-card-secondary border border-border-subtle",children:[r.jsxs(oA,{value:"carregamento",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Carregamento"]}),r.jsx(oA,{value:"distribuicao",disabled:!0,className:"opacity-50",children:"Distribuio (Em breve)"})]}),r.jsxs(lA,{value:"carregamento",className:"space-y-8",children:[!s&&(null==n?void 0:n.id)&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Mtricas do Carregamento"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(Ei,{title:"Total Previsto",value:p.length>0?`${f.toLocaleString("pt-BR")} kg`:"0 kg",subtitle:e?Yt(e,"dd/MM/yyyy"):"",icon:r.jsx(Ze,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Total Realizado",value:p.length>0?`${g.toLocaleString("pt-BR")} kg`:"0 kg",subtitle:p.length>0?v>=0?`+${Math.abs(v)} kg`:`-${Math.abs(v)} kg`:"Sem dados",trend:p.length>0?v>=0?"up":"down":void 0,icon:r.jsx(Ye,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia Geral",value:p.length>0?`${x.toFixed(1)}%`:"0%",subtitle:p.length>0?`${y>=0?"+":""}${y.toFixed(1)}% vs previsto`:"Sem dados",trend:p.length>0?x>=95?"up":x>=90?"stable":"down":void 0,icon:r.jsx(Je,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Ingredientes",value:p.length.toString(),subtitle:"tipos diferentes",icon:r.jsx(et,{className:"h-6 w-6"})})]}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm mt-6",children:r.jsx(Ai,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Pi,{className:"text-text-primary",children:"Filtros"}),r.jsxs(lL,{children:[r.jsx(cL,{asChild:!0,children:r.jsxs(qi,{variant:"outline",className:vr("w-[240px] justify-start text-left font-normal border-border-subtle",!e&&"text-muted-foreground"),children:[r.jsx(dt,{className:"mr-2 h-4 w-4"}),e?Yt(e,"dd 'de' MMMM 'de' yyyy",{locale:hA}):"Selecione uma data"]})}),r.jsx(dL,{className:"w-auto p-0",align:"start",children:r.jsx(OP,{mode:"single",selected:e||void 0,onSelect:e=>e&&t(e),initialFocus:!0,locale:hA})})]})]})})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Comparativo Quantitativo"}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"text-lg flex items-center gap-2 text-text-primary",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Previsto vs Realizado por Ingrediente"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantidade em kg de cada ingrediente - planejado versus executado"})]}),r.jsx(zi,{children:s||a||l?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Carregando autenticao...":"Carregando dados..."})]})}):c?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-destructive",children:[r.jsx("p",{children:"Erro ao carregar dados"}),r.jsx("p",{className:"text-sm",children:c.message})]})}):0===p.length?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhum dado disponvel para a data selecionada"}),r.jsx("p",{className:"text-sm mt-1",children:"Tente selecionar outra data"})]})}):r.jsx(JD,{data:p,height:400,date:e})})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Distribuio por Ingrediente"}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"text-lg flex items-center gap-2 text-text-primary",children:[r.jsx(da,{className:"h-5 w-5"}),"Participao no Total Realizado"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Percentual de cada ingrediente no total de peso realizado"})]}),r.jsx(zi,{children:s||a||l?r.jsx("div",{className:"h-[450px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Carregando autenticao...":"Carregando dados..."})]})}):c?r.jsx("div",{className:"h-[450px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-destructive",children:[r.jsx("p",{children:"Erro ao carregar dados"}),r.jsx("p",{className:"text-sm",children:c.message})]})}):0===p.length?r.jsx("div",{className:"h-[450px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(da,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhum dado disponvel para a data selecionada"}),r.jsx("p",{className:"text-sm mt-1",children:"Tente selecionar outra data"})]})}):r.jsx(uL,{data:p,height:450,date:e,showType:"realizado"})})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"Resumo por Dieta"}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"text-lg flex items-center gap-2 text-text-primary",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Previsto vs Realizado por Dieta"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Comparativo de peso planejado versus executado por tipo de dieta"})]}),r.jsx(zi,{children:s||a||u?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Carregando autenticao...":"Carregando dados das dietas..."})]})}):h?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-destructive",children:[r.jsx("p",{children:"Erro ao carregar dados das dietas"}),r.jsx("p",{className:"text-sm",children:h.message})]})}):0===m.length?r.jsx("div",{className:"h-[400px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"Nenhum dado de dieta disponvel para a data selecionada"}),r.jsx("p",{className:"text-sm mt-1",children:"Tente selecionar outra data"})]})}):r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[m.length," dietas encontradas para ",e?Yt(e,"dd/MM/yyyy"):"data no selecionada"]}),r.jsx(hL,{data:m,height:450,date:e})]})})]})]})]}),r.jsx(lA,{value:"distribuicao",children:r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:r.jsx(zi,{className:"py-12",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx("p",{className:"text-lg",children:"Em desenvolvimento"}),r.jsx("p",{className:"text-sm mt-2",children:"Esta funcionalidade estar disponvel em breve"})]})})})})]})]})})}function fL(){return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Relatrios"}),r.jsx("p",{className:"text-text-secondary",children:"Relatrios detalhados do sistema"})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[r.jsxs(qi,{variant:"tech",className:"w-full sm:w-auto",children:[r.jsx(ua,{className:"h-4 w-4 mr-2"}),"Novo Relatrio"]}),r.jsxs(qi,{variant:"action",className:"w-full sm:w-auto",children:[r.jsx(ha,{className:"h-4 w-4 mr-2"}),"Exportar"]}),r.jsxs(qi,{variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(ct,{className:"h-4 w-4 mr-2"}),"Filtros"]}),r.jsxs(qi,{variant:"ghost",disabled:!0,className:"w-full sm:w-auto",children:[r.jsx(pa,{className:"h-4 w-4 mr-2"}),"Compartilhar"]}),r.jsxs(qi,{variant:"outline",className:"w-full sm:w-auto hover:bg-accent-primary hover:text-white transition-colors",onClick:()=>window.open("#","_blank"),children:[r.jsx(gt,{className:"h-4 w-4 mr-2"}),"Ver Exemplo"]})]})}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"h-5 w-5"}),"Relatrios Disponveis"]})}),r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(gt,{className:"h-12 w-12 text-text-tertiary mx-auto mb-4"}),r.jsx("p",{className:"text-text-secondary",children:"Mdulo de relatrios em desenvolvimento"}),r.jsx("p",{className:"text-sm text-text-tertiary mt-2",children:"Em breve voc ter acesso aos relatrios detalhados"})]})})]})]})})}const gL=Be("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xL=ke.forwardRef(({className:e,...t},a)=>r.jsx(_e,{ref:a,className:vr(gL(),e),...t}));function vL(){const{user:e,organization:t}=Di(),[a,r]=ke.useState(!1);return{createInvitation:async(a,i)=>{if(!e||!t)return qr.error("Voc precisa estar logado para enviar convites"),{error:"No autenticado"};r(!0);try{const r=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(e=>e.toString(16).padStart(2,"0")).join(""),{data:n,error:s}=await ki.from("invitations").insert({organization_id:t.id,email:a.toLowerCase(),role:i,invited_by:e.id,invitation_token:r}).select().single();return s?("23505"===s.code?qr.error("Este email j foi convidado para esta organizao"):qr.error("Erro ao criar convite: "+s.message),{error:s}):(qr.success("Convite enviado com sucesso!"),{data:n,inviteLink:`${window.location.origin}/invite/${r}`})}catch(n){return qr.error("Erro ao criar convite"),{error:n}}finally{r(!1)}},getInvitations:async()=>{if(!t)return{data:[]};const{data:e,error:a}=await ki.from("invitations").select("\n        *,\n        profiles!invitations_invited_by_fkey(full_name)\n      ").eq("organization_id",t.id).order("created_at",{ascending:!1});return{data:e||[],error:a}},getInvitationByToken:async e=>{const{data:t,error:a}=await ki.from("invitations").select("\n        *,\n        organizations(name, logo_url),\n        profiles!invitations_invited_by_fkey(full_name)\n      ").eq("invitation_token",e).eq("status","pending").gt("expires_at",(new Date).toISOString()).single();return{data:t,error:a}},cancelInvitation:async e=>{r(!0);try{const{error:t}=await ki.from("invitations").update({status:"cancelled"}).eq("id",e);return t?(qr.error("Erro ao cancelar convite"),{error:t}):(qr.success("Convite cancelado com sucesso"),{success:!0})}catch(t){return qr.error("Erro ao cancelar convite"),{error:t}}finally{r(!1)}},loading:a}}function yL(){const{canManageOrganization:e,organization:t}=Di(),{createInvitation:a,getInvitations:i,cancelInvitation:n,loading:s}=vL(),[o,l]=ke.useState([]),[c,d]=ke.useState(!1),[u,h]=ke.useState({email:"",role:"employee"}),[p,m]=ke.useState(new Set);ke.useEffect(()=>{e&&f()},[e]);const f=async()=>{const{data:e}=await i();l(e)},g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"accepted":return"bg-green-100 text-green-800 border-green-200";case"expired":default:return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200"}},x=e=>({owner:"Proprietrio",admin:"Administrador",manager:"Gerente",employee:"Funcionrio",viewer:"Visualizador"}[e]||e),v=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});if(!e)return null;const y=o.filter(e=>"pending"===e.status),b=o.filter(e=>"pending"!==e.status);return r.jsxs(Ii,{className:"border-border-subtle bg-background-secondary/50",children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Pi,{className:"flex items-center gap-2 text-text-primary",children:[r.jsx(Xe,{className:"h-5 w-5"}),"Gerenciar Equipe"]}),r.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Convide novos membros para ",null==t?void 0:t.name]})]}),r.jsxs(HD,{open:c,onOpenChange:d,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{variant:"tech",className:"gap-2",children:[r.jsx(ma,{className:"h-4 w-4"}),"Convidar Membro"]})}),r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Convidar Novo Membro"}),r.jsx(ZD,{children:"Envie um convite para adicionar um novo membro  sua organizao."})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!u.email||!u.role)return void qr.error("Por favor, preencha todos os campos");(await a(u.email,u.role)).error||(h({email:"",role:"employee"}),d(!1),f())},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"email",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"email",type:"email",placeholder:"usuario@exemplo.com",value:u.email,onChange:e=>h(t=>({...t,email:e.target.value})),className:"pl-10",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"role",children:"Funo"}),r.jsxs(en,{value:u.role,onValueChange:e=>h(t=>({...t,role:e})),children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Selecione uma funo"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"viewer",children:"Visualizador"}),r.jsx(on,{value:"employee",children:"Funcionrio"}),r.jsx(on,{value:"manager",children:"Gerente"}),r.jsx(on,{value:"admin",children:"Administrador"}),r.jsx(on,{value:"owner",children:"Proprietrio"})]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(qi,{type:"button",variant:"outline",onClick:()=>d(!1),className:"flex-1",children:"Cancelar"}),r.jsx(qi,{type:"submit",variant:"tech",className:"flex-1",disabled:s,children:s?"Enviando...":"Enviar Convite"})]})]})]})]})]})}),r.jsx(zi,{children:r.jsxs(nA,{defaultValue:"pending",className:"w-full",children:[r.jsxs(sA,{className:"grid w-full grid-cols-2",children:[r.jsxs(oA,{value:"pending",className:"gap-2",children:[r.jsx(He,{className:"h-4 w-4"}),"Pendentes (",y.length,")"]}),r.jsxs(oA,{value:"completed",className:"gap-2",children:[r.jsx(it,{className:"h-4 w-4"}),"Histrico (",b.length,")"]})]}),r.jsx(lA,{value:"pending",className:"space-y-4 mt-4",children:0===y.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ma,{className:"h-8 w-8 text-text-tertiary mx-auto mb-2"}),r.jsx("p",{className:"text-text-secondary",children:"Nenhum convite pendente"})]}):r.jsx("div",{className:"space-y-3",children:y.map(e=>r.jsx(Ii,{className:"border-border-subtle",children:r.jsx(zi,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(fa,{className:"h-4 w-4 text-text-tertiary"}),r.jsx("span",{className:"font-medium text-text-primary",children:e.email}),r.jsx(Oi,{className:`text-xs ${g(e.status)}`,children:"pending"===e.status?"Pendente":e.status})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[r.jsxs("span",{children:["Funo: ",x(e.role)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(dt,{className:"h-3 w-3"}),"Enviado: ",v(e.created_at)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(tt,{className:"h-3 w-3"}),"Expira: ",v(e.expires_at)]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"outline",size:"sm",onClick:()=>(async e=>{const t=`${window.location.origin}/invite/${e}`;try{await navigator.clipboard.writeText(t),m(t=>new Set([...t,e])),qr.success("Link copiado para a rea de transferncia!"),setTimeout(()=>{m(t=>{const a=new Set(t);return a.delete(e),a})},2e3)}catch(a){qr.error("Erro ao copiar link")}})(e.invitation_token),className:"gap-2",children:p.has(e.invitation_token)?r.jsxs(r.Fragment,{children:[r.jsx(it,{className:"h-3 w-3"}),"Copiado"]}):r.jsxs(r.Fragment,{children:[r.jsx(ga,{className:"h-3 w-3"}),"Copiar Link"]})}),r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>(async e=>{(await n(e)).success&&f()})(e.id),className:"text-destructive hover:text-destructive gap-2",disabled:s,children:[r.jsx(qe,{className:"h-3 w-3"}),"Cancelar"]})]})]})})},e.id))})}),r.jsx(lA,{value:"completed",className:"space-y-4 mt-4",children:0===b.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(dt,{className:"h-8 w-8 text-text-tertiary mx-auto mb-2"}),r.jsx("p",{className:"text-text-secondary",children:"Nenhum histrico de convites"})]}):r.jsx("div",{className:"space-y-3",children:b.map(e=>r.jsx(Ii,{className:"border-border-subtle",children:r.jsx(zi,{className:"p-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(fa,{className:"h-4 w-4 text-text-tertiary"}),r.jsx("span",{className:"font-medium text-text-primary",children:e.email}),r.jsx(Oi,{className:`text-xs ${g(e.status)}`,children:"accepted"===e.status?"Aceito":"cancelled"===e.status?"Cancelado":"expired"===e.status?"Expirado":e.status})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[r.jsxs("span",{children:["Funo: ",x(e.role)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(dt,{className:"h-3 w-3"}),"Enviado: ",v(e.created_at)]}),e.accepted_at&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(it,{className:"h-3 w-3"}),"Aceito: ",v(e.accepted_at)]})]})]})})})},e.id))})})]})})]})}function bL(){return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Equipe"}),r.jsx("p",{className:"text-text-secondary",children:"Gerencie sua equipe e convites"})]}),r.jsx(yL,{})]})})}xL.displayName=_e.displayName;const _L=ke.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:vr("w-full caption-bottom text-sm",e),...t})}));_L.displayName="Table";const jL=ke.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:vr("[&_tr]:border-b",e),...t}));jL.displayName="TableHeader";const wL=ke.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:vr("[&_tr:last-child]:border-0",e),...t}));wL.displayName="TableBody";ke.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:vr("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const NL=ke.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:vr("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));NL.displayName="TableRow";const SL=ke.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:vr("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));SL.displayName="TableHead";const CL=ke.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:vr("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));CL.displayName="TableCell";ke.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:vr("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const kL=()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["setores",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_setores").select("*").eq("organization_id",t).eq("ativo",!0).order("nome",{ascending:!0});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,{data:n,error:s}=await ki.from("dim_setores").insert({organization_id:r,codigo:a.codigo,nome:a.nome,tipo:a.tipo,descricao:a.descricao,responsavel:a.responsavel,ativo:a.ativo??!0,created_by:i,updated_by:i}).select().single();if(s)throw s;return n},onSuccess:()=>{a.invalidateQueries({queryKey:["setores"]}),qr.success("Setor cadastrado com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar setor. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r=null==t?void 0:t.id,{data:i,error:n}=await ki.from("dim_setores").update({...a,updated_by:r,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["setores"]}),qr.success("Setor atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar setor. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_setores").update({ativo:!1,updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["setores"]}),qr.success("Setor excludo com sucesso!")},onError:e=>{qr.error("Erro ao excluir setor. Tente novamente.")}});return{setores:r.data||[],isLoading:r.isLoading,error:r.error,createSetor:i.mutate,updateSetor:n.mutate,deleteSetor:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending}},ML=()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["colaboradores",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_colaboradores").select("\n          *,\n          cargo:dim_cargos(id, nome, codigo),\n          setor:dim_setores(id, nome, codigo)\n        ").eq("organization_id",t).eq("ativo",!0).order("nome_completo",{ascending:!0});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,n=await(async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a}=await ki.rpc("generate_colaborador_codigo",{org_id:t});return a||"COL-001"})(),{data:s,error:o}=await ki.from("dim_colaboradores").insert({organization_id:r,codigo:n,nome_completo:a.nome_completo,email:a.email,telefone:a.telefone,cargo_id:a.cargo_id,setor_id:a.setor_id,data_admissao:a.data_admissao||(new Date).toISOString().split("T")[0],status:a.status||"ativo",cpf:a.cpf,endereco:a.endereco,observacoes:a.observacoes,salario:a.salario,ativo:a.ativo??!0,tem_acesso_sistema:a.tem_acesso_sistema??!1,created_by:i,updated_by:i}).select("\n          *,\n          cargo:dim_cargos(id, nome, codigo),\n          setor:dim_setores(id, nome, codigo)\n        ").single();if(o)throw o;return s},onSuccess:()=>{a.invalidateQueries({queryKey:["colaboradores"]}),qr.success("Colaborador cadastrado com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar colaborador. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r=null==t?void 0:t.id,{data:i,error:n}=await ki.from("dim_colaboradores").update({...a,updated_by:r,updated_at:(new Date).toISOString()}).eq("id",e).select("\n          *,\n          cargo:dim_cargos(id, nome, codigo),\n          setor:dim_setores(id, nome, codigo)\n        ").single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["colaboradores"]}),qr.success("Colaborador atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar colaborador. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_colaboradores").update({ativo:!1,status:"demitido",data_demissao:(new Date).toISOString().split("T")[0],updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["colaboradores"]}),qr.success("Colaborador removido com sucesso!")},onError:e=>{qr.error("Erro ao remover colaborador. Tente novamente.")}});return{colaboradores:r.data||[],isLoading:r.isLoading,error:r.error,createColaborador:i.mutate,updateColaborador:n.mutate,deleteColaborador:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending}},TL=ke.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:vr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));TL.displayName="Textarea";const DL=()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["rotas-distribuicao",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_rotas_distribuicao").select("\n          *,\n          itens:dim_rotas_distribuicao_itens(\n            id,\n            rota_id,\n            lote_id,\n            sequencia,\n            created_at,\n            lote:dim_lotes_pasto(\n              id,\n              nome,\n              ativo,\n              pasto:dim_pastos(\n                nome,\n                setor:dim_setores(nome)\n              )\n            )\n          )\n        ").eq("organization_id",t).order("nome",{ascending:!0});if(r)throw r;return(a||[]).map(e=>({...e,itens:(e.itens||[]).sort((e,t)=>e.sequencia-t.sequencia)}))},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,{data:n,error:s}=await ki.from("dim_rotas_distribuicao").insert({organization_id:r,nome:a.nome,descricao:a.descricao,ativo:a.ativo??!0,created_by:i,updated_by:i}).select().single();if(s)throw s;return n},onSuccess:()=>{a.invalidateQueries({queryKey:["rotas-distribuicao"]}),qr.success("Rota cadastrada com sucesso!")},onError:e=>{"23505"===e.code?qr.error("J existe uma rota com este nome. Escolha outro nome."):qr.error("Erro ao cadastrar rota. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r={...a,updated_by:null==t?void 0:t.id,updated_at:(new Date).toISOString()},{data:i,error:n}=await ki.from("dim_rotas_distribuicao").update(r).eq("id",e).select().single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["rotas-distribuicao"]}),qr.success("Rota atualizada com sucesso!")},onError:e=>{qr.error("Erro ao atualizar rota. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_rotas_distribuicao").update({ativo:!1,updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["rotas-distribuicao"]}),qr.success("Rota removida com sucesso!")},onError:e=>{qr.error("Erro ao remover rota. Tente novamente.")}}),o=Ha({mutationFn:async({rotaId:e,loteIds:t})=>{const{error:a}=await ki.from("dim_rotas_distribuicao_itens").delete().eq("rota_id",e);if(a)throw a;const r=t.map((t,a)=>({rota_id:e,lote_id:t,sequencia:a+1})),{error:i}=await ki.from("dim_rotas_distribuicao_itens").insert(r);if(i)throw i},onSuccess:()=>{a.invalidateQueries({queryKey:["rotas-distribuicao"]}),qr.success("Sequncia atualizada com sucesso!")},onError:e=>{qr.error("Erro ao atualizar sequncia. Tente novamente.")}});return{rotas:r.data||[],isLoading:r.isLoading,error:r.error,createRota:i.mutate,updateRota:n.mutate,deleteRota:s.mutate,updateSequenciaLotes:o.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending,isUpdatingSequencia:o.isPending,getRotaById:e=>{var t;return null==(t=r.data)?void 0:t.find(t=>t.id===e)}}},IL=()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["lotes-pasto",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_lotes_pasto").select("\n          *,\n          pasto:dim_pastos(\n            id,\n            nome,\n            nome_abrv,\n            setor:dim_setores(id, nome, nome_abrv)\n          )\n        ").eq("organization_id",t).order("created_at",{ascending:!1});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id;let n=a.data_entrada;if(!n){const e=new Date;n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}let s=null;if(a.pasto_id){const{data:e}=await ki.from("dim_pastos").select("nome").eq("id",a.pasto_id).single();s=(null==e?void 0:e.nome)||null}const{data:o,error:l}=await ki.from("dim_lotes_pasto").insert({organization_id:r,pasto_id:a.pasto_id,quantidade_animais:a.quantidade_animais,data_entrada:n,peso_medio_entrada:a.peso_liquido_total,modulo_pasto:s,observacoes:a.observacoes,ativo:a.ativo??!0,created_by:i,updated_by:i,status_pesagem:a.status_pesagem||"coletivo",sigla_status:"individual"===a.status_pesagem?"PCD":"RCP",gmd_informado:a.gmd_informado,proteinado:a.proteinado,sexo:a.sexo}).select("\n          *,\n          pasto:dim_pastos(\n            id,\n            nome,\n            nome_abrv,\n            setor:dim_setores(id, nome, nome_abrv)\n          )\n        ").single();if(l)throw l;return o},onSuccess:()=>{a.invalidateQueries({queryKey:["lotes-pasto"]}),qr.success("Lote cadastrado com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar lote. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r=null==t?void 0:t.id;let i;if(a.pasto_id){const{data:e}=await ki.from("dim_pastos").select("nome").eq("id",a.pasto_id).single();i=(null==e?void 0:e.nome)||null}const n={pasto_id:a.pasto_id,quantidade_animais:a.quantidade_animais,data_entrada:a.data_entrada,peso_medio_entrada:a.peso_liquido_total,modulo_pasto:i,observacoes:a.observacoes,status_pesagem:a.status_pesagem,sigla_status:"individual"===a.status_pesagem?"PCD":"RCP",gmd_informado:a.gmd_informado,proteinado:a.proteinado,sexo:a.sexo,ativo:void 0!==a.ativo?a.ativo:void 0,updated_by:r,updated_at:(new Date).toISOString()},{data:s,error:o}=await ki.from("dim_lotes_pasto").update(n).eq("id",e).select("\n          *,\n          pasto:dim_pastos(\n            id,\n            nome,\n            nome_abrv,\n            setor:dim_setores(id, nome, nome_abrv)\n          )\n        ").single();if(o)throw o;return s},onSuccess:()=>{a.invalidateQueries({queryKey:["lotes-pasto"]}),qr.success("Lote atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar lote. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_lotes_pasto").update({ativo:!1,updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["lotes-pasto"]}),qr.success("Lote removido com sucesso!")},onError:e=>{qr.error("Erro ao remover lote. Tente novamente.")}});return{lotes:r.data||[],isLoading:r.isLoading,error:r.error,createLote:i.mutate,updateLote:n.mutate,deleteLote:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending}};function AL(){const{rotas:e,createRota:t,updateRota:a,deleteRota:i,updateSequenciaLotes:n,isCreating:s,isUpdating:o,isUpdatingSequencia:l}=DL(),{lotes:c}=IL(),[d,u]=ke.useState(!1),[h,p]=ke.useState(!1),[m,f]=ke.useState(!1),[g,x]=ke.useState(null),[v,y]=ke.useState({nome:"",descricao:"",ativo:!0}),[b,_]=ke.useState([]),j=c.filter(e=>e.ativo);return r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Rotas de Distribuio"}),r.jsx(Li,{children:"Gerencie rotas e a sequncia de atendimento dos lotes"})]}),r.jsxs(HD,{open:d,onOpenChange:u,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Nova Rota"]})}),r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Nova Rota"}),r.jsx(ZD,{children:"Cadastre uma nova rota de distribuio"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"nome",className:"text-right",children:"Nome"}),r.jsx(aI,{id:"nome",value:v.nome,onChange:e=>y({...v,nome:e.target.value}),className:"col-span-3",placeholder:"Ex: Rota Manh, Rota Setor A"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"descricao",className:"text-right",children:"Descrio"}),r.jsx(TL,{id:"descricao",value:v.descricao,onChange:e=>y({...v,descricao:e.target.value}),className:"col-span-3",placeholder:"Descrio opcional da rota"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{v.nome&&(t(v),y({nome:"",descricao:"",ativo:!0}),u(!1))},disabled:s,children:s?"Cadastrando...":"Cadastrar"})]})]})]})]})}),r.jsxs(zi,{children:[r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Nome"}),r.jsx(SL,{children:"Descrio"}),r.jsx(SL,{children:"Lotes"}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{children:"Aes"})]})}),r.jsx(wL,{children:0===e.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:5,className:"text-center text-muted-foreground",children:"Nenhuma rota cadastrada"})}):e.map(e=>{var t;return r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.nome}),r.jsx(CL,{className:"max-w-xs truncate",children:e.descricao||"-"}),r.jsxs(CL,{children:[(null==(t=e.itens)?void 0:t.length)||0," lotes"]}),r.jsx(CL,{children:r.jsx(Oi,{variant:e.ativo?"default":"secondary",children:e.ativo?"Ativa":"Inativa"})}),r.jsx(CL,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(qi,{variant:"ghost",size:"sm",onClick:()=>(e=>{x(e);const t=(e.itens||[]).map(e=>e.lote_id);_(t),f(!0)})(e),children:[r.jsx(va,{className:"h-4 w-4 mr-1"}),"Sequncia"]}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{x(e),p(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Tem certeza que deseja remover esta rota?")&&i(t));var t},children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)})})]}),r.jsx(HD,{open:h,onOpenChange:p,children:r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Rota"}),r.jsx(ZD,{children:"Atualize as informaes da rota"})]}),g&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-nome",className:"text-right",children:"Nome"}),r.jsx(aI,{id:"edit-nome",value:g.nome,onChange:e=>x({...g,nome:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-descricao",className:"text-right",children:"Descrio"}),r.jsx(TL,{id:"edit-descricao",value:g.descricao||"",onChange:e=>x({...g,descricao:e.target.value}),className:"col-span-3"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{g&&(a({id:g.id,data:{nome:g.nome,descricao:g.descricao,ativo:g.ativo}}),p(!1),x(null))},disabled:o,children:o?"Atualizando...":"Atualizar"})]})]})}),r.jsx(HD,{open:m,onOpenChange:f,children:r.jsxs($D,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(YD,{children:[r.jsxs(XD,{children:["Editar Sequncia - ",null==g?void 0:g.nome]}),r.jsx(ZD,{children:"Defina a ordem de atendimento dos lotes nesta rota"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsx("div",{className:"flex items-end gap-2",children:r.jsxs("div",{className:"flex-1",children:[r.jsx(xL,{children:"Adicionar Lote"}),r.jsxs(en,{onValueChange:e=>{b.includes(e)||_([...b,e])},children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Selecione um lote"})}),r.jsx(sn,{children:j.filter(e=>!b.includes(e.id)).map(e=>{var t;return r.jsxs(on,{value:e.id,children:[e.nome," - ",(null==(t=e.pasto)?void 0:t.nome)||"Sem pasto"]},e.id)})})]})]})}),r.jsxs("div",{children:[r.jsx(xL,{children:"Sequncia de Lotes"}),r.jsx("div",{className:"mt-2 space-y-2 border rounded-md p-2",children:0===b.length?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum lote adicionado"}):b.map((e,t)=>{var a;const i=(e=>c.find(t=>t.id===e))(e);return r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-secondary rounded",children:[r.jsxs("span",{className:"font-semibold text-sm w-8",children:[t+1,"."]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:null==i?void 0:i.nome}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(a=null==i?void 0:i.pasto)?void 0:a.nome)||"Sem pasto"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qi,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(0===e)return;const t=[...b];[t[e-1],t[e]]=[t[e],t[e-1]],_(t)})(t),disabled:0===t,children:""}),r.jsx(qi,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(e===b.length-1)return;const t=[...b];[t[e],t[e+1]]=[t[e+1],t[e]],_(t)})(t),disabled:t===b.length-1,children:""}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{_(b.filter(t=>t!==e))})(e),children:r.jsx(qe,{className:"h-4 w-4"})})]})]},e)})})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{g&&(n({rotaId:g.id,loteIds:b}),f(!1),x(null),_([]))},disabled:l,children:l?"Salvando...":"Salvar Sequncia"})]})]})})]})]})}function PL(){const{setores:e,createSetor:t,updateSetor:a,isCreating:i,isUpdating:n}=kL(),{colaboradores:s,createColaborador:o,updateColaborador:l,deleteColaborador:c,isCreating:d,isUpdating:u}=ML(),{cargos:h}=(()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["cargos",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_cargos").select("*").eq("organization_id",t).eq("ativo",!0).order("nivel_hierarquico",{ascending:!1}).order("nome",{ascending:!0});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,{data:n,error:s}=await ki.from("dim_cargos").insert({organization_id:r,codigo:a.codigo,nome:a.nome,descricao:a.descricao,nivel_hierarquico:a.nivel_hierarquico||1,salario_base:a.salario_base,ativo:a.ativo??!0,created_by:i,updated_by:i}).select().single();if(s)throw s;return n},onSuccess:()=>{a.invalidateQueries({queryKey:["cargos"]}),qr.success("Cargo cadastrado com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar cargo. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r=null==t?void 0:t.id,{data:i,error:n}=await ki.from("dim_cargos").update({...a,updated_by:r,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["cargos"]}),qr.success("Cargo atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar cargo. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_cargos").update({ativo:!1,updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["cargos"]}),qr.success("Cargo excludo com sucesso!")},onError:e=>{qr.error("Erro ao excluir cargo. Tente novamente.")}});return{cargos:r.data||[],isLoading:r.isLoading,error:r.error,createCargo:i.mutate,updateCargo:n.mutate,deleteCargo:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending}})(),[p,m]=ke.useState([{id:"1",codigo:"MAQ-001",nome:"Trator John Deere 6110J",tipo:"Trator",marca:"John Deere",modelo:"6110J",ano_fabricacao:2020,status:"ativo",capacidade_operacional:"110 CV"},{id:"2",codigo:"MAQ-002",nome:"Misturador Totalmix",tipo:"Misturador",marca:"Totalmix",modelo:"TM-15",ano_fabricacao:2019,status:"ativo",capacidade_operacional:"15 m"},{id:"3",codigo:"MAQ-003",nome:"Carreta Distribuio",tipo:"Carreta",marca:"Siltomac",modelo:"CD-8000",ano_fabricacao:2021,status:"manutencao",capacidade_operacional:"8000 kg"}]),[f,g]=ke.useState(!1),[x,v]=ke.useState(!1),[y,b]=ke.useState(null),[_,j]=ke.useState(!1),[w,N]=ke.useState(!1),[S,C]=ke.useState(!1),[k,M]=ke.useState(null),[T,D]=ke.useState({codigo:"CONF-01",nome:"",tipo:"confinamento",descricao:"",responsavel:"",ativo:!0}),I=t=>{const a={confinamento:"CONF",semiconfinamento:"SEMI",pasto:"PASTO",enfermaria:"ENF",maternidade:"MAT"}[t]||"SET",r=e.filter(e=>e.tipo===t).map(e=>e.codigo).sort();let i=1;for(const e of r){const t=e.match(new RegExp(`^${a}-(\\d+)$`));if(t){const e=parseInt(t[1]);e>=i&&(i=e+1)}}return`${a}-${i.toString().padStart(2,"0")}`},[A,P]=ke.useState({codigo:"",nome:"",tipo:"",marca:"",modelo:"",ano_fabricacao:0,status:"ativo",capacidade_operacional:""}),[L,z]=ke.useState({nome_completo:"",cargo_id:"",telefone:"",email:"",data_admissao:(new Date).toISOString().split("T")[0],status:"ativo"}),E=()=>{const e=I("confinamento");D({codigo:e,nome:"",tipo:"confinamento",descricao:"",responsavel:"",ativo:!0})},R=()=>{b(null),v(!1)},O=()=>{M(null),C(!1)},F=e=>{switch(e){case"confinamento":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"semiconfinamento":return"bg-purple-500/10 text-purple-500 border-purple-500/20";case"pasto":return"bg-green-500/10 text-green-500 border-green-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},B=e=>{switch(e){case"ativo":return"bg-green-500/10 text-green-500 border-green-500/20";case"manutencao":case"afastado":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"inativo":case"demitido":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},q=s.map(e=>{var t,a;return{...e,cargoNome:(null==(t=e.cargo)?void 0:t.nome)||(null==(a=h.find(t=>t.id===e.cargo_id))?void 0:a.nome)||"-"}});return r.jsx(BI,{children:r.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Configuraes - Cadastros Gerais"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Gerencie maquinrio, setores e colaboradores"})]})}),r.jsxs(nA,{defaultValue:"maquinarios",className:"w-full",children:[r.jsxs(sA,{className:"grid w-full grid-cols-4",children:[r.jsxs(oA,{value:"maquinarios",className:"flex items-center gap-2",children:[r.jsx(Ke,{className:"h-4 w-4"}),"Maquinrios"]}),r.jsxs(oA,{value:"setores",className:"flex items-center gap-2",children:[r.jsx(_a,{className:"h-4 w-4"}),"Setores"]}),r.jsxs(oA,{value:"colaboradores",className:"flex items-center gap-2",children:[r.jsx(Xe,{className:"h-4 w-4"}),"Colaboradores"]}),r.jsxs(oA,{value:"rotas",className:"flex items-center gap-2",children:[r.jsx(ja,{className:"h-4 w-4"}),"Rotas"]})]}),r.jsx(lA,{value:"maquinarios",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Maquinrios"}),r.jsx(Li,{children:"Gerencie tratores, misturadores e outros equipamentos"})]}),r.jsxs(HD,{open:_,onOpenChange:j,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Novo Maquinrio"]})}),r.jsxs($D,{className:"max-w-2xl",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Maquinrio"}),r.jsx(ZD,{children:"Cadastre um novo equipamento"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-codigo",children:"Cdigo *"}),r.jsx(aI,{id:"maq-codigo",value:A.codigo,onChange:e=>P({...A,codigo:e.target.value}),placeholder:"Ex: MAQ-001"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-nome",children:"Nome *"}),r.jsx(aI,{id:"maq-nome",value:A.nome,onChange:e=>P({...A,nome:e.target.value}),placeholder:"Ex: Trator John Deere 6110J"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-tipo",children:"Tipo *"}),r.jsx(aI,{id:"maq-tipo",value:A.tipo,onChange:e=>P({...A,tipo:e.target.value}),placeholder:"Ex: Trator, Misturador, Carreta"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-marca",children:"Marca"}),r.jsx(aI,{id:"maq-marca",value:A.marca,onChange:e=>P({...A,marca:e.target.value}),placeholder:"Ex: John Deere"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-modelo",children:"Modelo"}),r.jsx(aI,{id:"maq-modelo",value:A.modelo,onChange:e=>P({...A,modelo:e.target.value}),placeholder:"Ex: 6110J"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-ano",children:"Ano de Fabricao"}),r.jsx(aI,{id:"maq-ano",type:"number",value:A.ano_fabricacao,onChange:e=>P({...A,ano_fabricacao:Number(e.target.value)}),placeholder:"Ex: 2020"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-capacidade",children:"Capacidade Operacional"}),r.jsx(aI,{id:"maq-capacidade",value:A.capacidade_operacional,onChange:e=>P({...A,capacidade_operacional:e.target.value}),placeholder:"Ex: 110 CV, 15 m"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"maq-status",children:"Status"}),r.jsxs("select",{id:"maq-status",value:A.status,onChange:e=>P({...A,status:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"ativo",children:"Ativo"}),r.jsx("option",{value:"manutencao",children:"Manuteno"}),r.jsx("option",{value:"inativo",children:"Inativo"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!A.codigo||!A.nome||!A.tipo)return void qr.error("Por favor, preencha os campos obrigatrios");const e={...A,id:Date.now().toString()};m([...p,e]),P({codigo:"",nome:"",tipo:"",marca:"",modelo:"",ano_fabricacao:0,status:"ativo",capacidade_operacional:""}),j(!1),qr.success("Maquinrio cadastrado com sucesso!")},children:"Cadastrar"})]})]})]})]})}),r.jsx(zi,{children:r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Cdigo"}),r.jsx(SL,{children:"Nome"}),r.jsx(SL,{children:"Tipo"}),r.jsx(SL,{children:"Marca/Modelo"}),r.jsx(SL,{children:"Ano"}),r.jsx(SL,{children:"Capacidade"}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:p.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.codigo}),r.jsx(CL,{children:e.nome}),r.jsx(CL,{children:e.tipo}),r.jsx(CL,{children:e.marca&&e.modelo?`${e.marca} ${e.modelo}`:e.marca||"-"}),r.jsx(CL,{children:e.ano_fabricacao||"-"}),r.jsx(CL,{children:e.capacidade_operacional||"-"}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:B(e.status),children:e.status})}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}),r.jsx(lA,{value:"setores",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Setores"}),r.jsx(Li,{children:"Gerencie setores de confinamento, semiconfinamento, pasto, enfermaria e maternidade"})]}),r.jsxs(HD,{open:f,onOpenChange:g,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",onClick:()=>{E(),g(!0)},children:[r.jsx(xa,{className:"h-4 w-4"}),"Novo Setor"]})}),r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Setor"}),r.jsx(ZD,{children:"Cadastre um novo setor organizacional"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-tipo",children:"Tipo *"}),r.jsxs("select",{id:"set-tipo",value:T.tipo,onChange:e=>(e=>{const t=I(e);D({...T,tipo:e,codigo:t})})(e.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"confinamento",children:"Confinamento"}),r.jsx("option",{value:"semiconfinamento",children:"Semiconfinamento"}),r.jsx("option",{value:"pasto",children:"Pasto"}),r.jsx("option",{value:"enfermaria",children:"Enfermaria"}),r.jsx("option",{value:"maternidade",children:"Maternidade"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-nome",children:"Nome *"}),r.jsx(aI,{id:"set-nome",value:T.nome,onChange:e=>D({...T,nome:e.target.value}),placeholder:"Ex: Setor Norte Pasto"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-codigo",children:"Cdigo (Gerado Automaticamente)"}),r.jsx(aI,{id:"set-codigo",value:T.codigo,readOnly:!0,className:"bg-muted cursor-not-allowed",placeholder:"Cdigo ser gerado automaticamente"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-descricao",children:"Descrio"}),r.jsx(aI,{id:"set-descricao",value:T.descricao,onChange:e=>D({...T,descricao:e.target.value}),placeholder:"Descrio do setor"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-responsavel",children:"Responsvel"}),r.jsxs("select",{id:"set-responsavel",value:T.responsavel,onChange:e=>D({...T,responsavel:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione um responsvel"}),s.filter(e=>"ativo"===e.status).map(e=>r.jsxs("option",{value:e.nome_completo,children:[e.nome_completo," (",e.codigo,")"]},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"set-ativo",children:"Status"}),r.jsxs("select",{id:"set-ativo",value:T.ativo?"true":"false",onChange:e=>D({...T,ativo:"true"===e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"true",children:"Ativo"}),r.jsx("option",{value:"false",children:"Inativo"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>g(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{T.nome&&T.tipo?(t(T),E(),g(!1)):qr.error("Por favor, preencha os campos obrigatrios")},disabled:i,children:i?"Cadastrando...":"Cadastrar"})]})]})]}),r.jsx(HD,{open:x,onOpenChange:v,children:r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Setor"}),r.jsx(ZD,{children:"Edite as informaes do setor"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-tipo",children:"Tipo *"}),r.jsxs("select",{id:"edit-tipo",value:(null==y?void 0:y.tipo)||"",onChange:e=>b(y?{...y,tipo:e.target.value}:null),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"confinamento",children:"Confinamento"}),r.jsx("option",{value:"semiconfinamento",children:"Semiconfinamento"}),r.jsx("option",{value:"pasto",children:"Pasto"}),r.jsx("option",{value:"enfermaria",children:"Enfermaria"}),r.jsx("option",{value:"maternidade",children:"Maternidade"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-nome",children:"Nome *"}),r.jsx(aI,{id:"edit-nome",value:(null==y?void 0:y.nome)||"",onChange:e=>b(y?{...y,nome:e.target.value}:null),placeholder:"Ex: Setor Norte Pasto"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-codigo",children:"Cdigo (No Editvel)"}),r.jsx(aI,{id:"edit-codigo",value:(null==y?void 0:y.codigo)||"",readOnly:!0,className:"bg-muted cursor-not-allowed"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-descricao",children:"Descrio"}),r.jsx(aI,{id:"edit-descricao",value:(null==y?void 0:y.descricao)||"",onChange:e=>b(y?{...y,descricao:e.target.value}:null),placeholder:"Descrio do setor"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-responsavel",children:"Responsvel"}),r.jsxs("select",{id:"edit-responsavel",value:(null==y?void 0:y.responsavel)||"",onChange:e=>b(y?{...y,responsavel:e.target.value}:null),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione um responsvel"}),s.filter(e=>"ativo"===e.status).map(e=>r.jsxs("option",{value:e.nome_completo,children:[e.nome_completo," (",e.codigo,")"]},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-ativo",children:"Status"}),r.jsxs("select",{id:"edit-ativo",value:(null==y?void 0:y.ativo)?"true":"false",onChange:e=>b(y?{...y,ativo:"true"===e.target.value}:null),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"true",children:"Ativo"}),r.jsx("option",{value:"false",children:"Inativo"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:R,children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!y)return;if(!y.nome||!y.tipo)return void qr.error("Por favor, preencha os campos obrigatrios");const e={nome:y.nome,tipo:y.tipo,descricao:y.descricao,responsavel:y.responsavel,ativo:y.ativo};a({id:y.id,data:e}),R()},disabled:n,children:n?"Salvando...":"Salvar"})]})]})})]})}),r.jsx(zi,{children:r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Cdigo"}),r.jsx(SL,{children:"Nome"}),r.jsx(SL,{children:"Tipo"}),r.jsx(SL,{children:"Descrio"}),r.jsx(SL,{children:"Responsvel"}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:e.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.codigo}),r.jsx(CL,{children:e.nome}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:F(e.tipo),children:e.tipo})}),r.jsx(CL,{children:e.descricao||"-"}),r.jsx(CL,{children:e.responsavel||"-"}),r.jsx(CL,{children:r.jsx(Oi,{variant:e.ativo?"default":"secondary",className:e.ativo?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-600",children:e.ativo?"Ativo":"Inativo"})}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{b(e),v(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}),r.jsx(lA,{value:"colaboradores",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Colaboradores"}),r.jsx(Li,{children:"Gerencie funcionrios e suas informaes"})]}),r.jsxs(HD,{open:w,onOpenChange:N,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Novo Colaborador"]})}),r.jsxs($D,{className:"max-w-2xl",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Colaborador"}),r.jsx(ZD,{children:"Cadastre um novo funcionrio"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-codigo",children:"Cdigo *"}),r.jsx(aI,{id:"col-codigo",value:L.codigo,onChange:e=>z({...L,codigo:e.target.value}),placeholder:"Ex: COL-001"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-nome",children:"Nome Completo *"}),r.jsx(aI,{id:"col-nome",value:L.nome_completo,onChange:e=>z({...L,nome_completo:e.target.value}),placeholder:"Ex: Joo Silva Santos"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-cargo",children:"Cargo *"}),r.jsx(aI,{id:"col-cargo",value:L.cargo,onChange:e=>z({...L,cargo:e.target.value}),placeholder:"Ex: Operador de Mquinas"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-telefone",children:"Telefone"}),r.jsx(aI,{id:"col-telefone",value:L.telefone,onChange:e=>z({...L,telefone:e.target.value}),placeholder:"Ex: (11) 99999-9999"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-email",children:"Email"}),r.jsx(aI,{id:"col-email",type:"email",value:L.email,onChange:e=>z({...L,email:e.target.value}),placeholder:"Ex: joao@fazenda.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-admissao",children:"Data de Admisso"}),r.jsx(aI,{id:"col-admissao",type:"date",value:L.data_admissao,onChange:e=>z({...L,data_admissao:e.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"col-status",children:"Status"}),r.jsxs("select",{id:"col-status",value:L.status,onChange:e=>z({...L,status:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"ativo",children:"Ativo"}),r.jsx("option",{value:"afastado",children:"Afastado"}),r.jsx("option",{value:"demitido",children:"Demitido"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>N(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{L.nome_completo?(o(L),z({nome_completo:"",cargo_id:"",telefone:"",email:"",data_admissao:(new Date).toISOString().split("T")[0],status:"ativo"}),N(!1)):qr.error("Por favor, preencha os campos obrigatrios")},disabled:d,children:d?"Cadastrando...":"Cadastrar"})]})]})]}),r.jsx(HD,{open:S,onOpenChange:C,children:r.jsxs($D,{className:"max-w-2xl",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Colaborador"}),r.jsx(ZD,{children:"Atualize as informaes do colaborador"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4 max-h-[70vh] overflow-y-auto",children:[r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(xL,{htmlFor:"edit-col-nome",children:"Nome Completo *"}),r.jsx(aI,{id:"edit-col-nome",value:(null==k?void 0:k.nome_completo)||"",onChange:e=>M(t=>t?{...t,nome_completo:e.target.value}:null),placeholder:"Ex: Joo da Silva"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-col-cargo",children:"Cargo"}),r.jsxs("select",{id:"edit-col-cargo",value:(null==k?void 0:k.cargo_id)||"",onChange:e=>M(t=>t?{...t,cargo_id:e.target.value}:null),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione um cargo"}),h.map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-col-telefone",children:"Telefone"}),r.jsx(aI,{id:"edit-col-telefone",type:"tel",value:(null==k?void 0:k.telefone)||"",onChange:e=>M(t=>t?{...t,telefone:e.target.value}:null),placeholder:"Ex: (11) 99999-9999"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-col-email",children:"Email"}),r.jsx(aI,{id:"edit-col-email",type:"email",value:(null==k?void 0:k.email)||"",onChange:e=>M(t=>t?{...t,email:e.target.value}:null),placeholder:"Ex: joao@fazenda.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-col-admissao",children:"Data de Admisso"}),r.jsx(aI,{id:"edit-col-admissao",type:"date",value:(null==k?void 0:k.data_admissao)||"",onChange:e=>M(t=>t?{...t,data_admissao:e.target.value}:null)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-col-status",children:"Status"}),r.jsxs("select",{id:"edit-col-status",value:(null==k?void 0:k.status)||"",onChange:e=>M(t=>t?{...t,status:e.target.value}:null),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"ativo",children:"Ativo"}),r.jsx("option",{value:"afastado",children:"Afastado"}),r.jsx("option",{value:"ferias",children:"Frias"}),r.jsx("option",{value:"demitido",children:"Demitido"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:O,children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!k)return;if(!k.nome_completo)return void qr.error("Por favor, preencha os campos obrigatrios");const e={nome_completo:k.nome_completo,email:k.email,telefone:k.telefone,cargo_id:k.cargo_id,status:k.status,data_admissao:k.data_admissao};l({id:k.id,data:e}),O()},disabled:u,children:u?"Atualizando...":"Atualizar"})]})]})})]})}),r.jsx(zi,{children:r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Cdigo"}),r.jsx(SL,{children:"Nome"}),r.jsx(SL,{children:"Cargo"}),r.jsx(SL,{children:"Contato"}),r.jsx(SL,{children:"Admisso"}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:q.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.codigo}),r.jsx(CL,{children:e.nome_completo}),r.jsx(CL,{children:e.cargoNome}),r.jsx(CL,{children:r.jsxs("div",{className:"text-xs",children:[r.jsx("div",{children:e.telefone||"-"}),r.jsx("div",{className:"text-text-tertiary",children:e.email||"-"})]})}),r.jsx(CL,{children:new Date(e.data_admissao).toLocaleDateString("pt-BR")}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:B(e.status),children:e.status})}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{M(e),C(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Tem certeza que deseja remover este colaborador?")&&c(t));var t},children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}),r.jsx(lA,{value:"rotas",className:"space-y-4",children:r.jsx(AL,{})})]})]})})})}const LL=[{id:1,type:"critical",title:"Baixo consumo no Lote 15",description:"Consumo 25% abaixo do esperado nas ltimas 2 horas",time:"h 15 min",agent:"Agente de Leitura de Cocho"},{id:2,type:"warning",title:"Atraso na distribuio",description:"Rota 3 com 12 minutos de atraso devido ao trnsito",time:"h 28 min",agent:"Agente de Logstica"},{id:3,type:"info",title:"Carregamento otimizado",description:"Sequncia de carregamento melhorada em 8%",time:"h 1h",agent:"Agente de Otimizao"}],zL=e=>{switch(e){case"critical":return r.jsx(wa,{className:"h-4 w-4 text-destructive"});case"warning":return r.jsx(We,{className:"h-4 w-4 text-yellow-500"});case"info":return r.jsx(Ve,{className:"h-4 w-4 text-accent-primary"});default:return r.jsx(St,{className:"h-4 w-4"})}},EL=e=>{switch(e){case"critical":return r.jsx(Oi,{variant:"destructive",children:"Crtico"});case"warning":return r.jsx(Oi,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"Ateno"});case"info":return r.jsx(Oi,{variant:"default",children:"Normal"});default:return r.jsx(Oi,{variant:"outline",children:"Desconhecido"})}};function RL(){return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Alertas & Feedbacks"}),r.jsx("p",{className:"text-text-secondary",children:"Central de notificaes e feedbacks dos agentes de IA"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(qi,{variant:"outline",size:"sm",children:[r.jsx(ct,{className:"h-4 w-4 mr-2"}),"Filtros"]}),r.jsxs(qi,{variant:"outline",size:"sm",children:[r.jsx(bt,{className:"h-4 w-4 mr-2"}),"Configurar"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Status Geral"}),r.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:"Normal"})]}),r.jsx(Ve,{className:"h-8 w-8 text-accent-primary"})]})})}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Alertas Ativos"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"2"})]}),r.jsx(We,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Crticos"}),r.jsx("p",{className:"text-2xl font-bold text-destructive",children:"1"})]}),r.jsx(wa,{className:"h-8 w-8 text-destructive"})]})})})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(St,{className:"h-5 w-5"}),"ltimos Alertas"]})}),r.jsx(zi,{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:LL.map(e=>r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border border-border-subtle bg-background-primary/50",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:zL(e.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-text-primary",children:e.title}),r.jsx("p",{className:"text-sm text-text-secondary mt-1",children:e.description}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-xs text-text-tertiary",children:e.agent}),r.jsx("span",{className:"text-xs text-text-tertiary",children:""}),r.jsx("span",{className:"text-xs text-text-tertiary",children:e.time})]})]}),r.jsx("div",{className:"flex items-center gap-2 ml-4",children:EL(e.type)})]})})]},e.id))})})]})]})})}var OL="Progress",[FL]=u(OL),[BL,qL]=FL(OL),VL=ke.forwardRef((e,t)=>{const{__scopeProgress:a,value:i=null,max:n,getValueLabel:s=GL,...o}=e;(n||0===n)&&YL(n);const l=YL(n)?n:100;null!==i&&KL(i,l);const c=KL(i,l)?i:null,d=$L(c)?s(c,l):void 0;return r.jsx(BL,{scope:a,value:c,max:l,children:r.jsx(w.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$L(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":UL(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});VL.displayName=OL;var HL="ProgressIndicator",WL=ke.forwardRef((e,t)=>{const{__scopeProgress:a,...i}=e,n=qL(HL,a);return r.jsx(w.div,{"data-state":UL(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...i,ref:t})});function GL(e,t){return`${Math.round(e/t*100)}%`}function UL(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function $L(e){return"number"==typeof e}function YL(e){return $L(e)&&!isNaN(e)&&e>0}function KL(e,t){return $L(e)&&!isNaN(e)&&e<=t&&e>=0}WL.displayName=HL;var XL=VL,ZL=WL;const QL=ke.forwardRef(({className:e,value:t,...a},i)=>r.jsx(XL,{ref:i,className:vr("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:r.jsx(ZL,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));QL.displayName=XL.displayName;const JL=[{id:1,category:"Logstica",title:"Otimizao de Rota - Setor Principal",description:"Reordenar sequncia de tratos pode reduzir tempo em 18 minutos",impact:"Alta",savings:"R$ 240/dia",timeReduction:"18 min",status:"Recomendado",confidence:87},{id:2,category:"Nutrio",title:"Ajuste de Dieta - Lotes 12-15",description:"Reduzir 5% da rao no perodo vespertino baseado no consumo",impact:"Mdia",savings:"R$ 180/dia",timeReduction:"-",status:"Em Anlise",confidence:92},{id:3,category:"Operacional",title:"Horrio de Carregamento",description:"Antecipar primeiro carregamento em 30 minutos melhora eficincia",impact:"Mdia",savings:"R$ 95/dia",timeReduction:"12 min",status:"Implementado",confidence:78}],ez=e=>{switch(e){case"Alta":return"text-destructive";case"Mdia":return"text-yellow-600";case"Baixa":return"text-accent-primary";default:return"text-text-secondary"}},tz=e=>{switch(e){case"Recomendado":return r.jsx(Oi,{variant:"default",children:"Recomendado"});case"Em Anlise":return r.jsx(Oi,{variant:"secondary",children:"Em Anlise"});case"Implementado":return r.jsx(Oi,{className:"bg-green-100 text-green-800 border-green-300",children:"Implementado"});default:return r.jsx(Oi,{variant:"outline",children:"Desconhecido"})}};function az(){return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Otimizaes Recomendadas"}),r.jsx("p",{className:"text-text-secondary",children:"Sugestes inteligentes para melhorar eficincia operacional"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(qi,{variant:"outline",size:"sm",children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Relatrio Completo"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Economia Potencial"}),r.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:"R$ 515"}),r.jsx("p",{className:"text-xs text-text-tertiary",children:"por dia"})]}),r.jsx(Na,{className:"h-8 w-8 text-accent-primary"})]})})}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Tempo Poupado"}),r.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:"30min"}),r.jsx("p",{className:"text-xs text-text-tertiary",children:"por ciclo"})]}),r.jsx(He,{className:"h-8 w-8 text-accent-primary"})]})})}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Sugestes Ativas"}),r.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:"3"}),r.jsx("p",{className:"text-xs text-text-tertiary",children:"no implementadas"})]}),r.jsx(Ze,{className:"h-8 w-8 text-accent-primary"})]})})}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50",children:r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Taxa de Sucesso"}),r.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:"92%"}),r.jsx("p",{className:"text-xs text-text-tertiary",children:"implementaes"})]}),r.jsx(et,{className:"h-8 w-8 text-accent-primary"})]})})})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(Ze,{className:"h-5 w-5"}),"Recomendaes por Agente de IA"]})}),r.jsx(zi,{className:"p-6",children:r.jsx("div",{className:"space-y-6",children:JL.map(e=>r.jsxs("div",{className:"p-6 rounded-lg border border-border-subtle bg-background-primary/50",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Oi,{variant:"outline",className:"text-xs",children:e.category}),tz(e.status)]}),r.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-2",children:e.title}),r.jsx("p",{className:"text-text-secondary mb-4",children:e.description})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Impacto"}),r.jsx("p",{className:`text-lg font-semibold ${ez(e.impact)}`,children:e.impact})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Economia"}),r.jsx("p",{className:"text-lg font-semibold text-accent-primary",children:e.savings})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Tempo"}),r.jsx("p",{className:"text-lg font-semibold text-accent-primary",children:e.timeReduction})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-text-tertiary",children:"Confiana"}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[r.jsx(QL,{value:e.confidence,className:"w-12 h-2"}),r.jsxs("span",{className:"text-sm font-semibold text-accent-primary",children:[e.confidence,"%"]})]})]})]}),"Recomendado"===e.status&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(qi,{size:"sm",className:"bg-accent-primary hover:bg-accent-primary/90",children:"Implementar"}),r.jsx(qi,{variant:"outline",size:"sm",children:"Simular Cenrio"}),r.jsx(qi,{variant:"ghost",size:"sm",children:"Descartar"})]})]},e.id))})})]})]})})}function rz(){De();const{signUp:e,loading:t}=Di(),[a,i]=ke.useState(!1),[n,s]=ke.useState({name:"",email:"",password:"",companyName:""}),o=e=>{s({...n,[e.target.name]:e.target.value})};return r.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ue,{className:"h-8 w-8 text-accent-primary"}),r.jsx("div",{className:"absolute inset-0 bg-accent-primary/20 blur-lg rounded-full"})]}),r.jsx("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"ConectaBoi"})]}),r.jsx("p",{className:"text-text-secondary text-sm",children:"Sua plataforma de gesto inteligente"})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{className:"space-y-1",children:[r.jsx(Pi,{className:"text-2xl text-center text-text-primary",children:"Criar conta"}),r.jsx(Li,{className:"text-center text-text-secondary",children:"Comece sua jornada com a IA pecuria"})]}),r.jsxs(zi,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs(qi,{variant:"outline",className:"w-full h-11",children:[r.jsxs("svg",{className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]}),r.jsxs(qi,{variant:"outline",className:"w-full h-11",children:[r.jsx("svg",{className:"h-5 w-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continuar com Facebook"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx(cI,{className:"w-full"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-card-secondary px-2 text-text-secondary",children:"ou cadastre-se com email"})})]}),r.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!n.name||!n.email||!n.password)return void qr.error("Por favor, preencha todos os campos obrigatrios");const{error:a}=await e(n.email,n.password,n.name,n.companyName||void 0);a?qr.error(a.message||"Erro ao criar conta"):qr.success("Conta criada com sucesso! Verifique seu email para confirmar.")},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"name",className:"text-text-primary",children:"Nome completo"}),r.jsxs("div",{className:"relative",children:[r.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"name",name:"name",type:"text",placeholder:"Seu nome completo",value:n.name,onChange:o,className:"pl-10 h-11",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"companyName",className:"text-text-primary",children:"Nome da Empresa (Opcional)"}),r.jsxs("div",{className:"relative",children:[r.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"companyName",name:"companyName",type:"text",placeholder:"Sua empresa",value:n.companyName,onChange:o,className:"pl-10 h-11"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"email",className:"text-text-primary",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:n.email,onChange:o,className:"pl-10 h-11",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"password",className:"text-text-primary",children:"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"password",name:"password",type:a?"text":"password",placeholder:"Sua senha segura",value:n.password,onChange:o,autoComplete:"new-password",className:"pl-10 pr-10 h-11",required:!0}),r.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-secondary",children:a?r.jsx(Ca,{className:"h-4 w-4"}):r.jsx(ot,{className:"h-4 w-4"})})]})]}),r.jsx(qi,{type:"submit",variant:"tech",className:"w-full h-11 mt-6",disabled:t,children:t?"Criando conta...":"Criar conta"})]}),r.jsx("div",{className:"text-center pt-4",children:r.jsxs("p",{className:"text-sm text-text-secondary",children:["J tem uma conta?"," ",r.jsx(Pe,{to:"/signin",className:"text-accent-primary hover:text-accent-secondary transition-colors font-medium",children:"Fazer login"})]})})]})]}),r.jsx("div",{className:"text-center mt-8 text-xs text-text-tertiary",children:r.jsxs("p",{children:["Ao criar uma conta, voc aceita nossos"," ",r.jsx("a",{href:"#",className:"text-accent-primary hover:underline",children:"Termos de Uso"})," ","e"," ",r.jsx("a",{href:"#",className:"text-accent-primary hover:underline",children:"Poltica de Privacidade"})]})})]})})}var iz="Checkbox",[nz]=u(iz),[sz,oz]=nz(iz);function lz(e){const{__scopeCheckbox:t,checked:a,children:i,defaultChecked:n,disabled:s,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=e,[p,m]=b({prop:a,defaultProp:n??!1,onChange:c,caller:iz}),[f,g]=ke.useState(null),[x,v]=ke.useState(null),y=ke.useRef(!1),_=!f||(!!o||!!f.closest("form")),j={checked:p,disabled:s,setChecked:m,control:f,setControl:g,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:!xz(n)&&n,isFormControl:_,bubbleInput:x,setBubbleInput:v};return r.jsx(sz,{scope:t,...j,children:gz(h)?h(j):i})}var cz="CheckboxTrigger",dz=ke.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...i},n)=>{const{control:s,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:f}=oz(cz,e),g=v(n,u),x=ke.useRef(c);return ke.useEffect(()=>{const e=null==s?void 0:s.form;if(e){const t=()=>h(x.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[s,h]),r.jsx(w.button,{type:"button",role:"checkbox","aria-checked":xz(c)?"mixed":c,"aria-required":d,"data-state":vz(c),"data-disabled":l?"":void 0,disabled:l,value:o,...i,ref:g,onKeyDown:N(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:N(a,e=>{h(e=>!!xz(e)||!e),f&&m&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});dz.displayName=cz;var uz=ke.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:i,checked:n,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=e;return r.jsx(lz,{__scopeCheckbox:a,checked:n,defaultChecked:s,disabled:l,required:o,onCheckedChange:d,name:i,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>r.jsxs(r.Fragment,{children:[r.jsx(dz,{...h,ref:t,__scopeCheckbox:a}),e&&r.jsx(fz,{__scopeCheckbox:a})]})})});uz.displayName=iz;var hz="CheckboxIndicator",pz=ke.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:i,...n}=e,s=oz(hz,a);return r.jsx(h,{present:i||xz(s.checked)||!0===s.checked,children:r.jsx(w.span,{"data-state":vz(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});pz.displayName=hz;var mz="CheckboxBubbleInput",fz=ke.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:i,hasConsumerStoppedPropagationRef:n,checked:s,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:p,setBubbleInput:m}=oz(mz,e),f=v(a,m),g=je(s),x=we(i);ke.useEffect(()=>{const e=p;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set,r=!n.current;if(g!==s&&a){const t=new Event("click",{bubbles:r});e.indeterminate=xz(s),a.call(e,!xz(s)&&s),e.dispatchEvent(t)}},[p,g,s,n]);const y=ke.useRef(!xz(s)&&s);return r.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:d,value:u,form:h,...t,tabIndex:-1,ref:f,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function gz(e){return"function"==typeof e}function xz(e){return"indeterminate"===e}function vz(e){return xz(e)?"indeterminate":e?"checked":"unchecked"}fz.displayName=mz;const yz=ke.forwardRef(({className:e,...t},a)=>r.jsx(uz,{ref:a,className:vr("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(pz,{className:vr("flex items-center justify-center text-current"),children:r.jsx(it,{className:"h-4 w-4"})})}));function bz(){De();const{signIn:e,loading:t}=Di(),[a,i]=ke.useState(!1),[n,s]=ke.useState(!1),[o,l]=ke.useState({email:"",password:""}),c=e=>{l({...o,[e.target.name]:e.target.value})};return r.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ue,{className:"h-8 w-8 text-accent-primary"}),r.jsx("div",{className:"absolute inset-0 bg-accent-primary/20 blur-lg rounded-full"})]}),r.jsx("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"ConectaBoi Insights"})]}),r.jsx("p",{className:"text-text-secondary text-sm",children:"Sua plataforma de gesto inteligente"})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{className:"space-y-1",children:[r.jsx(Pi,{className:"text-2xl text-center text-text-primary",children:"Entrar na conta"}),r.jsx(Li,{className:"text-center text-text-secondary",children:"Acesse sua plataforma de IA pecuria"})]}),r.jsxs(zi,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs(qi,{variant:"outline",className:"w-full h-11",children:[r.jsxs("svg",{className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuar com Google"]}),r.jsxs(qi,{variant:"outline",className:"w-full h-11",children:[r.jsx("svg",{className:"h-5 w-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continuar com Facebook"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx(cI,{className:"w-full"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-card-secondary px-2 text-text-secondary",children:"ou entre com email"})})]}),r.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!o.email||!o.password)return void qr.error("Por favor, preencha todos os campos");const{error:a}=await e(o.email,o.password);a?qr.error(a.message||"Erro ao fazer login"):qr.success("Login realizado com sucesso!")},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"email",className:"text-text-primary",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"email",name:"email",type:"email",placeholder:"seu@email.com",value:o.email,onChange:c,className:"pl-10 h-11",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"password",className:"text-text-primary",children:"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"password",name:"password",type:a?"text":"password",placeholder:"Sua senha",value:o.password,onChange:c,autoComplete:"current-password",className:"pl-10 pr-10 h-11",required:!0}),r.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-secondary",children:a?r.jsx(Ca,{className:"h-4 w-4"}):r.jsx(ot,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(yz,{id:"remember",checked:n,onCheckedChange:e=>{s(!0===e||"true"===e)}}),r.jsx(xL,{htmlFor:"remember",className:"text-sm text-text-secondary cursor-pointer",children:"Lembrar neste dispositivo"})]}),r.jsx(Pe,{to:"/forgot-password",className:"text-sm text-accent-primary hover:text-accent-secondary transition-colors",children:"Esqueceu a senha?"})]}),r.jsx(qi,{type:"submit",variant:"tech",className:"w-full h-11 mt-6",disabled:t,children:t?"Entrando...":"Entrar"})]}),r.jsxs("div",{className:"text-center pt-4",children:[r.jsxs("p",{className:"text-sm text-text-secondary",children:["Ainda no  cliente da ConectaBoi Insights?"," ",r.jsx(Pe,{to:"/signup",className:"text-accent-primary hover:text-accent-secondary transition-colors font-medium",children:"Criar conta"})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-border-subtle",children:[r.jsx("p",{className:"text-xs text-text-tertiary mb-2",children:"Problemas com login?"}),r.jsx(qi,{type:"button",variant:"ghost",size:"sm",onClick:()=>{try{localStorage.clear(),sessionStorage.clear(),qr.success("Dados da sesso limpos com sucesso"),window.location.reload()}catch(e){qr.error("Erro ao limpar dados da sesso")}},className:"text-xs text-text-secondary hover:text-text-primary",children:"Limpar dados da sesso"})]})]})]})]}),r.jsx("div",{className:"text-center mt-8 text-xs text-text-tertiary",children:r.jsxs("p",{children:["Ao fazer login, voc aceita nossos"," ",r.jsx("a",{href:"#",className:"text-accent-primary hover:underline",children:"Termos de Uso"})," ","e"," ",r.jsx("a",{href:"#",className:"text-accent-primary hover:underline",children:"Poltica de Privacidade"})]})})]})})}function _z(){var e,t;const{user:a,profile:i,organization:n,userRole:s,loading:o}=Di(),l=De();return Me.useEffect(()=>{o||a&&i||l("/signin")},[o,a,i,l]),o?r.jsx(BI,{children:r.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-primary mx-auto mb-4"}),r.jsx("p",{className:"text-text-secondary",children:"Carregando perfil..."})]})})}):a&&i?r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center text-sm text-text-secondary",children:[r.jsx(qi,{variant:"ghost",size:"sm",className:"p-0 h-auto font-normal text-text-secondary hover:text-accent-primary",onClick:()=>l("/dashboard"),children:"Dashboard"}),r.jsx("span",{className:"mx-2",children:""}),r.jsx("span",{className:"text-text-primary",children:"Perfil"})]})}),r.jsxs(Ii,{className:"mb-8 overflow-hidden border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx("div",{className:"h-32 sm:h-48 bg-gradient-primary relative",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/20 to-primary/20"})}),r.jsxs(zi,{className:"relative px-4 sm:px-6 pb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-end gap-6 -mt-12 sm:-mt-16",children:[r.jsxs(sI,{className:"w-24 h-24 sm:w-32 sm:h-32 border-4 border-background-primary shadow-lg",children:[r.jsx(oI,{src:null==i?void 0:i.avatar_url}),r.jsx(lI,{className:"bg-accent-primary text-white text-xl sm:text-2xl font-bold",children:(null==(e=null==i?void 0:i.full_name)?void 0:e.charAt(0))||(null==(t=null==a?void 0:a.email)?void 0:t.charAt(0))})]}),r.jsx("div",{className:"flex-1 text-center sm:text-left",children:r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-1",children:(null==i?void 0:i.full_name)||"Usurio"}),r.jsx("p",{className:"text-text-secondary mb-1",children:(null==i?void 0:i.position)||"Gestor Pecurio"}),n&&r.jsx("p",{className:"text-sm text-text-tertiary",children:n.name}),s&&r.jsx(Oi,{variant:"secondary",className:"mt-2",children:"owner"===s?"Proprietrio":"admin"===s?"Administrador":"manager"===s?"Gerente":"employee"===s?"Funcionrio":"Visualizador"})]})}),r.jsxs("div",{className:"flex flex-wrap gap-3 justify-center sm:justify-end",children:[r.jsxs(qi,{variant:"tech",className:"gap-2",children:[r.jsx(ka,{className:"h-4 w-4"}),"Foto"]}),r.jsxs(qi,{variant:"outline",className:"gap-2",children:[r.jsx(bt,{className:"h-4 w-4"}),"Configuraes"]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-border-subtle",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"142"}),r.jsx("div",{className:"text-xs sm:text-sm text-text-secondary",children:"Relatrios"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"3,586"}),r.jsx("div",{className:"text-xs sm:text-sm text-text-secondary",children:"Animais"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-text-primary",children:"2,659"}),r.jsx("div",{className:"text-xs sm:text-sm text-text-secondary",children:"Anlises"})]})]})]})]}),r.jsxs(nA,{defaultValue:"overview",className:"w-full",children:[r.jsxs(sA,{className:"grid w-full grid-cols-2 sm:grid-cols-4 mb-8",children:[r.jsx(oA,{value:"overview",children:"Viso Geral"}),r.jsx(oA,{value:"team",children:"Equipe"}),r.jsx(oA,{value:"reports",children:"Relatrios"}),r.jsx(oA,{value:"settings",children:"Configuraes"})]}),r.jsx(lA,{value:"overview",children:r.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2 text-text-primary",children:[r.jsx(ht,{className:"h-5 w-5"}),"Informaes Pessoais"]})}),r.jsxs(zi,{className:"space-y-4",children:[r.jsxs("p",{className:"text-text-secondary",children:[(null==i?void 0:i.full_name)?`Ol, eu sou ${i.full_name}. `:"Ol! ",(null==i?void 0:i.position)?`Trabalho como ${i.position} `:"Trabalho com gesto pecuria ","e utilizo o ConectaBoi Insights para otimizar a produtividade atravs de anlises inteligentes e dados precisos."]}),r.jsxs("div",{className:"space-y-3",children:[(null==i?void 0:i.department)&&r.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[r.jsx(Qe,{className:"h-4 w-4 text-accent-primary"}),r.jsx("span",{children:i.department})]}),r.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[r.jsx(fa,{className:"h-4 w-4 text-accent-primary"}),r.jsx("span",{children:(null==i?void 0:i.email)||(null==a?void 0:a.email)})]}),r.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[r.jsx(dt,{className:"h-4 w-4 text-accent-primary"}),r.jsxs("span",{children:["Membro desde ",new Date((null==i?void 0:i.created_at)||Date.now()).toLocaleDateString("pt-BR",{month:"long",year:"numeric"})]})]}),n&&r.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[r.jsx(Xe,{className:"h-4 w-4 text-accent-primary"}),r.jsx("span",{children:n.name})]})]})]})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2 text-text-primary",children:[r.jsx(Ue,{className:"h-5 w-5"}),"Atividade Recente"]})}),r.jsx(zi,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-background-secondary/50",children:[r.jsx("div",{className:"w-2 h-2 bg-accent-primary rounded-full mt-2 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Novo relatrio gerado"}),r.jsx("p",{className:"text-xs text-text-secondary",children:"Anlise mensal do rebanho - H 2 horas"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-background-secondary/30",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Anlise de peso completada"}),r.jsx("p",{className:"text-xs text-text-secondary",children:"350 animais analisados - Ontem"})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-background-secondary/30",children:[r.jsx("div",{className:"w-2 h-2 bg-accent-secondary rounded-full mt-2 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-text-primary font-medium",children:"Dados sincronizados"}),r.jsx("p",{className:"text-xs text-text-secondary",children:"Atualizao automtica - 3 dias atrs"})]})]})]})})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm lg:col-span-2",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2 text-text-primary",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Aes Rpidas"]})}),r.jsx(zi,{children:r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs(qi,{variant:"outline",className:"h-24 flex-col gap-2",children:[r.jsx(gt,{className:"h-6 w-6"}),r.jsx("span",{className:"text-sm",children:"Gerar Relatrio"})]}),r.jsxs(qi,{variant:"outline",className:"h-24 flex-col gap-2",children:[r.jsx(Ye,{className:"h-6 w-6"}),r.jsx("span",{className:"text-sm",children:"Analytics"})]}),r.jsxs(qi,{variant:"outline",className:"h-24 flex-col gap-2",children:[r.jsx(Xe,{className:"h-6 w-6"}),r.jsx("span",{className:"text-sm",children:"Gerenciar Equipe"})]}),r.jsxs(qi,{variant:"outline",className:"h-24 flex-col gap-2",children:[r.jsx(bt,{className:"h-6 w-6"}),r.jsx("span",{className:"text-sm",children:"Configuraes"})]})]})})]})]})}),r.jsx(lA,{value:"team",children:r.jsx(yL,{})}),r.jsx(lA,{value:"reports",children:r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsx(Pi,{children:"Relatrios"})}),r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(gt,{className:"h-12 w-12 text-text-tertiary mx-auto mb-4"}),r.jsx("p",{className:"text-text-secondary",children:"Mdulo de relatrios em desenvolvimento"}),r.jsx("p",{className:"text-sm text-text-tertiary mt-2",children:"Em breve voc ter acesso aos relatrios detalhados"})]})})]})}),r.jsx(lA,{value:"settings",children:r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsx(Pi,{children:"Configuraes"})}),r.jsx(zi,{className:"p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(bt,{className:"h-12 w-12 text-text-tertiary mx-auto mb-4"}),r.jsx("p",{className:"text-text-secondary",children:"Configuraes em desenvolvimento"}),r.jsx("p",{className:"text-sm text-text-tertiary mt-2",children:"Em breve voc poder personalizar suas preferncias"})]})})]})})]})]})}):null}function jz(){var e;const{token:t}=Le(),a=De(),{signUp:i,signIn:n,loading:s,user:o}=Di(),{getInvitationByToken:l}=vL(),[c,d]=ke.useState(null),[u,h]=ke.useState(!0),[p,m]=ke.useState(!1),[f,g]=ke.useState(!0),[x,v]=ke.useState({name:"",email:"",password:""});ke.useEffect(()=>{y()},[t]),ke.useEffect(()=>{o&&a("/user-profile")},[o]);const y=async()=>{if(!t)return qr.error("Token de convite invlido"),void a("/");const{data:e,error:r}=await l(t);if(r||!e)return qr.error("Convite no encontrado ou expirado"),void a("/");d(e),v(t=>({...t,email:e.email})),h(!1)},b=e=>{v({...x,[e.target.name]:e.target.value})};return u?r.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-primary mx-auto mb-4"}),r.jsx("p",{className:"text-text-secondary",children:"Validando convite..."})]})}):c?r.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ue,{className:"h-8 w-8 text-accent-primary"}),r.jsx("div",{className:"absolute inset-0 bg-accent-primary/20 blur-lg rounded-full"})]}),r.jsx("div",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"ConectaBoi"})]}),r.jsx("p",{className:"text-text-secondary text-sm",children:"Voc foi convidado para se juntar "}),r.jsx("p",{className:"text-text-primary font-semibold",children:c.organizations.name})]}),r.jsx(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm mb-6",children:r.jsx(zi,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_a,{className:"h-8 w-8 text-accent-primary"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-text-secondary",children:["Convidado por ",null==(e=c.profiles)?void 0:e.full_name]}),r.jsxs("p",{className:"text-sm text-text-secondary",children:["Funo: ",r.jsx("span",{className:"text-accent-primary capitalize",children:c.role})]})]})]})})}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsxs(Ai,{className:"space-y-1",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsxs("div",{className:"flex p-1 bg-background-secondary rounded-lg",children:[r.jsx(qi,{type:"button",variant:f?"tech":"ghost",size:"sm",onClick:()=>g(!0),className:"flex-1",children:"Criar Conta"}),r.jsx(qi,{type:"button",variant:f?"ghost":"tech",size:"sm",onClick:()=>g(!1),className:"flex-1",children:"J tenho conta"})]})}),r.jsx(Pi,{className:"text-2xl text-center text-text-primary",children:f?"Criar sua conta":"Entrar na sua conta"}),r.jsx(Li,{className:"text-center text-text-secondary",children:f?"Complete seu cadastro para aceitar o convite":"Entre com sua conta existente"})]}),r.jsx(zi,{className:"space-y-4",children:r.jsxs("form",{onSubmit:f?async e=>{if(e.preventDefault(),!x.name||!x.password)return void qr.error("Por favor, preencha todos os campos");const{error:t}=await i(c.email,x.password,x.name);t?qr.error(t.message||"Erro ao criar conta"):qr.success("Conta criada! Bem-vindo  "+c.organizations.name)}:async e=>{if(e.preventDefault(),!x.password)return void qr.error("Por favor, digite sua senha");const{error:t}=await n(c.email,x.password);t?qr.error(t.message||"Erro ao fazer login"):qr.success("Login realizado! Bem-vindo  "+c.organizations.name)},className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"email",className:"text-text-primary",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"email",name:"email",type:"email",value:c.email,className:"pl-10 h-11",disabled:!0})]})]}),f&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"name",className:"text-text-primary",children:"Nome completo"}),r.jsxs("div",{className:"relative",children:[r.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"name",name:"name",type:"text",placeholder:"Seu nome completo",value:x.name,onChange:b,className:"pl-10 h-11",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"password",className:"text-text-primary",children:f?"Crie sua senha":"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-tertiary h-4 w-4"}),r.jsx(aI,{id:"password",name:"password",type:p?"text":"password",placeholder:f?"Crie uma senha segura":"Sua senha",value:x.password,onChange:b,className:"pl-10 pr-10 h-11",required:!0}),r.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-text-tertiary hover:text-text-secondary",children:p?r.jsx(Ca,{className:"h-4 w-4"}):r.jsx(ot,{className:"h-4 w-4"})})]})]}),r.jsx(qi,{type:"submit",variant:"tech",className:"w-full h-11 mt-6",disabled:s,children:s?f?"Criando conta...":"Entrando...":f?"Aceitar convite":"Entrar"})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-background-primary flex items-center justify-center",children:r.jsx(Ii,{className:"w-full max-w-md",children:r.jsxs(zi,{className:"p-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Convite no encontrado"}),r.jsx("p",{className:"text-text-secondary mb-4",children:"Este convite pode ter expirado ou j foi usado."}),r.jsx(Pe,{to:"/signup",children:r.jsx(qi,{variant:"tech",children:"Criar uma nova conta"})})]})})})}yz.displayName=uz.displayName;const wz=ke.forwardRef(({...e},t)=>r.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));wz.displayName="Breadcrumb";const Nz=ke.forwardRef(({className:e,...t},a)=>r.jsx("ol",{ref:a,className:vr("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));Nz.displayName="BreadcrumbList";const Sz=ke.forwardRef(({className:e,...t},a)=>r.jsx("li",{ref:a,className:vr("inline-flex items-center gap-1.5",e),...t}));Sz.displayName="BreadcrumbItem";const Cz=ke.forwardRef(({asChild:e,className:t,...a},i)=>{const n=e?C:"a";return r.jsx(n,{ref:i,className:vr("transition-colors hover:text-foreground",t),...a})});Cz.displayName="BreadcrumbLink";const kz=ke.forwardRef(({className:e,...t},a)=>r.jsx("span",{ref:a,role:"link","aria-disabled":"true","aria-current":"page",className:vr("font-normal text-foreground",e),...t}));kz.displayName="BreadcrumbPage";const Mz=({children:e,className:t,...a})=>r.jsx("li",{role:"presentation","aria-hidden":"true",className:vr("[&>svg]:size-3.5",t),...a,children:e??r.jsx(st,{})});Mz.displayName="BreadcrumbSeparator";function Tz(){var e;const t=De(),{currentLoteData:a,currentLoteIndex:i,totalLotes:n,nextLote:s,prevLote:o,isLoading:l,error:c}=(()=>{var e;const{organization:t}=Di(),[a,r]=ke.useState(0),i=qa({queryKey:["materia-seca-view",null==t?void 0:t.id],queryFn:async()=>{const e=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("view_materia_seca_por_lote").select("*").eq("organization_id",e).order("lote",{ascending:!0}).order("data",{ascending:!0});if(r)throw r;if(!a||0===a.length)return[];const i={};return a.forEach(e=>{const t=e.lote;i[t]||(i[t]=[]),i[t].push({data:e.data,dia:e.dia_nome,curral:e.curral,previsto:parseFloat(e.previsto),realizado:parseFloat(e.realizado),variacao:parseFloat(e.variacao),variacaoPercentual:parseFloat(e.variacao_percentual),eficiencia:parseFloat(e.eficiencia_percentual),escore:parseFloat(e.escore)})}),Object.entries(i).map(([e,t])=>({lote:e,dados:t.sort((e,t)=>new Date(e.data).getTime()-new Date(t.data).getTime())})).sort((e,t)=>{var a,r;const i=(null==(a=e.dados[e.dados.length-1])?void 0:a.curral)||"",n=(null==(r=t.dados[t.dados.length-1])?void 0:r.curral)||"",s=/^\d+$/.test(i)?parseInt(i):999999,o=/^\d+$/.test(n)?parseInt(n):999999;if(999999!==s&&999999!==o)return s-o;if(999999!==s&&999999===o)return-1;if(999999===s&&999999!==o)return 1;const l=i.localeCompare(n);return 0!==l?l:e.lote.localeCompare(t.lote)})},enabled:!0,refetchInterval:3e5}),n=i.data&&i.data.length>0?i.data[a]:null;return{...i,currentLoteData:n,currentLoteIndex:a,totalLotes:(null==(e=i.data)?void 0:e.length)||0,nextLote:()=>{i.data&&i.data.length>0&&r(e=>(e+1)%i.data.length)},prevLote:()=>{i.data&&i.data.length>0&&r(e=>(e-1+i.data.length)%i.data.length)},setCurrentLoteIndex:r}})();return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(wz,{children:r.jsxs(Nz,{children:[r.jsx(Sz,{children:r.jsx(Cz,{href:"/dashboard",children:"Dashboard"})}),r.jsx(Mz,{}),r.jsx(Sz,{children:r.jsx(kz,{children:"Leitura de Cocho"})})]})}),r.jsxs(qi,{onClick:()=>{t("/dashboard")},variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Ma,{className:"h-4 w-4"}),"Voltar ao Dashboard"]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Leitura de Cocho"}),r.jsx("p",{className:"text-text-secondary",children:"Monitore o consumo de rao e nveis dos cochos em tempo real"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(Ei,{title:"Cochos Ativos",value:"24",subtitle:" +2 vs ontem",trend:"up",icon:r.jsx(Ta,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Consumo Mdio",value:"85.4 kg",subtitle:" +5.2% vs semana",trend:"up",icon:r.jsx(et,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia",value:"92.8%",subtitle:" +1.3% vs ontem",trend:"up",icon:r.jsx(Ue,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Alertas Ativos",value:"3",subtitle:" -2 vs ontem",trend:"down",icon:r.jsx(Ta,{className:"h-6 w-6"})})]}),r.jsxs(Ii,{className:"border-border-subtle bg-card-secondary/50 backdrop-blur-sm",children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),a?`Consumo de Matria Seca - Curral: ${(null==(e=a.dados[a.dados.length-1])?void 0:e.curral)||"N/A"} - Lote: ${a.lote} - ltimos 14 Dias`:"Consumo de Matria Seca por Lote - ltimos 14 Dias"]}),n>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"outline",size:"icon",onClick:o,disabled:n<=1,className:"h-8 w-8",children:r.jsx(nt,{className:"h-4 w-4"})}),r.jsxs("span",{className:"text-sm text-text-secondary",children:["Lote ",i+1," de ",n]}),r.jsx(qi,{variant:"outline",size:"icon",onClick:s,disabled:n<=1,className:"h-8 w-8",children:r.jsx(st,{className:"h-4 w-4"})})]})]})}),r.jsxs(zi,{className:"p-6",children:[l?r.jsx("div",{className:"h-96 flex items-center justify-center",children:r.jsx(lt,{className:"h-8 w-8 animate-spin text-accent-primary"})}):c||!a?r.jsx("div",{className:"h-96 flex items-center justify-center",children:r.jsx("p",{className:"text-text-secondary",children:"Nenhum dado disponvel para exibio."})}):r.jsx("div",{className:"h-96",children:r.jsx(Ua,{width:"100%",height:"100%",children:r.jsxs(Za,{data:a.dados.map(e=>({...e,corRealizado:e.variacaoPercentual>=-10&&e.variacaoPercentual<=10?"#22c55e":e.variacaoPercentual>=-20&&e.variacaoPercentual<=20?"#eab308":"#ef4444"})),margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(Qa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(Ja,{dataKey:"dia",stroke:"white",fontSize:12,tickLine:!1,axisLine:!1}),r.jsx(er,{stroke:"white",fontSize:12,tickLine:!1,axisLine:!1,label:{value:"Matria Seca (kg)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"white"}}}),r.jsx(Xa,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--text-primary))"},content:({active:e,payload:t,label:a})=>{var i;if(e&&t&&t.length){const e=null==(i=t[0])?void 0:i.payload;return r.jsxs("div",{className:"bg-white p-4 border-2 border-gray-200 rounded-lg shadow-xl",children:[r.jsx("p",{className:"font-bold mb-3 text-gray-900 text-base",children:`${a} (${null==e?void 0:e.data})`}),t.map((e,t)=>r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:"previsto"===e.dataKey?"#3b82f6":e.fill}}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["previsto"===e.dataKey?"CMS Previsto":"CMS Realizado",":"," ",r.jsxs("span",{className:"font-bold",children:[e.value.toFixed(2)," kg"]})]})]},t)),e&&r.jsxs("div",{className:"mt-3 pt-3 border-t-2 border-gray-200 text-sm font-medium",children:[r.jsxs("div",{className:"text-gray-900 mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Escore:"})," ",r.jsx("span",{className:"font-bold "+(e.escore>=3?"text-green-600":e.escore>=2?"text-yellow-600":e.escore>=1?"text-orange-600":"text-red-600"),children:e.escore.toFixed(1)})]}),r.jsxs("div",{className:"text-gray-900",children:[r.jsx("span",{className:"font-semibold",children:"Variao:"})," ",r.jsxs("span",{className:"font-bold "+(e.variacao>0?"text-green-600":e.variacao<0?"text-red-600":"text-gray-600"),children:[e.variacao>0?"+":"",e.variacao.toFixed(2)," kg (",e.variacaoPercentual>0?"+":"",e.variacaoPercentual.toFixed(1),"%)"]})]})]})]})}return null}}),r.jsx(rr,{wrapperStyle:{color:"hsl(var(--text-secondary))"},formatter:e=>"previsto"===e?"CMS Previsto":"CMS Realizado"}),r.jsx(ar,{dataKey:"previsto",fill:"#3b82f6",name:"previsto",radius:[4,4,0,0]}),r.jsx(ar,{dataKey:"realizado",name:"realizado",radius:[4,4,0,0],children:a.dados.map((e,t)=>r.jsx(Ka,{fill:e.variacaoPercentual>=-10&&e.variacaoPercentual<=10?"#22c55e":e.variacaoPercentual>=-20&&e.variacaoPercentual<=20?"#eab308":"#ef4444"},`cell-${t}`))})]})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Eficincia Boa (-10% a +10%)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Eficincia Mdia (-20% a +20%)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Eficincia Ruim (>20%)"})]})]}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm border-t pt-3",children:[r.jsx("span",{className:"text-text-secondary font-medium",children:"Escores de Leitura de Cocho:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Escore  3.0"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Escore 2.0-2.9"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Escore 1.0-1.9"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),r.jsx("span",{className:"text-text-secondary",children:"Escore < 1.0"})]})]})]}),r.jsxs("div",{className:"mt-6 border-t border-border-subtle pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Lanar Leitura de Cocho"}),r.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:[-2,-1,0,1,2,3,4].map(e=>r.jsx(qi,{variant:"outline",className:"min-w-[60px] h-12 text-lg font-bold hover:bg-accent-primary/10",onClick:()=>{},children:e>0?`+${e}`:e},e))})]})]})]})]})})}function Dz(){const e=De(),t=e=>{switch(e){case"concluida":case"operando":return"bg-primary/20 text-primary";case"em_andamento":return"bg-accent/20 text-accent-foreground";case"pendente":default:return"bg-muted text-muted-foreground";case"disponivel":return"bg-secondary/20 text-secondary-foreground";case"manutencao":return"bg-destructive/20 text-destructive"}},a=e=>{switch(e){case"concluida":return"Concluda";case"em_andamento":return"Em Andamento";case"pendente":return"Pendente";case"operando":return"Operando";case"disponivel":return"Disponvel";case"manutencao":return"Manuteno";default:return e}};return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(wz,{children:r.jsxs(Nz,{children:[r.jsx(Sz,{children:r.jsx(Cz,{href:"/dashboard",children:"Dashboard"})}),r.jsx(Mz,{}),r.jsx(Sz,{children:r.jsx(kz,{children:"Logstica de Tratos"})})]})}),r.jsxs(qi,{onClick:()=>{e("/dashboard")},variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Ma,{className:"h-4 w-4"}),"Voltar ao Dashboard"]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Logstica de Tratos"}),r.jsx("p",{className:"text-text-secondary",children:"Gerencie rotas, distribuio e equipamentos de trato"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(Ei,{title:"Rotas Ativas",value:"2",subtitle:" +1 hoje",trend:"up",icon:r.jsx(ja,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Equipamentos Operando",value:"2/3",subtitle:" 1 em manuteno",trend:"stable",icon:r.jsx(Ke,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Eficincia Mdia",value:"94%",subtitle:" +3% esta semana",trend:"up",icon:r.jsx(Ve,{className:"h-6 w-6"})}),r.jsx(Ei,{title:"Tempo Mdio/Rota",value:"2h 15m",subtitle:" -15min otimizado",trend:"down",icon:r.jsx(He,{className:"h-6 w-6"})})]}),r.jsxs(nA,{defaultValue:"rotas",className:"space-y-6",children:[r.jsxs(sA,{className:"grid w-full grid-cols-2",children:[r.jsxs(oA,{value:"rotas",className:"flex items-center space-x-2",children:[r.jsx(ja,{className:"h-4 w-4"}),r.jsx("span",{children:"Rotas & Distribuio"})]}),r.jsxs(oA,{value:"equipamentos",className:"flex items-center space-x-2",children:[r.jsx(Ke,{className:"h-4 w-4"}),r.jsx("span",{children:"Gesto de Equipamentos"})]})]}),r.jsx(lA,{value:"rotas",children:r.jsxs(Ii,{className:"tech-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Rotas de Distribuio"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhamento em tempo real das rotas de alimentao"})]}),r.jsxs(qi,{variant:"tech",size:"sm",children:[r.jsx(dt,{className:"h-4 w-4 mr-2"}),"Programar Nova Rota"]})]}),r.jsx("div",{className:"space-y-4",children:[{id:1,rota:"Rota A - Pasto Norte",status:"em_andamento",progresso:75,horaInicio:"06:00",previsaoTermino:"08:30",responsavel:"Joo Silva",equipamento:"Caminho 001",pastos:["P1","P2","P3","P4"],totalAnimais:450},{id:2,rota:"Rota B - Pasto Sul",status:"concluida",progresso:100,horaInicio:"07:00",previsaoTermino:"09:00",responsavel:"Maria Santos",equipamento:"Caminho 002",pastos:["P5","P6","P7"],totalAnimais:320},{id:3,rota:"Rota C - Pasto Oeste",status:"pendente",progresso:0,horaInicio:"08:00",previsaoTermino:"10:30",responsavel:"Pedro Costa",equipamento:"Caminho 003",pastos:["P8","P9","P10","P11","P12"],totalAnimais:620}].map(e=>r.jsxs("div",{className:"border rounded-lg p-4 hover:border-primary/30 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:r.jsx(Qe,{className:"h-4 w-4 text-primary"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:e.rota}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.responsavel,"  ",e.equipamento]})]})]}),r.jsx(Oi,{className:t(e.status),children:a(e.status)})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Horrio"}),r.jsxs("p",{className:"font-medium",children:[e.horaInicio," - ",e.previsaoTermino]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Progresso"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex-1 bg-muted rounded-full h-2",children:r.jsx("div",{className:"bg-primary rounded-full h-2 transition-all duration-300",style:{width:`${e.progresso}%`}})}),r.jsxs("span",{className:"font-medium",children:[e.progresso,"%"]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Pastos"}),r.jsx("p",{className:"font-medium",children:e.pastos.join(", ")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Animais"}),r.jsxs("p",{className:"font-medium flex items-center",children:[r.jsx(Xe,{className:"h-3 w-3 mr-1"}),e.totalAnimais]})]})]})]},e.id))})]})}),r.jsx(lA,{value:"equipamentos",children:r.jsxs(Ii,{className:"tech-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Gesto de Equipamentos"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Status e manuteno da frota de distribuio"})]}),r.jsxs(qi,{variant:"outline",size:"sm",children:[r.jsx(We,{className:"h-4 w-4 mr-2"}),"Agendar Manuteno"]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[{id:"CAM001",nome:"Caminho 001",status:"operando",capacidade:"5.000 kg",localizacao:"Pasto Norte - P3",manutencao:"Em dia",proximaManutencao:"15 dias"},{id:"CAM002",nome:"Caminho 002",status:"disponivel",capacidade:"4.500 kg",localizacao:"Base Central",manutencao:"Em dia",proximaManutencao:"8 dias"},{id:"CAM003",nome:"Caminho 003",status:"manutencao",capacidade:"5.500 kg",localizacao:"Oficina",manutencao:"Preventiva",proximaManutencao:"Hoje"}].map(e=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-secondary/10 rounded-lg",children:r.jsx(Ke,{className:"h-4 w-4 text-secondary-foreground"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:e.nome}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.id})]})]}),r.jsx(Oi,{className:t(e.status),children:a(e.status)})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Capacidade:"}),r.jsx("span",{className:"font-medium",children:e.capacidade})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Localizao:"}),r.jsx("span",{className:"font-medium text-xs",children:e.localizacao})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Manuteno:"}),r.jsx("span",{className:"font-medium",children:e.manutencao})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Prxima:"}),r.jsx("span",{className:"font-medium text-xs "+("Hoje"===e.proximaManutencao?"text-destructive":""),children:e.proximaManutencao})]})]})]},e.id))})]})})]})]})})}const Iz=()=>{const[e,t]=ke.useState(!1),[a,r]=ke.useState(!1),{toast:i}=xr(),{user:n,organization:s}=Di();return{processCsv:async({pipeline:e,filename:a,fileId:r,forceOverwrite:o=!1})=>{var l,c;t(!0);try{if(!n||!s)throw new Error("Usurio ou organizao no encontrados");const t=r||crypto.randomUUID(),d=s.id,u=`process-csv-${e.padStart(2,"0")}`,{data:h,error:p}=await ki.functions.invoke(u,{body:{filename:a,fileId:t,organizationId:d,forceOverwrite:o}});if(p){if(p.message.includes("409")||p.message.includes("Conflict"))return i({title:"Dados j processados",description:"Os dados deste arquivo j foram processados anteriormente. Marque o checkbox 'Forar sobrescrita' para reprocessar.",variant:"default"}),null;throw new Error(p.message)}if(!h.success){if(h.error&&(h.error.includes("j existem na base")||h.error.includes("j foi processado")))return i({title:"Dados j processados",description:"Os dados deste arquivo j foram processados anteriormente. Marque o checkbox 'Forar sobrescrita' para reprocessar.",variant:"default"}),h;throw new Error(h.error||"Erro desconhecido no processamento")}const m=(null==(l=h.summary)?void 0:l.totalRows)||h.rowsProcessed||0,f=(null==(c=h.summary)?void 0:c.successfulRows)||h.rowsInserted||0;return i({title:"Processamento concludo",description:`${m} linhas processadas, ${f} linhas inseridas no banco`}),h}catch(d){return i({title:"Erro no processamento",description:d instanceof Error?d.message:"Erro desconhecido",variant:"destructive"}),null}finally{t(!1)}},cleanDuplicates:async e=>{r(!0);try{if(!n||!s)throw new Error("Usurio ou organizao no encontrados");const t=s.id,a=`clean-duplicates-${e.padStart(2,"0")}`,{data:r,error:o}=await ki.functions.invoke(a,{body:{organizationId:t}});if(o)throw new Error(o.message);if(!r.success)throw new Error(r.error||"Erro desconhecido na limpeza");return i({title:"Limpeza de duplicados concluda",description:`${r.duplicatesRemoved} registros duplicados removidos. Total final: ${r.finalCount} registros`}),r}catch(t){return i({title:"Erro na limpeza de duplicados",description:t instanceof Error?t.message:"Erro desconhecido",variant:"destructive"}),null}finally{r(!1)}},processFatoDistribuicao:async()=>{t(!0);try{if(!n||!s)throw new Error("Usurio ou organizao no encontrados");const e=s.id,{data:t,error:a}=await ki.functions.invoke("process-fato-distribuicao-fix",{body:{organizationId:e,forceOverwrite:!0}});if(a)throw new Error(a.message);if(!t.success)throw new Error(t.error||"Erro desconhecido no processamento da fato_distribuicao");return i({title:"Fato Distribuio Processada",description:`${t.stats.totalProcessed} registros processados. Taxa de enriquecimento: ${t.stats.enrichmentRate}`}),t}catch(e){return i({title:"Erro no processamento da fato_distribuicao",description:e instanceof Error?e.message:"Erro desconhecido",variant:"destructive"}),null}finally{t(!1)}},processFatoCarregamento:async()=>{t(!0);try{if(!n||!s)throw new Error("Usurio ou organizao no encontrados");const e=s.id,{data:t,error:a}=await ki.functions.invoke("process-fato-carregamento-temp",{body:{organizationId:e,forceOverwrite:!0}});if(a)throw new Error(a.message);if(!t.success)throw new Error(t.error||"Erro desconhecido no processamento da fato_carregamento");return i({title:"Fato Carregamento Processada",description:`${t.stats.totalProcessed} registros processados. Taxa de enriquecimento: ${t.stats.enrichmentRate}`}),t}catch(e){return i({title:"Erro no processamento da fato_carregamento",description:e instanceof Error?e.message:"Erro desconhecido",variant:"destructive"}),null}finally{t(!1)}},processFatoHistoricoConsumo:async()=>{t(!0);try{if(!n||!s)throw new Error("Usurio ou organizao no encontrados");const e=s.id,{data:t,error:a}=await ki.functions.invoke("process-fato-historico-consumo",{body:{organizationId:e}});if(a)throw new Error(a.message);if(!t.success)throw new Error(t.error||"Erro desconhecido no processamento da fato_historico_consumo");return i({title:"Fato Histrico Consumo Processado",description:`${t.stats.totalProcessed} registros processados. Taxa de sucesso: ${t.stats.successRate}`}),t}catch(e){return i({title:"Erro no processamento da fato_historico_consumo",description:e instanceof Error?e.message:"Erro desconhecido",variant:"destructive"}),null}finally{t(!1)}},isProcessing:e,isCleaningDuplicates:a}},Az=e=>{const[t,a]=ke.useState(null),[r,i]=ke.useState(!0),{organization:n}=Di();return ke.useEffect(()=>{(async()=>{if(null==n?void 0:n.id)try{const{data:t,error:r}=await ki.from(e).select("created_at").eq("organization_id",n.id).order("created_at",{ascending:!1}).limit(1).single();r?a(null):t&&a(t.created_at)}catch(t){a(null)}finally{i(!1)}else i(!1)})()},[e,null==n?void 0:n.id]),{lastUpdate:t,isLoading:r}},Pz=({pipeline:e,title:t,description:a,filename:i})=>{const{processCsv:n,cleanDuplicates:s,isProcessing:o,isCleaningDuplicates:l}=Iz(),[c,d]=ke.useState(!1),u=`staging_${e.padStart(2,"0")}_${"01"===e?"historico_consumo":"02"===e?"desvio_carregamento":"03"===e?"desvio_distribuicao":"04"===e?"itens_trato":"trato_por_curral"}`,{lastUpdate:h,isLoading:p}=Az(u);return r.jsxs(Ii,{className:"w-full",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"flex items-center gap-2",children:["Pipeline ",e," - ",t]}),r.jsx(Li,{children:a}),!p&&h&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-2",children:[r.jsx(He,{className:"h-3 w-3"}),r.jsxs("span",{children:["ltima atualizao: ",Yt(new Date(h),"dd/MM/yyyy 's' HH:mm",{locale:hA})]})]})]}),r.jsx(zi,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-muted/50 rounded-md border border-border/50",children:[r.jsx(yz,{id:`force-overwrite-${e}`,checked:c,onCheckedChange:e=>d(e)}),r.jsx("label",{htmlFor:`force-overwrite-${e}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Forar sobrescrita de dados existentes"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs(qi,{onClick:async()=>{await s(e)},disabled:o||l,size:"sm",variant:"outline",className:"gap-2",children:[l?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(ba,{className:"h-4 w-4"}),l?"Limpando...":"Limpar Duplicados"]}),r.jsxs(qi,{onClick:async()=>{i&&await n({pipeline:e,filename:i,forceOverwrite:c})},disabled:!i||o||l,size:"sm",className:"gap-2",children:[o?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(Da,{className:"h-4 w-4"}),o?"Processando...":"Processar"]})]})]})})]})},Lz=()=>{const{processFatoDistribuicao:e,isProcessing:t}=Iz(),{lastUpdate:a,isLoading:i}=Az("fato_distribuicao");return r.jsxs(Ii,{className:"w-full",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"h-5 w-5"}),"Fato Distribuio"]}),r.jsx(Li,{children:"Processa dados de distribuio enriquecidos"}),!i&&a&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-2",children:[r.jsx(He,{className:"h-3 w-3"}),r.jsxs("span",{children:["ltima atualizao: ",Yt(new Date(a),"dd/MM/yyyy 's' HH:mm",{locale:hA})]})]})]}),r.jsx(zi,{children:r.jsx("div",{className:"flex justify-end",children:r.jsxs(qi,{onClick:async()=>{await e()},disabled:t,size:"sm",className:"gap-2",children:[t?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(yt,{className:"h-4 w-4"}),t?"Processando...":"Processar"]})})})]})},zz=()=>{const{processFatoCarregamento:e,isProcessing:t}=Iz(),{lastUpdate:a,isLoading:i}=Az("fato_carregamento");return r.jsxs(Ii,{className:"w-full",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(vt,{className:"h-5 w-5"}),"Fato Carregamento"]}),r.jsx(Li,{children:"Processa dados de carregamento enriquecidos"}),!i&&a&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-2",children:[r.jsx(He,{className:"h-3 w-3"}),r.jsxs("span",{children:["ltima atualizao: ",Yt(new Date(a),"dd/MM/yyyy 's' HH:mm",{locale:hA})]})]})]}),r.jsx(zi,{children:r.jsx("div",{className:"flex justify-end",children:r.jsxs(qi,{onClick:async()=>{await e()},disabled:t,size:"sm",className:"gap-2",children:[t?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(vt,{className:"h-4 w-4"}),t?"Processando...":"Processar"]})})})]})},Ez=()=>{const{processFatoHistoricoConsumo:e,isProcessing:t}=Iz(),{lastUpdate:a,isLoading:i}=Az("fato_historico_consumo");return r.jsxs(Ii,{className:"w-full",children:[r.jsxs(Ai,{children:[r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Fato Histrico Consumo"]}),r.jsx(Li,{children:"Processa dados de histrico de consumo"}),!i&&a&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-2",children:[r.jsx(He,{className:"h-3 w-3"}),r.jsxs("span",{children:["ltima atualizao: ",Yt(new Date(a),"dd/MM/yyyy 's' HH:mm",{locale:hA})]})]})]}),r.jsx(zi,{children:r.jsx("div",{className:"flex justify-end",children:r.jsxs(qi,{onClick:async()=>{await e()},disabled:t,size:"sm",className:"gap-2",children:[t?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(Ye,{className:"h-4 w-4"}),t?"Processando...":"Processar"]})})})]})};function Rz(){const{user:e,organization:t}=Di(),{toast:a}=xr(),i=De(),[n,s]=ke.useState([]),[o,l]=ke.useState(!1);Me.useEffect(()=>{(async()=>{if(e&&t)try{const e=new Blob(["# Pasta para arquivos processados\n"],{type:"text/plain"}),a=["01","02","03","04","05"];for(const r of a){const{error:a}=await ki.storage.from("csv-uploads").upload(`${t.id}/csv-processed/${r}/.placeholder`,e,{cacheControl:"3600",upsert:!0});a&&a.message.includes("already exists")}}catch(a){}})()},[e,t]);const c=async(e,a)=>{if(!t)return!1;try{const{data:r,error:i}=await ki.storage.from("csv-uploads").download(`${t.id}/${a}/${e}`);if(i)throw i;const n=`${t.id}/csv-processed/${a}/${e}`,{error:s}=await ki.storage.from("csv-uploads").upload(n,r,{cacheControl:"3600",upsert:!0});if(s)throw s;const{error:o}=await ki.storage.from("csv-uploads").remove([`${t.id}/${a}/${e}`]);if(o)throw o;return!0}catch(r){return!1}},d=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},u=n.filter(e=>"pending"===e.status),h=n.filter(e=>"completed"===e.status);return r.jsx(BI,{children:r.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[r.jsx(wz,{children:r.jsxs(Nz,{children:[r.jsx(Sz,{children:r.jsx(Cz,{href:"/dashboard",children:"Dashboard"})}),r.jsx(Mz,{}),r.jsx(Sz,{children:r.jsx(kz,{children:"Upload de CSV"})})]})}),r.jsxs(qi,{onClick:()=>{i("/dashboard")},variant:"outline",className:"flex items-center gap-2",children:[r.jsx(Ma,{className:"h-4 w-4"}),"Voltar ao Dashboard"]})]}),r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary",children:"Upload de CSV"})}),r.jsxs(Ii,{className:"mb-6",children:[r.jsx(Ai,{children:r.jsxs(Pi,{className:"flex items-center gap-2",children:[r.jsx(Mt,{className:"h-5 w-5"}),"Selecionar Arquivos CSV"]})}),r.jsx(zi,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(xL,{htmlFor:"csv-files",children:"Arquivos CSV (mx. 5)"}),r.jsx(aI,{id:"csv-files",type:"file",multiple:!0,accept:".csv",onChange:e=>{const t=Array.from(e.target.files||[]),r=t.filter(e=>e.name.toLowerCase().endsWith(".csv")),i=t.filter(e=>!e.name.toLowerCase().endsWith(".csv"));i.length>0&&a({title:"Arquivos invlidos",description:`${i.length} arquivo(s) no so CSV e foram ignorados.`,variant:"destructive"});const o=5-n.length,l=r.slice(0,o);r.length>o&&a({title:"Limite excedido",description:`Apenas ${o} arquivo(s) podem ser adicionados. Limite mximo: 5 arquivos.`,variant:"destructive"});const c=l.map(e=>({file:e,progress:0,status:"pending"}));s(e=>[...e,...c])},disabled:n.length>=5||o,className:"max-w-md"})]})})]}),n.length>0&&r.jsxs(Ii,{className:"mb-6",children:[r.jsxs(Ai,{className:"flex flex-row items-center justify-between",children:[r.jsxs(Pi,{children:["Arquivos Selecionados (",n.length,"/5)"]}),h.length>0&&r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>{s(e=>e.filter(e=>"completed"!==e.status))},disabled:o,children:[r.jsx(ba,{className:"h-4 w-4 mr-2"}),"Limpar Concludos"]})]}),r.jsx(zi,{children:r.jsx("div",{className:"space-y-4",children:n.map((e,t)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[r.jsx("div",{className:"flex-shrink-0",children:"completed"===e.status?r.jsx(Ve,{className:"h-5 w-5 text-primary"}):"error"===e.status?r.jsx(ba,{className:"h-5 w-5 text-destructive"}):r.jsx(Ia,{className:"h-5 w-5 text-accent"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:e.file.name}),r.jsx("span",{className:"text-xs text-text-tertiary",children:d(e.file.size)})]}),"uploading"===e.status&&r.jsx(QL,{value:e.progress,className:"h-2"}),"error"===e.status&&e.error&&r.jsxs("p",{className:"text-xs text-destructive mt-1",children:["Erro: ",e.error]}),"completed"===e.status&&r.jsx("p",{className:"text-xs text-primary mt-1",children:"Upload concludo"})]}),"pending"===e.status&&r.jsx(qi,{variant:"ghost",size:"sm",onClick:()=>(e=>{s(t=>t.filter((t,a)=>a!==e))})(t),disabled:o,children:r.jsx(ba,{className:"h-4 w-4"})})]},t))})})]}),u.length>0&&r.jsx("div",{className:"flex justify-center",children:r.jsx(qi,{onClick:async()=>{if(e&&t){l(!0);try{for(let a=0;a<n.length;a++){const e=n[a];if("pending"!==e.status)continue;s(e=>e.map((e,t)=>t===a?{...e,status:"uploading"}:e));let i="";const o=e.file.name;if(o.startsWith("01"))i="01";else if(o.startsWith("02"))i="02";else if(o.startsWith("03"))i="03";else if(o.startsWith("04"))i="04";else{if(!o.startsWith("05")){s(e=>e.map((e,t)=>t===a?{...e,status:"error",error:"Nome do arquivo no segue padro esperado (deve comear com 01, 02, 03, 04 ou 05)"}:e));continue}i="05"}const l=`${t.id}/${i}/${o}`;try{const{error:t}=await ki.storage.from("csv-uploads").upload(l,e.file,{cacheControl:"3600",upsert:!0});if(t)throw t;if(!(await c(o,i)))throw new Error("Falha no ps-processamento");s(e=>e.map((e,t)=>t===a?{...e,status:"completed",progress:100}:e))}catch(r){s(e=>e.map((e,t)=>t===a?{...e,status:"error",error:r instanceof Error?r.message:"Erro desconhecido"}:e))}}const e=n.filter(e=>"completed"===e.status).length;e>0&&a({title:"Upload concludo",description:`${e} arquivo(s) enviado(s) com sucesso!`})}catch(r){a({title:"Erro no upload",description:"Ocorreu um erro durante o upload dos arquivos.",variant:"destructive"})}finally{l(!1)}}else a({title:"Erro de autenticao",description:"Voc precisa estar logado e ter uma organizao para fazer upload.",variant:"destructive"})},disabled:o,size:"lg",className:"min-w-48",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Mt,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Enviar ",u.length," arquivo(s)"]})})}),r.jsxs(nA,{defaultValue:"historico",className:"mt-8",children:[r.jsxs(sA,{className:"grid w-full grid-cols-3",children:[r.jsx(oA,{value:"historico",children:"Histrico de Consumo"}),r.jsx(oA,{value:"carregamento",children:"Desvio de Carregamento"}),r.jsx(oA,{value:"distribuicao",children:"Desvio de Distribuio"})]}),r.jsx(lA,{value:"historico",className:"space-y-4 mt-6",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(Pz,{pipeline:"01",title:"Pipeline 01",description:"Histrico de Consumo",filename:"01_historico_consumo.csv"}),r.jsx(Ez,{})]})}),r.jsx(lA,{value:"carregamento",className:"space-y-4 mt-6",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsx(Pz,{pipeline:"02",title:"Pipeline 02",description:"Desvio de Carregamento",filename:"02_desvio_carregamento.csv"}),r.jsx(Pz,{pipeline:"04",title:"Pipeline 04",description:"Itens de Trato",filename:"04_itens_trato.csv"}),r.jsx(zz,{})]})}),r.jsx(lA,{value:"distribuicao",className:"space-y-4 mt-6",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsx(Pz,{pipeline:"03",title:"Pipeline 03",description:"Desvio de Distribuio",filename:"03_desvio_distribuicao.csv"}),r.jsx(Pz,{pipeline:"05",title:"Pipeline 05",description:"Trato por Curral",filename:"05_trato_por_curral.csv"}),r.jsx(Lz,{})]})})]})]})})}const Oz=()=>{const{user:e}=Di(),[t,a]=ke.useState([]),[i,n]=ke.useState([]),[s,o]=ke.useState(!0),[l,c]=ke.useState(null),[d,u]=ke.useState(""),[h,p]=ke.useState("all"),[m,f]=ke.useState("all"),[g,x]=ke.useState(new Set),[v,y]=ke.useState(!1);ke.useEffect(()=>{b()},[e]),ke.useEffect(()=>{l&&_(l.id)},[l]),ke.useEffect(()=>{if(!v||!(null==e?void 0:e.organizationId))return;const t=setInterval(()=>{b(),l&&_(l.id)},2e3);return()=>clearInterval(t)},[v,null==e?void 0:e.organizationId,l]);const b=async()=>{if(null==e?void 0:e.organizationId)try{o(!0);const{data:t,error:r}=await ki.from("etl_file").select("*").eq("organization_id",e.organizationId).order("uploaded_at",{ascending:!1});if(r)throw r;a(t||[])}catch(t){}finally{o(!1)}},_=async e=>{try{const{data:t,error:a}=await ki.from("etl_run_log").select("*").eq("entity_id",e).eq("entity_type","etl_file").order("timestamp",{ascending:!1}).limit(100);if(a)throw a;n(t||[])}catch(t){}},j=e=>{const t={uploaded:Mt,processing:lt,validated:Ve,approved:ot,loaded:ha,error:We}[e]||gt;return r.jsx(t,{className:"h-4 w-4 "+("processing"===e?"animate-spin":"")})},w=t.filter(e=>{const t=e.filename.toLowerCase().includes(d.toLowerCase()),a="all"===h||e.status===h;return t&&a}),N=i.filter(e=>"all"===m||e.level===m),S=e=>"uploaded"===e.status,C=e=>"processing"===e.status,k=e=>"validated"===e.status,M=e=>"approved"===e.status;return s?r.jsx(BI,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(lt,{className:"h-8 w-8 animate-spin"})})}):r.jsx(BI,{children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Operaes ETL"}),r.jsx("p",{className:"text-muted-foreground",children:"Gerencie arquivos ETL, monitore status e visualize logs de processamento"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Buscar arquivos...",value:d,onChange:e=>u(e.target.value),className:"pl-10 w-64"})]}),r.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[r.jsx("option",{value:"all",children:"Todos os Status"}),r.jsx("option",{value:"uploaded",children:"Carregado"}),r.jsx("option",{value:"processing",children:"Processando"}),r.jsx("option",{value:"validated",children:"Validado"}),r.jsx("option",{value:"approved",children:"Aprovado"}),r.jsx("option",{value:"loaded",children:"Carregado para DW"}),r.jsx("option",{value:"error",children:"Erro"})]}),r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>y(!v),className:v?"bg-green-50 border-green-200":"",children:[v?r.jsx(Ge,{className:"h-4 w-4 mr-2 text-green-600"}):r.jsx(Aa,{className:"h-4 w-4 mr-2"}),v?"Tempo Real Ativo":"Tempo Real"]}),r.jsx(qi,{variant:"outline",size:"sm",onClick:b,disabled:s,children:s?r.jsx(lt,{className:"h-4 w-4 animate-spin"}):r.jsx(Aa,{className:"h-4 w-4"})})]})]}),r.jsxs(nA,{defaultValue:"files",className:"space-y-4",children:[r.jsxs(sA,{children:[r.jsx(oA,{value:"files",children:"Arquivos ETL"}),r.jsx(oA,{value:"logs",children:"Timeline de Logs"})]}),r.jsx(lA,{value:"files",className:"space-y-4",children:r.jsx("div",{className:"grid gap-4",children:0===w.length?r.jsx(Ii,{children:r.jsxs(zi,{className:"flex flex-col items-center justify-center py-8",children:[r.jsx(gt,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Nenhum arquivo ETL encontrado"})]})}):w.map(t=>{return r.jsxs(Ii,{className:"hover:shadow-md transition-shadow",children:[r.jsx(Ai,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[j(t.status),r.jsxs("div",{children:[r.jsx(Pi,{className:"text-lg",children:t.filename}),r.jsxs(Li,{children:["Carregado em ",new Date(t.uploadedAt).toLocaleString("pt-BR"),t.fileSize&&`  ${(t.fileSize/1024/1024).toFixed(2)} MB`]})]})]}),r.jsxs(Oi,{className:(a=t.status,{uploaded:"bg-blue-100 text-blue-800",processing:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",approved:"bg-purple-100 text-purple-800",loaded:"bg-emerald-100 text-emerald-800",error:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"),children:["uploaded"===t.status&&"Carregado","processing"===t.status&&"Processando","validated"===t.status&&"Validado","approved"===t.status&&"Aprovado","loaded"===t.status&&"Carregado para DW","error"===t.status&&"Erro"]})]})}),r.jsxs(zi,{children:[t.validationSummary&&r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4 p-3 bg-muted rounded-lg",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:t.validationSummary.totalRows}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.validationSummary.validRows}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Vlidos"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.validationSummary.errorRows}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Erros"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.validationSummary.warnings}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Avisos"})]})]}),t.errorMessage&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-800 text-sm",children:t.errorMessage})}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(qi,{size:"sm",onClick:()=>(async t=>{x(e=>new Set([...e,t.id]));try{const{error:a}=await ki.functions.invoke("process-etl-file",{body:{fileId:t.id,organizationId:null==e?void 0:e.organizationId}});if(a)throw a;await b()}catch(a){}finally{x(e=>{const a=new Set(e);return a.delete(t.id),a})}})(t),disabled:!S(t)||g.has(t.id),variant:S(t)?"default":"secondary",children:[g.has(t.id)?r.jsx(lt,{className:"h-4 w-4 animate-spin mr-2"}):r.jsx(Da,{className:"h-4 w-4 mr-2"}),"Processar"]}),r.jsxs(qi,{size:"sm",onClick:()=>(async t=>{x(e=>new Set([...e,t.id]));try{const{error:a}=await ki.functions.invoke("validate-etl-file",{body:{fileId:t.id,organizationId:null==e?void 0:e.organizationId}});if(a)throw a;await b()}catch(a){}finally{x(e=>{const a=new Set(e);return a.delete(t.id),a})}})(t),disabled:!C(t)||g.has(t.id),variant:C(t)?"default":"secondary",children:[r.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Validar"]}),r.jsxs(qi,{size:"sm",onClick:()=>(async e=>{x(t=>new Set([...t,e.id]));try{const{error:t}=await ki.from("etl_file").update({status:"approved"}).eq("id",e.id);if(t)throw t;await b()}catch(t){}finally{x(t=>{const a=new Set(t);return a.delete(e.id),a})}})(t),disabled:!k(t)||g.has(t.id),variant:k(t)?"default":"secondary",children:[r.jsx(ot,{className:"h-4 w-4 mr-2"}),"Aprovar"]}),r.jsxs(qi,{size:"sm",onClick:()=>(async t=>{x(e=>new Set([...e,t.id]));try{const{error:a}=await ki.functions.invoke("load-etl-file",{body:{fileId:t.id,organizationId:null==e?void 0:e.organizationId}});if(a)throw a;await b()}catch(a){}finally{x(e=>{const a=new Set(e);return a.delete(t.id),a})}})(t),disabled:!M(t)||g.has(t.id),variant:M(t)?"default":"secondary",children:[r.jsx(ha,{className:"h-4 w-4 mr-2"}),"Carregar para DW"]}),r.jsxs(qi,{size:"sm",variant:"outline",onClick:()=>c(t),children:[r.jsx(He,{className:"h-4 w-4 mr-2"}),"Ver Logs"]})]})]})]},t.id);var a})})}),r.jsxs(lA,{value:"logs",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:m,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[r.jsx("option",{value:"all",children:"Todos os Nveis"}),r.jsx("option",{value:"info",children:"Info"}),r.jsx("option",{value:"warning",children:"Aviso"}),r.jsx("option",{value:"error",children:"Erro"})]}),l&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Logs para: ",r.jsx("strong",{children:l.filename})]})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Timeline de Logs"}),r.jsx(Li,{children:"Histrico de operaes ETL em ordem cronolgica"})]}),r.jsx(zi,{children:0===N.length?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx(He,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:l?"Nenhum log encontrado para este arquivo":"Selecione um arquivo para ver os logs"})]}):r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:N.map(e=>{return r.jsxs("div",{className:"flex gap-4 p-3 border-l-4 border-l-blue-200 bg-slate-50 rounded-r-lg",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Oi,{variant:"outline",className:(t=e.level,{info:"text-blue-600",warning:"text-yellow-600",error:"text-red-600"}[t]||"text-gray-600"),children:e.level.toUpperCase()})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:e.message}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString("pt-BR")}),e.metadata&&Object.keys(e.metadata).length>0&&r.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-2 overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]},e.id);var t})})})]})]})]})]})})},Fz=()=>{var e,t,a,i,n,s,o,l;const{user:c}=Di(),[d,u]=ke.useState(null),[h,p]=ke.useState([]),[m,f]=ke.useState([]),[g,x]=ke.useState(!0),[v,y]=ke.useState("24h"),[b,_]=ke.useState("hourly"),[j,w]=ke.useState(!1),N={uploaded:"#3b82f6",processing:"#f59e0b",validated:"#10b981",approved:"#8b5cf6",loaded:"#059669",failed:"#ef4444"},S={low:"#10b981",medium:"#f59e0b",high:"#f97316",critical:"#ef4444"};ke.useEffect(()=>{C()},[c,v,b]),ke.useEffect(()=>{if(!j)return;const e=setInterval(()=>{C()},3e4);return()=>clearInterval(e)},[j,v,b]);const C=async()=>{if(null==c?void 0:c.organizationId)try{x(!0),await Promise.all([k(),M(),T()])}catch(e){}finally{x(!1)}},k=async()=>{const{data:e,error:t}=await ki.from("etl_file").select("status").eq("organization_id",null==c?void 0:c.organizationId);if(t)throw t;const{data:a,error:r}=await ki.from("etl_performance_snapshots").select("*").eq("organization_id",null==c?void 0:c.organizationId).eq("snapshot_period","hourly").order("snapshot_time",{ascending:!1}).limit(1).single();r&&r.code;const{data:i,error:n}=await ki.from("etl_dead_letter_queue").select("id").eq("organization_id",null==c?void 0:c.organizationId).eq("resolved",!1);if(n)throw n;const s=(null==e?void 0:e.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}))||{};u({totalFiles:(null==e?void 0:e.length)||0,processingFiles:s.processing||0,successRate:(null==a?void 0:a.success_rate_percentage)||100,errorRate:(null==a?void 0:a.error_rate_percentage)||0,avgProcessingTime:(null==a?void 0:a.avg_processing_time_ms)||0,dlqSize:(null==i?void 0:i.length)||0,activeRetries:(null==a?void 0:a.active_retries)||0})},M=async()=>{const e="1h"===v?60:"24h"===v?24:"7d"===v?168:720,{data:t,error:a}=await ki.from("etl_performance_snapshots").select("*").eq("organization_id",null==c?void 0:c.organizationId).eq("snapshot_period",b).order("snapshot_time",{ascending:!1}).limit(e);if(a)throw a;const r=(null==t?void 0:t.map(e=>({snapshotTime:new Date(e.snapshot_time).toLocaleString("pt-BR"),totalFilesProcessed:e.total_files_processed,filesUploaded:e.files_uploaded,filesProcessing:e.files_processing,filesValidated:e.files_validated,filesApproved:e.files_approved,filesLoaded:e.files_loaded,filesFailed:e.files_failed,avgProcessingTimeMs:e.avg_processing_time_ms,errorRatePercentage:e.error_rate_percentage,successRatePercentage:e.success_rate_percentage,throughputRecordsPerMinute:e.throughput_records_per_minute,dlqEntries:e.dlq_entries,activeRetries:e.active_retries})).reverse())||[];p(r)},T=async()=>{const{data:e,error:t}=await ki.from("etl_alert_history").select("id, alert_name, severity, triggered_at, acknowledged, resolved").eq("organization_id",null==c?void 0:c.organizationId).order("triggered_at",{ascending:!1}).limit(10);if(t)throw t;const a=(null==e?void 0:e.map(e=>({id:e.id,alertName:e.alert_name,severity:e.severity,triggeredAt:new Date(e.triggered_at).toLocaleString("pt-BR"),acknowledged:e.acknowledged,resolved:e.resolved})))||[];f(a)},D=e=>e<1e3?`${Math.round(e)}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`,I=d?[{name:"Carregados",value:(null==(e=h[h.length-1])?void 0:e.filesUploaded)||0,color:N.uploaded},{name:"Processando",value:(null==(t=h[h.length-1])?void 0:t.filesProcessing)||0,color:N.processing},{name:"Validados",value:(null==(a=h[h.length-1])?void 0:a.filesValidated)||0,color:N.validated},{name:"Aprovados",value:(null==(i=h[h.length-1])?void 0:i.filesApproved)||0,color:N.approved},{name:"Carregados DW",value:(null==(n=h[h.length-1])?void 0:n.filesLoaded)||0,color:N.loaded},{name:"Falhas",value:(null==(s=h[h.length-1])?void 0:s.filesFailed)||0,color:N.failed}].filter(e=>e.value>0):[];return g?r.jsx(BI,{children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Aa,{className:"h-8 w-8 animate-spin"})})}):r.jsx(BI,{children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard de Mtricas ETL"}),r.jsx("p",{className:"text-muted-foreground",children:"Monitoramento em tempo real do pipeline ETL e mtricas de performance"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(en,{value:v,onValueChange:e=>y(e),children:[r.jsx(an,{className:"w-32",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"1h",children:"1 Hora"}),r.jsx(on,{value:"24h",children:"24 Horas"}),r.jsx(on,{value:"7d",children:"7 Dias"}),r.jsx(on,{value:"30d",children:"30 Dias"})]})]}),r.jsxs(en,{value:b,onValueChange:e=>_(e),children:[r.jsx(an,{className:"w-32",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"hourly",children:"Por Hora"}),r.jsx(on,{value:"daily",children:"Por Dia"}),r.jsx(on,{value:"weekly",children:"Por Semana"})]})]}),r.jsxs(qi,{variant:"outline",size:"sm",onClick:()=>w(!j),className:j?"bg-green-50 border-green-200":"",children:[j?r.jsx(Ge,{className:"h-4 w-4 mr-2 text-green-600"}):r.jsx(Aa,{className:"h-4 w-4 mr-2"}),j?"Auto Refresh":"Manual"]}),r.jsx(qi,{variant:"outline",size:"sm",onClick:C,children:r.jsx(Aa,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Total de Arquivos"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:(null==d?void 0:d.totalFiles)||0}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(yt,{className:"h-3 w-3 mr-1"}),"Processados"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Processando"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(null==d?void 0:d.processingFiles)||0}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(He,{className:"h-3 w-3 mr-1"}),"Em andamento"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Taxa de Sucesso"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(null==(o=null==d?void 0:d.successRate)?void 0:o.toFixed(1))||100,"%"]}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Concludos"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Taxa de Erro"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[(null==(l=null==d?void 0:d.errorRate)?void 0:l.toFixed(1))||0,"%"]}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(We,{className:"h-3 w-3 mr-1"}),"Falhas"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Tempo Mdio"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:D((null==d?void 0:d.avgProcessingTime)||0)}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(Ue,{className:"h-3 w-3 mr-1"}),"Processamento"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"DLQ"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(null==d?void 0:d.dlqSize)||0}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(Ze,{className:"h-3 w-3 mr-1"}),"Entradas"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-2",children:r.jsx(Pi,{className:"text-sm font-medium text-muted-foreground",children:"Tentativas"})}),r.jsxs(zi,{className:"pb-2",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(null==d?void 0:d.activeRetries)||0}),r.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[r.jsx(Aa,{className:"h-3 w-3 mr-1"}),"Ativas"]})]})]})]}),r.jsxs(nA,{defaultValue:"performance",className:"space-y-4",children:[r.jsxs(sA,{children:[r.jsx(oA,{value:"performance",children:"Performance"}),r.jsx(oA,{value:"status",children:"Status dos Arquivos"}),r.jsx(oA,{value:"errors",children:"Anlise de Erros"}),r.jsx(oA,{value:"alerts",children:"Alertas"})]}),r.jsxs(lA,{value:"performance",className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Tempo de Processamento"}),r.jsx(Li,{children:"Evoluo do tempo mdio de processamento"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(ir,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{}),r.jsx(Xa,{formatter:e=>[D(e),"Tempo"]}),r.jsx(nr,{type:"monotone",dataKey:"avgProcessingTimeMs",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6"}})]})})})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Taxa de Sucesso vs Erro"}),r.jsx(Li,{children:"Evoluo das taxas de sucesso e erro"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(sr,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{domain:[0,100]}),r.jsx(Xa,{formatter:e=>[`${e}%`,""]}),r.jsx(or,{type:"monotone",dataKey:"successRatePercentage",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Sucesso"}),r.jsx(or,{type:"monotone",dataKey:"errorRatePercentage",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"Erro"})]})})})]})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Throughput de Processamento"}),r.jsx(Li,{children:"Arquivos processados por perodo de tempo"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Za,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{}),r.jsx(Xa,{}),r.jsx(ar,{dataKey:"totalFilesProcessed",fill:"#3b82f6",name:"Arquivos Processados"})]})})})]})]}),r.jsx(lA,{value:"status",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Distribuio por Status"}),r.jsx(Li,{children:"Status atual dos arquivos ETL"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs($a,{children:[r.jsx(Ya,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:I.map((e,t)=>r.jsx(Ka,{fill:e.color},`cell-${t}`))}),r.jsx(Xa,{})]})})})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Evoluo por Status"}),r.jsx(Li,{children:"Mudanas nos status ao longo do tempo"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(sr,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{}),r.jsx(Xa,{}),r.jsx(or,{type:"monotone",dataKey:"filesUploaded",stackId:"1",stroke:N.uploaded,fill:N.uploaded,fillOpacity:.6,name:"Carregados"}),r.jsx(or,{type:"monotone",dataKey:"filesProcessing",stackId:"1",stroke:N.processing,fill:N.processing,fillOpacity:.6,name:"Processando"}),r.jsx(or,{type:"monotone",dataKey:"filesValidated",stackId:"1",stroke:N.validated,fill:N.validated,fillOpacity:.6,name:"Validados"}),r.jsx(or,{type:"monotone",dataKey:"filesLoaded",stackId:"1",stroke:N.loaded,fill:N.loaded,fillOpacity:.6,name:"Carregados"})]})})})]})]})}),r.jsx(lA,{value:"errors",className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Dead Letter Queue"}),r.jsx(Li,{children:"Entradas em fila de reprocessamento"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(ir,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{}),r.jsx(Xa,{}),r.jsx(nr,{type:"monotone",dataKey:"dlqEntries",stroke:"#f97316",strokeWidth:2,name:"Entradas DLQ"}),r.jsx(nr,{type:"monotone",dataKey:"activeRetries",stroke:"#3b82f6",strokeWidth:2,name:"Tentativas Ativas"})]})})})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Arquivos com Falha"}),r.jsx(Li,{children:"Evoluo de arquivos que falharam no processamento"})]}),r.jsx(zi,{children:r.jsx(Ua,{width:"100%",height:300,children:r.jsxs(Za,{data:h,children:[r.jsx(Qa,{strokeDasharray:"3 3"}),r.jsx(Ja,{dataKey:"snapshotTime"}),r.jsx(er,{}),r.jsx(Xa,{}),r.jsx(ar,{dataKey:"filesFailed",fill:"#ef4444",name:"Arquivos com Falha"})]})})})]})]})}),r.jsx(lA,{value:"alerts",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Alertas Recentes"}),r.jsx(Li,{children:"ltimos alertas disparados pelo sistema"})]}),r.jsx(zi,{children:0===m.length?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(St,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Nenhum alerta recente"})]}):r.jsx("div",{className:"space-y-4",children:m.map(e=>r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S[e.severity]}}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.alertName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.triggeredAt,"  ",e.severity.toUpperCase()]})]})]}),r.jsx("div",{className:"flex gap-2",children:e.resolved?r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Resolvido"}):e.acknowledged?r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Reconhecido"}):r.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Ativo"})})]},e.id))})})]})})]})]})})};var Bz="Switch",[qz]=u(Bz),[Vz,Hz]=qz(Bz),Wz=ke.forwardRef((e,t)=>{const{__scopeSwitch:a,name:i,checked:n,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[p,m]=ke.useState(null),f=v(t,e=>m(e)),g=ke.useRef(!1),x=!p||(u||!!p.closest("form")),[y,_]=b({prop:n,defaultProp:s??!1,onChange:d,caller:Bz});return r.jsxs(Vz,{scope:a,checked:y,disabled:l,children:[r.jsx(w.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Yz(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:f,onClick:N(e.onClick,e=>{_(e=>!e),x&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),x&&r.jsx($z,{control:p,bubbles:!g.current,name:i,value:c,checked:y,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});Wz.displayName=Bz;var Gz="SwitchThumb",Uz=ke.forwardRef((e,t)=>{const{__scopeSwitch:a,...i}=e,n=Hz(Gz,a);return r.jsx(w.span,{"data-state":Yz(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t})});Uz.displayName=Gz;var $z=ke.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:i=!0,...n},s)=>{const o=ke.useRef(null),l=v(o,s),c=je(a),d=we(t);return ke.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==a&&r){const t=new Event("click",{bubbles:i});r.call(e,a),e.dispatchEvent(t)}},[c,a,i]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Yz(e){return e?"checked":"unchecked"}$z.displayName="SwitchBubbleInput";var Kz=Wz,Xz=Uz;const Zz=ke.forwardRef(({className:e,...t},a)=>r.jsx(Kz,{className:vr("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:a,children:r.jsx(Xz,{className:vr("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zz.displayName=Kz.displayName;const Qz=()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["pastos",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_pastos").select("\n          *,\n          setor:dim_setores(id, nome, codigo, tipo)\n        ").eq("organization_id",t).eq("ativo",!0).order("nome",{ascending:!0});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,n=await(async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a}=await ki.from("dim_pastos").select("codigo").eq("organization_id",t).order("codigo",{ascending:!1}).limit(1);if(a&&a.length>0){const e=a[0].codigo.match(/PST-(\d+)/);if(e){const t=parseInt(e[1])+1;return`PST-${String(t).padStart(3,"0")}`}}return"PST-001"})(),{data:s,error:o}=await ki.from("dim_pastos").insert({organization_id:r,codigo:n,nome:a.nome,area_hectares:a.area_hectares,setor_id:a.setor_id,localizacao:a.localizacao,quantidade_cocho_metros:a.quantidade_cocho_metros,tipo_cocho:a.tipo_cocho,tipo_solo:a.tipo_solo,tipo_pasto:a.tipo_pasto,especie_forrageira:a.especie_forrageira,capacidade_animais:a.capacidade_animais,ativo:a.ativo??!0,created_by:i,updated_by:i}).select("\n          *,\n          setor:dim_setores(id, nome, codigo, tipo)\n        ").single();if(o)throw o;return s},onSuccess:()=>{a.invalidateQueries({queryKey:["pastos"]}),qr.success("Pasto cadastrado com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar pasto. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r=null==t?void 0:t.id,{data:i,error:n}=await ki.from("dim_pastos").update({...a,updated_by:r,updated_at:(new Date).toISOString()}).eq("id",e).select("\n          *,\n          setor:dim_setores(id, nome, codigo, tipo)\n        ").single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["pastos"]}),qr.success("Pasto atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar pasto. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const a=null==t?void 0:t.id,{error:r}=await ki.from("dim_pastos").update({ativo:!1,updated_by:a,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r},onSuccess:()=>{a.invalidateQueries({queryKey:["pastos"]}),qr.success("Pasto excludo com sucesso!")},onError:e=>{qr.error("Erro ao excluir pasto. Tente novamente.")}});return{pastos:r.data||[],isLoading:r.isLoading,error:r.error,createPasto:i.mutate,updatePasto:n.mutate,deletePasto:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending}};function Jz(){const{setores:e,isLoading:t}=kL(),{pastos:a,isLoading:i,createPasto:n,updatePasto:s,deletePasto:o,isCreating:l,isUpdating:c}=Qz(),{lotes:d,isLoading:u,createLote:h,updateLote:p,deleteLote:m,isUpdating:f,isDeleting:g}=IL(),[x,v]=ke.useState({nome:"",area_hectares:0,setor_id:"",localizacao:"",quantidade_cocho_metros:0,tipo_cocho:"",tipo_solo:"",tipo_pasto:"",especie_forrageira:""}),y=()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},b=e=>{if(!e)return"-";const[t,a,r]=e.split("-");return`${r}/${a}/${t}`},[_,j]=ke.useState("coletivo"),[w,N]=ke.useState({quantidade_animais:0,peso_liquido_total:0,data_entrada:y(),pasto_id:"",gmd_informado:0,proteinado:"",sexo:"",observacoes:""}),[S,C]=ke.useState(!1),[k,M]=ke.useState(!1),[T,D]=ke.useState(null),[I,A]=ke.useState(!1),[P,L]=ke.useState(!1),[z,E]=ke.useState(null),[R,O]=ke.useState("coletivo"),[F,B]=ke.useState({quantidade_animais:0,peso_liquido_total:0,data_entrada:y(),pasto_id:"",gmd_informado:0,proteinado:"",sexo:"",observacoes:"",status_pesagem:"coletivo"}),[q,V]=ke.useState(""),[H,W]=ke.useState("nome"),[G,U]=ke.useState("asc"),[$,Y]=ke.useState(""),[K,X]=ke.useState("created_at"),[Z,Q]=ke.useState("desc"),[J,ee]=ke.useState(null),[te,ae]=ke.useState(!1),re=e=>{H===e?U("asc"===G?"desc":"asc"):(W(e),U("asc"))},ie=e=>{K===e?Q("asc"===Z?"desc":"asc"):(X(e),Q("asc"))},ne=ke.useMemo(()=>{let e=a.filter(e=>{var t,a,r,i,n;return e.nome.toLowerCase().includes(q.toLowerCase())||(null==(t=e.setor)?void 0:t.nome.toLowerCase().includes(q.toLowerCase()))||(null==(a=e.tipo_cocho)?void 0:a.toLowerCase().includes(q.toLowerCase()))||(null==(r=e.tipo_solo)?void 0:r.toLowerCase().includes(q.toLowerCase()))||(null==(i=e.tipo_pasto)?void 0:i.toLowerCase().includes(q.toLowerCase()))||(null==(n=e.especie_forrageira)?void 0:n.toLowerCase().includes(q.toLowerCase()))});return e.sort((e,t)=>{var a,r;let i,n;switch(H){case"nome":default:i=e.nome,n=t.nome;break;case"area":i=e.area_hectares||0,n=t.area_hectares||0;break;case"setor":i=(null==(a=e.setor)?void 0:a.nome)||"",n=(null==(r=t.setor)?void 0:r.nome)||"";break;case"localizacao":i=e.localizacao||"",n=t.localizacao||""}if("number"==typeof i&&"number"==typeof n)return"asc"===G?i-n:n-i;const s=String(i).toLowerCase(),o=String(n).toLowerCase();return"asc"===G?s.localeCompare(o):o.localeCompare(s)}),e},[a,q,H,G]),se=ke.useMemo(()=>{let e=d.filter(e=>{var t,a,r,i,n,s;return(null==(t=e.nome)?void 0:t.toLowerCase().includes($.toLowerCase()))||(null==(a=e.pasto)?void 0:a.nome.toLowerCase().includes($.toLowerCase()))||(null==(i=null==(r=e.pasto)?void 0:r.setor)?void 0:i.nome.toLowerCase().includes($.toLowerCase()))||(null==(n=e.sexo)?void 0:n.toLowerCase().includes($.toLowerCase()))||(null==(s=e.proteinado)?void 0:s.toLowerCase().includes($.toLowerCase()))});return e.sort((e,t)=>{var a,r;let i,n;switch(K){case"nome":i=e.nome||"",n=t.nome||"";break;case"pasto":i=(null==(a=e.pasto)?void 0:a.nome)||"",n=(null==(r=t.pasto)?void 0:r.nome)||"";break;case"data_entrada":i=e.data_entrada||"",n=t.data_entrada||"";break;case"animais":i=e.quantidade_animais||0,n=t.quantidade_animais||0;break;case"peso_medio_entrada":i=e.peso_medio_entrada||0,n=t.peso_medio_entrada||0;break;case"sexo":i=e.sexo||"",n=t.sexo||"";break;case"gmd":i=e.gmd_informado||0,n=t.gmd_informado||0;break;case"created_at":default:i=e.created_at||"",n=t.created_at||"";break;case"updated_at":i=e.updated_at||"",n=t.updated_at||""}if("number"==typeof i&&"number"==typeof n)return"asc"===Z?i-n:n-i;const s=String(i).toLowerCase(),o=String(n).toLowerCase();return"asc"===Z?s.localeCompare(o):o.localeCompare(s)}),e},[d,$,K,Z]);return r.jsx(BI,{children:r.jsx("div",{className:"max-w-[1400px] mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Cadastros - Operacional Pasto"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Gerencie o cadastro de pastos e lotes"})]})}),r.jsxs(nA,{defaultValue:"pastos",className:"w-full",children:[r.jsxs(sA,{className:"grid w-full grid-cols-2",children:[r.jsxs(oA,{value:"pastos",className:"flex items-center gap-2",children:[r.jsx(Pa,{className:"h-4 w-4"}),"Pastos"]}),r.jsxs(oA,{value:"lotes",className:"flex items-center gap-2",children:[r.jsx(Qe,{className:"h-4 w-4"}),"Lotes"]})]}),r.jsx(lA,{value:"pastos",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Cadastro de Pastos"}),r.jsx(Li,{children:"Gerencie os pastos disponveis para operao"})]}),r.jsxs(HD,{open:S,onOpenChange:C,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Adicionar Pasto"]})}),r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Pasto"}),r.jsx(ZD,{children:"Preencha as informaes do novo pasto"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"nome",children:"Nome do Pasto *"}),r.jsx(aI,{id:"nome",value:x.nome,onChange:e=>v({...x,nome:e.target.value}),placeholder:"Ex: Pasto Norte"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"area",children:"rea (hectares)"}),r.jsx(aI,{id:"area",type:"number",value:x.area_hectares,onChange:e=>v({...x,area_hectares:Number(e.target.value)}),placeholder:"Ex: 150"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"setor",children:"Setor *"}),r.jsxs("select",{id:"setor",value:x.setor_id,onChange:e=>v({...x,setor_id:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:t?"Carregando setores...":"Selecione um setor"}),e.filter(e=>"pasto"===e.tipo).map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"localizacao",children:"Localizao"}),r.jsx(aI,{id:"localizacao",value:x.localizacao,onChange:e=>v({...x,localizacao:e.target.value}),placeholder:"Ex: Setor Norte"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"quantidade_cocho",children:"Quantidade de Cocho (m)"}),r.jsx(aI,{id:"quantidade_cocho",type:"number",value:x.quantidade_cocho_metros,onChange:e=>v({...x,quantidade_cocho_metros:Number(e.target.value)}),placeholder:"Ex: 80"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"tipo_cocho",children:"Tipo de Cocho"}),r.jsxs("select",{id:"tipo_cocho",value:x.tipo_cocho,onChange:e=>v({...x,tipo_cocho:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de cocho"}),r.jsx("option",{value:"Concreto",children:"Concreto"}),r.jsx("option",{value:"Madeira",children:"Madeira"}),r.jsx("option",{value:"Plstico",children:"Plstico"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"tipo_solo",children:"Tipo de Solo"}),r.jsxs("select",{id:"tipo_solo",value:x.tipo_solo,onChange:e=>v({...x,tipo_solo:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de solo"}),r.jsx("option",{value:"Argiloso",children:"Argiloso"}),r.jsx("option",{value:"Arenoso",children:"Arenoso"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"tipo_pasto",children:"Tipo de Pasto"}),r.jsxs("select",{id:"tipo_pasto",value:x.tipo_pasto,onChange:e=>v({...x,tipo_pasto:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de pasto"}),r.jsx("option",{value:"Rotacionado",children:"Rotacionado"}),r.jsx("option",{value:"Contnuo",children:"Contnuo"}),r.jsx("option",{value:"Alternado",children:"Alternado"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"especie_forrageira",children:"Espcie Forrageira"}),r.jsxs("select",{id:"especie_forrageira",value:x.especie_forrageira,onChange:e=>v({...x,especie_forrageira:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione a espcie forrageira"}),r.jsx("option",{value:"Brachiaria Brizantha",children:"Brachiaria Brizantha"}),r.jsx("option",{value:"Mombaa",children:"Mombaa"}),r.jsx("option",{value:"Paredo",children:"Paredo"}),r.jsx("option",{value:"Piat",children:"Piat"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{x.nome&&x.setor_id?(n(x),v({nome:"",area_hectares:0,setor_id:"",localizacao:"",quantidade_cocho_metros:0,tipo_cocho:"",tipo_solo:"",tipo_pasto:"",especie_forrageira:""}),C(!1)):qr.error("Por favor, preencha todos os campos obrigatrios")},disabled:l,children:l?"Adicionando...":"Adicionar"})]})]})]}),r.jsx(HD,{open:k,onOpenChange:M,children:r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Pasto"}),r.jsx(ZD,{children:"Atualize as informaes do pasto"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-nome",children:"Nome do Pasto *"}),r.jsx(aI,{id:"edit-nome",value:x.nome,onChange:e=>v({...x,nome:e.target.value}),placeholder:"Ex: Pasto Norte"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-area",children:"rea (hectares)"}),r.jsx(aI,{id:"edit-area",type:"number",value:x.area_hectares,onChange:e=>v({...x,area_hectares:Number(e.target.value)}),placeholder:"Ex: 150"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-setor",children:"Setor *"}),r.jsxs("select",{id:"edit-setor",value:x.setor_id,onChange:e=>v({...x,setor_id:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:t?"Carregando setores...":"Selecione um setor"}),e.filter(e=>"pasto"===e.tipo).map(e=>r.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-localizacao",children:"Localizao"}),r.jsx(aI,{id:"edit-localizacao",value:x.localizacao,onChange:e=>v({...x,localizacao:e.target.value}),placeholder:"Ex: Setor Norte"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-quantidade_cocho",children:"Quantidade de Cocho (m)"}),r.jsx(aI,{id:"edit-quantidade_cocho",type:"number",value:x.quantidade_cocho_metros,onChange:e=>v({...x,quantidade_cocho_metros:Number(e.target.value)}),placeholder:"Ex: 80"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-tipo_cocho",children:"Tipo de Cocho"}),r.jsxs("select",{id:"edit-tipo_cocho",value:x.tipo_cocho,onChange:e=>v({...x,tipo_cocho:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de cocho"}),r.jsx("option",{value:"Concreto",children:"Concreto"}),r.jsx("option",{value:"Madeira",children:"Madeira"}),r.jsx("option",{value:"Plstico",children:"Plstico"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-tipo_solo",children:"Tipo de Solo"}),r.jsxs("select",{id:"edit-tipo_solo",value:x.tipo_solo,onChange:e=>v({...x,tipo_solo:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de solo"}),r.jsx("option",{value:"Argiloso",children:"Argiloso"}),r.jsx("option",{value:"Arenoso",children:"Arenoso"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-tipo_pasto",children:"Tipo de Pasto"}),r.jsxs("select",{id:"edit-tipo_pasto",value:x.tipo_pasto,onChange:e=>v({...x,tipo_pasto:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o tipo de pasto"}),r.jsx("option",{value:"Rotacionado",children:"Rotacionado"}),r.jsx("option",{value:"Contnuo",children:"Contnuo"}),r.jsx("option",{value:"Alternado",children:"Alternado"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit-especie_forrageira",children:"Espcie Forrageira"}),r.jsxs("select",{id:"edit-especie_forrageira",value:x.especie_forrageira,onChange:e=>v({...x,especie_forrageira:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione a espcie forrageira"}),r.jsx("option",{value:"Brachiaria Brizantha",children:"Brachiaria Brizantha"}),r.jsx("option",{value:"Mombaa",children:"Mombaa"}),r.jsx("option",{value:"Paredo",children:"Paredo"}),r.jsx("option",{value:"Piat",children:"Piat"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>{M(!1),D(null),v({nome:"",area_hectares:0,setor_id:"",localizacao:"",quantidade_cocho_metros:0,tipo_solo:"",tipo_pasto:"",especie_forrageira:""})},children:"Cancelar"}),r.jsx(qi,{onClick:()=>{x.nome&&x.setor_id?T&&(s({id:T,data:x}),D(null),v({nome:"",area_hectares:0,setor_id:"",localizacao:"",quantidade_cocho_metros:0,tipo_cocho:"",tipo_solo:"",tipo_pasto:"",especie_forrageira:""}),M(!1)):qr.error("Por favor, preencha todos os campos obrigatrios")},disabled:c,children:c?"Atualizando...":"Atualizar"})]})]})})]})}),r.jsxs(zi,{children:[r.jsx("div",{className:"flex items-center space-x-2 mb-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Pesquisar por nome, setor ou localizao...",value:q,onChange:e=>V(e.target.value),className:"pl-8"})]})}),r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>re("nome"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Nome",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>re("area"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["rea (ha)",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>re("setor"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Setor",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:"Cocho (m)"}),r.jsx(SL,{children:"Tipo Cocho"}),r.jsx(SL,{children:"Tipo Solo"}),r.jsx(SL,{children:"Tipo Pasto"}),r.jsx(SL,{children:"Espcie Forrageira"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:i?r.jsx(NL,{children:r.jsx(CL,{colSpan:9,className:"text-center",children:"Carregando pastos..."})}):0===a.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:9,className:"text-center",children:"Nenhum pasto cadastrado"})}):ne.map(e=>{var t,a,i;return r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium whitespace-nowrap",children:e.nome}),r.jsx(CL,{children:e.area_hectares||0}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:(i=(null==(t=e.setor)?void 0:t.tipo)||"",{confinamento:"bg-blue-500/10 text-blue-500 border-blue-500/20",semiconfinamento:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",pasto:"bg-green-500/10 text-green-500 border-green-500/20",enfermaria:"bg-red-500/10 text-red-500 border-red-500/20",maternidade:"bg-pink-500/10 text-pink-500 border-pink-500/20"}[i]||"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:(null==(a=e.setor)?void 0:a.nome)||"-"})}),r.jsxs(CL,{children:[e.quantidade_cocho_metros||0," m"]}),r.jsx(CL,{children:e.tipo_cocho||"-"}),r.jsx(CL,{children:e.tipo_solo||"-"}),r.jsx(CL,{children:e.tipo_pasto||"-"}),r.jsx(CL,{children:e.especie_forrageira||"-"}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{D(e.id),v({nome:e.nome,area_hectares:e.area_hectares||0,setor_id:e.setor_id||"",localizacao:e.localizacao||"",quantidade_cocho_metros:e.quantidade_cocho_metros||0,tipo_cocho:e.tipo_cocho||"",tipo_solo:e.tipo_solo||"",tipo_pasto:e.tipo_pasto||"",especie_forrageira:e.especie_forrageira||""}),M(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void o(t);var t},children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)})})]})]})]})}),r.jsxs(lA,{value:"lotes",className:"space-y-4",children:[r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Cadastro de Lotes"}),r.jsx(Li,{children:"Gerencie os lotes de animais nos pastos"})]}),r.jsxs(HD,{open:I,onOpenChange:A,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Adicionar Lote"]})}),r.jsxs($D,{className:"max-h-[85vh] overflow-y-auto",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Lote"}),r.jsx(ZD,{children:"Preencha as informaes do novo lote"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"quantidade_animais",children:"Quantidade de Animais *"}),r.jsx(aI,{id:"quantidade_animais",type:"number",value:w.quantidade_animais||0,onChange:e=>N({...w,quantidade_animais:Number(e.target.value)}),placeholder:"Ex: 150"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"data_entrada",children:"Data de Entrada *"}),r.jsx(aI,{id:"data_entrada",type:"date",value:w.data_entrada,onChange:e=>N({...w,data_entrada:e.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"pasto_id",children:"Pasto"}),r.jsxs("select",{id:"pasto_id",value:w.pasto_id||"",onChange:e=>N({...w,pasto_id:e.target.value||void 0}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:i?"Carregando pastos...":"Selecione um pasto (opcional)"}),a.map(e=>{var t;return r.jsxs("option",{value:e.id,children:[e.nome," - ",null==(t=e.setor)?void 0:t.nome]},e.id)})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(xL,{className:"text-base font-medium",children:"Tipo de Pesagem"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Escolha se o peso foi obtido de forma coletiva ou individual"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xL,{className:"coletivo"===_?"font-medium":"text-gray-500",children:"Coletivo"}),r.jsx(Zz,{checked:"individual"===_,onCheckedChange:e=>j(e?"individual":"coletivo")}),r.jsx(xL,{className:"individual"===_?"font-medium":"text-gray-500",children:"Individual"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(xL,{htmlFor:"peso_medio",children:["Peso Mdio (","coletivo"===_?"Coletivo":"Individual",") (kg) *"]}),r.jsx(aI,{id:"peso_medio",type:"number",step:"0.01",value:w.peso_liquido_total||0,onChange:e=>N({...w,peso_liquido_total:Number(e.target.value)}),placeholder:"coletivo"===_?"Ex: 200 kg (peso mdio do grupo)":"Ex: 185 kg (peso mdio individual)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"coletivo"===_?"Peso mdio calculado a partir da pesagem coletiva (ex: caminho dividido por nmero de animais)":"Peso mdio baseado na pesagem individual de cada animal"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"gmd_informado",children:"GMD Informado (kg/dia)"}),r.jsx(aI,{id:"gmd_informado",type:"number",step:"0.01",value:w.gmd_informado||0,onChange:e=>N({...w,gmd_informado:Number(e.target.value)}),placeholder:"Ex: 1.2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"proteinado",children:"Proteinado"}),r.jsxs("select",{id:"proteinado",value:w.proteinado||"",onChange:e=>N({...w,proteinado:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o proteinado"}),r.jsx("option",{value:"PROTEINADO 03.%PV",children:"PROTEINADO 03.%PV"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"sexo",children:"Sexo"}),r.jsxs("select",{id:"sexo",value:w.sexo||"",onChange:e=>N({...w,sexo:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o sexo"}),r.jsx("option",{value:"Macho",children:"Macho"}),r.jsx("option",{value:"Fmea",children:"Fmea"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(aI,{id:"observacoes",value:w.observacoes||"",onChange:e=>N({...w,observacoes:e.target.value}),placeholder:"Ex: Animais em bom estado..."})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>A(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!w.quantidade_animais||!w.peso_liquido_total)return void qr.error("Por favor, preencha todos os campos obrigatrios");const e={...w,status_pesagem:_};h(e),j("coletivo"),N({quantidade_animais:0,peso_liquido_total:0,data_entrada:y(),pasto_id:"",gmd_informado:0,proteinado:"",observacoes:""}),A(!1)},children:"Adicionar"})]})]})]})]})}),r.jsxs(zi,{children:[r.jsx("div",{className:"flex items-center space-x-2 mb-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Pesquisar por nome, pasto, setor ou sexo...",value:$,onChange:e=>Y(e.target.value),className:"pl-8"})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(_L,{className:"whitespace-nowrap",children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("nome"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Lote",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("pasto"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Pasto",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("data_entrada"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Data Entrada",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("animais"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Animais",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("peso_medio_entrada"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Peso Entrada",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("sexo"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["Sexo",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:r.jsxs(qi,{variant:"ghost",onClick:()=>ie("gmd"),className:"h-auto p-0 font-semibold hover:bg-transparent",children:["GMD",r.jsx(La,{className:"ml-2 h-4 w-4"})]})}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:u?r.jsx(NL,{children:r.jsx(CL,{colSpan:9,className:"text-center",children:"Carregando lotes..."})}):0===se.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:9,className:"text-center",children:$?"Nenhum lote encontrado com os filtros aplicados":"Nenhum lote cadastrado"})}):se.map(e=>{var t,a;return r.jsxs(NL,{children:[r.jsxs(CL,{children:[r.jsx("div",{className:"font-medium",children:e.nome||"-"}),r.jsx(Oi,{variant:e.ativo?"default":"secondary",className:e.ativo?"cursor-pointer hover:opacity-80 transition-opacity":"",onClick:()=>{e.ativo&&(ee(e),ae(!0))},children:e.ativo?"Ativo":"Inativo"})]}),r.jsxs(CL,{children:[r.jsx("div",{className:"font-medium",children:(null==(t=e.pasto)?void 0:t.nome)||"Sem pasto"}),(null==(a=e.pasto)?void 0:a.setor)&&r.jsx("div",{className:"text-sm text-gray-500",children:e.pasto.setor.nome})]}),r.jsx(CL,{children:r.jsx("div",{children:b(e.data_entrada||"")})}),r.jsx(CL,{children:e.quantidade_animais||0}),r.jsx(CL,{children:e.peso_medio_entrada?`${e.peso_medio_entrada.toFixed(2)} kg`:"-"}),r.jsx(CL,{children:r.jsx(Oi,{variant:"secondary",children:e.sexo||"-"})}),r.jsx(CL,{children:e.gmd_informado?r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium",children:[e.gmd_informado.toFixed(2)," kg/dia"]}),r.jsx("div",{className:"text-sm text-gray-500",children:"Informado"})]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx(CL,{children:r.jsxs(Oi,{variant:"individual"===e.status_pesagem?"default":"destructive",children:[e.sigla_status," - ","individual"===e.status_pesagem?"Individual":"Coletivo"]})}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{E(e),O(e.status_pesagem||"coletivo"),B({quantidade_animais:e.quantidade_animais||0,peso_liquido_total:e.peso_medio_entrada||0,data_entrada:e.data_entrada||y(),pasto_id:e.pasto_id||"",gmd_informado:e.gmd_informado||0,proteinado:e.proteinado||"",sexo:e.sexo||"",observacoes:e.observacoes||"",status_pesagem:e.status_pesagem||"coletivo"}),L(!0)})(e),disabled:f,children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void m(t);var t},disabled:g,children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]}),r.jsx(HD,{open:P,onOpenChange:L,children:r.jsxs($D,{className:"max-w-2xl",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Lote"}),r.jsx(ZD,{children:"Edite as informaes do lote selecionado"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_pasto_id",children:"Pasto"}),r.jsxs("select",{id:"edit_pasto_id",value:F.pasto_id,onChange:e=>B({...F,pasto_id:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione um pasto"}),a.map(e=>{var t;return r.jsxs("option",{value:e.id,children:[e.nome," - ",null==(t=e.setor)?void 0:t.nome]},e.id)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_data_entrada",children:"Data de Entrada"}),r.jsx(aI,{id:"edit_data_entrada",type:"date",value:F.data_entrada,onChange:e=>B({...F,data_entrada:e.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_quantidade_animais",children:"Quantidade de Animais *"}),r.jsx(aI,{id:"edit_quantidade_animais",type:"number",min:"1",value:F.quantidade_animais,onChange:e=>B({...F,quantidade_animais:parseInt(e.target.value)||0})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{children:"Tipo de Pesagem"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xL,{className:"coletivo"===R?"font-medium":"text-gray-500",children:"Coletivo"}),r.jsx(Zz,{checked:"individual"===R,onCheckedChange:e=>O(e?"individual":"coletivo")}),r.jsx(xL,{className:"individual"===R?"font-medium":"text-gray-500",children:"Individual"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(xL,{htmlFor:"edit_peso_liquido_total",children:["Peso mdio (","coletivo"===R?"Coletivo":"Individual",") (kg) *"]}),r.jsx(aI,{id:"edit_peso_liquido_total",type:"number",step:"0.1",min:"0",value:F.peso_liquido_total,onChange:e=>B({...F,peso_liquido_total:parseFloat(e.target.value)||0})})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_gmd_informado",children:"GMD Informado (kg/dia)"}),r.jsx(aI,{id:"edit_gmd_informado",type:"number",step:"0.01",value:F.gmd_informado||0,onChange:e=>B({...F,gmd_informado:Number(e.target.value)}),placeholder:"Ex: 1.2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_proteinado",children:"Proteinado"}),r.jsxs("select",{id:"edit_proteinado",value:F.proteinado||"",onChange:e=>B({...F,proteinado:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o proteinado"}),r.jsx("option",{value:"PROTEINADO 03.%PV",children:"PROTEINADO 03.%PV"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_sexo",children:"Sexo"}),r.jsxs("select",{id:"edit_sexo",value:F.sexo||"",onChange:e=>B({...F,sexo:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione o sexo"}),r.jsx("option",{value:"Macho",children:"Macho"}),r.jsx("option",{value:"Fmea",children:"Fmea"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"edit_observacoes",children:"Observaes"}),r.jsx(aI,{id:"edit_observacoes",value:F.observacoes,onChange:e=>B({...F,observacoes:e.target.value}),placeholder:"Observaes sobre o lote"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(xL,{className:"text-base font-medium",children:"Status do Lote"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:(null==z?void 0:z.ativo)?"Lote est ativo no sistema":"Lote est inativo no sistema"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xL,{className:(null==z?void 0:z.ativo)?"text-gray-500":"font-medium",children:"Inativo"}),r.jsx(Zz,{checked:(null==z?void 0:z.ativo)||!1,onCheckedChange:e=>{z&&E({...z,ativo:e})}}),r.jsx(xL,{className:(null==z?void 0:z.ativo)?"font-medium":"text-gray-500",children:"Ativo"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>L(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!z||!F.quantidade_animais||!F.peso_liquido_total)return void qr.error("Por favor, preencha todos os campos obrigatrios");const e={...F,status_pesagem:R,ativo:z.ativo};p({id:z.id,data:e}),L(!1),E(null),O("coletivo"),B({quantidade_animais:0,peso_liquido_total:0,data_entrada:y(),pasto_id:"",gmd_informado:0,proteinado:"",observacoes:"",status_pesagem:"coletivo"})},disabled:f,children:f?"Atualizando...":"Atualizar"})]})]})})]})]}),r.jsx(HD,{open:te,onOpenChange:ae,children:r.jsxs($D,{className:"sm:max-w-md",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Inativar Lote"}),r.jsx(ZD,{children:"Tem certeza que deseja inativar este lote?"})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>{ae(!1),ee(null)},children:"Cancelar"}),r.jsx(qi,{variant:"destructive",onClick:()=>{J&&(p({id:J.id,data:{ativo:!J.ativo}}),ae(!1),ee(null))},disabled:f,children:f?"Processando...":"Inativar"})]})]})})]})})})}function eE(){const[e,t]=ke.useState([]),[a,i]=ke.useState([]),[n,s]=ke.useState({codigo:"",nome:"",tipo:"pasto",categoria:"",custo_kg:0}),[o,l]=ke.useState({dieta_id:"",data:(new Date).toISOString().split("T")[0],quantidade_fabricada:0,quantidade_estoque:0,quantidade_distribuida:0,lote_fabricacao:""}),[c,d]=ke.useState(!1),[u,h]=ke.useState(!1),p=a.map(t=>({...t,dieta:e.find(e=>e.id===t.dieta_id)})),m=p.reduce((e,t)=>e+t.quantidade_estoque,0),f=p.reduce((e,t)=>e+t.quantidade_fabricada,0),g=p.reduce((e,t)=>e+t.quantidade_distribuida,0),x=f>0?g/f*100:0,v=e=>{switch(e){case"confinamento":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"semiconfinamento":return"bg-purple-500/10 text-purple-500 border-purple-500/20";case"pasto":return"bg-green-500/10 text-green-500 border-green-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}};return r.jsx(BI,{children:r.jsx("div",{className:"max-w-[1400px] mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Estoque Produtos Pasto"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Controle de estoque de proteinados e suplementos para pasto"})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-3",children:r.jsx(Pi,{className:"text-sm font-medium text-text-secondary",children:"Total em Estoque"})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"text-2xl font-bold text-text-primary",children:[m.toLocaleString("pt-BR")," kg"]}),r.jsx(QL,{value:x,className:"mt-2"}),r.jsxs("p",{className:"text-xs text-text-tertiary mt-1",children:[x.toFixed(1),"% utilizado"]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-3",children:r.jsx(Pi,{className:"text-sm font-medium text-text-secondary",children:"Fabricado Hoje"})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"text-2xl font-bold text-text-primary",children:[f.toLocaleString("pt-BR")," kg"]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(et,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-xs text-green-500",children:"+15% vs ontem"})]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-3",children:r.jsx(Pi,{className:"text-sm font-medium text-text-secondary",children:"Distribudo"})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"text-2xl font-bold text-text-primary",children:[g.toLocaleString("pt-BR")," kg"]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(vt,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{className:"text-xs text-text-tertiary",children:"ltimas 24h"})]})]})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{className:"pb-3",children:r.jsx(Pi,{className:"text-sm font-medium text-text-secondary",children:"Tipos de Produto"})}),r.jsxs(zi,{children:[r.jsx("div",{className:"text-2xl font-bold text-text-primary",children:e.filter(e=>"pasto"===e.tipo).length}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx(Oi,{variant:"outline",className:"text-xs",children:"Proteinados"}),r.jsx(Oi,{variant:"outline",className:"text-xs",children:"Minerais"})]})]})]})]}),r.jsxs(nA,{defaultValue:"estoque",className:"w-full",children:[r.jsxs(sA,{className:"grid w-full grid-cols-2",children:[r.jsx(oA,{value:"estoque",children:"Controle de Estoque"}),r.jsx(oA,{value:"dietas",children:"Cadastro de Dietas"})]}),r.jsx(lA,{value:"estoque",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Estoque Atual"}),r.jsx(Li,{children:"Acompanhe o estoque de produtos para pasto"})]}),r.jsxs(HD,{open:u,onOpenChange:h,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Registrar Produo"]})}),r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Registrar Nova Produo"}),r.jsx(ZD,{children:"Adicione uma nova produo ao estoque"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"dieta",children:"Produto *"}),r.jsxs("select",{id:"dieta",value:o.dieta_id,onChange:e=>l({...o,dieta_id:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:"Selecione um produto"}),e.filter(e=>"pasto"===e.tipo).map(e=>r.jsxs("option",{value:e.id,children:[e.nome," - ",e.codigo]},e.id))]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"data",children:"Data *"}),r.jsx(aI,{id:"data",type:"date",value:o.data,onChange:e=>l({...o,data:e.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"fabricado",children:"Quantidade Fabricada (kg)"}),r.jsx(aI,{id:"fabricado",type:"number",value:o.quantidade_fabricada,onChange:e=>l({...o,quantidade_fabricada:Number(e.target.value),quantidade_estoque:Number(e.target.value)-o.quantidade_distribuida}),placeholder:"Ex: 5000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"distribuido",children:"Quantidade Distribuda (kg)"}),r.jsx(aI,{id:"distribuido",type:"number",value:o.quantidade_distribuida,onChange:e=>l({...o,quantidade_distribuida:Number(e.target.value),quantidade_estoque:o.quantidade_fabricada-Number(e.target.value)}),placeholder:"Ex: 2000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"lote",children:"Lote de Fabricao"}),r.jsx(aI,{id:"lote",value:o.lote_fabricacao,onChange:e=>l({...o,lote_fabricacao:e.target.value}),placeholder:"Ex: LF-2024-001"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!o.dieta_id||!o.data)return void qr.error("Por favor, preencha todos os campos obrigatrios");const e={...o,id:Date.now().toString()};i([...a,e]),l({dieta_id:"",data:(new Date).toISOString().split("T")[0],quantidade_fabricada:0,quantidade_estoque:0,quantidade_distribuida:0,lote_fabricacao:""}),h(!1),qr.success("Estoque atualizado com sucesso!")},children:"Registrar"})]})]})]})]})}),r.jsx(zi,{children:r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Produto"}),r.jsx(SL,{children:"Lote"}),r.jsx(SL,{children:"Fabricado"}),r.jsx(SL,{children:"Em Estoque"}),r.jsx(SL,{children:"Distribudo"}),r.jsx(SL,{children:"Status"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:p.map(e=>{var t,a;const i=((e,t)=>{const a=t>0?e/t*100:0;return a>50?{color:"text-green-500",icon:r.jsx(et,{className:"h-4 w-4"})}:a>20?{color:"text-yellow-500",icon:r.jsx(tt,{className:"h-4 w-4"})}:{color:"text-red-500",icon:r.jsx(za,{className:"h-4 w-4"})}})(e.quantidade_estoque,e.quantidade_fabricada);return r.jsxs(NL,{children:[r.jsx(CL,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:null==(t=e.dieta)?void 0:t.nome}),r.jsx("p",{className:"text-xs text-text-tertiary",children:null==(a=e.dieta)?void 0:a.codigo})]})}),r.jsx(CL,{children:e.lote_fabricacao||"-"}),r.jsxs(CL,{children:[e.quantidade_fabricada.toLocaleString("pt-BR")," kg"]}),r.jsx(CL,{children:r.jsxs("span",{className:i.color,children:[e.quantidade_estoque.toLocaleString("pt-BR")," kg"]})}),r.jsxs(CL,{children:[e.quantidade_distribuida.toLocaleString("pt-BR")," kg"]}),r.jsx(CL,{children:r.jsxs("div",{className:`flex items-center gap-1 ${i.color}`,children:[i.icon,r.jsxs("span",{className:"text-xs",children:[(e.quantidade_estoque/e.quantidade_fabricada*100).toFixed(0),"%"]})]})}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})}),r.jsx(lA,{value:"dietas",className:"space-y-4",children:r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Cadastro de Dietas"}),r.jsx(Li,{children:"Gerencie os tipos de dietas e suplementos"})]}),r.jsxs(HD,{open:c,onOpenChange:d,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4"}),"Nova Dieta"]})}),r.jsxs($D,{children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Nova Dieta"}),r.jsx(ZD,{children:"Cadastre uma nova dieta ou suplemento"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"codigo",children:"Cdigo *"}),r.jsx(aI,{id:"codigo",value:n.codigo,onChange:e=>s({...n,codigo:e.target.value}),placeholder:"Ex: PROT-001"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"nome",children:"Nome *"}),r.jsx(aI,{id:"nome",value:n.nome,onChange:e=>s({...n,nome:e.target.value}),placeholder:"Ex: Proteinado Energtico"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"tipo",children:"Tipo *"}),r.jsxs("select",{id:"tipo",value:n.tipo,onChange:e=>s({...n,tipo:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[r.jsx("option",{value:"confinamento",children:"Confinamento"}),r.jsx("option",{value:"semiconfinamento",children:"Semiconfinamento"}),r.jsx("option",{value:"pasto",children:"Pasto"}),r.jsx("option",{value:"enfermaria",children:"Enfermaria"}),r.jsx("option",{value:"maternidade",children:"Maternidade"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"categoria",children:"Categoria"}),r.jsx(aI,{id:"categoria",value:n.categoria,onChange:e=>s({...n,categoria:e.target.value}),placeholder:"Ex: Proteinado, Mineral, Energtico"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{htmlFor:"custo",children:"Custo por kg (R$)"}),r.jsx(aI,{id:"custo",type:"number",step:"0.01",value:n.custo_kg,onChange:e=>s({...n,custo_kg:Number(e.target.value)}),placeholder:"Ex: 2.50"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{if(!n.codigo||!n.nome)return void qr.error("Por favor, preencha todos os campos obrigatrios");const a={...n,id:Date.now().toString()};t([...e,a]),s({codigo:"",nome:"",tipo:"pasto",categoria:"",custo_kg:0}),d(!1),qr.success("Dieta cadastrada com sucesso!")},children:"Cadastrar"})]})]})]})]})}),r.jsx(zi,{children:r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Cdigo"}),r.jsx(SL,{children:"Nome"}),r.jsx(SL,{children:"Tipo"}),r.jsx(SL,{children:"Categoria"}),r.jsx(SL,{children:"Custo/kg"}),r.jsx(SL,{className:"text-right",children:"Aes"})]})}),r.jsx(wL,{children:e.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.codigo}),r.jsx(CL,{children:e.nome}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:v(e.tipo),children:e.tipo})}),r.jsx(CL,{children:e.categoria||"-"}),r.jsx(CL,{children:e.custo_kg?`R$ ${e.custo_kg.toFixed(2)}`:"-"}),r.jsx(CL,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})})]})]})})})}const tE=()=>{const{organization:e,user:t}=Di(),a=Va(),r=qa({queryKey:["dietas",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("dim_dietas").select("*").eq("organization_id",t).order("nome",{ascending:!0});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async t=>{const a=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:r,error:i}=await ki.from("dim_dietas").insert({organization_id:a,nome:t.nome,tipo:t.tipo,cms_percentual_peso_vivo:t.cms_percentual_peso_vivo,descricao:t.descricao,ativo:t.ativo??!0}).select().single();if(i)throw i;return r},onSuccess:()=>{a.invalidateQueries({queryKey:["dietas"]}),qr.success("Dieta cadastrada com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar dieta. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:t})=>{const{data:a,error:r}=await ki.from("dim_dietas").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(r)throw r;return a},onSuccess:()=>{a.invalidateQueries({queryKey:["dietas"]}),qr.success("Dieta atualizada com sucesso!")},onError:e=>{qr.error("Erro ao atualizar dieta. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const{error:t}=await ki.from("dim_dietas").update({ativo:!1,updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t},onSuccess:()=>{a.invalidateQueries({queryKey:["dietas"]}),qr.success("Dieta removida com sucesso!")},onError:e=>{qr.error("Erro ao remover dieta. Tente novamente.")}});return{dietas:r.data||[],isLoading:r.isLoading,error:r.error,createDieta:i.mutate,updateDieta:n.mutate,deleteDieta:s.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending,getDietaById:e=>{var t;return null==(t=r.data)?void 0:t.find(t=>t.id===e)},getDietasByTipo:e=>{var t;return(null==(t=r.data)?void 0:t.filter(t=>t.tipo===e&&t.ativo))||[]}}};function aE(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function rE(e,t){const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&a.every(a=>{const r=e[a],i=t[a];return"function"==typeof r?`${r}`==`${i}`:aE(r)&&aE(i)?rE(r,i):r===i})}function iE(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function nE(e){return"number"==typeof e}function sE(e){return"string"==typeof e}function oE(e){return"boolean"==typeof e}function lE(e){return"[object Object]"===Object.prototype.toString.call(e)}function cE(e){return Math.abs(e)}function dE(e){return Math.sign(e)}function uE(e,t){return cE(e-t)}function hE(e){return xE(e).map(Number)}function pE(e){return e[mE(e)]}function mE(e){return Math.max(0,e.length-1)}function fE(e,t){return t===mE(e)}function gE(e,t=0){return Array.from(Array(e),(e,a)=>t+a)}function xE(e){return Object.keys(e)}function vE(e,t){return[e,t].reduce((e,t)=>(xE(t).forEach(a=>{const r=e[a],i=t[a],n=lE(r)&&lE(i);e[a]=n?vE(r,i):i}),e),{})}function yE(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function bE(){let e=[];const t={add:function(a,r,i,n={passive:!0}){let s;if("addEventListener"in a)a.addEventListener(r,i,n),s=()=>a.removeEventListener(r,i,n);else{const e=a;e.addListener(i),s=()=>e.removeListener(i)}return e.push(s),t},clear:function(){e=e.filter(e=>e())}};return t}function _E(e,t,a,r){const i=bE(),n=1e3/60;let s=null,o=0,l=0;function c(e){if(!l)return;s||(s=e,a(),a());const i=e-s;for(s=e,o+=i;o>=n;)a(),o-=n;r(o/n),l&&(l=t.requestAnimationFrame(c))}function d(){t.cancelAnimationFrame(l),s=null,o=0,l=0}return{init:function(){i.add(e,"visibilitychange",()=>{e.hidden&&(s=null,o=0)})},destroy:function(){d(),i.clear()},start:function(){l||(l=t.requestAnimationFrame(c))},stop:d,update:a,render:r}}function jE(e=0,t=0){const a=cE(e-t);function r(t){return t<e}function i(e){return e>t}function n(e){return r(e)||i(e)}return{length:a,max:t,min:e,constrain:function(a){return n(a)?r(a)?e:t:a},reachedAny:n,reachedMax:i,reachedMin:r,removeOffset:function(e){return a?e-a*Math.ceil((e-t)/a):e}}}function wE(e,t,a){const{constrain:r}=jE(0,e),i=e+1;let n=s(t);function s(e){return a?cE((i+e)%i):r(e)}function o(){return n}function l(){return wE(e,o(),a)}const c={get:o,set:function(e){return n=s(e),c},add:function(e){return l().set(o()+e)},clone:l};return c}function NE(e,t,a,r,i,n,s,o,l,c,d,u,h,p,m,f,g,x,v){const{cross:y,direction:b}=e,_=["INPUT","SELECT","TEXTAREA"],j={passive:!1},w=bE(),N=bE(),S=jE(50,225).constrain(p.measure(20)),C={mouse:300,touch:400},k={mouse:500,touch:600},M=m?43:25;let T=!1,D=0,I=0,A=!1,P=!1,L=!1,z=!1;function E(e){if(!yE(e,r)&&e.touches.length>=2)return R(e);const t=n.readPoint(e),a=n.readPoint(e,y),s=uE(t,D),l=uE(a,I);if(!P&&!z){if(!e.cancelable)return R(e);if(P=s>l,!P)return R(e)}const d=n.pointerMove(e);s>f&&(L=!0),c.useFriction(.3).useDuration(.75),o.start(),i.add(b(d)),e.preventDefault()}function R(e){const t=d.byDistance(0,!1).index!==u.get(),a=n.pointerUp(e)*(m?k:C)[z?"mouse":"touch"],r=function(e,t){const a=u.add(-1*dE(e)),r=d.byDistance(e,!m).distance;return m||cE(e)<S?r:g&&t?.5*r:d.byIndex(a.get(),0).distance}(b(a),t),i=function(e,t){if(0===e||0===t)return 0;if(cE(e)<=cE(t))return 0;const a=uE(cE(e),cE(t));return cE(a/e)}(a,r),s=M-10*i,o=x+i/50;P=!1,A=!1,N.clear(),c.useDuration(s).useFriction(o),l.distance(r,!m),z=!1,h.emit("pointerUp")}function O(e){L&&(e.stopPropagation(),e.preventDefault(),L=!1)}return{init:function(e){if(!v)return;function o(o){(oE(v)||v(e,o))&&function(e){const o=yE(e,r);if(z=o,L=m&&o&&!e.buttons&&T,T=uE(i.get(),s.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return _.includes(t)}(e.target))return;A=!0,n.pointerDown(e),c.useFriction(0).useDuration(0),i.set(s),function(){const e=z?a:t;N.add(e,"touchmove",E,j).add(e,"touchend",R).add(e,"mousemove",E,j).add(e,"mouseup",R)}(),D=n.readPoint(e),I=n.readPoint(e,y),h.emit("pointerDown")}(o)}const l=t;w.add(l,"dragstart",e=>e.preventDefault(),j).add(l,"touchmove",()=>{},j).add(l,"touchend",()=>{}).add(l,"touchstart",o).add(l,"mousedown",o).add(l,"touchcancel",R).add(l,"contextmenu",R).add(l,"click",O,!0)},destroy:function(){w.clear(),N.clear()},pointerDown:function(){return A}}}function SE(e,t){let a,r;function i(e){return e.timeStamp}function n(a,r){const i="client"+("x"===(r||e.scroll)?"X":"Y");return(yE(a,t)?a:a.touches[0])[i]}return{pointerDown:function(e){return a=e,r=e,n(e)},pointerMove:function(e){const t=n(e)-n(r),s=i(e)-i(a)>170;return r=e,s&&(a=e),t},pointerUp:function(e){if(!a||!r)return 0;const t=n(r)-n(a),s=i(e)-i(a),o=i(e)-i(r)>170,l=t/s;return s&&!o&&cE(l)>.1?l:0},readPoint:n}}function CE(e,t,a,r,i,n,s){const o=[e].concat(r);let l,c,d=[],u=!1;function h(e){return i.measureSize(s.measure(e))}return{init:function(i){n&&(c=h(e),d=r.map(h),l=new ResizeObserver(a=>{(oE(n)||n(i,a))&&function(a){for(const n of a){if(u)return;const a=n.target===e,s=r.indexOf(n.target),o=a?c:d[s];if(cE(h(a?e:r[s])-o)>=.5){i.reInit(),t.emit("resize");break}}}(a)}),a.requestAnimationFrame(()=>{o.forEach(e=>l.observe(e))}))},destroy:function(){u=!0,l&&l.disconnect()}}}function kE(e,t,a,r,i){const n=i.measure(10),s=i.measure(50),o=jE(.1,.99);let l=!1;function c(){return!l&&(!!e.reachedAny(a.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:c,constrain:function(i){if(!c())return;const l=e.reachedMin(t.get())?"min":"max",d=cE(e[l]-t.get()),u=a.get()-t.get(),h=o.constrain(d/s);a.subtract(u*h),!i&&cE(u)<n&&(a.set(e.constrain(a.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){l=!e}}}function ME(e,t,a,r){const i=t.min+.1,n=t.max+.1,{reachedMin:s,reachedMax:o}=jE(i,n);return{loop:function(t){if(!function(e){return 1===e?o(a.get()):-1===e&&s(a.get())}(t))return;const i=e*(-1*t);r.forEach(e=>e.add(i))}}}function TE(e,t,a,r,i){const{reachedAny:n,removeOffset:s,constrain:o}=r;function l(e){return e.concat().sort((e,t)=>cE(e)-cE(t))[0]}function c(t,r){const i=[t,t+a,t-a];if(!e)return t;if(!r)return l(i);const n=i.filter(e=>dE(e)===r);return n.length?l(n):pE(i)-a}const d={byDistance:function(a,r){const l=i.get()+a,{index:d,distance:u}=function(a){const r=e?s(a):o(a),i=t.map((e,t)=>({diff:c(e-r,0),index:t})).sort((e,t)=>cE(e.diff)-cE(t.diff)),{index:n}=i[0];return{index:n,distance:r}}(l),h=!e&&n(l);return!r||h?{index:d,distance:a}:{index:d,distance:a+c(t[d]-u,0)}},byIndex:function(e,a){return{index:e,distance:c(t[e]-i.get(),a)}},shortcut:c};return d}function DE(e,t,a,r,i,n,s,o){const l={passive:!0,capture:!0};let c=0;function d(e){"Tab"===e.code&&(c=(new Date).getTime())}return{init:function(u){o&&(n.add(document,"keydown",d,!1),t.forEach((t,d)=>{n.add(t,"focus",t=>{(oE(o)||o(u,t))&&function(t){if((new Date).getTime()-c>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const n=a.findIndex(e=>e.includes(t));nE(n)&&(i.useDuration(0),r.index(n,0),s.emit("slideFocus"))}(d)},l)}))}}}function IE(e){let t=e;function a(e){return nE(e)?e:e.get()}return{get:function(){return t},set:function(e){t=a(e)},add:function(e){t+=a(e)},subtract:function(e){t-=a(e)}}}function AE(e,t){const a="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let i=null,n=!1;const s={clear:function(){n||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(n)return;const s=(o=e.direction(t),Math.round(100*o)/100);var o;s!==i&&(r.transform=a(s),i=s)},toggleActive:function(e){n=!e}};return s}function PE(e,t,a,r,i,n,s,o,l){const c=hE(i),d=hE(i).reverse(),u=function(){const e=s[0];return m(p(d,e),a,!1)}().concat(function(){const e=t-s[0]-1;return m(p(c,e),-a,!0)}());function h(e,t){return e.reduce((e,t)=>e-i[t],t)}function p(e,t){return e.reduce((e,a)=>h(e,t)>0?e.concat([a]):e,[])}function m(i,s,c){const d=function(e){return n.map((a,i)=>({start:a-r[i]+.5+e,end:a+t-.5+e}))}(s);return i.map(t=>{const r=c?0:-a,i=c?a:0,n=c?"end":"start",s=d[t][n];return{index:t,loopPoint:s,slideLocation:IE(-1),translate:AE(e,l[t]),target:()=>o.get()>s?r:i}})}const f={canLoop:function(){return u.every(({index:e})=>h(c.filter(t=>t!==e),t)<=.1)},clear:function(){u.forEach(e=>e.translate.clear())},loop:function(){u.forEach(e=>{const{target:t,translate:a,slideLocation:r}=e,i=t();i!==r.get()&&(a.to(i),r.set(i))})},loopPoints:u};return f}function LE(e,t,a){let r,i=!1;return{init:function(n){a&&(r=new MutationObserver(e=>{i||(oE(a)||a(n,e))&&function(e){for(const a of e)if("childList"===a.type){n.reInit(),t.emit("slidesChanged");break}}(e)}),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),i=!0}}}function zE(e,t,a,r){const i={};let n,s=null,o=null,l=!1;return{init:function(){n=new IntersectionObserver(e=>{l||(e.forEach(e=>{const a=t.indexOf(e.target);i[a]=e}),s=null,o=null,a.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>n.observe(e))},destroy:function(){n&&n.disconnect(),l=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;const t=function(e){return xE(i).reduce((t,a)=>{const r=parseInt(a),{isIntersecting:n}=i[r];return(e&&n||!e&&!n)&&t.push(r),t},[])}(e);return e&&(s=t),e||(o=t),t}}}function EE(e,t,a,r,i,n,s,o,l){const{startEdge:c,endEdge:d,direction:u}=e,h=nE(a);return{groupSlides:function(e){return h?function(e,t){return hE(e).filter(e=>e%t===0).map(a=>e.slice(a,a+t))}(e,a):function(e){return e.length?hE(e).reduce((a,h,p)=>{const m=pE(a)||0,f=0===m,g=h===mE(e),x=i[c]-n[m][c],v=i[c]-n[h][d],y=!r&&f?u(s):0,b=cE(v-(!r&&g?u(o):0)-(x+y));return p&&b>t+l&&a.push(h),g&&a.push(e.length),a},[]).map((t,a,r)=>{const i=Math.max(r[a-1]||0);return e.slice(i,t)}):[]}(e)}}}function RE(e,t,a,r,i,n,s){const{align:o,axis:l,direction:c,startIndex:d,loop:u,duration:h,dragFree:p,dragThreshold:m,inViewThreshold:f,slidesToScroll:g,skipSnaps:x,containScroll:v,watchResize:y,watchSlides:b,watchDrag:_,watchFocus:j}=n,w={measure:function(e){const{offsetTop:t,offsetLeft:a,offsetWidth:r,offsetHeight:i}=e;return{top:t,right:a+r,bottom:t+i,left:a,width:r,height:i}}},N=w.measure(t),S=a.map(w.measure),C=function(e,t){const a="rtl"===t,r="y"===e,i=!r&&a?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":a?"right":"left",endEdge:r?"bottom":a?"left":"right",measureSize:function(e){const{height:t,width:a}=e;return r?t:a},direction:function(e){return e*i}}}(l,c),k=C.measureSize(N),M=function(e){return{measure:function(t){return e*(t/100)}}}(k),T=function(e,t){const a={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}return{measure:function(r,i){return sE(e)?a[e](r):e(t,r,i)}}}(o,k),D=!u&&!!v,I=u||!!v,{slideSizes:A,slideSizesWithGaps:P,startGap:L,endGap:z}=function(e,t,a,r,i,n){const{measureSize:s,startEdge:o,endEdge:l}=e,c=a[0]&&i,d=function(){if(!c)return 0;const e=a[0];return cE(t[o]-e[o])}(),u=function(){if(!c)return 0;const e=n.getComputedStyle(pE(r));return parseFloat(e.getPropertyValue(`margin-${l}`))}(),h=a.map(s),p=a.map((e,t,a)=>{const r=!t,i=fE(a,t);return r?h[t]+d:i?h[t]+u:a[t+1][o]-e[o]}).map(cE);return{slideSizes:h,slideSizesWithGaps:p,startGap:d,endGap:u}}(C,N,S,a,I,i),E=EE(C,k,g,u,N,S,L,z,2),{snaps:R,snapsAligned:O}=function(e,t,a,r,i){const{startEdge:n,endEdge:s}=e,{groupSlides:o}=i,l=o(r).map(e=>pE(e)[s]-e[0][n]).map(cE).map(t.measure),c=r.map(e=>a[n]-e[n]).map(e=>-cE(e)),d=o(c).map(e=>e[0]).map((e,t)=>e+l[t]);return{snaps:c,snapsAligned:d}}(C,T,N,S,E),F=-pE(R)+pE(P),{snapsContained:B,scrollContainLimit:q}=function(e,t,a,r,i){const n=jE(-t+e,0),s=a.map((e,t)=>{const{min:r,max:i}=n,s=n.constrain(e),o=!t,c=fE(a,t);return o?i:c||l(r,s)?r:l(i,s)?i:s}).map(e=>parseFloat(e.toFixed(3))),o=function(){const e=s[0],t=pE(s);return jE(s.lastIndexOf(e),s.indexOf(t)+1)}();function l(e,t){return uE(e,t)<=1}return{snapsContained:function(){if(t<=e+i)return[n.max];if("keepSnaps"===r)return s;const{min:a,max:l}=o;return s.slice(a,l)}(),scrollContainLimit:o}}(k,F,O,v,2),V=D?B:O,{limit:H}=function(e,t,a){const r=t[0];return{limit:jE(a?r-e:pE(t),r)}}(F,V,u),W=wE(mE(V),d,u),G=W.clone(),U=hE(a),$=_E(r,i,()=>(({dragHandler:e,scrollBody:t,scrollBounds:a,options:{loop:r}})=>{r||a.constrain(e.pointerDown()),t.seek()})(oe),e=>(({scrollBody:e,translate:t,location:a,offsetLocation:r,previousLocation:i,scrollLooper:n,slideLooper:s,dragHandler:o,animation:l,eventHandler:c,scrollBounds:d,options:{loop:u}},h)=>{const p=e.settled(),m=!d.shouldConstrain(),f=u?p:p&&m,g=f&&!o.pointerDown();g&&l.stop();const x=a.get()*h+i.get()*(1-h);r.set(x),u&&(n.loop(e.direction()),s.loop()),t.to(r.get()),g&&c.emit("settle"),f||c.emit("scroll")})(oe,e)),Y=V[W.get()],K=IE(Y),X=IE(Y),Z=IE(Y),Q=IE(Y),J=function(e,t,a,r,i,n){let s=0,o=0,l=i,c=n,d=e.get(),u=0;function h(e){return l=e,m}function p(e){return c=e,m}const m={direction:function(){return o},duration:function(){return l},velocity:function(){return s},seek:function(){const t=r.get()-e.get();let i=0;return l?(a.set(e),s+=t/l,s*=c,d+=s,e.add(s),i=d-u):(s=0,a.set(r),e.set(r),i=t),o=dE(i),u=d,m},settled:function(){return cE(r.get()-t.get())<.001},useBaseFriction:function(){return p(n)},useBaseDuration:function(){return h(i)},useFriction:p,useDuration:h};return m}(K,Z,X,Q,h,.68),ee=TE(u,V,F,H,Q),te=function(e,t,a,r,i,n,s){function o(i){const o=i.distance,l=i.index!==t.get();n.add(o),o&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(a.set(t.get()),t.set(i.index),s.emit("select"))}return{distance:function(e,t){o(i.byDistance(e,t))},index:function(e,a){const r=t.clone().set(e);o(i.byIndex(r.get(),a))}}}($,W,G,J,ee,Q,s),ae=function(e){const{max:t,length:a}=e;return{get:function(e){return a?(e-t)/-a:0}}}(H),re=bE(),ie=zE(t,a,s,f),{slideRegistry:ne}=function(e,t,a,r,i,n){const{groupSlides:s}=i,{min:o,max:l}=r;return{slideRegistry:function(){const r=s(n),i=!e||"keepSnaps"===t;return 1===a.length?[n]:i?r:r.slice(o,l).map((e,t,a)=>{const r=!t,i=fE(a,t);return r?gE(pE(a[0])+1):i?gE(mE(n)-pE(a)[0]+1,pE(a)[0]):e})}()}}(D,v,V,q,E,U),se=DE(e,a,ne,te,J,re,s,j),oe={ownerDocument:r,ownerWindow:i,eventHandler:s,containerRect:N,slideRects:S,animation:$,axis:C,dragHandler:NE(C,e,r,i,Q,SE(C,i),K,$,te,J,ee,W,s,M,p,m,x,.68,_),eventStore:re,percentOfView:M,index:W,indexPrevious:G,limit:H,location:K,offsetLocation:Z,previousLocation:X,options:n,resizeHandler:CE(t,s,i,a,C,y,w),scrollBody:J,scrollBounds:kE(H,Z,Q,J,M),scrollLooper:ME(F,H,Z,[K,Z,X,Q]),scrollProgress:ae,scrollSnapList:V.map(ae.get),scrollSnaps:V,scrollTarget:ee,scrollTo:te,slideLooper:PE(C,k,F,A,P,R,V,Z,a),slideFocus:se,slidesHandler:LE(t,s,b),slidesInView:ie,slideIndexes:U,slideRegistry:ne,slidesToScroll:E,target:Q,translate:AE(C,t)};return oe}const OE={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function FE(e){function t(e,t){return vE(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(a){const r=a.breakpoints||{},i=xE(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,a)=>t(e,a),{});return t(a,i)},optionsMediaQueries:function(t){return t.map(e=>xE(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}function BE(e,t,a){const r=e.ownerDocument,i=r.defaultView,n=FE(i),s=function(e){let t=[];return{init:function(a,r){return t=r.filter(({options:t})=>!1!==e.optionsAtMedia(t).active),t.forEach(t=>t.init(a,e)),r.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){t=t.filter(e=>e.destroy())}}}(n),o=bE(),l=function(){let e,t={};function a(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return a(t).forEach(a=>a(e,t)),r},off:function(e,i){return t[e]=a(e).filter(e=>e!==i),r},on:function(e,i){return t[e]=a(e).concat([i]),r},clear:function(){t={}}};return r}(),{mergeOptions:c,optionsAtMedia:d,optionsMediaQueries:u}=n,{on:h,off:p,emit:m}=l,f=C;let g,x,v,y,b=!1,_=c(OE,BE.globalOptions),j=c(_),w=[];function N(t){const a=RE(e,v,y,r,i,t,l);if(t.loop&&!a.slideLooper.canLoop()){return N(Object.assign({},t,{loop:!1}))}return a}function S(t,a){b||(_=c(_,t),j=d(_),w=a||w,function(){const{container:t,slides:a}=j,r=sE(t)?e.querySelector(t):t;v=r||e.children[0];const i=sE(a)?v.querySelectorAll(a):a;y=[].slice.call(i||v.children)}(),g=N(j),u([_,...w.map(({options:e})=>e)]).forEach(e=>o.add(e,"change",C)),j.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(D),g.eventHandler.init(D),g.resizeHandler.init(D),g.slidesHandler.init(D),g.options.loop&&g.slideLooper.loop(),v.offsetParent&&y.length&&g.dragHandler.init(D),x=s.init(D,w)))}function C(e,t){const a=T();k(),S(c({startIndex:a},e),t),l.emit("reInit")}function k(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),s.destroy(),o.clear()}function M(e,t,a){j.active&&!b&&(g.scrollBody.useBaseFriction().useDuration(!0===t?0:j.duration),g.scrollTo.index(e,a||0))}function T(){return g.index.get()}const D={canScrollNext:function(){return g.index.add(1).get()!==T()},canScrollPrev:function(){return g.index.add(-1).get()!==T()},containerNode:function(){return v},internalEngine:function(){return g},destroy:function(){b||(b=!0,o.clear(),k(),l.emit("destroy"),l.clear())},off:p,on:h,emit:m,plugins:function(){return x},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:f,rootNode:function(){return e},scrollNext:function(e){M(g.index.add(1).get(),e,-1)},scrollPrev:function(e){M(g.index.add(-1).get(),e,1)},scrollProgress:function(){return g.scrollProgress.get(g.offsetLocation.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:M,selectedScrollSnap:T,slideNodes:function(){return y},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return S(t,a),setTimeout(()=>l.emit("init"),0),D}function qE(e={},t=[]){const a=ke.useRef(e),r=ke.useRef(t),[i,n]=ke.useState(),[s,o]=ke.useState(),l=ke.useCallback(()=>{i&&i.reInit(a.current,r.current)},[i]);return ke.useEffect(()=>{rE(a.current,e)||(a.current=e,l())},[e,l]),ke.useEffect(()=>{(function(e,t){if(e.length!==t.length)return!1;const a=iE(e),r=iE(t);return a.every((e,t)=>rE(e,r[t]))})(r.current,t)||(r.current=t,l())},[t,l]),ke.useEffect(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&s){BE.globalOptions=qE.globalOptions;const e=BE(s,a.current,r.current);return n(e),()=>e.destroy()}n(void 0)},[s,n]),[o,i]}BE.globalOptions=void 0,qE.globalOptions=void 0;const VE=ke.createContext(null);function HE(){const e=ke.useContext(VE);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const WE=ke.forwardRef(({orientation:e="horizontal",opts:t,setApi:a,plugins:i,className:n,children:s,...o},l)=>{const[c,d]=qE({...t,axis:"horizontal"===e?"x":"y"},i),[u,h]=ke.useState(!1),[p,m]=ke.useState(!1),f=ke.useCallback(e=>{e&&(h(e.canScrollPrev()),m(e.canScrollNext()))},[]),g=ke.useCallback(()=>{null==d||d.scrollPrev()},[d]),x=ke.useCallback(()=>{null==d||d.scrollNext()},[d]),v=ke.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),g()):"ArrowRight"===e.key&&(e.preventDefault(),x())},[g,x]);return ke.useEffect(()=>{d&&a&&a(d)},[d,a]),ke.useEffect(()=>{if(d)return f(d),d.on("reInit",f),d.on("select",f),()=>{null==d||d.off("select",f)}},[d,f]),r.jsx(VE.Provider,{value:{carouselRef:c,api:d,opts:t,orientation:e||("y"===(null==t?void 0:t.axis)?"vertical":"horizontal"),scrollPrev:g,scrollNext:x,canScrollPrev:u,canScrollNext:p},children:r.jsx("div",{ref:l,onKeyDownCapture:v,className:vr("relative",n),role:"region","aria-roledescription":"carousel",...o,children:s})})});WE.displayName="Carousel";const GE=ke.forwardRef(({className:e,...t},a)=>{const{carouselRef:i,orientation:n}=HE();return r.jsx("div",{ref:i,className:"overflow-hidden",children:r.jsx("div",{ref:a,className:vr("flex","horizontal"===n?"-ml-4":"-mt-4 flex-col",e),...t})})});GE.displayName="CarouselContent";const UE=ke.forwardRef(({className:e,...t},a)=>{const{orientation:i}=HE();return r.jsx("div",{ref:a,role:"group","aria-roledescription":"slide",className:vr("min-w-0 shrink-0 grow-0 basis-full","horizontal"===i?"pl-4":"pt-4",e),...t})});UE.displayName="CarouselItem";const $E=ke.forwardRef(({className:e,variant:t="outline",size:a="icon",...i},n)=>{const{orientation:s,scrollPrev:o,canScrollPrev:l}=HE();return r.jsxs(qi,{ref:n,variant:t,size:a,className:vr("absolute h-8 w-8 rounded-full","horizontal"===s?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:o,...i,children:[r.jsx(Ma,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Previous slide"})]})});$E.displayName="CarouselPrevious";const YE=ke.forwardRef(({className:e,variant:t="outline",size:a="icon",...i},n)=>{const{orientation:s,scrollNext:o,canScrollNext:l}=HE();return r.jsxs(qi,{ref:n,variant:t,size:a,className:vr("absolute h-8 w-8 rounded-full","horizontal"===s?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:o,...i,children:[r.jsx(Ea,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Next slide"})]})});YE.displayName="CarouselNext";const KE=[{value:1,label:"Dom",fullLabel:"Domingo"},{value:2,label:"Seg",fullLabel:"Segunda"},{value:3,label:"Ter",fullLabel:"Tera"},{value:4,label:"Qua",fullLabel:"Quarta"},{value:5,label:"Qui",fullLabel:"Quinta"},{value:6,label:"Sex",fullLabel:"Sexta"},{value:7,label:"Sb",fullLabel:"Sbado"}];function XE(){const{lotes:e}=IL(),{calcularPesoAtual:t,calcularConsumoPrevisto:a,createDistribuicao:i,isCreating:n}=(()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["distribuicoes-pasto",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("fato_distribuicao_pasto").select("*").eq("organization_id",t).order("data_registro",{ascending:!1}).order("created_at",{ascending:!1});if(r)throw r;return a||[]},enabled:!0}),i=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,n=new Date,s=n.toISOString().split("T")[0],o=n.toTimeString().split(" ")[0],l=null!==a.consumo_realizado_kg&&void 0!==a.consumo_realizado_kg?"concluido":"previsto",c={organization_id:r,lote_id:a.lote_id,dieta_id:a.dieta_id,data_registro:s,hora_registro:o,dias_fornecimento:a.dias_fornecimento,quantidade_dias_selecionados:a.quantidade_dias_selecionados,peso_medio_atual_kg:a.peso_medio_atual_kg,quantidade_animais:a.quantidade_animais,cms_percentual:a.cms_percentual,consumo_previsto_kg:a.consumo_previsto_kg,consumo_realizado_kg:a.consumo_realizado_kg,desvio_kg:a.desvio_kg,desvio_percentual:a.desvio_percentual,rota_id:a.rota_id,status:l};i&&(c.created_by=i,c.updated_by=i);const{data:d,error:u}=await ki.from("fato_distribuicao_pasto").insert(c).select().single();if(u)throw u;return d},onSuccess:()=>{a.invalidateQueries({queryKey:["distribuicoes-pasto"]}),qr.success("Distribuio cadastrada com sucesso!")},onError:e=>{qr.error("Erro ao cadastrar distribuio. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:a})=>{const r={...a,updated_by:null==t?void 0:t.id,updated_at:(new Date).toISOString()},{data:i,error:n}=await ki.from("fato_distribuicao_pasto").update(r).eq("id",e).select().single();if(n)throw n;return i},onSuccess:()=>{a.invalidateQueries({queryKey:["distribuicoes-pasto"]}),a.invalidateQueries({queryKey:["estoque-insumos-pasto"]}),a.invalidateQueries({queryKey:["saldo-estoque-pasto"]}),qr.success("Distribuio atualizada com sucesso!")},onError:e=>{qr.error(e.message||"Erro ao atualizar distribuio. Tente novamente.")}});return{distribuicoes:r.data||[],isLoading:r.isLoading,error:r.error,createDistribuicao:i.mutate,updateDistribuicao:n.mutate,isCreating:i.isPending,isUpdating:n.isPending,calcularPesoAtual:e=>{if(!e.peso_medio_entrada||!e.data_entrada||!e.gmd_informado)return e.peso_medio_entrada||0;const t=new Date(e.data_entrada),a=new Date,r=Math.abs(a.getTime()-t.getTime()),i=Math.ceil(r/864e5),n=e.peso_medio_entrada+(i+1)*e.gmd_informado;return Math.round(100*n)/100},calcularConsumoPrevisto:(e,t,a,r)=>{const i=e*t*a*r;return Math.round(100*i)/100}}})(),{dietas:s}=tE(),{saldos:o}=(()=>{const{organization:e,profile:t}=Di(),a=Va(),r=qa({queryKey:["estoque-insumos-pasto",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("estoque_insumos_pasto").select("*").eq("organization_id",t).order("created_at",{ascending:!1});if(r)throw r;return a||[]},enabled:!0}),i=qa({queryKey:["saldo-estoque-pasto",null==e?void 0:e.id],queryFn:async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:a,error:r}=await ki.from("view_saldo_estoque_pasto").select("*").eq("organization_id",t);if(r)throw r;return a||[]},enabled:!0}),n=Ha({mutationFn:async a=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",i=null==t?void 0:t.id,{data:n}=await ki.from("view_saldo_estoque_pasto").select("saldo_atual_kg").eq("organization_id",r).eq("ingrediente",a.ingrediente).single(),s=(null==n?void 0:n.saldo_atual_kg)||0;let o=s;if("entrada"===a.tipo_movimentacao)o=s+a.quantidade_kg;else if("saida"===a.tipo_movimentacao){if(o=s-a.quantidade_kg,o<0)throw new Error("Saldo insuficiente para esta operao")}else"ajuste"===a.tipo_movimentacao&&(o=a.quantidade_kg);const l=new Date,c=l.toISOString().split("T")[0],d=l.toTimeString().split(" ")[0],{data:u,error:h}=await ki.from("estoque_insumos_pasto").insert({organization_id:r,ingrediente:a.ingrediente,tipo_movimentacao:a.tipo_movimentacao,quantidade_kg:a.quantidade_kg,data_movimentacao:c,hora_movimentacao:d,origem_tipo:"ajuste_manual",saldo_anterior_kg:s,saldo_atual_kg:o,observacoes:a.observacoes,created_by:i}).select().single();if(h)throw h;return u},onSuccess:()=>{a.invalidateQueries({queryKey:["estoque-insumos-pasto"]}),a.invalidateQueries({queryKey:["saldo-estoque-pasto"]}),qr.success("Ajuste registrado com sucesso!")},onError:e=>{qr.error(e.message||"Erro ao registrar ajuste. Tente novamente.")}});return{estoque:r.data||[],saldos:i.data||[],isLoading:r.isLoading||i.isLoading,error:r.error||i.error,registrarAjuste:n.mutate,isRegistrandoAjuste:n.isPending,getSaldoAtual:e=>{var t;const a=null==(t=i.data)?void 0:t.find(t=>t.ingrediente===e);return(null==a?void 0:a.saldo_atual_kg)||0},getHistoricoMovimentacoes:e=>{var t;return(null==(t=r.data)?void 0:t.filter(t=>t.ingrediente===e))||[]}}})(),{rotas:l}=DL(),[c,d]=ke.useState(void 0),[u,h]=ke.useState(""),[p,m]=ke.useState({}),[f,g]=ke.useState({}),[x,v]=ke.useState(),[y,b]=ke.useState(0),[_,j]=ke.useState(0),w=e.filter(e=>e.ativo),N=c?(()=>{const e=l.find(e=>e.id===c);if(!e||!e.itens)return w;return[...e.itens.sort((e,t)=>e.sequencia-t.sequencia).map(e=>w.find(t=>t.id===e.lote_id)).filter(Boolean),...w.filter(t=>{var a;return!(null==(a=e.itens)?void 0:a.some(e=>e.lote_id===t.id))})]})():w,S=s.find(e=>"proteinado"===e.tipo&&e.ativo),C=u?s.find(e=>e.id===u):S,k=o.find(e=>e.ingrediente.toLowerCase().includes("proteinado"));ke.useEffect(()=>{x&&(j(x.scrollSnapList().length),b(x.selectedScrollSnap()),x.on("select",()=>{b(x.selectedScrollSnap())}))},[x]);const M=e=>`${e.toFixed(2)} kg`;return r.jsx(BI,{children:r.jsx("div",{className:"max-w-[1400px] mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Distribuio de Proteinado"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Registre o fornecimento de proteinado nos lotes de pasto"})]})}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-3 mb-6 sm:mb-8",children:[r.jsxs(Ii,{children:[r.jsxs(Ai,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Pi,{className:"text-sm font-medium",children:"Lotes Ativos"}),r.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(zi,{children:[r.jsx("div",{className:"text-2xl font-bold",children:w.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Lotes disponveis para distribuio"})]})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Pi,{className:"text-sm font-medium",children:"Estoque Proteinado"}),r.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(zi,{children:[r.jsx("div",{className:"text-2xl font-bold",children:k?M(k.saldo_atual_kg):"0.00 kg"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Saldo atual disponvel"})]})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Pi,{className:"text-sm font-medium",children:"Data"}),r.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(zi,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(new Date).toLocaleDateString("pt-BR")}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Data de registro"})]})]})]}),r.jsxs(Ii,{className:"mb-6 sm:mb-8",children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Filtros"}),r.jsx(Li,{children:"Selecione rota e dieta para distribuio"})]}),r.jsx(zi,{className:"space-y-4",children:r.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{children:"Rota de Distribuio"}),r.jsxs(en,{value:c||"none",onValueChange:e=>d("none"===e?void 0:e),children:[r.jsx(an,{children:r.jsx(tn,{placeholder:"Selecione uma rota (opcional)"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"none",children:"Sem rota especfica"}),l.filter(e=>e.ativo).map(e=>{var t;return r.jsxs(on,{value:e.id,children:[e.nome," (",(null==(t=e.itens)?void 0:t.length)||0," lotes)"]},e.id)})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{children:"Dieta"}),r.jsxs(en,{value:u,onValueChange:h,children:[r.jsx(an,{children:r.jsx(tn,{placeholder:S?S.nome:"Selecione uma dieta"})}),r.jsx(sn,{children:s.filter(e=>"proteinado"===e.tipo&&e.ativo).map(e=>r.jsxs(on,{value:e.id,children:[e.nome," (CMS: ",(100*e.cms_percentual_peso_vivo).toFixed(2),"%)"]},e.id))})]})]})]})})]}),0===N.length?r.jsx(Ii,{children:r.jsx(zi,{className:"py-8",children:r.jsx("p",{className:"text-center text-muted-foreground",children:"Nenhum lote ativo encontrado"})})}):r.jsxs("div",{className:"relative",children:[N.length>1&&r.jsxs("div",{className:"mb-4 flex items-center justify-between bg-muted/50 rounded-lg p-3",children:[r.jsxs("span",{className:"text-sm font-medium",children:["Lote ",y+1," de ",_]}),r.jsx("div",{className:"flex gap-1",children:Array.from({length:_}).map((e,t)=>r.jsx("div",{className:"h-2 rounded-full transition-all "+(t===y?"w-8 bg-accent-primary":"w-2 bg-muted-foreground/30")},t))})]}),r.jsxs(WE,{setApi:v,className:"w-full",opts:{align:"start",loop:!1},children:[r.jsx(GE,{children:N.map((e,s)=>{var o,l,d,u;if(!e)return null;const h=t(e),v=p[e.id]||[],b=C?a(h,C.cms_percentual_peso_vivo,e.quantidade_animais||0,v.length):0;return r.jsx(UE,{children:r.jsxs(Ii,{className:"hover:shadow-lg transition-shadow",children:[r.jsx(Ai,{className:"pb-3 pt-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[c&&r.jsxs(Oi,{variant:"outline",className:"text-xs px-1.5 py-0",children:["#",s+1]}),r.jsx(Pi,{className:"text-base sm:text-lg",children:e.nome})]}),r.jsxs(Li,{className:"text-xs",children:[null==(l=null==(o=e.pasto)?void 0:o.setor)?void 0:l.nome," - ",null==(d=e.pasto)?void 0:d.nome]})]}),r.jsxs(Oi,{variant:"default",className:"text-xs px-2 py-0.5",children:[e.quantidade_animais||0," animais"]})]})}),r.jsxs(zi,{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 p-3 bg-muted/30 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"Peso Entrada"}),r.jsx("p",{className:"text-sm font-medium",children:M(e.peso_medio_entrada||0)})]}),r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"Peso Atual"}),r.jsx("p",{className:"text-sm font-medium text-green-600",children:M(h)})]}),r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"GMD"}),r.jsx("p",{className:"text-sm font-medium",children:(null==(u=e.gmd_informado)?void 0:u.toFixed(3))||"0.000"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(xL,{className:"text-sm font-medium",children:"Dias de Fornecimento"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:KE.map(t=>r.jsxs("div",{className:"flex items-center space-x-1.5",children:[r.jsx(yz,{id:`${e.id}-dia-${t.value}`,checked:v.includes(t.value),onCheckedChange:()=>((e,t)=>{const a=p[e]||[],r=a.includes(t)?a.filter(e=>e!==t):[...a,t].sort();m({...p,[e]:r})})(e.id,t.value),className:"h-4 w-4"}),r.jsx("label",{htmlFor:`${e.id}-dia-${t.value}`,className:"text-xs font-medium leading-none cursor-pointer",children:t.label})]},t.value))})]}),v.length>0&&C&&r.jsxs("div",{className:"rounded-lg bg-accent-primary/5 border border-accent-primary/20 p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs font-medium text-text-primary",children:"Consumo Previsto:"}),r.jsx("span",{className:"text-lg font-bold text-accent-primary",children:M(b)})]}),r.jsxs("div",{className:"text-xs text-text-secondary",children:[v.length," dia(s)  ",e.quantidade_animais," animais  ",M(h),"  ",(100*C.cms_percentual_peso_vivo).toFixed(2),"%"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(xL,{htmlFor:`realizado-${e.id}`,className:"text-sm font-medium",children:["Quantidade Distribuda (kg) ",r.jsx("span",{className:"text-xs text-muted-foreground",children:"(opcional)"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(aI,{id:`realizado-${e.id}`,type:"number",step:"0.01",min:"0",placeholder:"Digite a quantidade",value:f[e.id]||"",onChange:t=>g({...f,[e.id]:t.target.value}),className:"h-10"})}),r.jsx(qi,{className:"h-10 px-4 shrink-0 flex items-center gap-2",onClick:()=>(async e=>{const r=p[e.id]||[];if(0===r.length)return void alert("Selecione pelo menos um dia para distribuio");if(!C)return void alert("Selecione uma dieta");const n=t(e),s=a(n,C.cms_percentual_peso_vivo,e.quantidade_animais||0,r.length),o=f[e.id]||"",l=o?parseFloat(o):null,d=null!==l?l-s:null,u=null!==l&&s>0?d/s*100:null;i({lote_id:e.id,dieta_id:C.id,dias_fornecimento:r,quantidade_dias_selecionados:r.length,peso_medio_atual_kg:n,quantidade_animais:e.quantidade_animais||0,cms_percentual:C.cms_percentual_peso_vivo,consumo_previsto_kg:s,consumo_realizado_kg:l,desvio_kg:d,desvio_percentual:u,rota_id:c||void 0}),setTimeout(()=>{m(t=>({...t,[e.id]:[]})),g(t=>({...t,[e.id]:""})),x&&y<_-1&&x.scrollNext()},800)})(e),disabled:0===v.length||!C||n,children:n?"Registrando...":r.jsxs(r.Fragment,{children:[y<_-1?"Confirmar e Prximo":"Confirmar",y<_-1&&r.jsx(st,{className:"h-4 w-4"})]})})]})]}),f[e.id]&&v.length>0&&C&&r.jsx(r.Fragment,{children:(()=>{const t=parseFloat(f[e.id]);if(isNaN(t))return null;const a=t-b,i=b>0?a/b*100:0;return r.jsx("div",{className:"rounded-lg p-2.5 border "+(a>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium",children:"Desvio Estimado:"}),r.jsxs("span",{className:"text-sm font-bold "+(a>=0?"text-green-700":"text-red-700"),children:[a>0?"+":"",a.toFixed(2)," kg (",i>0?"+":"",i.toFixed(2),"%)"]})]})})})()})]})]})},e.id)})}),N.length>1&&r.jsxs(r.Fragment,{children:[r.jsx($E,{className:"left-2"}),r.jsx(YE,{className:"right-2"})]})]})]})]})})})}function ZE(){const{fornecedores:e,isLoading:t,isCreating:a,isUpdating:i,createFornecedor:n,updateFornecedor:s,deleteFornecedor:o}=function(){const{organization:e}=Di(),[t,a]=ke.useState([]),[r,i]=ke.useState(!0),[n,s]=ke.useState(!1),[o,l]=ke.useState(!1),c=async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{i(!0);const{data:e,error:r}=await ki.from("dim_fornecedores").select("*").eq("organization_id",t).order("nome");if(r)throw r;a(e||[])}catch(r){qr.error("Erro ao carregar fornecedores")}finally{i(!1)}};return ke.useEffect(()=>{c()},[null==e?void 0:e.id]),{fornecedores:t,isLoading:r,isCreating:n,isUpdating:o,createFornecedor:async t=>{const a=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:{session:r}}=await ki.auth.getSession();try{s(!0);const{error:e}=await ki.from("dim_fornecedores").insert({organization_id:a,...t});if(e)throw e;qr.success("Fornecedor cadastrado com sucesso"),c()}catch(i){throw qr.error("Erro ao cadastrar fornecedor"),i}finally{s(!1)}},updateFornecedor:async(t,a)=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{l(!0);const{error:e}=await ki.from("dim_fornecedores").update(a).eq("id",t).eq("organization_id",r);if(e)throw e;qr.success("Fornecedor atualizado com sucesso"),c()}catch(i){throw qr.error("Erro ao atualizar fornecedor"),i}finally{l(!1)}},deleteFornecedor:async t=>{const a=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{const{error:e}=await ki.from("dim_fornecedores").delete().eq("id",t).eq("organization_id",a);if(e)throw e;qr.success("Fornecedor removido com sucesso"),c()}catch(r){throw qr.error("Erro ao remover fornecedor"),r}},refetch:c}}(),[l,c]=ke.useState(!1),[d,u]=ke.useState(!1),[h,p]=ke.useState(null),[m,f]=ke.useState(""),[g,x]=ke.useState(!1),[v,y]=ke.useState("created_at"),[b,_]=ke.useState("desc"),[j,w]=ke.useState({nome:"",cnpj:"",telefone:"",email:"",ativo:!0}),N=e=>{v===e?_("asc"===b?"desc":"asc"):(y(e),_("asc"))},S=ke.useMemo(()=>{let t=e;return g||(t=t.filter(e=>e.ativo)),m&&(t=t.filter(e=>{var t,a;return e.nome.toLowerCase().includes(m.toLowerCase())||(null==(t=e.cnpj)?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(m.toLowerCase()))})),t.sort((e,t)=>{var a,r,i,n,s,o;let l,c;switch(v){case"nome":l=e.nome.toLowerCase(),c=t.nome.toLowerCase();break;case"cnpj":l=(null==(a=e.cnpj)?void 0:a.toLowerCase())||"",c=(null==(r=t.cnpj)?void 0:r.toLowerCase())||"";break;case"telefone":l=(null==(i=e.telefone)?void 0:i.toLowerCase())||"",c=(null==(n=t.telefone)?void 0:n.toLowerCase())||"";break;case"email":l=(null==(s=e.email)?void 0:s.toLowerCase())||"",c=(null==(o=t.email)?void 0:o.toLowerCase())||"";break;case"status":l=e.ativo?1:0,c=t.ativo?1:0;break;case"created_at":l=new Date(e.created_at).getTime(),c=new Date(t.created_at).getTime();break;default:return 0}return l<c?"asc"===b?-1:1:l>c?"asc"===b?1:-1:0}),t},[e,g,m,v,b]);return t?r.jsx("div",{children:"Carregando..."}):r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Fornecedores"}),r.jsx(Li,{children:"Gerencie os fornecedores de ingredientes"})]}),r.jsxs(HD,{open:l,onOpenChange:c,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Novo Fornecedor"]})}),r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Fornecedor"}),r.jsx(ZD,{children:"Cadastre um novo fornecedor de ingredientes"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"nome",className:"text-right",children:"Nome *"}),r.jsx(aI,{id:"nome",value:j.nome,onChange:e=>w({...j,nome:e.target.value}),className:"col-span-3",placeholder:"Nome do fornecedor"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"cnpj",className:"text-right",children:"CNPJ"}),r.jsx(aI,{id:"cnpj",value:j.cnpj,onChange:e=>w({...j,cnpj:e.target.value}),className:"col-span-3",placeholder:"00.000.000/0000-00"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"telefone",className:"text-right",children:"Telefone"}),r.jsx(aI,{id:"telefone",value:j.telefone,onChange:e=>w({...j,telefone:e.target.value}),className:"col-span-3",placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"email",className:"text-right",children:"E-mail"}),r.jsx(aI,{id:"email",type:"email",value:j.email,onChange:e=>w({...j,email:e.target.value}),className:"col-span-3",placeholder:"contato@fornecedor.com"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),r.jsx(qi,{onClick:async()=>{j.nome&&(await n(j),w({nome:"",cnpj:"",telefone:"",email:"",ativo:!0}),c(!1))},disabled:a,children:a?"Cadastrando...":"Cadastrar"})]})]})]})]})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Pesquisar por nome, CNPJ ou e-mail...",value:m,onChange:e=>f(e.target.value),className:"pl-8"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zz,{id:"show-inactive-fornecedores",checked:g,onCheckedChange:x}),r.jsx(xL,{htmlFor:"show-inactive-fornecedores",className:"cursor-pointer",children:"Mostrar inativos"})]})]}),r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{className:"w-[25%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("nome"),className:"h-auto p-0 hover:bg-transparent",children:["Nome","nome"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("cnpj"),className:"h-auto p-0 hover:bg-transparent",children:["CNPJ","cnpj"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("telefone"),className:"h-auto p-0 hover:bg-transparent",children:["Telefone","telefone"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[20%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("email"),className:"h-auto p-0 hover:bg-transparent",children:["E-mail","email"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[10%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("status"),className:"h-auto p-0 hover:bg-transparent",children:["Status","status"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:"Aes"})]})}),r.jsx(wL,{children:0===S.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:6,className:"text-center text-muted-foreground",children:"Nenhum fornecedor encontrado"})}):S.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.nome}),r.jsx(CL,{children:e.cnpj||"-"}),r.jsx(CL,{children:e.telefone||"-"}),r.jsx(CL,{children:e.email||"-"}),r.jsx(CL,{children:r.jsx(Oi,{variant:e.ativo?"default":"secondary",className:e.ativo?"cursor-pointer hover:bg-destructive hover:text-destructive-foreground transition-colors":"",onClick:()=>(e=>{e.ativo&&s(e.id,{ativo:!1})})(e),children:e.ativo?"Ativo":"Inativo"})}),r.jsx(CL,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{p(e),u(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(async e=>{window.confirm("Tem certeza que deseja remover este fornecedor?")&&await o(e)})(e.id),children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]}),r.jsx(HD,{open:d,onOpenChange:u,children:r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Fornecedor"}),r.jsx(ZD,{children:"Atualize as informaes do fornecedor"})]}),h&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-nome",className:"text-right",children:"Nome *"}),r.jsx(aI,{id:"edit-nome",value:h.nome,onChange:e=>p({...h,nome:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-cnpj",className:"text-right",children:"CNPJ"}),r.jsx(aI,{id:"edit-cnpj",value:h.cnpj||"",onChange:e=>p({...h,cnpj:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-telefone",className:"text-right",children:"Telefone"}),r.jsx(aI,{id:"edit-telefone",value:h.telefone||"",onChange:e=>p({...h,telefone:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-email",className:"text-right",children:"E-mail"}),r.jsx(aI,{id:"edit-email",type:"email",value:h.email||"",onChange:e=>p({...h,email:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-ativo",className:"text-right",children:"Ativo"}),r.jsx(Zz,{id:"edit-ativo",checked:h.ativo,onCheckedChange:e=>p({...h,ativo:e})})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),r.jsx(qi,{onClick:async()=>{h&&(await s(h.id,{nome:h.nome,cnpj:h.cnpj,telefone:h.telefone,email:h.email,ativo:h.ativo}),u(!1),p(null))},disabled:i,children:i?"Atualizando...":"Atualizar"})]})]})})]})]})}function QE(){const{organization:e}=Di(),[t,a]=ke.useState([]),[r,i]=ke.useState(!0),[n,s]=ke.useState(!1),[o,l]=ke.useState(!1),c=async()=>{const t=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{i(!0);const{data:e,error:r}=await ki.from("dim_ingredientes").select("*").eq("organization_id",t).order("nome");if(r)throw r;a(e||[])}catch(r){qr.error("Erro ao carregar ingredientes")}finally{i(!1)}};ke.useEffect(()=>{c()},[null==e?void 0:e.id]);return{ingredientes:t,isLoading:r,isCreating:n,isUpdating:o,createIngrediente:async t=>{const a=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{s(!0);const{error:e}=await ki.from("dim_ingredientes").insert({organization_id:a,...t});if(e)throw e;qr.success("Ingrediente cadastrado com sucesso"),c()}catch(r){throw qr.error("Erro ao cadastrar ingrediente"),r}finally{s(!1)}},updateIngrediente:async(t,a)=>{const r=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{l(!0);const{error:e}=await ki.from("dim_ingredientes").update(a).eq("id",t).eq("organization_id",r);if(e)throw e;qr.success("Ingrediente atualizado com sucesso"),c()}catch(i){throw qr.error("Erro ao atualizar ingrediente"),i}finally{l(!1)}},deleteIngrediente:async t=>{const a=(null==e?void 0:e.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{const{error:e}=await ki.from("dim_ingredientes").delete().eq("id",t).eq("organization_id",a);if(e)throw e;qr.success("Ingrediente removido com sucesso"),c()}catch(r){throw qr.error("Erro ao remover ingrediente"),r}},refetch:c}}function JE(){const{ingredientes:e,isLoading:t,isCreating:a,isUpdating:i,createIngrediente:n,updateIngrediente:s,deleteIngrediente:o}=QE(),[l,c]=ke.useState(!1),[d,u]=ke.useState(!1),[h,p]=ke.useState(null),[m,f]=ke.useState(""),[g,x]=ke.useState(!1),[v,y]=ke.useState("created_at"),[b,_]=ke.useState("desc"),[j,w]=ke.useState({nome:"",codigo:"",unidade_medida:"kg",tipo:"",ativo:!0,requer_atualizacao_ms:!1}),N=e=>{v===e?_("asc"===b?"desc":"asc"):(y(e),_("asc"))},S=ke.useMemo(()=>{let t=e;return g||(t=t.filter(e=>e.ativo)),m&&(t=t.filter(e=>{var t,a;return e.nome.toLowerCase().includes(m.toLowerCase())||(null==(t=e.codigo)?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null==(a=e.tipo)?void 0:a.toLowerCase().includes(m.toLowerCase()))})),t.sort((e,t)=>{var a,r,i,n;let s,o;switch(v){case"nome":s=e.nome.toLowerCase(),o=t.nome.toLowerCase();break;case"codigo":s=(null==(a=e.codigo)?void 0:a.toLowerCase())||"",o=(null==(r=t.codigo)?void 0:r.toLowerCase())||"";break;case"tipo":s=(null==(i=e.tipo)?void 0:i.toLowerCase())||"",o=(null==(n=t.tipo)?void 0:n.toLowerCase())||"";break;case"unidade_medida":s=e.unidade_medida.toLowerCase(),o=t.unidade_medida.toLowerCase();break;case"status":s=e.ativo?1:0,o=t.ativo?1:0;break;case"created_at":s=new Date(e.created_at).getTime(),o=new Date(t.created_at).getTime();break;default:return 0}return s<o?"asc"===b?-1:1:s>o?"asc"===b?1:-1:0}),t},[e,g,m,v,b]);return t?r.jsx("div",{children:"Carregando..."}):r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Ingredientes"}),r.jsx(Li,{children:"Gerencie os ingredientes disponveis"})]}),r.jsxs(HD,{open:l,onOpenChange:c,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Novo Ingrediente"]})}),r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Novo Ingrediente"}),r.jsx(ZD,{children:"Cadastre um novo ingrediente"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"nome",className:"text-right",children:"Nome *"}),r.jsx(aI,{id:"nome",value:j.nome,onChange:e=>w({...j,nome:e.target.value}),className:"col-span-3",placeholder:"Nome do ingrediente"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"codigo",className:"text-right",children:"Cdigo"}),r.jsx(aI,{id:"codigo",value:j.codigo,onChange:e=>w({...j,codigo:e.target.value}),className:"col-span-3",placeholder:"Cdigo/SKU"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"tipo",className:"text-right",children:"Tipo"}),r.jsxs(en,{value:j.tipo,onValueChange:e=>w({...j,tipo:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{placeholder:"Selecione o tipo"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"volumoso",children:"Volumoso"}),r.jsx(on,{value:"proteico",children:"Proteico"}),r.jsx(on,{value:"energetico",children:"Energtico"}),r.jsx(on,{value:"mineral",children:"Mineral"}),r.jsx(on,{value:"aditivo",children:"Aditivo"}),r.jsx(on,{value:"outro",children:"Outro"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"unidade",className:"text-right",children:"Unidade"}),r.jsxs(en,{value:j.unidade_medida,onValueChange:e=>w({...j,unidade_medida:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"kg",children:"kg (quilograma)"}),r.jsx(on,{value:"ton",children:"ton (tonelada)"}),r.jsx(on,{value:"sc",children:"sc (saco)"}),r.jsx(on,{value:"un",children:"un (unidade)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"requer-ms",className:"text-right",children:"Atualizao MS"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(Zz,{id:"requer-ms",checked:j.requer_atualizacao_ms,onCheckedChange:e=>w({...j,requer_atualizacao_ms:e})}),r.jsx(xL,{htmlFor:"requer-ms",className:"text-sm text-muted-foreground cursor-pointer",children:"Requer atualizao de Matria Seca"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),r.jsx(qi,{onClick:async()=>{j.nome&&(await n(j),w({nome:"",codigo:"",unidade_medida:"kg",tipo:"",ativo:!0,requer_atualizacao_ms:!1}),c(!1))},disabled:a,children:a?"Cadastrando...":"Cadastrar"})]})]})]})]})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Pesquisar por nome, cdigo ou tipo...",value:m,onChange:e=>f(e.target.value),className:"pl-8"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zz,{id:"show-inactive-ingredientes",checked:g,onCheckedChange:x}),r.jsx(xL,{htmlFor:"show-inactive-ingredientes",className:"cursor-pointer",children:"Mostrar inativos"})]})]}),r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{className:"w-[30%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("nome"),className:"h-auto p-0 hover:bg-transparent",children:["Nome","nome"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("codigo"),className:"h-auto p-0 hover:bg-transparent",children:["Cdigo","codigo"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("tipo"),className:"h-auto p-0 hover:bg-transparent",children:["Tipo","tipo"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("unidade_medida"),className:"h-auto p-0 hover:bg-transparent",children:["Unidade","unidade_medida"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[10%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>N("status"),className:"h-auto p-0 hover:bg-transparent",children:["Status","status"===v?"asc"===b?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:"Aes"})]})}),r.jsx(wL,{children:0===S.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:6,className:"text-center text-muted-foreground",children:"Nenhum ingrediente encontrado"})}):S.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.nome}),r.jsx(CL,{children:e.codigo||"-"}),r.jsx(CL,{children:e.tipo||"-"}),r.jsx(CL,{children:e.unidade_medida}),r.jsx(CL,{children:r.jsx(Oi,{variant:e.ativo?"default":"secondary",className:e.ativo?"cursor-pointer hover:bg-destructive hover:text-destructive-foreground transition-colors":"",onClick:()=>(e=>{e.ativo&&s(e.id,{ativo:!1})})(e),children:e.ativo?"Ativo":"Inativo"})}),r.jsx(CL,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{p({...e}),u(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(async e=>{window.confirm("Tem certeza que deseja remover este ingrediente?")&&await o(e)})(e.id),children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id))})]}),r.jsx(HD,{open:d,onOpenChange:u,children:r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Ingrediente"}),r.jsx(ZD,{children:"Atualize as informaes do ingrediente"})]}),h&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-nome",className:"text-right",children:"Nome *"}),r.jsx(aI,{id:"edit-nome",value:h.nome,onChange:e=>p({...h,nome:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-codigo",className:"text-right",children:"Cdigo"}),r.jsx(aI,{id:"edit-codigo",value:h.codigo||"",onChange:e=>p({...h,codigo:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-tipo",className:"text-right",children:"Tipo"}),r.jsxs(en,{value:h.tipo||"",onValueChange:e=>p({...h,tipo:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{placeholder:"Selecione o tipo"})}),r.jsxs(sn,{children:[r.jsx(on,{value:"volumoso",children:"Volumoso"}),r.jsx(on,{value:"proteico",children:"Proteico"}),r.jsx(on,{value:"energetico",children:"Energtico"}),r.jsx(on,{value:"mineral",children:"Mineral"}),r.jsx(on,{value:"aditivo",children:"Aditivo"}),r.jsx(on,{value:"outro",children:"Outro"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-unidade",className:"text-right",children:"Unidade"}),r.jsxs(en,{value:h.unidade_medida,onValueChange:e=>p({...h,unidade_medida:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"kg",children:"kg (quilograma)"}),r.jsx(on,{value:"ton",children:"ton (tonelada)"}),r.jsx(on,{value:"sc",children:"sc (saco)"}),r.jsx(on,{value:"un",children:"un (unidade)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-ativo",className:"text-right",children:"Ativo"}),r.jsx(Zz,{id:"edit-ativo",checked:h.ativo,onCheckedChange:e=>p({...h,ativo:e})})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-requer-ms",className:"text-right",children:"Atualizao MS"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(Zz,{id:"edit-requer-ms",checked:h.requer_atualizacao_ms||!1,onCheckedChange:e=>p({...h,requer_atualizacao_ms:e})}),r.jsx(xL,{htmlFor:"edit-requer-ms",className:"text-sm text-muted-foreground cursor-pointer",children:"Requer atualizao de Matria Seca"})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),r.jsx(qi,{onClick:async()=>{h&&(await s(h.id,{nome:h.nome,codigo:h.codigo,unidade_medida:h.unidade_medida,tipo:h.tipo,ativo:h.ativo,requer_atualizacao_ms:h.requer_atualizacao_ms}),u(!1),p(null))},disabled:i,children:i?"Atualizando...":"Atualizar"})]})]})})]})]})}function eR(){const{dietas:e,createDieta:t,updateDieta:a,deleteDieta:i,isCreating:n,isUpdating:s}=tE(),{organization:o}=Di(),[l,c]=ke.useState(!1),[d,u]=ke.useState(!1),[h,p]=ke.useState(null),[m,f]=ke.useState({nome:"",tipo:"adaptacao",cms_percentual_peso_vivo:.025,descricao:"",ativo:!0}),[g,x]=ke.useState("2.50"),[v,y]=ke.useState("2.50"),[b,_]=ke.useState(""),[j,w]=ke.useState(!1),[N,S]=ke.useState("nome"),[C,k]=ke.useState("asc"),M=e=>{switch(e){case"adaptacao":return"bg-green-500/10 text-green-500 border-green-500/20";case"crescimento":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"terminacao":return"bg-red-500/10 text-red-500 border-red-500/20";case"recria":return"bg-purple-500/10 text-purple-500 border-purple-500/20";case"pre-mistura":return"bg-blue-600/10 text-blue-600 border-blue-600/20";case"proteinado":return"bg-green-700/10 text-green-700 border-green-700/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},T=e=>{switch(e){case"adaptacao":return"Adaptao";case"crescimento":return"Crescimento";case"terminacao":return"Terminao";case"recria":return"Recria";case"pre-mistura":return"Pr-Mistura";case"proteinado":return"Proteinado";default:return e}},{data:D=[]}=qa({queryKey:["all-dietas-composicao",null==o?void 0:o.id],queryFn:async()=>{const e=(null==o?void 0:o.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:t,error:a}=await ki.from("dieta_composicao").select("dieta_id, cons_ms_kg, cons_mo_kg").eq("organization_id",e).eq("ativo",!0);if(a)throw a;return t||[]}}),I=e=>{const t=D.filter(t=>t.dieta_id===e);if(0===t.length)return"-";const a=t.reduce((e,t)=>e+(t.cons_ms_kg||0),0),r=t.reduce((e,t)=>e+(t.cons_mo_kg||0),0);return 0===r?"-":`${(a/r*100).toFixed(2)}%`},A=e=>{N===e?k("asc"===C?"desc":"asc"):(S(e),k("asc"))},P=ke.useMemo(()=>{let t=e;return j||(t=t.filter(e=>e.ativo)),b&&(t=t.filter(e=>{var t;return e.nome.toLowerCase().includes(b.toLowerCase())||T(e.tipo).toLowerCase().includes(b.toLowerCase())||(null==(t=e.descricao)?void 0:t.toLowerCase().includes(b.toLowerCase()))})),t.sort((e,t)=>{let a,r;switch(N){case"nome":default:a=e.nome.toLowerCase(),r=t.nome.toLowerCase();break;case"tipo":a=T(e.tipo).toLowerCase(),r=T(t.tipo).toLowerCase();break;case"cms":a=e.cms_percentual_peso_vivo,r=t.cms_percentual_peso_vivo;break;case"ms_prevista":const i=I(e.id),n=I(t.id);a="-"===i?-1:parseFloat(i),r="-"===n?-1:parseFloat(n);break;case"status":a=e.ativo?1:0,r=t.ativo?1:0}return a<r?"asc"===C?-1:1:a>r?"asc"===C?1:-1:0}),t},[e,j,b,N,C,D]);return r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{children:"Dietas"}),r.jsx(Li,{children:"Gerencie dietas e seus percentuais de CMS"})]}),r.jsxs(HD,{open:l,onOpenChange:c,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Nova Dieta"]})}),r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Nova Dieta"}),r.jsx(ZD,{children:"Cadastre uma nova dieta no sistema"})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"nome",className:"text-right",children:"Nome"}),r.jsx(aI,{id:"nome",value:m.nome,onChange:e=>f({...m,nome:e.target.value}),className:"col-span-3",placeholder:"Ex: Proteinado 20%, Dieta Crescimento"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"tipo",className:"text-right",children:"Tipo"}),r.jsxs(en,{value:m.tipo,onValueChange:e=>f({...m,tipo:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"adaptacao",children:"Adaptao"}),r.jsx(on,{value:"crescimento",children:"Crescimento"}),r.jsx(on,{value:"terminacao",children:"Terminao"}),r.jsx(on,{value:"recria",children:"Recria"}),r.jsx(on,{value:"pre-mistura",children:"Pr-Mistura"}),r.jsx(on,{value:"proteinado",children:"Proteinado"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"cms",className:"text-right",children:"CMS % Peso Vivo"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(aI,{id:"cms",type:"number",step:"0.01",min:"0",max:"100",value:g,onChange:e=>{const t=e.target.value;x(t);const a=parseFloat(t)/100;f({...m,cms_percentual_peso_vivo:a})},className:"flex-1",placeholder:"Ex: 2.46"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"descricao",className:"text-right",children:"Descrio"}),r.jsx(TL,{id:"descricao",value:m.descricao,onChange:e=>f({...m,descricao:e.target.value}),className:"col-span-3",placeholder:"Descrio opcional da dieta"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{!m.nome||m.cms_percentual_peso_vivo<=0||(t(m),f({nome:"",tipo:"adaptacao",cms_percentual_peso_vivo:.025,descricao:"",ativo:!0}),x("2.50"),c(!1))},disabled:n,children:n?"Cadastrando...":"Cadastrar"})]})]})]})]})}),r.jsxs(zi,{children:[r.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),r.jsx(aI,{placeholder:"Pesquisar por nome, tipo ou descrio...",value:b,onChange:e=>_(e.target.value),className:"pl-8"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zz,{id:"show-inactive",checked:j,onCheckedChange:w}),r.jsx(xL,{htmlFor:"show-inactive",className:"cursor-pointer",children:"Mostrar inativas"})]})]}),r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{className:"w-[30%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>A("nome"),className:"h-8 px-2 hover:bg-transparent",children:["Nome","nome"===N?"asc"===C?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>A("tipo"),className:"h-8 px-2 hover:bg-transparent",children:["Tipo","tipo"===N?"asc"===C?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>A("cms"),className:"h-8 px-2 hover:bg-transparent",children:["CMS % Peso Vivo","cms"===N?"asc"===C?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[15%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>A("ms_prevista"),className:"h-8 px-2 hover:bg-transparent",children:["MS Prevista da Dieta","ms_prevista"===N?"asc"===C?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[12%]",children:r.jsxs(qi,{variant:"ghost",onClick:()=>A("status"),className:"h-8 px-2 hover:bg-transparent",children:["Status","status"===N?"asc"===C?r.jsx(Ra,{className:"ml-2 h-4 w-4"}):r.jsx(Oa,{className:"ml-2 h-4 w-4"}):r.jsx(La,{className:"ml-2 h-4 w-4 opacity-50"})]})}),r.jsx(SL,{className:"w-[13%]",children:"Aes"})]})}),r.jsx(wL,{children:0===P.length?r.jsx(NL,{children:r.jsx(CL,{colSpan:6,className:"text-center text-muted-foreground",children:b?"Nenhuma dieta encontrada com os filtros aplicados":"Nenhuma dieta cadastrada"})}):P.map(e=>{return r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:e.nome}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",className:M(e.tipo),children:T(e.tipo)})}),r.jsx(CL,{children:(t=e.cms_percentual_peso_vivo,`${(100*("string"==typeof t?parseFloat(t):t)).toFixed(2)}%`)}),r.jsx(CL,{className:"font-medium",children:I(e.id)}),r.jsx(CL,{children:r.jsx(Oi,{variant:e.ativo?"default":"secondary",className:e.ativo?"cursor-pointer hover:bg-destructive hover:text-destructive-foreground transition-colors":"",onClick:()=>(e=>{e.ativo&&a({id:e.id,data:{ativo:!1}})})(e),children:e.ativo?"Ativa":"Inativa"})}),r.jsx(CL,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{p(e),y((100*e.cms_percentual_peso_vivo).toFixed(2)),u(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Tem certeza que deseja remover esta dieta?")&&i(t));var t},children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id);var t})})]}),r.jsx(HD,{open:d,onOpenChange:u,children:r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Dieta"}),r.jsx(ZD,{children:"Atualize as informaes da dieta"})]}),h&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-nome",className:"text-right",children:"Nome"}),r.jsx(aI,{id:"edit-nome",value:h.nome,onChange:e=>p({...h,nome:e.target.value}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-tipo",className:"text-right",children:"Tipo"}),r.jsxs(en,{value:h.tipo,onValueChange:e=>p({...h,tipo:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"adaptacao",children:"Adaptao"}),r.jsx(on,{value:"crescimento",children:"Crescimento"}),r.jsx(on,{value:"terminacao",children:"Terminao"}),r.jsx(on,{value:"recria",children:"Recria"}),r.jsx(on,{value:"pre-mistura",children:"Pr-Mistura"}),r.jsx(on,{value:"proteinado",children:"Proteinado"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-cms",className:"text-right",children:"CMS % Peso Vivo"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(aI,{id:"edit-cms",type:"number",step:"0.01",min:"0",max:"100",value:v,onChange:e=>{const t=e.target.value;y(t);const a=parseFloat(t)/100;p({...h,cms_percentual_peso_vivo:a})},className:"flex-1",placeholder:"Ex: 2.46"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-descricao",className:"text-right",children:"Descrio"}),r.jsx(TL,{id:"edit-descricao",value:h.descricao||"",onChange:e=>p({...h,descricao:e.target.value}),className:"col-span-3"})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{h&&(a({id:h.id,data:{nome:h.nome,tipo:h.tipo,cms_percentual_peso_vivo:h.cms_percentual_peso_vivo,descricao:h.descricao,ativo:h.ativo}}),u(!1),p(null))},disabled:s,children:s?"Atualizando...":"Atualizar"})]})]})})]})]})}var tR="Collapsible",[aR,rR]=u(tR),[iR,nR]=aR(tR),sR=ke.forwardRef((e,t)=>{const{__scopeCollapsible:a,open:i,defaultOpen:n,disabled:s,onOpenChange:o,...l}=e,[c,d]=b({prop:i,defaultProp:n??!1,onChange:o,caller:tR});return r.jsx(iR,{scope:a,disabled:s,contentId:y(),open:c,onOpenToggle:ke.useCallback(()=>d(e=>!e),[d]),children:r.jsx(w.div,{"data-state":hR(c),"data-disabled":s?"":void 0,...l,ref:t})})});sR.displayName=tR;var oR="CollapsibleTrigger",lR=ke.forwardRef((e,t)=>{const{__scopeCollapsible:a,...i}=e,n=nR(oR,a);return r.jsx(w.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":hR(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...i,ref:t,onClick:N(e.onClick,n.onOpenToggle)})});lR.displayName=oR;var cR="CollapsibleContent",dR=ke.forwardRef((e,t)=>{const{forceMount:a,...i}=e,n=nR(cR,e.__scopeCollapsible);return r.jsx(h,{present:a||n.open,children:({present:e})=>r.jsx(uR,{...i,ref:t,present:e})})});dR.displayName=cR;var uR=ke.forwardRef((e,t)=>{const{__scopeCollapsible:a,present:i,children:n,...s}=e,o=nR(cR,a),[l,c]=ke.useState(i),d=ke.useRef(null),u=v(t,d),h=ke.useRef(0),p=h.current,m=ke.useRef(0),f=m.current,g=o.open||l,x=ke.useRef(g),y=ke.useRef(void 0);return ke.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),Ne(()=>{const e=d.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();h.current=t.height,m.current=t.width,x.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),c(i)}},[o.open,i]),r.jsx(w.div,{"data-state":hR(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...e.style},children:g&&n})});function hR(e){return e?"open":"closed"}var pR=sR,mR=lR,fR=dR,gR="Accordion",xR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[vR,yR,bR]=Se(gR),[_R]=u(gR,[bR,rR]),jR=rR(),wR=Me.forwardRef((e,t)=>{const{type:a,...i}=e,n=i,s=i;return r.jsx(vR.Provider,{scope:e.__scopeAccordion,children:"multiple"===a?r.jsx(TR,{...s,ref:t}):r.jsx(MR,{...n,ref:t})})});wR.displayName=gR;var[NR,SR]=_R(gR),[CR,kR]=_R(gR,{collapsible:!1}),MR=Me.forwardRef((e,t)=>{const{value:a,defaultValue:i,onValueChange:n=()=>{},collapsible:s=!1,...o}=e,[l,c]=b({prop:a,defaultProp:i??"",onChange:n,caller:gR});return r.jsx(NR,{scope:e.__scopeAccordion,value:Me.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:Me.useCallback(()=>s&&c(""),[s,c]),children:r.jsx(CR,{scope:e.__scopeAccordion,collapsible:s,children:r.jsx(AR,{...o,ref:t})})})}),TR=Me.forwardRef((e,t)=>{const{value:a,defaultValue:i,onValueChange:n=()=>{},...s}=e,[o,l]=b({prop:a,defaultProp:i??[],onChange:n,caller:gR}),c=Me.useCallback(e=>l((t=[])=>[...t,e]),[l]),d=Me.useCallback(e=>l((t=[])=>t.filter(t=>t!==e)),[l]);return r.jsx(NR,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:r.jsx(CR,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(AR,{...s,ref:t})})})}),[DR,IR]=_R(gR),AR=Me.forwardRef((e,t)=>{const{__scopeAccordion:a,disabled:i,dir:n,orientation:s="vertical",...o}=e,l=Me.useRef(null),c=v(l,t),d=yR(a),u="ltr"===me(n),h=N(e.onKeyDown,e=>{var t;if(!xR.includes(e.key))return;const a=e.target,r=d().filter(e=>{var t;return!(null==(t=e.ref.current)?void 0:t.disabled)}),i=r.findIndex(e=>e.ref.current===a),n=r.length;if(-1===i)return;e.preventDefault();let o=i;const l=n-1,c=()=>{o=i+1,o>l&&(o=0)},h=()=>{o=i-1,o<0&&(o=l)};switch(e.key){case"Home":o=0;break;case"End":o=l;break;case"ArrowRight":"horizontal"===s&&(u?c():h());break;case"ArrowDown":"vertical"===s&&c();break;case"ArrowLeft":"horizontal"===s&&(u?h():c());break;case"ArrowUp":"vertical"===s&&h()}null==(t=r[o%n].ref.current)||t.focus()});return r.jsx(DR,{scope:a,disabled:i,direction:n,orientation:s,children:r.jsx(vR.Slot,{scope:a,children:r.jsx(w.div,{...o,"data-orientation":s,ref:c,onKeyDown:i?void 0:h})})})}),PR="AccordionItem",[LR,zR]=_R(PR),ER=Me.forwardRef((e,t)=>{const{__scopeAccordion:a,value:i,...n}=e,s=IR(PR,a),o=SR(PR,a),l=jR(a),c=y(),d=i&&o.value.includes(i)||!1,u=s.disabled||e.disabled;return r.jsx(LR,{scope:a,open:d,disabled:u,triggerId:c,children:r.jsx(pR,{"data-orientation":s.orientation,"data-state":HR(d),...l,...n,ref:t,disabled:u,open:d,onOpenChange:e=>{e?o.onItemOpen(i):o.onItemClose(i)}})})});ER.displayName=PR;var RR="AccordionHeader",OR=Me.forwardRef((e,t)=>{const{__scopeAccordion:a,...i}=e,n=IR(gR,a),s=zR(RR,a);return r.jsx(w.h3,{"data-orientation":n.orientation,"data-state":HR(s.open),"data-disabled":s.disabled?"":void 0,...i,ref:t})});OR.displayName=RR;var FR="AccordionTrigger",BR=Me.forwardRef((e,t)=>{const{__scopeAccordion:a,...i}=e,n=IR(gR,a),s=zR(FR,a),o=kR(FR,a),l=jR(a);return r.jsx(vR.ItemSlot,{scope:a,children:r.jsx(mR,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":n.orientation,id:s.triggerId,...l,...i,ref:t})})});BR.displayName=FR;var qR="AccordionContent",VR=Me.forwardRef((e,t)=>{const{__scopeAccordion:a,...i}=e,n=IR(gR,a),s=zR(qR,a),o=jR(a);return r.jsx(fR,{role:"region","aria-labelledby":s.triggerId,"data-orientation":n.orientation,...o,...i,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function HR(e){return e?"open":"closed"}VR.displayName=qR;var WR=ER,GR=OR,UR=BR,$R=VR;const YR=wR,KR=ke.forwardRef(({className:e,...t},a)=>r.jsx(WR,{ref:a,className:vr("border-b",e),...t}));KR.displayName="AccordionItem";const XR=ke.forwardRef(({className:e,children:t,...a},i)=>r.jsx(GR,{className:"flex",children:r.jsxs(UR,{ref:i,className:vr("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...a,children:[t,r.jsx(at,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));XR.displayName=UR.displayName;const ZR=ke.forwardRef(({className:e,children:t,...a},i)=>r.jsx($R,{ref:i,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:r.jsx("div",{className:vr("pb-4 pt-0",e),children:t})}));ZR.displayName=$R.displayName;const QR=e=>e?`${e.toFixed(2)} kg`:"0.00 kg",JR=e=>e?`R$ ${e.toFixed(2)}`:"R$ 0.00";function eO(e){switch(e){case"adaptacao":return"bg-green-500/10 text-green-500 border-green-500/20";case"crescimento":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"terminacao":return"bg-red-500/10 text-red-500 border-red-500/20";case"recria":return"bg-purple-500/10 text-purple-500 border-purple-500/20";case"pre-mistura":return"bg-blue-600/10 text-blue-600 border-blue-600/20";case"proteinado":return"bg-green-700/10 text-green-700 border-green-700/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}}function tO({dietaId:e,dietaNome:t}){var a;const{ingredientes:i}=QE(),{composicao:n,createComposicao:s,updateComposicao:o,deleteComposicao:l,isCreating:c,isUpdating:d,calcularTotais:u}=(e=>{const{organization:t}=Di(),a=Va(),r=qa({queryKey:["dieta-composicao",e,null==t?void 0:t.id],queryFn:async()=>{if(!e)return[];const a=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:r,error:i}=await ki.from("dieta_composicao").select("\n          *,\n          ingrediente:dim_ingredientes(id, nome, codigo, unidade_medida)\n        ").eq("organization_id",a).eq("dieta_id",e).eq("ativo",!0).order("ordem_mistura",{ascending:!0});if(i)throw i;return r||[]},enabled:!!e}),i=Ha({mutationFn:async e=>{const a=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495",{data:r,error:i}=await ki.from("dieta_composicao").insert({organization_id:a,dieta_id:e.dieta_id,ingrediente_id:e.ingrediente_id,cons_ms_kg:e.cons_ms_kg,percentual_ms:e.percentual_ms,custo_mo_ton:e.custo_mo_ton,local_mistura:e.local_mistura,ordem_mistura:e.ordem_mistura||1,observacoes:e.observacoes}).select().single();if(i)throw i;return r},onSuccess:()=>{a.invalidateQueries({queryKey:["dieta-composicao"]}),qr.success("Ingrediente adicionado  dieta com sucesso!")},onError:e=>{"23505"===e.code?qr.error("Este ingrediente j est na dieta."):qr.error("Erro ao adicionar ingrediente. Tente novamente.")}}),n=Ha({mutationFn:async({id:e,data:t})=>{const{data:a,error:r}=await ki.from("dieta_composicao").update(t).eq("id",e).select().single();if(r)throw r;return a},onSuccess:()=>{a.invalidateQueries({queryKey:["dieta-composicao"]}),qr.success("Ingrediente atualizado com sucesso!")},onError:e=>{qr.error("Erro ao atualizar ingrediente. Tente novamente.")}}),s=Ha({mutationFn:async e=>{const{error:t}=await ki.from("dieta_composicao").update({ativo:!1}).eq("id",e);if(t)throw t},onSuccess:()=>{a.invalidateQueries({queryKey:["dieta-composicao"]}),qr.success("Ingrediente removido da dieta!")},onError:e=>{qr.error("Erro ao remover ingrediente. Tente novamente.")}}),o=Ha({mutationFn:async e=>{const t=e.map(e=>ki.from("dieta_composicao").update({ordem_mistura:e.ordem_mistura}).eq("id",e.id));await Promise.all(t)},onSuccess:()=>{a.invalidateQueries({queryKey:["dieta-composicao"]}),qr.success("Ordem atualizada com sucesso!")},onError:e=>{qr.error("Erro ao reordenar ingredientes. Tente novamente.")}});return{composicao:r.data||[],isLoading:r.isLoading,error:r.error,createComposicao:i.mutate,updateComposicao:n.mutate,deleteComposicao:s.mutate,reorderComposicao:o.mutate,isCreating:i.isPending,isUpdating:n.isPending,isDeleting:s.isPending,calcularTotais:()=>{const e=r.data||[],t=e.reduce((e,t)=>e+(t.cons_ms_kg||0),0),a=e.reduce((e,t)=>e+(t.cons_mo_kg||0),0),i=e.reduce((e,t)=>e+(t.custo_ms_ton||0)*(t.cons_ms_kg||0)/1e3,0),n=e.reduce((e,t)=>e+(t.custo_mo_ton||0)*(t.cons_mo_kg||0)/1e3,0);return{totalConsMS:t,totalConsMO:a,totalCustoMS:i,totalCustoMO:n,custoMSPorKg:t>0?i/t:0,custoMOPorKg:a>0?n/a:0}}}})(e),[h,p]=ke.useState(!1),[m,f]=ke.useState(!1),[g,x]=ke.useState(null),[v,y]=ke.useState({dieta_id:e,ingrediente_id:"",cons_ms_kg:0,percentual_ms:.885,custo_mo_ton:0,local_mistura:"vagao",ordem_mistura:1}),[b,_]=ke.useState("88.50"),[j,w]=ke.useState("88.50"),N=u();return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(HD,{open:h,onOpenChange:p,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{size:"sm",children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Adicionar Ingrediente"]})}),r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Adicionar Ingrediente"}),r.jsxs(ZD,{children:["Adicione um ingrediente  dieta ",t]})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"ingrediente",className:"text-right",children:"Ingrediente *"}),r.jsxs(en,{value:v.ingrediente_id,onValueChange:e=>y({...v,ingrediente_id:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{placeholder:"Selecione o ingrediente"})}),r.jsx(sn,{children:i.filter(e=>e.ativo).map(e=>r.jsxs(on,{value:e.id,children:[e.nome," ",e.codigo&&`(${e.codigo})`]},e.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"cons_ms",className:"text-right",children:"Cons MS (Kg) *"}),r.jsx(aI,{id:"cons_ms",type:"number",step:"0.01",value:v.cons_ms_kg,onChange:e=>y({...v,cons_ms_kg:parseFloat(e.target.value)}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"percentual_ms",className:"text-right",children:"%MS *"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(aI,{id:"percentual_ms",type:"number",step:"0.01",min:"0",max:"100",value:b,onChange:e=>{const t=e.target.value;_(t);const a=parseFloat(t)/100;y({...v,percentual_ms:a})},className:"flex-1"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"custo_mo",className:"text-right",children:"Custo MO (R$/Ton)"}),r.jsx(aI,{id:"custo_mo",type:"number",step:"0.01",value:v.custo_mo_ton||0,onChange:e=>y({...v,custo_mo_ton:parseFloat(e.target.value)}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"local_mistura",className:"text-right",children:"Local Mistura"}),r.jsxs(en,{value:v.local_mistura,onValueChange:e=>y({...v,local_mistura:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"vagao",children:"Vago"}),r.jsx(on,{value:"pre-mistura",children:"Pr-Mistura"})]})]})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{!e||!v.ingrediente_id||v.cons_ms_kg<=0||(s({...v,dieta_id:e}),y({dieta_id:e,ingrediente_id:"",cons_ms_kg:0,percentual_ms:.885,custo_mo_ton:0,local_mistura:"vagao",ordem_mistura:n.length+1}),_("88.50"),p(!1))},disabled:c,children:c?"Adicionando...":"Adicionar"})]})]})]})}),0===n.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum ingrediente adicionado a esta dieta"}):r.jsxs(r.Fragment,{children:[r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Ingrediente"}),r.jsx(SL,{children:"Cons MS (Kg)"}),r.jsx(SL,{children:"%MS"}),r.jsx(SL,{children:"Cons MO (Kg)"}),r.jsx(SL,{children:"Custo MO"}),r.jsx(SL,{children:"Local"}),r.jsx(SL,{children:"Ordem"}),r.jsx(SL,{children:"Aes"})]})}),r.jsx(wL,{children:n.map(e=>{var t,a;return r.jsxs(NL,{children:[r.jsx(CL,{className:"font-medium",children:(null==(t=i.find(t=>t.id===e.ingrediente_id))?void 0:t.nome)||"N/A"}),r.jsx(CL,{children:QR(e.cons_ms_kg)}),r.jsx(CL,{children:(a=e.percentual_ms,a?`${(100*a).toFixed(2)}%`:"0.00%")}),r.jsx(CL,{children:QR(e.cons_mo_kg)}),r.jsx(CL,{children:JR(e.custo_mo_ton)}),r.jsx(CL,{children:r.jsx(Oi,{variant:"outline",children:"vagao"===e.local_mistura?"Vago":"Pr-Mistura"})}),r.jsx(CL,{children:e.ordem_mistura}),r.jsx(CL,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(e=>{x(e),w((100*e.percentual_ms).toFixed(2)),f(!0)})(e),children:r.jsx(ya,{className:"h-4 w-4"})}),r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Tem certeza que deseja remover este ingrediente da dieta?")&&l(t));var t},children:r.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)})})]}),r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsx(Pi,{className:"text-lg",children:"Totais da Dieta"})}),r.jsxs(zi,{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"Total Cons MS"}),r.jsx("p",{className:"text-lg font-semibold",children:QR(N.totalConsMS)})]}),r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"Total Cons MO"}),r.jsx("p",{className:"text-lg font-semibold",children:QR(N.totalConsMO)})]}),r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"Custo da Diria Alimentar"}),r.jsx("p",{className:"text-lg font-semibold",children:JR(n.reduce((e,t)=>e+(t.cons_mo_kg||0)*(t.custo_mo_ton||0)/1e3,0))})]}),r.jsxs("div",{children:[r.jsx(xL,{className:"text-xs text-muted-foreground",children:"MS Prevista da Dieta"}),r.jsx("p",{className:"text-lg font-semibold",children:N.totalConsMO>0?`${(N.totalConsMS/N.totalConsMO*100).toFixed(2)}%`:"0.00%"})]})]})]})]}),r.jsx(HD,{open:m,onOpenChange:f,children:r.jsxs($D,{className:"sm:max-w-[600px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Editar Ingrediente"}),r.jsxs(ZD,{children:["Atualize as informaes do ingrediente na dieta ",t]})]}),g&&r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{className:"text-right",children:"Ingrediente"}),r.jsx("p",{className:"col-span-3 font-medium",children:(null==(a=i.find(e=>e.id===g.ingrediente_id))?void 0:a.nome)||"N/A"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-cons_ms",className:"text-right",children:"Cons MS (Kg) *"}),r.jsx(aI,{id:"edit-cons_ms",type:"number",step:"0.01",value:g.cons_ms_kg,onChange:e=>x({...g,cons_ms_kg:parseFloat(e.target.value)}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-percentual_ms",className:"text-right",children:"%MS *"}),r.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[r.jsx(aI,{id:"edit-percentual_ms",type:"number",step:"0.01",min:"0",max:"100",value:j,onChange:e=>{const t=e.target.value;w(t);const a=parseFloat(t)/100;x({...g,percentual_ms:a})},className:"flex-1"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-custo_mo",className:"text-right",children:"Custo MO (R$/Ton)"}),r.jsx(aI,{id:"edit-custo_mo",type:"number",step:"0.01",value:g.custo_mo_ton||0,onChange:e=>x({...g,custo_mo_ton:parseFloat(e.target.value)}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-local_mistura",className:"text-right",children:"Local Mistura"}),r.jsxs(en,{value:g.local_mistura,onValueChange:e=>x({...g,local_mistura:e}),children:[r.jsx(an,{className:"col-span-3",children:r.jsx(tn,{})}),r.jsxs(sn,{children:[r.jsx(on,{value:"vagao",children:"Vago"}),r.jsx(on,{value:"pre-mistura",children:"Pr-Mistura"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-ordem",className:"text-right",children:"Ordem Mistura"}),r.jsx(aI,{id:"edit-ordem",type:"number",min:"1",value:g.ordem_mistura,onChange:e=>x({...g,ordem_mistura:parseInt(e.target.value)}),className:"col-span-3"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"edit-obs",className:"text-right",children:"Observaes"}),r.jsx(TL,{id:"edit-obs",value:g.observacoes||"",onChange:e=>x({...g,observacoes:e.target.value}),className:"col-span-3",rows:3})]})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>f(!1),children:"Cancelar"}),r.jsx(qi,{onClick:()=>{g&&(o({id:g.id,data:{cons_ms_kg:g.cons_ms_kg,percentual_ms:g.percentual_ms,custo_mo_ton:g.custo_mo_ton,local_mistura:g.local_mistura,ordem_mistura:g.ordem_mistura,observacoes:g.observacoes}}),f(!1),x(null))},disabled:d,children:d?"Atualizando...":"Atualizar"})]})]})})]})}function aO(){const{dietas:e}=tE(),t=["mineral","pre-mistura","proteinado","recria","adaptacao","crescimento","terminacao"],a=e.filter(e=>e.ativo).sort((e,a)=>{const r=t.indexOf(e.tipo),i=t.indexOf(a.tipo);return-1===r&&-1===i?0:-1===r?1:-1===i?-1:r-i});return r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Composio de Dietas"}),r.jsx(Li,{children:"Clique em uma dieta para visualizar ou editar seus ingredientes"})]}),r.jsx(zi,{children:0===a.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'Nenhuma dieta ativa encontrada. Cadastre dietas na aba "Dietas" primeiro.'}):r.jsx(YR,{type:"single",collapsible:!0,className:"w-full",children:a.map(e=>{return r.jsxs(KR,{value:e.id,children:[r.jsx(XR,{className:"hover:no-underline",children:r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("span",{className:"font-semibold",children:e.nome}),r.jsx(Oi,{variant:"outline",className:eO(e.tipo),children:(t=e.tipo,{adaptacao:"Adaptao",crescimento:"Crescimento",terminacao:"Terminao",recria:"Recria","pre-mistura":"Pr-Mistura",proteinado:"Proteinado"}[t]||t)}),e.cms_kg_dia&&r.jsxs("span",{className:"text-sm text-muted-foreground",children:["CMS: ",e.cms_kg_dia," kg/dia"]})]})}),r.jsx(ZR,{children:r.jsx(tO,{dietaId:e.id,dietaNome:e.nome})})]},e.id);var t})})})]})}function rO({ingredienteId:e,ingredienteNome:t}){const{historico:a,isLoading:i,isCreating:n,createHistoricoMS:s,deleteHistoricoMS:o}=function(e){const{organization:t}=Di(),[a,r]=ke.useState([]),[i,n]=ke.useState(!0),[s,o]=ke.useState(!1),l=async()=>{const a=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{n(!0);let t=ki.from("historico_materia_seca").select("*").eq("organization_id",a).order("data_registro",{ascending:!1});e&&(t=t.eq("ingrediente_id",e));const{data:i,error:s}=await t;if(s)throw s;r(i||[])}catch(i){qr.error("Erro ao carregar histrico de MS")}finally{n(!1)}};return ke.useEffect(()=>{l()},[null==t?void 0:t.id,e]),{historico:a,isLoading:i,isCreating:s,createHistoricoMS:async e=>{const a=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{o(!0);const{error:t}=await ki.from("historico_materia_seca").upsert({organization_id:a,ingrediente_id:e.ingrediente_id,valor_ms:e.valor_ms,data_registro:e.data_registro||(new Date).toISOString()},{onConflict:"organization_id,ingrediente_id,data_registro",ignoreDuplicates:!1});if(t)throw t;qr.success("Matria Seca registrada com sucesso"),l()}catch(r){throw qr.error("Erro ao registrar Matria Seca"),r}finally{o(!1)}},deleteHistoricoMS:async e=>{const a=(null==t?void 0:t.id)||"b7a05c98-9fc5-4aef-b92f-bfa0586bf495";try{const{error:t}=await ki.from("historico_materia_seca").delete().eq("id",e).eq("organization_id",a);if(t)throw t;qr.success("Registro removido com sucesso"),l()}catch(r){throw qr.error("Erro ao remover registro"),r}},refetch:l}}(e),[l,c]=ke.useState(!1),[d,u]=ke.useState(""),[h,p]=ke.useState(""),m=ke.useMemo(()=>{const e=zt(new Date),t=Array.from({length:7},(t,a)=>{const r=Ht(e,6-a);return{data:Yt(r,"yyyy-MM-dd"),dataFormatada:Yt(r,"EEE",{locale:hA}),valor_ms:null,temLancamento:!1}}),r=[...a].sort((e,t)=>new Date(e.data_registro).getTime()-new Date(t.data_registro).getTime());let i=null;return t.forEach(e=>{const t=r.find(t=>Yt(Fa(t.data_registro),"yyyy-MM-dd")===e.data);t?(e.valor_ms=t.valor_ms,e.temLancamento=!0,i=t.valor_ms):null!==i&&(e.valor_ms=i,e.temLancamento=!1)}),t},[a]),f=a.length>0?a[0].valor_ms:null;return i?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Carregando..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(HD,{open:l,onOpenChange:c,children:[r.jsx(WD,{asChild:!0,children:r.jsxs(qi,{size:"sm",children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Novo Registro"]})}),r.jsxs($D,{className:"sm:max-w-[500px]",children:[r.jsxs(YD,{children:[r.jsx(XD,{children:"Registrar Matria Seca"}),r.jsxs(ZD,{children:["Adicione um novo valor de MS para ",t]})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"valor-ms",className:"text-right",children:"Valor MS (%) *"}),r.jsx(aI,{id:"valor-ms",type:"number",step:"0.01",min:"0",max:"100",value:d,onChange:e=>u(e.target.value),className:"col-span-3",placeholder:"Ex: 35.50"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(xL,{htmlFor:"data-registro",className:"text-right",children:"Data"}),r.jsx(aI,{id:"data-registro",type:"date",value:h,onChange:e=>p(e.target.value),className:"col-span-3"})]}),r.jsx("p",{className:"text-xs text-muted-foreground col-span-4 text-center",children:"Se no informar a data, ser registrado com a data/hora atual"})]}),r.jsxs(KD,{children:[r.jsx(qi,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),r.jsx(qi,{onClick:async()=>{if(!d)return;let t;if(h){const[e,a,r]=h.split("-");t=new Date(parseInt(e),parseInt(a)-1,parseInt(r),12,0,0).toISOString()}await s({ingrediente_id:e,valor_ms:parseFloat(d),data_registro:t}),u(""),p(""),c(!1)},disabled:n||!d,children:n?"Registrando...":"Registrar"})]})]})]})}),r.jsxs(Ii,{children:[r.jsx(Ai,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Pi,{className:"text-lg",children:"Variao de MS - ltimos 7 Dias"}),r.jsx(Li,{children:null!==f&&r.jsxs("span",{className:"text-sm",children:["ltima MS registrada: ",r.jsxs("span",{className:"font-semibold text-foreground",children:[f.toFixed(2),"%"]})]})})]}),r.jsx(et,{className:"h-5 w-5 text-muted-foreground"})]})}),r.jsx(zi,{children:m.some(e=>null!==e.valor_ms)?r.jsx(Ua,{width:"100%",height:250,children:r.jsxs(ir,{data:m,margin:{top:5,right:20,bottom:5,left:0},children:[r.jsx(Qa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(Ja,{dataKey:"dataFormatada",stroke:"hsl(var(--muted-foreground))",style:{fontSize:"12px"}}),r.jsx(er,{stroke:"hsl(var(--muted-foreground))",domain:[0,100],tick:!1}),r.jsx(Xa,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:e=>[`${null==e?void 0:e.toFixed(2)}%`,"MS"],labelStyle:{color:"hsl(var(--foreground))"}}),r.jsx(nr,{type:"monotone",dataKey:"valor_ms",stroke:"hsl(var(--primary))",strokeWidth:2,dot:e=>{var t;const{cx:a,cy:i,payload:n}=e;return n.temLancamento?r.jsxs("g",{children:[r.jsx("circle",{cx:a,cy:i,r:4,fill:"hsl(var(--primary))"}),r.jsxs("text",{x:a,y:i-10,textAnchor:"middle",fill:"hsl(var(--foreground))",fontSize:"11",fontWeight:"600",children:[null==(t=n.valor_ms)?void 0:t.toFixed(1),"%"]})]}):null},activeDot:{r:6},connectNulls:!0})]})}):r.jsx("div",{className:"h-[250px] flex items-center justify-center text-muted-foreground",children:"Nenhum dado registrado nos ltimos 7 dias"})})]}),r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{className:"text-lg",children:"Histrico de Registros"}),r.jsxs(Li,{children:["Todos os registros de MS para ",t]})]}),r.jsx(zi,{children:0===a.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum registro de MS encontrado"}):r.jsxs(_L,{children:[r.jsx(jL,{children:r.jsxs(NL,{children:[r.jsx(SL,{children:"Data/Hora"}),r.jsx(SL,{className:"text-right",children:"Valor MS (%)"}),r.jsx(SL,{className:"w-[80px]",children:"Aes"})]})}),r.jsx(wL,{children:a.map(e=>r.jsxs(NL,{children:[r.jsx(CL,{children:Yt(Fa(e.data_registro),"dd/MM/yyyy 's' HH:mm",{locale:hA})}),r.jsxs(CL,{className:"text-right font-semibold",children:[e.valor_ms.toFixed(2),"%"]}),r.jsx(CL,{children:r.jsx(qi,{variant:"ghost",size:"icon",onClick:()=>(async e=>{window.confirm("Tem certeza que deseja remover este registro?")&&await o(e)})(e.id),children:r.jsx(ba,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}function iO(){const{ingredientes:e,isLoading:t}=QE(),a=ke.useMemo(()=>e.filter(e=>e.ativo&&e.requer_atualizacao_ms).sort((e,t)=>e.nome.localeCompare(t.nome)),[e]);return t?r.jsx("div",{className:"p-8 text-center",children:"Carregando..."}):0===a.length?r.jsx(Ii,{children:r.jsx(zi,{className:"py-12",children:r.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted",children:r.jsx(et,{className:"h-8 w-8 text-muted-foreground"})}),r.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Nenhum Ingrediente Configurado"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'No h ingredientes marcados para atualizao de MS. V para a aba "Ingredientes" e marque os ingredientes que precisam de atualizao de Matria Seca.'})]})})})}):r.jsxs(Ii,{children:[r.jsxs(Ai,{children:[r.jsx(Pi,{children:"Atualizao de Matria Seca"}),r.jsx(Li,{children:"Registre e acompanhe as variaes de MS dos ingredientes"})]}),r.jsx(zi,{children:r.jsx(YR,{type:"single",collapsible:!0,className:"w-full",children:a.map(e=>r.jsxs(KR,{value:e.id,children:[r.jsx(XR,{className:"hover:no-underline pr-0",children:r.jsx("div",{className:"flex items-center justify-between flex-1 pr-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"font-semibold",children:e.nome}),e.codigo&&r.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.codigo,")"]})]})})}),r.jsx(ZR,{children:r.jsx(rO,{ingredienteId:e.id,ingredienteNome:e.nome})})]},e.id))})})]})}function nO(){const[e,t]=ke.useState("dietas");return r.jsx(BI,{children:r.jsx("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-2 sm:py-8 lg:px-8",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-text-primary mb-2",children:"Nutrio"}),r.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"Gerencie fornecedores, ingredientes, dietas e composies nutricionais"})]}),r.jsxs(nA,{value:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(sA,{className:"grid w-full grid-cols-5",children:[r.jsx(oA,{value:"dietas",children:"Dietas"}),r.jsx(oA,{value:"composicao",children:"Composio"}),r.jsx(oA,{value:"atualizacao-ms",children:"Atualizao MS"}),r.jsx(oA,{value:"ingredientes",children:"Ingredientes"}),r.jsx(oA,{value:"fornecedores",children:"Fornecedores"})]}),r.jsx(lA,{value:"dietas",className:"space-y-4",children:r.jsx(eR,{})}),r.jsx(lA,{value:"composicao",className:"space-y-4",children:r.jsx(aO,{})}),r.jsx(lA,{value:"atualizacao-ms",className:"space-y-4",children:r.jsx(iO,{})}),r.jsx(lA,{value:"ingredientes",className:"space-y-4",children:r.jsx(JE,{})}),r.jsx(lA,{value:"fornecedores",className:"space-y-4",children:r.jsx(ZE,{})})]})]})})})}const sO=()=>{const e=Ie();return ke.useEffect(()=>{},[e.pathname]),r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"mb-4 text-6xl font-bold gradient-text",children:"404"}),r.jsx("p",{className:"mb-6 text-xl text-muted-foreground",children:"Pgina no encontrada no ConectaBoi Insights"}),r.jsx(qi,{variant:"tech",asChild:!0,children:r.jsx("a",{href:"/",children:"Voltar ao Dashboard"})})]})})},oO=new Wa,lO=()=>r.jsx(Ga,{client:oO,children:r.jsxs(ji,{children:[r.jsx(Cr,{}),r.jsx(Xr,{}),r.jsx(ze,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(Ti,{children:r.jsxs(Ee,{children:[r.jsx(Re,{path:"/",element:r.jsx(Wi,{})}),r.jsx(Re,{path:"/dashboard",element:r.jsx(qI,{})}),r.jsx(Re,{path:"/analytics",element:r.jsx(mL,{})}),r.jsx(Re,{path:"/desvios",element:r.jsx(mL,{})}),r.jsx(Re,{path:"/logistica",element:r.jsx(Dz,{})}),r.jsx(Re,{path:"/alerts",element:r.jsx(RL,{})}),r.jsx(Re,{path:"/optimizations",element:r.jsx(az,{})}),r.jsx(Re,{path:"/reports",element:r.jsx(fL,{})}),r.jsx(Re,{path:"/team",element:r.jsx(bL,{})}),r.jsx(Re,{path:"/settings",element:r.jsx(PL,{})}),r.jsx(Re,{path:"/signup",element:r.jsx(rz,{})}),r.jsx(Re,{path:"/signin",element:r.jsx(bz,{})}),r.jsx(Re,{path:"/user-profile",element:r.jsx(_z,{})}),r.jsx(Re,{path:"/feed-reading",element:r.jsx(Tz,{})}),r.jsx(Re,{path:"/csv-upload",element:r.jsx(Rz,{})}),r.jsx(Re,{path:"/etl-operations",element:r.jsx(Oz,{})}),r.jsx(Re,{path:"/metrics-dashboard",element:r.jsx(Fz,{})}),r.jsx(Re,{path:"/cadastros-pasto",element:r.jsx(Jz,{})}),r.jsx(Re,{path:"/estoque-pasto",element:r.jsx(eE,{})}),r.jsx(Re,{path:"/distribuicao-pasto",element:r.jsx(XE,{})}),r.jsx(Re,{path:"/nutricao",element:r.jsx(nO,{})}),r.jsx(Re,{path:"/invite/:token",element:r.jsx(jz,{})}),r.jsx(Re,{path:"*",element:r.jsx(sO,{})})]})})})]})});class cO{constructor(){a(this,"observer",null),"PerformanceObserver"in window&&(this.observer=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.initiatorType})}))}start(){this.observer&&this.observer.observe({type:"resource",buffered:!0})}stop(){this.observer&&this.observer.disconnect()}}const dO={enableLazyLoading:!0,enableServiceWorker:!0,enableImageOptimization:!0,enablePerformanceMonitoring:!1,chunkLoadingTimeout:3e4,resourceHints:!0};const uO=new class{constructor(e=dO){a(this,"config"),a(this,"imageObserver",null),this.config=e}init(){this.config.enablePerformanceMonitoring&&this.initPerformanceMonitoring(),this.config.resourceHints&&this.addResourceHints(),this.optimizeCriticalPath(),this.prefetchCriticalResources()}initPerformanceMonitoring(){"undefined"!=typeof window&&("PerformanceObserver"in window&&(new PerformanceObserver(e=>{const t=e.getEntries();t[t.length-1]}).observe({type:"largest-contentful-paint",buffered:!0}),new PerformanceObserver(e=>{e.getEntries().forEach(e=>{})}).observe({type:"first-input",buffered:!0}),new PerformanceObserver(e=>{let t=0;e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)})}).observe({type:"layout-shift",buffered:!0})),this.config.enableImageOptimization&&(this.imageObserver=new cO,this.imageObserver.start()),"PerformanceObserver"in window&&new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.duration})}).observe({type:"longtask",buffered:!0}))}addResourceHints(){if("undefined"==typeof document)return;[{rel:"dns-prefetch",href:"//fonts.googleapis.com"},{rel:"dns-prefetch",href:"//fonts.gstatic.com"},{rel:"dns-prefetch",href:"//cdn.jsdelivr.net"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}].forEach(e=>{const t=document.createElement("link");t.rel=e.rel,t.href=e.href,e.crossorigin&&(t.crossOrigin="anonymous"),document.querySelector(`link[rel="${e.rel}"][href="${e.href}"]`)||document.head.appendChild(t)})}optimizeCriticalPath(){if("undefined"==typeof document)return;document.querySelectorAll('link[rel="stylesheet"]').forEach(e=>{const t=e;t.href.includes("fonts.googleapis.com")&&(t.setAttribute("media","print"),t.setAttribute("onload","this.media='all'"))})}prefetchCriticalResources(){"undefined"!=typeof document&&"requestIdleCallback"in window&&requestIdleCallback(()=>{["/dashboard","/analytics","/csv-upload"].forEach(e=>{const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)})})}getPerformanceMetrics(){if("undefined"==typeof window||!("performance"in window))return{};const e=performance.getEntriesByType("navigation")[0];return{domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,loadComplete:e.loadEventEnd-e.loadEventStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,domProcessing:e.domComplete-e.domLoading,totalTime:e.loadEventEnd-e.navigationStart}}cleanup(){this.imageObserver&&this.imageObserver.stop()}};"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{uO.init()}):uO.init()),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),e(document.getElementById("root")).render(r.jsx(lO,{}));
